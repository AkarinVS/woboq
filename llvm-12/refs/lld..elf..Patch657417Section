<use f='llvm/lld/ELF/ARMErrataFix.h' l='32' c='_ZN3lld3elf19ARMErr657417Patcher28patchInputSectionDescriptionERNS0_23InputSectionDescriptionE'/>
<use f='llvm/lld/ELF/ARMErrataFix.h' l='36' c='_ZN3lld3elf19ARMErr657417Patcher13insertPatchesERNS0_23InputSectionDescriptionERSt6vectorIPNS0_18Patch657417SectionESaIS6_EE'/>
<inh f='llvm/lld/ELF/SyntheticSections.h' l='39' c='lld::elf::SyntheticSection'/>
<def f='llvm/lld/ELF/ARMErrataFix.cpp' l='73' ll='99'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='354' c='_ZN3lld3elf19ARMErr657417Patcher13insertPatchesERNS0_23InputSectionDescriptionERSt6vectorIPNS0_18Patch657417SectionESaIS6_EE'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='391' c='_ZN3lld3elf19ARMErr657417Patcher13insertPatchesERNS0_23InputSectionDescriptionERSt6vectorIPNS0_18Patch657417SectionESaIS6_EE'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='391' c='_ZN3lld3elf19ARMErr657417Patcher13insertPatchesERNS0_23InputSectionDescriptionERSt6vectorIPNS0_18Patch657417SectionESaIS6_EE'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='404' c='_ZL14implementPatch10ScanResultPN3lld3elf12InputSectionERSt6vectorIPNS1_18Patch657417SectionESaIS6_EE'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='408' c='_ZL14implementPatch10ScanResultPN3lld3elf12InputSectionERSt6vectorIPNS1_18Patch657417SectionESaIS6_EE'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='437' c='_ZL14implementPatch10ScanResultPN3lld3elf12InputSectionERSt6vectorIPNS1_18Patch657417SectionESaIS6_EE'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='455' c='_ZL14implementPatch10ScanResultPN3lld3elf12InputSectionERSt6vectorIPNS1_18Patch657417SectionESaIS6_EE'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='472' c='_ZN3lld3elf19ARMErr657417Patcher28patchInputSectionDescriptionERNS0_23InputSectionDescriptionE'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='475' c='_ZN3lld3elf19ARMErr657417Patcher28patchInputSectionDescriptionERNS0_23InputSectionDescriptionE'/>
<use f='llvm/lld/ELF/ARMErrataFix.cpp' l='517' c='_ZN3lld3elf19ARMErr657417Patcher11createFixesEv'/>
<size>224</size>
<doc f='llvm/lld/ELF/ARMErrataFix.cpp' l='39'>// The documented title for Erratum 657417 is:
// &quot;A 32bit branch instruction that spans two 4K regions can result in an
// incorrect instruction fetch or processor deadlock&quot;. Graphically using a
// 32-bit B.w instruction encoded as a pair of halfwords 0xf7fe 0xbfff
// xxxxxx000 // Memory region 1 start
// target:
// ...
// xxxxxxffe f7fe // First halfword of branch to target:
// xxxxxx000 // Memory region 2 start
// xxxxxx002 bfff // Second halfword of branch to target:
//
// The specific trigger conditions that can be detected at link time are:
// - There is a 32-bit Thumb-2 branch instruction with an address of the form
//   xxxxxxFFE. The first 2 bytes of the instruction are in 4KiB region 1, the
//   second 2 bytes are in region 2.
// - The branch instruction is one of BLX, BL, B.w BCC.w
// - The instruction preceding the branch is a 32-bit non-branch instruction.
// - The target of the branch is in region 1.
//
// The linker mitigation for the fix is to redirect any branch that meets the
// erratum conditions to a patch section containing a branch to the target.
//
// As adding patch sections may move branches onto region boundaries the patch
// must iterate until no more patches are added.
//
// Example, before:
// 00000FFA func: NOP.w      // 32-bit Thumb function
// 00000FFE       B.W func   // 32-bit branch spanning 2 regions, dest in 1st.
// Example, after:
// 00000FFA func: NOP.w      // 32-bit Thumb function
// 00000FFE       B.w __CortexA8657417_00000FFE
// 00001002       2 - bytes padding
// 00001004 __CortexA8657417_00000FFE: B.w func</doc>
<fun r='_ZN3lld3elf18Patch657417SectionC1EPNS0_12InputSectionEmjb'/>
<fun r='_ZN3lld3elf18Patch657417Section7writeToEPh'/>
<fun r='_ZNK3lld3elf18Patch657417Section7getSizeEv'/>
<fun r='_ZNK3lld3elf18Patch657417Section13getBranchAddrEv'/>
<fun r='_ZN3lld3elf18Patch657417Section7classofEPKNS0_11SectionBaseE'/>
<mbr r='lld::elf::Patch657417Section::patchee' o='1536' t='const lld::elf::InputSection *'/>
<mbr r='lld::elf::Patch657417Section::patcheeOffset' o='1600' t='uint64_t'/>
<mbr r='lld::elf::Patch657417Section::patchSym' o='1664' t='lld::elf::Symbol *'/>
<mbr r='lld::elf::Patch657417Section::instr' o='1728' t='uint32_t'/>
<mbr r='lld::elf::Patch657417Section::isARM' o='1760' t='bool'/>
<fun r='_ZN3lld3elf18Patch657417SectionC1EPNS0_12InputSectionEmjb'/>
<fun r='_ZNK3lld3elf18Patch657417Section13getBranchAddrEv'/>
<fun r='_ZN3lld3elf18Patch657417Section7writeToEPh'/>
