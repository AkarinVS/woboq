<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>scudo_allocator.h source code [llvm/compiler-rt/lib/scudo/scudo_allocator.h] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="__scudo::AP32,__scudo::AllocType,__scudo::ChunkState,__scudo::UnpackedHeader "/>
<link rel="stylesheet" href="../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/compiler-rt/lib/scudo/scudo_allocator.h'; var root_path = '../../../..'; var data_path = '../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>llvm</a>/<a href='../..'>compiler-rt</a>/<a href='..'>lib</a>/<a href='./'>scudo</a>/<a href='scudo_allocator.h.html'>scudo_allocator.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===-- scudo_allocator.h ---------------------------------------*- C++ -*-===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td><i>///</i></td></tr>
<tr><th id="9">9</th><td><i>/// Header for scudo_allocator.cpp.</i></td></tr>
<tr><th id="10">10</th><td><i>///</i></td></tr>
<tr><th id="11">11</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="12">12</th><td></td></tr>
<tr><th id="13">13</th><td><u>#<span data-ppcond="13">ifndef</span> <span class="macro" data-ref="_M/SCUDO_ALLOCATOR_H_">SCUDO_ALLOCATOR_H_</span></u></td></tr>
<tr><th id="14">14</th><td><u>#define <dfn class="macro" id="_M/SCUDO_ALLOCATOR_H_" data-ref="_M/SCUDO_ALLOCATOR_H_">SCUDO_ALLOCATOR_H_</dfn></u></td></tr>
<tr><th id="15">15</th><td></td></tr>
<tr><th id="16">16</th><td><u>#include <a href="scudo_platform.h.html">"scudo_platform.h"</a></u></td></tr>
<tr><th id="17">17</th><td></td></tr>
<tr><th id="18">18</th><td><b>namespace</b> <span class="namespace">__scudo</span> {</td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td><b>enum</b> <dfn class="type def" id="__scudo::AllocType" title='__scudo::AllocType' data-ref="__scudo::AllocType" data-ref-filename="__scudo..AllocType">AllocType</dfn> : u8 {</td></tr>
<tr><th id="21">21</th><td>  <dfn class="enum" id="__scudo::FromMalloc" title='__scudo::FromMalloc' data-ref="__scudo::FromMalloc" data-ref-filename="__scudo..FromMalloc">FromMalloc</dfn>    = <var>0</var>,  <i>// Memory block came from malloc, realloc, calloc, etc.</i></td></tr>
<tr><th id="22">22</th><td>  <dfn class="enum" id="__scudo::FromNew" title='__scudo::FromNew' data-ref="__scudo::FromNew" data-ref-filename="__scudo..FromNew">FromNew</dfn>       = <var>1</var>,  <i>// Memory block came from operator new.</i></td></tr>
<tr><th id="23">23</th><td>  <dfn class="enum" id="__scudo::FromNewArray" title='__scudo::FromNewArray' data-ref="__scudo::FromNewArray" data-ref-filename="__scudo..FromNewArray">FromNewArray</dfn>  = <var>2</var>,  <i>// Memory block came from operator new [].</i></td></tr>
<tr><th id="24">24</th><td>  <dfn class="enum" id="__scudo::FromMemalign" title='__scudo::FromMemalign' data-ref="__scudo::FromMemalign" data-ref-filename="__scudo..FromMemalign">FromMemalign</dfn>  = <var>3</var>,  <i>// Memory block came from memalign, posix_memalign, etc.</i></td></tr>
<tr><th id="25">25</th><td>};</td></tr>
<tr><th id="26">26</th><td></td></tr>
<tr><th id="27">27</th><td><b>enum</b> <dfn class="type def" id="__scudo::ChunkState" title='__scudo::ChunkState' data-ref="__scudo::ChunkState" data-ref-filename="__scudo..ChunkState">ChunkState</dfn> : u8 {</td></tr>
<tr><th id="28">28</th><td>  <dfn class="enum" id="__scudo::ChunkAvailable" title='__scudo::ChunkAvailable' data-ref="__scudo::ChunkAvailable" data-ref-filename="__scudo..ChunkAvailable">ChunkAvailable</dfn>  = <var>0</var>,</td></tr>
<tr><th id="29">29</th><td>  <dfn class="enum" id="__scudo::ChunkAllocated" title='__scudo::ChunkAllocated' data-ref="__scudo::ChunkAllocated" data-ref-filename="__scudo..ChunkAllocated">ChunkAllocated</dfn>  = <var>1</var>,</td></tr>
<tr><th id="30">30</th><td>  <dfn class="enum" id="__scudo::ChunkQuarantine" title='__scudo::ChunkQuarantine' data-ref="__scudo::ChunkQuarantine" data-ref-filename="__scudo..ChunkQuarantine">ChunkQuarantine</dfn> = <var>2</var></td></tr>
<tr><th id="31">31</th><td>};</td></tr>
<tr><th id="32">32</th><td></td></tr>
<tr><th id="33">33</th><td><i>// Our header requires 64 bits of storage. Having the offset saves us from</i></td></tr>
<tr><th id="34">34</th><td><i>// using functions such as GetBlockBegin, that is fairly costly. Our first</i></td></tr>
<tr><th id="35">35</th><td><i>// implementation used the MetaData as well, which offers the advantage of</i></td></tr>
<tr><th id="36">36</th><td><i>// being stored away from the chunk itself, but accessing it was costly as</i></td></tr>
<tr><th id="37">37</th><td><i>// well. The header will be atomically loaded and stored.</i></td></tr>
<tr><th id="38">38</th><td><b>typedef</b> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="typedef" id="__scudo::PackedHeader" title='__scudo::PackedHeader' data-type='__sanitizer::u64' data-ref="__scudo::PackedHeader" data-ref-filename="__scudo..PackedHeader">PackedHeader</dfn>;</td></tr>
<tr><th id="39">39</th><td><b>struct</b> <dfn class="type def" id="__scudo::UnpackedHeader" title='__scudo::UnpackedHeader' data-ref="__scudo::UnpackedHeader" data-ref-filename="__scudo..UnpackedHeader">UnpackedHeader</dfn> {</td></tr>
<tr><th id="40">40</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="decl field" id="__scudo::UnpackedHeader::Checksum" title='__scudo::UnpackedHeader::Checksum' data-ref="__scudo::UnpackedHeader::Checksum" data-ref-filename="__scudo..UnpackedHeader..Checksum">Checksum</dfn>          : <var>16</var>;</td></tr>
<tr><th id="41">41</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="decl field" id="__scudo::UnpackedHeader::ClassId" title='__scudo::UnpackedHeader::ClassId' data-ref="__scudo::UnpackedHeader::ClassId" data-ref-filename="__scudo..UnpackedHeader..ClassId">ClassId</dfn>           : <var>8</var>;</td></tr>
<tr><th id="42">42</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="decl field" id="__scudo::UnpackedHeader::SizeOrUnusedBytes" title='__scudo::UnpackedHeader::SizeOrUnusedBytes' data-ref="__scudo::UnpackedHeader::SizeOrUnusedBytes" data-ref-filename="__scudo..UnpackedHeader..SizeOrUnusedBytes">SizeOrUnusedBytes</dfn> : <var>20</var>;  <i>// Size for Primary backed allocations, amount of</i></td></tr>
<tr><th id="43">43</th><td>                               <i>// unused bytes in the chunk for Secondary ones.</i></td></tr>
<tr><th id="44">44</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="decl field" id="__scudo::UnpackedHeader::State" title='__scudo::UnpackedHeader::State' data-ref="__scudo::UnpackedHeader::State" data-ref-filename="__scudo..UnpackedHeader..State">State</dfn>             : <var>2</var>;   <i>// available, allocated, or quarantined</i></td></tr>
<tr><th id="45">45</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="decl field" id="__scudo::UnpackedHeader::AllocType" title='__scudo::UnpackedHeader::AllocType' data-ref="__scudo::UnpackedHeader::AllocType" data-ref-filename="__scudo..UnpackedHeader..AllocType">AllocType</dfn>         : <var>2</var>;   <i>// malloc, new, new[], or memalign</i></td></tr>
<tr><th id="46">46</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="decl field" id="__scudo::UnpackedHeader::Offset" title='__scudo::UnpackedHeader::Offset' data-ref="__scudo::UnpackedHeader::Offset" data-ref-filename="__scudo..UnpackedHeader..Offset">Offset</dfn>            : <var>16</var>;  <i>// Offset from the beginning of the backend</i></td></tr>
<tr><th id="47">47</th><td>                               <i>// allocation to the beginning of the chunk</i></td></tr>
<tr><th id="48">48</th><td><i>                               // itself, in multiples of MinAlignment. See</i></td></tr>
<tr><th id="49">49</th><td><i>                               // comment about its maximum value and in init().</i></td></tr>
<tr><th id="50">50</th><td>};</td></tr>
<tr><th id="51">51</th><td></td></tr>
<tr><th id="52">52</th><td><b>typedef</b> <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint64_t" title='__sanitizer::atomic_uint64_t' data-ref="__sanitizer::atomic_uint64_t" data-ref-filename="__sanitizer..atomic_uint64_t">atomic_uint64_t</a> <dfn class="typedef" id="__scudo::AtomicPackedHeader" title='__scudo::AtomicPackedHeader' data-type='__sanitizer::atomic_uint64_t' data-ref="__scudo::AtomicPackedHeader" data-ref-filename="__scudo..AtomicPackedHeader">AtomicPackedHeader</dfn>;</td></tr>
<tr><th id="53">53</th><td><a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#332" title="static_assert(sizeof(UnpackedHeader) == sizeof(PackedHeader), &quot;&quot;)" data-ref="_M/COMPILER_CHECK">COMPILER_CHECK</a>(<b>sizeof</b>(<a class="type" href="#__scudo::UnpackedHeader" title='__scudo::UnpackedHeader' data-ref="__scudo::UnpackedHeader" data-ref-filename="__scudo..UnpackedHeader">UnpackedHeader</a>) == <b>sizeof</b>(<a class="typedef" href="#__scudo::PackedHeader" title='__scudo::PackedHeader' data-type='__sanitizer::u64' data-ref="__scudo::PackedHeader" data-ref-filename="__scudo..PackedHeader">PackedHeader</a>));</td></tr>
<tr><th id="54">54</th><td></td></tr>
<tr><th id="55">55</th><td><i>// Minimum alignment of 8 bytes for 32-bit, 16 for 64-bit</i></td></tr>
<tr><th id="56">56</th><td><em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def" id="__scudo::MinAlignmentLog" title='__scudo::MinAlignmentLog' data-ref="__scudo::MinAlignmentLog" data-ref-filename="__scudo..MinAlignmentLog">MinAlignmentLog</dfn> = <a class="macro" href="../sanitizer_common/sanitizer_platform.h.html#133" title="(3)" data-ref="_M/FIRST_32_SECOND_64">FIRST_32_SECOND_64</a>(<var>3</var>, <var>4</var>);</td></tr>
<tr><th id="57">57</th><td><em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def" id="__scudo::MaxAlignmentLog" title='__scudo::MaxAlignmentLog' data-ref="__scudo::MaxAlignmentLog" data-ref-filename="__scudo..MaxAlignmentLog">MaxAlignmentLog</dfn> = <var>24</var>;  <i>// 16 MB</i></td></tr>
<tr><th id="58">58</th><td><em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def" id="__scudo::MinAlignment" title='__scudo::MinAlignment' data-ref="__scudo::MinAlignment" data-ref-filename="__scudo..MinAlignment">MinAlignment</dfn> = <var>1</var> &lt;&lt; <a class="ref" href="#__scudo::MinAlignmentLog" title='__scudo::MinAlignmentLog' data-ref="__scudo::MinAlignmentLog" data-ref-filename="__scudo..MinAlignmentLog">MinAlignmentLog</a>;</td></tr>
<tr><th id="59">59</th><td><em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def" id="__scudo::MaxAlignment" title='__scudo::MaxAlignment' data-ref="__scudo::MaxAlignment" data-ref-filename="__scudo..MaxAlignment">MaxAlignment</dfn> = <var>1</var> &lt;&lt; <a class="ref" href="#__scudo::MaxAlignmentLog" title='__scudo::MaxAlignmentLog' data-ref="__scudo::MaxAlignmentLog" data-ref-filename="__scudo..MaxAlignmentLog">MaxAlignmentLog</a>;</td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td><i>// constexpr version of __sanitizer::RoundUp without the extraneous CHECK.</i></td></tr>
<tr><th id="62">62</th><td><i>// This way we can use it in constexpr variables and functions declarations.</i></td></tr>
<tr><th id="63">63</th><td><b>constexpr</b> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__scudo::RoundUpTo" title='__scudo::RoundUpTo' data-ref="__scudo::RoundUpTo" data-ref-filename="__scudo..RoundUpTo">RoundUpTo</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="1Size" title='Size' data-type='__sanitizer::uptr' data-ref="1Size" data-ref-filename="1Size">Size</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="2Boundary" title='Boundary' data-type='__sanitizer::uptr' data-ref="2Boundary" data-ref-filename="2Boundary">Boundary</dfn>) {</td></tr>
<tr><th id="64">64</th><td>  <b>return</b> (<a class="local col1 ref" href="#1Size" title='Size' data-ref="1Size" data-ref-filename="1Size">Size</a> + <a class="local col2 ref" href="#2Boundary" title='Boundary' data-ref="2Boundary" data-ref-filename="2Boundary">Boundary</a> - <var>1</var>) &amp; ~(<a class="local col2 ref" href="#2Boundary" title='Boundary' data-ref="2Boundary" data-ref-filename="2Boundary">Boundary</a> - <var>1</var>);</td></tr>
<tr><th id="65">65</th><td>}</td></tr>
<tr><th id="66">66</th><td></td></tr>
<tr><th id="67">67</th><td><b>namespace</b> <span class="namespace">Chunk</span> {</td></tr>
<tr><th id="68">68</th><td>  <b>constexpr</b> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__scudo::Chunk::getHeaderSize" title='__scudo::Chunk::getHeaderSize' data-ref="__scudo::Chunk::getHeaderSize" data-ref-filename="__scudo..Chunk..getHeaderSize">getHeaderSize</dfn>() {</td></tr>
<tr><th id="69">69</th><td>    <b>return</b> <a class="ref fn" href="#__scudo::RoundUpTo" title='__scudo::RoundUpTo' data-ref="__scudo::RoundUpTo" data-ref-filename="__scudo..RoundUpTo">RoundUpTo</a>(<b>sizeof</b>(<a class="typedef" href="#__scudo::PackedHeader" title='__scudo::PackedHeader' data-type='__sanitizer::u64' data-ref="__scudo::PackedHeader" data-ref-filename="__scudo..PackedHeader">PackedHeader</a>), <a class="ref" href="#__scudo::MinAlignment" title='__scudo::MinAlignment' data-ref="__scudo::MinAlignment" data-ref-filename="__scudo..MinAlignment">MinAlignment</a>);</td></tr>
<tr><th id="70">70</th><td>  }</td></tr>
<tr><th id="71">71</th><td>}</td></tr>
<tr><th id="72">72</th><td></td></tr>
<tr><th id="73">73</th><td><u>#<span data-ppcond="73">if</span> <a class="macro" href="../sanitizer_common/sanitizer_platform.h.html#246" title="(32 == 64)" data-ref="_M/SANITIZER_CAN_USE_ALLOCATOR64">SANITIZER_CAN_USE_ALLOCATOR64</a></u></td></tr>
<tr><th id="74">74</th><td><em>const</em> uptr AllocatorSpace = ~<var>0ULL</var>;</td></tr>
<tr><th id="75">75</th><td><b>struct</b> AP64 {</td></tr>
<tr><th id="76">76</th><td>  <em>static</em> <em>const</em> uptr kSpaceBeg = AllocatorSpace;</td></tr>
<tr><th id="77">77</th><td>  <em>static</em> <em>const</em> uptr kSpaceSize = AllocatorSize;</td></tr>
<tr><th id="78">78</th><td>  <em>static</em> <em>const</em> uptr kMetadataSize = <var>0</var>;</td></tr>
<tr><th id="79">79</th><td>  <b>typedef</b> __scudo::SizeClassMap SizeClassMap;</td></tr>
<tr><th id="80">80</th><td>  <b>typedef</b> NoOpMapUnmapCallback MapUnmapCallback;</td></tr>
<tr><th id="81">81</th><td>  <em>static</em> <em>const</em> uptr kFlags =</td></tr>
<tr><th id="82">82</th><td>      SizeClassAllocator64FlagMasks::kRandomShuffleChunks;</td></tr>
<tr><th id="83">83</th><td>  <b>using</b> AddressSpaceView = LocalAddressSpaceView;</td></tr>
<tr><th id="84">84</th><td>};</td></tr>
<tr><th id="85">85</th><td><b>typedef</b> SizeClassAllocator64&lt;AP64&gt; PrimaryT;</td></tr>
<tr><th id="86">86</th><td><u>#<span data-ppcond="73">else</span></u></td></tr>
<tr><th id="87">87</th><td><b>struct</b> <dfn class="type def" id="__scudo::AP32" title='__scudo::AP32' data-ref="__scudo::AP32" data-ref-filename="__scudo..AP32">AP32</dfn> {</td></tr>
<tr><th id="88">88</th><td>  <em>static</em> <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl" id="__scudo::AP32::kSpaceBeg" title='__scudo::AP32::kSpaceBeg' data-ref="__scudo::AP32::kSpaceBeg" data-ref-filename="__scudo..AP32..kSpaceBeg">kSpaceBeg</dfn> = <var>0</var>;</td></tr>
<tr><th id="89">89</th><td>  <em>static</em> <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="decl" id="__scudo::AP32::kSpaceSize" title='__scudo::AP32::kSpaceSize' data-ref="__scudo::AP32::kSpaceSize" data-ref-filename="__scudo..AP32..kSpaceSize">kSpaceSize</dfn> = <a class="macro" href="../sanitizer_common/sanitizer_platform.h.html#271" title="(1ULL &lt;&lt; 32)" data-ref="_M/SANITIZER_MMAP_RANGE_SIZE">SANITIZER_MMAP_RANGE_SIZE</a>;</td></tr>
<tr><th id="90">90</th><td>  <em>static</em> <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl" id="__scudo::AP32::kMetadataSize" title='__scudo::AP32::kMetadataSize' data-ref="__scudo::AP32::kMetadataSize" data-ref-filename="__scudo..AP32..kMetadataSize">kMetadataSize</dfn> = <var>0</var>;</td></tr>
<tr><th id="91">91</th><td>  <b>typedef</b> <span class="namespace">__scudo::</span><a class="typedef" href="scudo_platform.h.html#__scudo::SizeClassMap" title='__scudo::SizeClassMap' data-type='__sanitizer::DenseSizeClassMap' data-ref="__scudo::SizeClassMap" data-ref-filename="__scudo..SizeClassMap">SizeClassMap</a> <dfn class="typedef" id="__scudo::AP32::SizeClassMap" title='__scudo::AP32::SizeClassMap' data-type='__scudo::SizeClassMap' data-ref="__scudo::AP32::SizeClassMap" data-ref-filename="__scudo..AP32..SizeClassMap">SizeClassMap</dfn>;</td></tr>
<tr><th id="92">92</th><td>  <em>static</em> <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl" id="__scudo::AP32::kRegionSizeLog" title='__scudo::AP32::kRegionSizeLog' data-ref="__scudo::AP32::kRegionSizeLog" data-ref-filename="__scudo..AP32..kRegionSizeLog">kRegionSizeLog</dfn> = <a class="ref" href="scudo_platform.h.html#__scudo::RegionSizeLog" title='__scudo::RegionSizeLog' data-ref="__scudo::RegionSizeLog" data-ref-filename="__scudo..RegionSizeLog">RegionSizeLog</a>;</td></tr>
<tr><th id="93">93</th><td>  <b>using</b> <dfn class="typedef" id="__scudo::AP32::AddressSpaceView" title='__scudo::AP32::AddressSpaceView' data-type='__sanitizer::LocalAddressSpaceView' data-ref="__scudo::AP32::AddressSpaceView" data-ref-filename="__scudo..AP32..AddressSpaceView">AddressSpaceView</dfn> = <a class="type" href="../sanitizer_common/sanitizer_local_address_space_view.h.html#__sanitizer::LocalAddressSpaceView" title='__sanitizer::LocalAddressSpaceView' data-ref="__sanitizer::LocalAddressSpaceView" data-ref-filename="__sanitizer..LocalAddressSpaceView">LocalAddressSpaceView</a>;</td></tr>
<tr><th id="94">94</th><td>  <b>typedef</b> <a class="type" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::NoOpMapUnmapCallback" title='__sanitizer::NoOpMapUnmapCallback' data-ref="__sanitizer::NoOpMapUnmapCallback" data-ref-filename="__sanitizer..NoOpMapUnmapCallback">NoOpMapUnmapCallback</a> <dfn class="typedef" id="__scudo::AP32::MapUnmapCallback" title='__scudo::AP32::MapUnmapCallback' data-type='__sanitizer::NoOpMapUnmapCallback' data-ref="__scudo::AP32::MapUnmapCallback" data-ref-filename="__scudo..AP32..MapUnmapCallback">MapUnmapCallback</dfn>;</td></tr>
<tr><th id="95">95</th><td>  <em>static</em> <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl" id="__scudo::AP32::kFlags" title='__scudo::AP32::kFlags' data-ref="__scudo::AP32::kFlags" data-ref-filename="__scudo..AP32..kFlags">kFlags</dfn> =</td></tr>
<tr><th id="96">96</th><td>      <a class="type" href="../sanitizer_common/sanitizer_allocator_primary32.h.html#__sanitizer::SizeClassAllocator32FlagMasks" title='__sanitizer::SizeClassAllocator32FlagMasks' data-ref="__sanitizer::SizeClassAllocator32FlagMasks" data-ref-filename="__sanitizer..SizeClassAllocator32FlagMasks">SizeClassAllocator32FlagMasks</a>::<a class="enum" href="../sanitizer_common/sanitizer_allocator_primary32.h.html#__sanitizer::SizeClassAllocator32FlagMasks::kRandomShuffleChunks" title='__sanitizer::SizeClassAllocator32FlagMasks::kRandomShuffleChunks' data-ref="__sanitizer::SizeClassAllocator32FlagMasks::kRandomShuffleChunks" data-ref-filename="__sanitizer..SizeClassAllocator32FlagMasks..kRandomShuffleChunks">kRandomShuffleChunks</a> |</td></tr>
<tr><th id="97">97</th><td>      <a class="type" href="../sanitizer_common/sanitizer_allocator_primary32.h.html#__sanitizer::SizeClassAllocator32FlagMasks" title='__sanitizer::SizeClassAllocator32FlagMasks' data-ref="__sanitizer::SizeClassAllocator32FlagMasks" data-ref-filename="__sanitizer..SizeClassAllocator32FlagMasks">SizeClassAllocator32FlagMasks</a>::<a class="enum" href="../sanitizer_common/sanitizer_allocator_primary32.h.html#__sanitizer::SizeClassAllocator32FlagMasks::kUseSeparateSizeClassForBatch" title='__sanitizer::SizeClassAllocator32FlagMasks::kUseSeparateSizeClassForBatch' data-ref="__sanitizer::SizeClassAllocator32FlagMasks::kUseSeparateSizeClassForBatch" data-ref-filename="__sanitizer..SizeClassAllocator32FlagMasks..kUseSeparateSizeClassForBatch">kUseSeparateSizeClassForBatch</a>;</td></tr>
<tr><th id="98">98</th><td>};</td></tr>
<tr><th id="99">99</th><td><b>typedef</b> <a class="type" href="../sanitizer_common/sanitizer_allocator_primary32.h.html#__sanitizer::SizeClassAllocator32" title='__sanitizer::SizeClassAllocator32' data-ref="__sanitizer::SizeClassAllocator32" data-ref-filename="__sanitizer..SizeClassAllocator32">SizeClassAllocator32</a>&lt;<a class="type" href="#__scudo::AP32" title='__scudo::AP32' data-ref="__scudo::AP32" data-ref-filename="__scudo..AP32">AP32</a>&gt; <dfn class="typedef" id="__scudo::PrimaryT" title='__scudo::PrimaryT' data-type='SizeClassAllocator32&lt;__scudo::AP32&gt;' data-ref="__scudo::PrimaryT" data-ref-filename="__scudo..PrimaryT">PrimaryT</dfn>;</td></tr>
<tr><th id="100">100</th><td><u>#<span data-ppcond="73">endif</span>  // SANITIZER_CAN_USE_ALLOCATOR64</u></td></tr>
<tr><th id="101">101</th><td></td></tr>
<tr><th id="102">102</th><td><u>#include <a href="scudo_allocator_secondary.h.html">"scudo_allocator_secondary.h"</a></u></td></tr>
<tr><th id="103">103</th><td></td></tr>
<tr><th id="104">104</th><td><b>typedef</b> <a class="type" href="scudo_allocator_secondary.h.html#__scudo::LargeMmapAllocator" title='__scudo::LargeMmapAllocator' data-ref="__scudo::LargeMmapAllocator" data-ref-filename="__scudo..LargeMmapAllocator">LargeMmapAllocator</a> <dfn class="typedef" id="__scudo::SecondaryT" title='__scudo::SecondaryT' data-type='__scudo::LargeMmapAllocator' data-ref="__scudo::SecondaryT" data-ref-filename="__scudo..SecondaryT">SecondaryT</dfn>;</td></tr>
<tr><th id="105">105</th><td></td></tr>
<tr><th id="106">106</th><td><u>#include <a href="scudo_allocator_combined.h.html">"scudo_allocator_combined.h"</a></u></td></tr>
<tr><th id="107">107</th><td></td></tr>
<tr><th id="108">108</th><td><b>typedef</b> <a class="type" href="scudo_allocator_combined.h.html#__scudo::CombinedAllocator" title='__scudo::CombinedAllocator' data-ref="__scudo::CombinedAllocator" data-ref-filename="__scudo..CombinedAllocator">CombinedAllocator</a> <dfn class="typedef" id="__scudo::BackendT" title='__scudo::BackendT' data-type='__scudo::CombinedAllocator' data-ref="__scudo::BackendT" data-ref-filename="__scudo..BackendT">BackendT</dfn>;</td></tr>
<tr><th id="109">109</th><td><b>typedef</b> <a class="type" href="scudo_allocator_combined.h.html#__scudo::CombinedAllocator" title='__scudo::CombinedAllocator' data-ref="__scudo::CombinedAllocator" data-ref-filename="__scudo..CombinedAllocator">CombinedAllocator</a>::<a class="typedef" href="scudo_allocator_combined.h.html#__scudo::CombinedAllocator::AllocatorCache" title='__scudo::CombinedAllocator::AllocatorCache' data-type='typename PrimaryAllocator::AllocatorCache' data-ref="__scudo::CombinedAllocator::AllocatorCache" data-ref-filename="__scudo..CombinedAllocator..AllocatorCache">AllocatorCache</a> <dfn class="typedef" id="__scudo::AllocatorCacheT" title='__scudo::AllocatorCacheT' data-type='CombinedAllocator::AllocatorCache' data-ref="__scudo::AllocatorCacheT" data-ref-filename="__scudo..AllocatorCacheT">AllocatorCacheT</dfn>;</td></tr>
<tr><th id="110">110</th><td></td></tr>
<tr><th id="111">111</th><td><em>void</em> <a class="decl fn" href="scudo_allocator.cpp.html#__scudo::initScudo" title='__scudo::initScudo' data-ref="__scudo::initScudo" data-ref-filename="__scudo..initScudo" id="__scudo::initScudo">initScudo</a>();</td></tr>
<tr><th id="112">112</th><td></td></tr>
<tr><th id="113">113</th><td><em>void</em> *<a class="decl fn" href="scudo_allocator.cpp.html#__scudo::scudoAllocate" title='__scudo::scudoAllocate' data-ref="__scudo::scudoAllocate" data-ref-filename="__scudo..scudoAllocate" id="__scudo::scudoAllocate">scudoAllocate</a>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="43Size" title='Size' data-type='__sanitizer::uptr' data-ref="43Size" data-ref-filename="43Size">Size</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="44Alignment" title='Alignment' data-type='__sanitizer::uptr' data-ref="44Alignment" data-ref-filename="44Alignment">Alignment</dfn>, <a class="type" href="#__scudo::AllocType" title='__scudo::AllocType' data-ref="__scudo::AllocType" data-ref-filename="__scudo..AllocType">AllocType</a> <dfn class="local col5 decl" id="45Type" title='Type' data-type='__scudo::AllocType' data-ref="45Type" data-ref-filename="45Type">Type</dfn>);</td></tr>
<tr><th id="114">114</th><td><em>void</em> <a class="decl fn" href="scudo_allocator.cpp.html#__scudo::scudoDeallocate" title='__scudo::scudoDeallocate' data-ref="__scudo::scudoDeallocate" data-ref-filename="__scudo..scudoDeallocate" id="__scudo::scudoDeallocate">scudoDeallocate</a>(<em>void</em> *<dfn class="local col6 decl" id="46Ptr" title='Ptr' data-type='void *' data-ref="46Ptr" data-ref-filename="46Ptr">Ptr</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="47Size" title='Size' data-type='__sanitizer::uptr' data-ref="47Size" data-ref-filename="47Size">Size</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="48Alignment" title='Alignment' data-type='__sanitizer::uptr' data-ref="48Alignment" data-ref-filename="48Alignment">Alignment</dfn>, <a class="type" href="#__scudo::AllocType" title='__scudo::AllocType' data-ref="__scudo::AllocType" data-ref-filename="__scudo..AllocType">AllocType</a> <dfn class="local col9 decl" id="49Type" title='Type' data-type='__scudo::AllocType' data-ref="49Type" data-ref-filename="49Type">Type</dfn>);</td></tr>
<tr><th id="115">115</th><td><em>void</em> *<a class="decl fn" href="scudo_allocator.cpp.html#__scudo::scudoRealloc" title='__scudo::scudoRealloc' data-ref="__scudo::scudoRealloc" data-ref-filename="__scudo..scudoRealloc" id="__scudo::scudoRealloc">scudoRealloc</a>(<em>void</em> *<dfn class="local col0 decl" id="50Ptr" title='Ptr' data-type='void *' data-ref="50Ptr" data-ref-filename="50Ptr">Ptr</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="51Size" title='Size' data-type='__sanitizer::uptr' data-ref="51Size" data-ref-filename="51Size">Size</dfn>);</td></tr>
<tr><th id="116">116</th><td><em>void</em> *<a class="decl fn" href="scudo_allocator.cpp.html#__scudo::scudoCalloc" title='__scudo::scudoCalloc' data-ref="__scudo::scudoCalloc" data-ref-filename="__scudo..scudoCalloc" id="__scudo::scudoCalloc">scudoCalloc</a>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="52NMemB" title='NMemB' data-type='__sanitizer::uptr' data-ref="52NMemB" data-ref-filename="52NMemB">NMemB</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="53Size" title='Size' data-type='__sanitizer::uptr' data-ref="53Size" data-ref-filename="53Size">Size</dfn>);</td></tr>
<tr><th id="117">117</th><td><em>void</em> *<a class="decl fn" href="scudo_allocator.cpp.html#__scudo::scudoValloc" title='__scudo::scudoValloc' data-ref="__scudo::scudoValloc" data-ref-filename="__scudo..scudoValloc" id="__scudo::scudoValloc">scudoValloc</a>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="54Size" title='Size' data-type='__sanitizer::uptr' data-ref="54Size" data-ref-filename="54Size">Size</dfn>);</td></tr>
<tr><th id="118">118</th><td><em>void</em> *<a class="decl fn" href="scudo_allocator.cpp.html#__scudo::scudoPvalloc" title='__scudo::scudoPvalloc' data-ref="__scudo::scudoPvalloc" data-ref-filename="__scudo..scudoPvalloc" id="__scudo::scudoPvalloc">scudoPvalloc</a>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="55Size" title='Size' data-type='__sanitizer::uptr' data-ref="55Size" data-ref-filename="55Size">Size</dfn>);</td></tr>
<tr><th id="119">119</th><td><em>int</em> <a class="decl fn" href="scudo_allocator.cpp.html#__scudo::scudoPosixMemalign" title='__scudo::scudoPosixMemalign' data-ref="__scudo::scudoPosixMemalign" data-ref-filename="__scudo..scudoPosixMemalign" id="__scudo::scudoPosixMemalign">scudoPosixMemalign</a>(<em>void</em> **<dfn class="local col6 decl" id="56MemPtr" title='MemPtr' data-type='void **' data-ref="56MemPtr" data-ref-filename="56MemPtr">MemPtr</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="57Alignment" title='Alignment' data-type='__sanitizer::uptr' data-ref="57Alignment" data-ref-filename="57Alignment">Alignment</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="58Size" title='Size' data-type='__sanitizer::uptr' data-ref="58Size" data-ref-filename="58Size">Size</dfn>);</td></tr>
<tr><th id="120">120</th><td><em>void</em> *<a class="decl fn" href="scudo_allocator.cpp.html#__scudo::scudoAlignedAlloc" title='__scudo::scudoAlignedAlloc' data-ref="__scudo::scudoAlignedAlloc" data-ref-filename="__scudo..scudoAlignedAlloc" id="__scudo::scudoAlignedAlloc">scudoAlignedAlloc</a>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="59Alignment" title='Alignment' data-type='__sanitizer::uptr' data-ref="59Alignment" data-ref-filename="59Alignment">Alignment</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="60Size" title='Size' data-type='__sanitizer::uptr' data-ref="60Size" data-ref-filename="60Size">Size</dfn>);</td></tr>
<tr><th id="121">121</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="decl fn" href="scudo_allocator.cpp.html#__scudo::scudoMallocUsableSize" title='__scudo::scudoMallocUsableSize' data-ref="__scudo::scudoMallocUsableSize" data-ref-filename="__scudo..scudoMallocUsableSize" id="__scudo::scudoMallocUsableSize">scudoMallocUsableSize</a>(<em>void</em> *<dfn class="local col1 decl" id="61Ptr" title='Ptr' data-type='void *' data-ref="61Ptr" data-ref-filename="61Ptr">Ptr</dfn>);</td></tr>
<tr><th id="122">122</th><td></td></tr>
<tr><th id="123">123</th><td>}  <i>// namespace __scudo</i></td></tr>
<tr><th id="124">124</th><td></td></tr>
<tr><th id="125">125</th><td><u>#<span data-ppcond="13">endif</span>  // SCUDO_ALLOCATOR_H_</u></td></tr>
<tr><th id="126">126</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='scudo_allocator.cpp.html'>llvm/compiler-rt/lib/scudo/scudo_allocator.cpp</a><br/>Generated on <em>2021-Jul-01</em> from project llvm revision <em>12</em>