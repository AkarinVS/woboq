<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>asan_allocator.cpp source code [llvm/compiler-rt/lib/asan/asan_allocator.cpp] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="__asan::Allocator,__asan::AsanChunk,__asan::ChunkBase,__asan::ChunkHeader,__asan::LargeChunkHeader,__asan::QuarantineCallback "/>
<link rel="stylesheet" href="../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/compiler-rt/lib/asan/asan_allocator.cpp'; var root_path = '../../../..'; var data_path = '../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>llvm</a>/<a href='../..'>compiler-rt</a>/<a href='..'>lib</a>/<a href='./'>asan</a>/<a href='asan_allocator.cpp.html'>asan_allocator.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===-- asan_allocator.cpp ------------------------------------------------===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td><i>//</i></td></tr>
<tr><th id="9">9</th><td><i>// This file is a part of AddressSanitizer, an address sanity checker.</i></td></tr>
<tr><th id="10">10</th><td><i>//</i></td></tr>
<tr><th id="11">11</th><td><i>// Implementation of ASan's memory allocator, 2-nd version.</i></td></tr>
<tr><th id="12">12</th><td><i>// This variant uses the allocator from sanitizer_common, i.e. the one shared</i></td></tr>
<tr><th id="13">13</th><td><i>// with ThreadSanitizer and MemorySanitizer.</i></td></tr>
<tr><th id="14">14</th><td><i>//</i></td></tr>
<tr><th id="15">15</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td><u>#include <a href="asan_allocator.h.html">"asan_allocator.h"</a></u></td></tr>
<tr><th id="18">18</th><td></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="asan_mapping.h.html">"asan_mapping.h"</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="asan_poisoning.h.html">"asan_poisoning.h"</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="asan_report.h.html">"asan_report.h"</a></u></td></tr>
<tr><th id="22">22</th><td><u>#include <a href="asan_stack.h.html">"asan_stack.h"</a></u></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="asan_thread.h.html">"asan_thread.h"</a></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="../lsan/lsan_common.h.html">"lsan/lsan_common.h"</a></u></td></tr>
<tr><th id="25">25</th><td><u>#include <a href="../sanitizer_common/sanitizer_allocator_checks.h.html">"sanitizer_common/sanitizer_allocator_checks.h"</a></u></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="../sanitizer_common/sanitizer_allocator_interface.h.html">"sanitizer_common/sanitizer_allocator_interface.h"</a></u></td></tr>
<tr><th id="27">27</th><td><u>#include <a href="../sanitizer_common/sanitizer_errno.h.html">"sanitizer_common/sanitizer_errno.h"</a></u></td></tr>
<tr><th id="28">28</th><td><u>#include <a href="../sanitizer_common/sanitizer_flags.h.html">"sanitizer_common/sanitizer_flags.h"</a></u></td></tr>
<tr><th id="29">29</th><td><u>#include <a href="../sanitizer_common/sanitizer_internal_defs.h.html">"sanitizer_common/sanitizer_internal_defs.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="../sanitizer_common/sanitizer_list.h.html">"sanitizer_common/sanitizer_list.h"</a></u></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="../sanitizer_common/sanitizer_quarantine.h.html">"sanitizer_common/sanitizer_quarantine.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="../sanitizer_common/sanitizer_stackdepot.h.html">"sanitizer_common/sanitizer_stackdepot.h"</a></u></td></tr>
<tr><th id="33">33</th><td></td></tr>
<tr><th id="34">34</th><td><b>namespace</b> <span class="namespace">__asan</span> {</td></tr>
<tr><th id="35">35</th><td></td></tr>
<tr><th id="36">36</th><td><i  data-doc="__asan::RZLog2Size">// Valid redzone sizes are 16, 32, 64, ... 2048, so we encode them in 3 bits.</i></td></tr>
<tr><th id="37">37</th><td><i  data-doc="__asan::RZLog2Size">// We use adaptive redzones: for larger allocation larger redzones are used.</i></td></tr>
<tr><th id="38">38</th><td><em>static</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="tu decl def fn" id="__asan::RZLog2Size" title='__asan::RZLog2Size' data-type='__sanitizer::u32 __asan::RZLog2Size(__sanitizer::u32 rz_log)' data-ref="__asan::RZLog2Size" data-ref-filename="__asan..RZLog2Size">RZLog2Size</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col7 decl" id="297rz_log" title='rz_log' data-type='__sanitizer::u32' data-ref="297rz_log" data-ref-filename="297rz_log">rz_log</dfn>) {</td></tr>
<tr><th id="39">39</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#302" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((rz_log)); __sanitizer::u64 v2 = (__sanitizer::u64)((8)); if (__builtin_expect(!!(!(v1 &lt; v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 39, &quot;(&quot; &quot;(rz_log)&quot; &quot;) &quot; &quot;&lt;&quot; &quot; (&quot; &quot;(8)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_LT">CHECK_LT</a>(<a class="local col7 ref" href="#297rz_log" title='rz_log' data-ref="297rz_log" data-ref-filename="297rz_log">rz_log</a>, <var>8</var>);</td></tr>
<tr><th id="40">40</th><td>  <b>return</b> <var>16</var> &lt;&lt; <a class="local col7 ref" href="#297rz_log" title='rz_log' data-ref="297rz_log" data-ref-filename="297rz_log">rz_log</a>;</td></tr>
<tr><th id="41">41</th><td>}</td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td><em>static</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="tu decl def fn" id="__asan::RZSize2Log" title='__asan::RZSize2Log' data-type='__sanitizer::u32 __asan::RZSize2Log(__sanitizer::u32 rz_size)' data-ref="__asan::RZSize2Log" data-ref-filename="__asan..RZSize2Log">RZSize2Log</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col8 decl" id="298rz_size" title='rz_size' data-type='__sanitizer::u32' data-ref="298rz_size" data-ref-filename="298rz_size">rz_size</dfn>) {</td></tr>
<tr><th id="44">44</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#305" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((rz_size)); __sanitizer::u64 v2 = (__sanitizer::u64)((16)); if (__builtin_expect(!!(!(v1 &gt;= v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 44, &quot;(&quot; &quot;(rz_size)&quot; &quot;) &quot; &quot;&gt;=&quot; &quot; (&quot; &quot;(16)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_GE">CHECK_GE</a>(<a class="local col8 ref" href="#298rz_size" title='rz_size' data-ref="298rz_size" data-ref-filename="298rz_size">rz_size</a>, <var>16</var>);</td></tr>
<tr><th id="45">45</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#303" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((rz_size)); __sanitizer::u64 v2 = (__sanitizer::u64)((2048)); if (__builtin_expect(!!(!(v1 &lt;= v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 45, &quot;(&quot; &quot;(rz_size)&quot; &quot;) &quot; &quot;&lt;=&quot; &quot; (&quot; &quot;(2048)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_LE">CHECK_LE</a>(<a class="local col8 ref" href="#298rz_size" title='rz_size' data-ref="298rz_size" data-ref-filename="298rz_size">rz_size</a>, <var>2048</var>);</td></tr>
<tr><th id="46">46</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((IsPowerOfTwo(rz_size))); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 46, &quot;(&quot; &quot;(IsPowerOfTwo(rz_size))&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::IsPowerOfTwo" title='__sanitizer::IsPowerOfTwo' data-ref="__sanitizer::IsPowerOfTwo" data-ref-filename="__sanitizer..IsPowerOfTwo">IsPowerOfTwo</a>(<a class="local col8 ref" href="#298rz_size" title='rz_size' data-ref="298rz_size" data-ref-filename="298rz_size">rz_size</a>));</td></tr>
<tr><th id="47">47</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col9 decl" id="299res" title='res' data-type='__sanitizer::u32' data-ref="299res" data-ref-filename="299res">res</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Log2" title='__sanitizer::Log2' data-ref="__sanitizer::Log2" data-ref-filename="__sanitizer..Log2">Log2</a>(<a class="local col8 ref" href="#298rz_size" title='rz_size' data-ref="298rz_size" data-ref-filename="298rz_size">rz_size</a>) - <var>4</var>;</td></tr>
<tr><th id="48">48</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((rz_size)); __sanitizer::u64 v2 = (__sanitizer::u64)((RZLog2Size(res))); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 48, &quot;(&quot; &quot;(rz_size)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(RZLog2Size(res))&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col8 ref" href="#298rz_size" title='rz_size' data-ref="298rz_size" data-ref-filename="298rz_size">rz_size</a>, <a class="tu ref fn" href="#__asan::RZLog2Size" title='__asan::RZLog2Size' data-use='c' data-ref="__asan::RZLog2Size" data-ref-filename="__asan..RZLog2Size">RZLog2Size</a>(<a class="local col9 ref" href="#299res" title='res' data-ref="299res" data-ref-filename="299res">res</a>));</td></tr>
<tr><th id="49">49</th><td>  <b>return</b> <a class="local col9 ref" href="#299res" title='res' data-ref="299res" data-ref-filename="299res">res</a>;</td></tr>
<tr><th id="50">50</th><td>}</td></tr>
<tr><th id="51">51</th><td></td></tr>
<tr><th id="52">52</th><td><em>static</em> <a class="typedef" href="asan_allocator.h.html#__asan::AsanAllocator" title='__asan::AsanAllocator' data-type='AsanAllocatorASVT&lt;__sanitizer::LocalAddressSpaceView&gt;' data-ref="__asan::AsanAllocator" data-ref-filename="__asan..AsanAllocator">AsanAllocator</a> &amp;<a class="tu decl fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-type='__asan::AsanAllocator &amp; __asan::get_allocator()' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>();</td></tr>
<tr><th id="53">53</th><td></td></tr>
<tr><th id="54">54</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="__asan::AtomicContextStore" title='__asan::AtomicContextStore' data-type='void __asan::AtomicContextStore(volatile __sanitizer::atomic_uint64_t * atomic_context, __sanitizer::u32 tid, __sanitizer::u32 stack)' data-ref="__asan::AtomicContextStore" data-ref-filename="__asan..AtomicContextStore">AtomicContextStore</dfn>(<em>volatile</em> <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint64_t" title='__sanitizer::atomic_uint64_t' data-ref="__sanitizer::atomic_uint64_t" data-ref-filename="__sanitizer..atomic_uint64_t">atomic_uint64_t</a> *<dfn class="local col0 decl" id="300atomic_context" title='atomic_context' data-type='volatile __sanitizer::atomic_uint64_t *' data-ref="300atomic_context" data-ref-filename="300atomic_context">atomic_context</dfn>,</td></tr>
<tr><th id="55">55</th><td>                               <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col1 decl" id="301tid" title='tid' data-type='__sanitizer::u32' data-ref="301tid" data-ref-filename="301tid">tid</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col2 decl" id="302stack" title='stack' data-type='__sanitizer::u32' data-ref="302stack" data-ref-filename="302stack">stack</dfn>) {</td></tr>
<tr><th id="56">56</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="local col3 decl" id="303context" title='context' data-type='__sanitizer::u64' data-ref="303context" data-ref-filename="303context">context</dfn> = <a class="local col1 ref" href="#301tid" title='tid' data-ref="301tid" data-ref-filename="301tid">tid</a>;</td></tr>
<tr><th id="57">57</th><td>  <a class="local col3 ref" href="#303context" title='context' data-ref="303context" data-ref-filename="303context">context</a> &lt;&lt;= <var>32</var>;</td></tr>
<tr><th id="58">58</th><td>  <a class="local col3 ref" href="#303context" title='context' data-ref="303context" data-ref-filename="303context">context</a> += <a class="local col2 ref" href="#302stack" title='stack' data-ref="302stack" data-ref-filename="302stack">stack</a>;</td></tr>
<tr><th id="59">59</th><td>  <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(<a class="local col0 ref" href="#300atomic_context" title='atomic_context' data-ref="300atomic_context" data-ref-filename="300atomic_context">atomic_context</a>, <a class="local col3 ref" href="#303context" title='context' data-ref="303context" data-ref-filename="303context">context</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>);</td></tr>
<tr><th id="60">60</th><td>}</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="__asan::AtomicContextLoad" title='__asan::AtomicContextLoad' data-type='void __asan::AtomicContextLoad(const volatile __sanitizer::atomic_uint64_t * atomic_context, __sanitizer::u32 &amp; tid, __sanitizer::u32 &amp; stack)' data-ref="__asan::AtomicContextLoad" data-ref-filename="__asan..AtomicContextLoad">AtomicContextLoad</dfn>(<em>const</em> <em>volatile</em> <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint64_t" title='__sanitizer::atomic_uint64_t' data-ref="__sanitizer::atomic_uint64_t" data-ref-filename="__sanitizer..atomic_uint64_t">atomic_uint64_t</a> *<dfn class="local col4 decl" id="304atomic_context" title='atomic_context' data-type='const volatile __sanitizer::atomic_uint64_t *' data-ref="304atomic_context" data-ref-filename="304atomic_context">atomic_context</dfn>,</td></tr>
<tr><th id="63">63</th><td>                              <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> &amp;<dfn class="local col5 decl" id="305tid" title='tid' data-type='__sanitizer::u32 &amp;' data-ref="305tid" data-ref-filename="305tid">tid</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> &amp;<dfn class="local col6 decl" id="306stack" title='stack' data-type='__sanitizer::u32 &amp;' data-ref="306stack" data-ref-filename="306stack">stack</dfn>) {</td></tr>
<tr><th id="64">64</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u64" title='__sanitizer::u64' data-type='unsigned long long' data-ref="__sanitizer::u64" data-ref-filename="__sanitizer..u64">u64</a> <dfn class="local col7 decl" id="307context" title='context' data-type='__sanitizer::u64' data-ref="307context" data-ref-filename="307context">context</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(<a class="local col4 ref" href="#304atomic_context" title='atomic_context' data-ref="304atomic_context" data-ref-filename="304atomic_context">atomic_context</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>);</td></tr>
<tr><th id="65">65</th><td>  <a class="local col6 ref" href="#306stack" title='stack' data-ref="306stack" data-ref-filename="306stack">stack</a> = <a class="local col7 ref" href="#307context" title='context' data-ref="307context" data-ref-filename="307context">context</a>;</td></tr>
<tr><th id="66">66</th><td>  <a class="local col7 ref" href="#307context" title='context' data-ref="307context" data-ref-filename="307context">context</a> &gt;&gt;= <var>32</var>;</td></tr>
<tr><th id="67">67</th><td>  <a class="local col5 ref" href="#305tid" title='tid' data-ref="305tid" data-ref-filename="305tid">tid</a> = <a class="local col7 ref" href="#307context" title='context' data-ref="307context" data-ref-filename="307context">context</a>;</td></tr>
<tr><th id="68">68</th><td>}</td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td><i>// The memory chunk allocated from the underlying allocator looks like this:</i></td></tr>
<tr><th id="71">71</th><td><i>// L L L L L L H H U U U U U U R R</i></td></tr>
<tr><th id="72">72</th><td><i>//   L -- left redzone words (0 or more bytes)</i></td></tr>
<tr><th id="73">73</th><td><i>//   H -- ChunkHeader (16 bytes), which is also a part of the left redzone.</i></td></tr>
<tr><th id="74">74</th><td><i>//   U -- user memory.</i></td></tr>
<tr><th id="75">75</th><td><i>//   R -- right redzone (0 or more bytes)</i></td></tr>
<tr><th id="76">76</th><td><i>// ChunkBase consists of ChunkHeader and other bytes that overlap with user</i></td></tr>
<tr><th id="77">77</th><td><i>// memory.</i></td></tr>
<tr><th id="78">78</th><td><i></i></td></tr>
<tr><th id="79">79</th><td><i>// If the left redzone is greater than the ChunkHeader size we store a magic</i></td></tr>
<tr><th id="80">80</th><td><i>// value in the first uptr word of the memory block and store the address of</i></td></tr>
<tr><th id="81">81</th><td><i>// ChunkBase in the next uptr.</i></td></tr>
<tr><th id="82">82</th><td><i>// M B L L L L L L L L L  H H U U U U U U</i></td></tr>
<tr><th id="83">83</th><td><i>//   |                    ^</i></td></tr>
<tr><th id="84">84</th><td><i>//   ---------------------|</i></td></tr>
<tr><th id="85">85</th><td><i>//   M -- magic value kAllocBegMagic</i></td></tr>
<tr><th id="86">86</th><td><i>//   B -- address of ChunkHeader pointing to the first 'H'</i></td></tr>
<tr><th id="87">87</th><td></td></tr>
<tr><th id="88">88</th><td><b>class</b> <dfn class="type def" id="__asan::ChunkHeader" title='__asan::ChunkHeader' data-ref="__asan::ChunkHeader" data-ref-filename="__asan..ChunkHeader">ChunkHeader</dfn> {</td></tr>
<tr><th id="89">89</th><td> <b>public</b>:</td></tr>
<tr><th id="90">90</th><td>  <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint8_t" title='__sanitizer::atomic_uint8_t' data-ref="__sanitizer::atomic_uint8_t" data-ref-filename="__sanitizer..atomic_uint8_t">atomic_uint8_t</a> <dfn class="tu decl field" id="__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-type='__sanitizer::atomic_uint8_t' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</dfn>;</td></tr>
<tr><th id="91">91</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="tu decl field" id="__asan::ChunkHeader::alloc_type" title='__asan::ChunkHeader::alloc_type' data-type='__sanitizer::u8' data-ref="__asan::ChunkHeader::alloc_type" data-ref-filename="__asan..ChunkHeader..alloc_type">alloc_type</dfn> : <var>2</var>;</td></tr>
<tr><th id="92">92</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="tu decl field" id="__asan::ChunkHeader::lsan_tag" title='__asan::ChunkHeader::lsan_tag' data-type='__sanitizer::u8' data-ref="__asan::ChunkHeader::lsan_tag" data-ref-filename="__asan..ChunkHeader..lsan_tag">lsan_tag</dfn> : <var>2</var>;</td></tr>
<tr><th id="93">93</th><td></td></tr>
<tr><th id="94">94</th><td>  <i  data-doc="__asan::ChunkHeader::user_requested_alignment_log">// align &lt; 8 -&gt; 0</i></td></tr>
<tr><th id="95">95</th><td><i  data-doc="__asan::ChunkHeader::user_requested_alignment_log">  // else      -&gt; log2(min(align, 512)) - 2</i></td></tr>
<tr><th id="96">96</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="tu decl field" id="__asan::ChunkHeader::user_requested_alignment_log" title='__asan::ChunkHeader::user_requested_alignment_log' data-type='__sanitizer::u8' data-ref="__asan::ChunkHeader::user_requested_alignment_log" data-ref-filename="__asan..ChunkHeader..user_requested_alignment_log">user_requested_alignment_log</dfn> : <var>3</var>;</td></tr>
<tr><th id="97">97</th><td></td></tr>
<tr><th id="98">98</th><td> <b>private</b>:</td></tr>
<tr><th id="99">99</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u16" title='__sanitizer::u16' data-type='unsigned short' data-ref="__sanitizer::u16" data-ref-filename="__sanitizer..u16">u16</a> <dfn class="tu decl field" id="__asan::ChunkHeader::user_requested_size_hi" title='__asan::ChunkHeader::user_requested_size_hi' data-type='__sanitizer::u16' data-ref="__asan::ChunkHeader::user_requested_size_hi" data-ref-filename="__asan..ChunkHeader..user_requested_size_hi">user_requested_size_hi</dfn>;</td></tr>
<tr><th id="100">100</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="tu decl field" id="__asan::ChunkHeader::user_requested_size_lo" title='__asan::ChunkHeader::user_requested_size_lo' data-type='__sanitizer::u32' data-ref="__asan::ChunkHeader::user_requested_size_lo" data-ref-filename="__asan..ChunkHeader..user_requested_size_lo">user_requested_size_lo</dfn>;</td></tr>
<tr><th id="101">101</th><td>  <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint64_t" title='__sanitizer::atomic_uint64_t' data-ref="__sanitizer::atomic_uint64_t" data-ref-filename="__sanitizer..atomic_uint64_t">atomic_uint64_t</a> <dfn class="tu decl field" id="__asan::ChunkHeader::alloc_context_id" title='__asan::ChunkHeader::alloc_context_id' data-type='__sanitizer::atomic_uint64_t' data-ref="__asan::ChunkHeader::alloc_context_id" data-ref-filename="__asan..ChunkHeader..alloc_context_id">alloc_context_id</dfn>;</td></tr>
<tr><th id="102">102</th><td></td></tr>
<tr><th id="103">103</th><td> <b>public</b>:</td></tr>
<tr><th id="104">104</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl def fn" id="__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-type='__sanitizer::uptr __asan::ChunkHeader::UsedSize() const' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</dfn>() <em>const</em> {</td></tr>
<tr><th id="105">105</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="308R" title='R' data-type='__sanitizer::uptr' data-ref="308R" data-ref-filename="308R">R</dfn> = <a class="tu member field" href="#__asan::ChunkHeader::user_requested_size_lo" title='__asan::ChunkHeader::user_requested_size_lo' data-use='r' data-ref="__asan::ChunkHeader::user_requested_size_lo" data-ref-filename="__asan..ChunkHeader..user_requested_size_lo">user_requested_size_lo</a>;</td></tr>
<tr><th id="106">106</th><td>    <b>if</b> (<b>sizeof</b>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>) &gt; <b>sizeof</b>(<a class="tu member field" href="#__asan::ChunkHeader::user_requested_size_lo" title='__asan::ChunkHeader::user_requested_size_lo' data-use='r' data-ref="__asan::ChunkHeader::user_requested_size_lo" data-ref-filename="__asan..ChunkHeader..user_requested_size_lo">user_requested_size_lo</a>))</td></tr>
<tr><th id="107">107</th><td>      <a class="local col8 ref" href="#308R" title='R' data-ref="308R" data-ref-filename="308R">R</a> += (<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="tu member field" href="#__asan::ChunkHeader::user_requested_size_hi" title='__asan::ChunkHeader::user_requested_size_hi' data-use='r' data-ref="__asan::ChunkHeader::user_requested_size_hi" data-ref-filename="__asan..ChunkHeader..user_requested_size_hi">user_requested_size_hi</a> &lt;&lt; (<var>8</var> * <b>sizeof</b>(<a class="tu member field" href="#__asan::ChunkHeader::user_requested_size_lo" title='__asan::ChunkHeader::user_requested_size_lo' data-use='r' data-ref="__asan::ChunkHeader::user_requested_size_lo" data-ref-filename="__asan..ChunkHeader..user_requested_size_lo">user_requested_size_lo</a>));</td></tr>
<tr><th id="108">108</th><td>    <b>return</b> <a class="local col8 ref" href="#308R" title='R' data-ref="308R" data-ref-filename="308R">R</a>;</td></tr>
<tr><th id="109">109</th><td>  }</td></tr>
<tr><th id="110">110</th><td></td></tr>
<tr><th id="111">111</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::ChunkHeader::SetUsedSize" title='__asan::ChunkHeader::SetUsedSize' data-type='void __asan::ChunkHeader::SetUsedSize(__sanitizer::uptr size)' data-ref="__asan::ChunkHeader::SetUsedSize" data-ref-filename="__asan..ChunkHeader..SetUsedSize">SetUsedSize</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="309size" title='size' data-type='__sanitizer::uptr' data-ref="309size" data-ref-filename="309size">size</dfn>) {</td></tr>
<tr><th id="112">112</th><td>    <a class="tu member field" href="#__asan::ChunkHeader::user_requested_size_lo" title='__asan::ChunkHeader::user_requested_size_lo' data-use='w' data-ref="__asan::ChunkHeader::user_requested_size_lo" data-ref-filename="__asan..ChunkHeader..user_requested_size_lo">user_requested_size_lo</a> = <a class="local col9 ref" href="#309size" title='size' data-ref="309size" data-ref-filename="309size">size</a>;</td></tr>
<tr><th id="113">113</th><td>    <b>if</b> (<b>sizeof</b>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>) &gt; <b>sizeof</b>(<a class="tu member field" href="#__asan::ChunkHeader::user_requested_size_lo" title='__asan::ChunkHeader::user_requested_size_lo' data-use='r' data-ref="__asan::ChunkHeader::user_requested_size_lo" data-ref-filename="__asan..ChunkHeader..user_requested_size_lo">user_requested_size_lo</a>)) {</td></tr>
<tr><th id="114">114</th><td>      <a class="local col9 ref" href="#309size" title='size' data-ref="309size" data-ref-filename="309size">size</a> &gt;&gt;= (<var>8</var> * <b>sizeof</b>(<a class="tu member field" href="#__asan::ChunkHeader::user_requested_size_lo" title='__asan::ChunkHeader::user_requested_size_lo' data-use='r' data-ref="__asan::ChunkHeader::user_requested_size_lo" data-ref-filename="__asan..ChunkHeader..user_requested_size_lo">user_requested_size_lo</a>));</td></tr>
<tr><th id="115">115</th><td>      <a class="tu member field" href="#__asan::ChunkHeader::user_requested_size_hi" title='__asan::ChunkHeader::user_requested_size_hi' data-use='w' data-ref="__asan::ChunkHeader::user_requested_size_hi" data-ref-filename="__asan..ChunkHeader..user_requested_size_hi">user_requested_size_hi</a> = <a class="local col9 ref" href="#309size" title='size' data-ref="309size" data-ref-filename="309size">size</a>;</td></tr>
<tr><th id="116">116</th><td>      <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((user_requested_size_hi)); __sanitizer::u64 v2 = (__sanitizer::u64)((size)); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 116, &quot;(&quot; &quot;(user_requested_size_hi)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(size)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="tu member field" href="#__asan::ChunkHeader::user_requested_size_hi" title='__asan::ChunkHeader::user_requested_size_hi' data-use='r' data-ref="__asan::ChunkHeader::user_requested_size_hi" data-ref-filename="__asan..ChunkHeader..user_requested_size_hi">user_requested_size_hi</a>, <a class="local col9 ref" href="#309size" title='size' data-ref="309size" data-ref-filename="309size">size</a>);</td></tr>
<tr><th id="117">117</th><td>    }</td></tr>
<tr><th id="118">118</th><td>  }</td></tr>
<tr><th id="119">119</th><td></td></tr>
<tr><th id="120">120</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::ChunkHeader::SetAllocContext" title='__asan::ChunkHeader::SetAllocContext' data-type='void __asan::ChunkHeader::SetAllocContext(__sanitizer::u32 tid, __sanitizer::u32 stack)' data-ref="__asan::ChunkHeader::SetAllocContext" data-ref-filename="__asan..ChunkHeader..SetAllocContext">SetAllocContext</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col0 decl" id="310tid" title='tid' data-type='__sanitizer::u32' data-ref="310tid" data-ref-filename="310tid">tid</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col1 decl" id="311stack" title='stack' data-type='__sanitizer::u32' data-ref="311stack" data-ref-filename="311stack">stack</dfn>) {</td></tr>
<tr><th id="121">121</th><td>    <a class="tu ref fn" href="#__asan::AtomicContextStore" title='__asan::AtomicContextStore' data-use='c' data-ref="__asan::AtomicContextStore" data-ref-filename="__asan..AtomicContextStore">AtomicContextStore</a>(&amp;<a class="tu member field" href="#__asan::ChunkHeader::alloc_context_id" title='__asan::ChunkHeader::alloc_context_id' data-use='a' data-ref="__asan::ChunkHeader::alloc_context_id" data-ref-filename="__asan..ChunkHeader..alloc_context_id">alloc_context_id</a>, <a class="local col0 ref" href="#310tid" title='tid' data-ref="310tid" data-ref-filename="310tid">tid</a>, <a class="local col1 ref" href="#311stack" title='stack' data-ref="311stack" data-ref-filename="311stack">stack</a>);</td></tr>
<tr><th id="122">122</th><td>  }</td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::ChunkHeader::GetAllocContext" title='__asan::ChunkHeader::GetAllocContext' data-type='void __asan::ChunkHeader::GetAllocContext(__sanitizer::u32 &amp; tid, __sanitizer::u32 &amp; stack) const' data-ref="__asan::ChunkHeader::GetAllocContext" data-ref-filename="__asan..ChunkHeader..GetAllocContext">GetAllocContext</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> &amp;<dfn class="local col2 decl" id="312tid" title='tid' data-type='__sanitizer::u32 &amp;' data-ref="312tid" data-ref-filename="312tid">tid</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> &amp;<dfn class="local col3 decl" id="313stack" title='stack' data-type='__sanitizer::u32 &amp;' data-ref="313stack" data-ref-filename="313stack">stack</dfn>) <em>const</em> {</td></tr>
<tr><th id="125">125</th><td>    <a class="tu ref fn" href="#__asan::AtomicContextLoad" title='__asan::AtomicContextLoad' data-use='c' data-ref="__asan::AtomicContextLoad" data-ref-filename="__asan..AtomicContextLoad">AtomicContextLoad</a>(&amp;<a class="tu member field" href="#__asan::ChunkHeader::alloc_context_id" title='__asan::ChunkHeader::alloc_context_id' data-use='a' data-ref="__asan::ChunkHeader::alloc_context_id" data-ref-filename="__asan..ChunkHeader..alloc_context_id">alloc_context_id</a>, <span class='refarg'><a class="local col2 ref" href="#312tid" title='tid' data-ref="312tid" data-ref-filename="312tid">tid</a></span>, <span class='refarg'><a class="local col3 ref" href="#313stack" title='stack' data-ref="313stack" data-ref-filename="313stack">stack</a></span>);</td></tr>
<tr><th id="126">126</th><td>  }</td></tr>
<tr><th id="127">127</th><td>};</td></tr>
<tr><th id="128">128</th><td></td></tr>
<tr><th id="129">129</th><td><b>class</b> <dfn class="type def" id="__asan::ChunkBase" title='__asan::ChunkBase' data-ref="__asan::ChunkBase" data-ref-filename="__asan..ChunkBase">ChunkBase</dfn> : <b>public</b> <a class="type" href="#__asan::ChunkHeader" title='__asan::ChunkHeader' data-ref="__asan::ChunkHeader" data-ref-filename="__asan..ChunkHeader">ChunkHeader</a> {</td></tr>
<tr><th id="130">130</th><td>  <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint64_t" title='__sanitizer::atomic_uint64_t' data-ref="__sanitizer::atomic_uint64_t" data-ref-filename="__sanitizer..atomic_uint64_t">atomic_uint64_t</a> <dfn class="tu decl field" id="__asan::ChunkBase::free_context_id" title='__asan::ChunkBase::free_context_id' data-type='__sanitizer::atomic_uint64_t' data-ref="__asan::ChunkBase::free_context_id" data-ref-filename="__asan..ChunkBase..free_context_id">free_context_id</dfn>;</td></tr>
<tr><th id="131">131</th><td></td></tr>
<tr><th id="132">132</th><td> <b>public</b>:</td></tr>
<tr><th id="133">133</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::ChunkBase::SetFreeContext" title='__asan::ChunkBase::SetFreeContext' data-type='void __asan::ChunkBase::SetFreeContext(__sanitizer::u32 tid, __sanitizer::u32 stack)' data-ref="__asan::ChunkBase::SetFreeContext" data-ref-filename="__asan..ChunkBase..SetFreeContext">SetFreeContext</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col4 decl" id="314tid" title='tid' data-type='__sanitizer::u32' data-ref="314tid" data-ref-filename="314tid">tid</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col5 decl" id="315stack" title='stack' data-type='__sanitizer::u32' data-ref="315stack" data-ref-filename="315stack">stack</dfn>) {</td></tr>
<tr><th id="134">134</th><td>    <a class="tu ref fn" href="#__asan::AtomicContextStore" title='__asan::AtomicContextStore' data-use='c' data-ref="__asan::AtomicContextStore" data-ref-filename="__asan..AtomicContextStore">AtomicContextStore</a>(&amp;<a class="tu member field" href="#__asan::ChunkBase::free_context_id" title='__asan::ChunkBase::free_context_id' data-use='a' data-ref="__asan::ChunkBase::free_context_id" data-ref-filename="__asan..ChunkBase..free_context_id">free_context_id</a>, <a class="local col4 ref" href="#314tid" title='tid' data-ref="314tid" data-ref-filename="314tid">tid</a>, <a class="local col5 ref" href="#315stack" title='stack' data-ref="315stack" data-ref-filename="315stack">stack</a>);</td></tr>
<tr><th id="135">135</th><td>  }</td></tr>
<tr><th id="136">136</th><td></td></tr>
<tr><th id="137">137</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::ChunkBase::GetFreeContext" title='__asan::ChunkBase::GetFreeContext' data-type='void __asan::ChunkBase::GetFreeContext(__sanitizer::u32 &amp; tid, __sanitizer::u32 &amp; stack) const' data-ref="__asan::ChunkBase::GetFreeContext" data-ref-filename="__asan..ChunkBase..GetFreeContext">GetFreeContext</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> &amp;<dfn class="local col6 decl" id="316tid" title='tid' data-type='__sanitizer::u32 &amp;' data-ref="316tid" data-ref-filename="316tid">tid</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> &amp;<dfn class="local col7 decl" id="317stack" title='stack' data-type='__sanitizer::u32 &amp;' data-ref="317stack" data-ref-filename="317stack">stack</dfn>) <em>const</em> {</td></tr>
<tr><th id="138">138</th><td>    <a class="tu ref fn" href="#__asan::AtomicContextLoad" title='__asan::AtomicContextLoad' data-use='c' data-ref="__asan::AtomicContextLoad" data-ref-filename="__asan..AtomicContextLoad">AtomicContextLoad</a>(&amp;<a class="tu member field" href="#__asan::ChunkBase::free_context_id" title='__asan::ChunkBase::free_context_id' data-use='a' data-ref="__asan::ChunkBase::free_context_id" data-ref-filename="__asan..ChunkBase..free_context_id">free_context_id</a>, <span class='refarg'><a class="local col6 ref" href="#316tid" title='tid' data-ref="316tid" data-ref-filename="316tid">tid</a></span>, <span class='refarg'><a class="local col7 ref" href="#317stack" title='stack' data-ref="317stack" data-ref-filename="317stack">stack</a></span>);</td></tr>
<tr><th id="139">139</th><td>  }</td></tr>
<tr><th id="140">140</th><td>};</td></tr>
<tr><th id="141">141</th><td></td></tr>
<tr><th id="142">142</th><td><em>static</em> <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl def" id="__asan::kChunkHeaderSize" title='__asan::kChunkHeaderSize' data-type='const __sanitizer::uptr' data-ref="__asan::kChunkHeaderSize" data-ref-filename="__asan..kChunkHeaderSize">kChunkHeaderSize</dfn> = <b>sizeof</b>(<a class="type" href="#__asan::ChunkHeader" title='__asan::ChunkHeader' data-ref="__asan::ChunkHeader" data-ref-filename="__asan..ChunkHeader">ChunkHeader</a>);</td></tr>
<tr><th id="143">143</th><td><em>static</em> <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl def" id="__asan::kChunkHeader2Size" title='__asan::kChunkHeader2Size' data-type='const __sanitizer::uptr' data-ref="__asan::kChunkHeader2Size" data-ref-filename="__asan..kChunkHeader2Size">kChunkHeader2Size</dfn> = <b>sizeof</b>(<a class="type" href="#__asan::ChunkBase" title='__asan::ChunkBase' data-ref="__asan::ChunkBase" data-ref-filename="__asan..ChunkBase">ChunkBase</a>) - <a class="tu ref" href="#__asan::kChunkHeaderSize" title='__asan::kChunkHeaderSize' data-use='r' data-ref="__asan::kChunkHeaderSize" data-ref-filename="__asan..kChunkHeaderSize">kChunkHeaderSize</a>;</td></tr>
<tr><th id="144">144</th><td><a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#332" title="static_assert(kChunkHeaderSize == 16, &quot;&quot;)" data-ref="_M/COMPILER_CHECK">COMPILER_CHECK</a>(<a class="tu ref" href="#__asan::kChunkHeaderSize" title='__asan::kChunkHeaderSize' data-use='r' data-ref="__asan::kChunkHeaderSize" data-ref-filename="__asan..kChunkHeaderSize">kChunkHeaderSize</a> == <var>16</var>);</td></tr>
<tr><th id="145">145</th><td><a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#332" title="static_assert(kChunkHeader2Size &lt;= 16, &quot;&quot;)" data-ref="_M/COMPILER_CHECK">COMPILER_CHECK</a>(<a class="tu ref" href="#__asan::kChunkHeader2Size" title='__asan::kChunkHeader2Size' data-use='r' data-ref="__asan::kChunkHeader2Size" data-ref-filename="__asan..kChunkHeader2Size">kChunkHeader2Size</a> &lt;= <var>16</var>);</td></tr>
<tr><th id="146">146</th><td></td></tr>
<tr><th id="147">147</th><td><b>enum</b> {</td></tr>
<tr><th id="148">148</th><td>  <i>// Either just allocated by underlying allocator, but AsanChunk is not yet</i></td></tr>
<tr><th id="149">149</th><td><i>  // ready, or almost returned to undelying allocator and AsanChunk is already</i></td></tr>
<tr><th id="150">150</th><td><i>  // meaningless.</i></td></tr>
<tr><th id="151">151</th><td>  <dfn class="enum" id="__asan::CHUNK_INVALID" title='__asan::CHUNK_INVALID' data-ref="__asan::CHUNK_INVALID" data-ref-filename="__asan..CHUNK_INVALID">CHUNK_INVALID</dfn> = <var>0</var>,</td></tr>
<tr><th id="152">152</th><td>  <i>// The chunk is allocated and not yet freed.</i></td></tr>
<tr><th id="153">153</th><td>  <dfn class="enum" id="__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</dfn> = <var>2</var>,</td></tr>
<tr><th id="154">154</th><td>  <i>// The chunk was freed and put into quarantine zone.</i></td></tr>
<tr><th id="155">155</th><td>  <dfn class="enum" id="__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</dfn> = <var>3</var>,</td></tr>
<tr><th id="156">156</th><td>};</td></tr>
<tr><th id="157">157</th><td></td></tr>
<tr><th id="158">158</th><td><b>class</b> <dfn class="type def" id="__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</dfn> : <b>public</b> <a class="type" href="#__asan::ChunkBase" title='__asan::ChunkBase' data-ref="__asan::ChunkBase" data-ref-filename="__asan..ChunkBase">ChunkBase</a> {</td></tr>
<tr><th id="159">159</th><td> <b>public</b>:</td></tr>
<tr><th id="160">160</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</dfn>() { <b>return</b> <b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<b>this</b>) + <a class="tu ref" href="#__asan::kChunkHeaderSize" title='__asan::kChunkHeaderSize' data-use='r' data-ref="__asan::kChunkHeaderSize" data-ref-filename="__asan..kChunkHeaderSize">kChunkHeaderSize</a>; }</td></tr>
<tr><th id="161">161</th><td>  <em>bool</em> <dfn class="decl def fn" id="__asan::AsanChunk::AddrIsInside" title='__asan::AsanChunk::AddrIsInside' data-ref="__asan::AsanChunk::AddrIsInside" data-ref-filename="__asan..AsanChunk..AddrIsInside">AddrIsInside</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="318addr" title='addr' data-type='__sanitizer::uptr' data-ref="318addr" data-ref-filename="318addr">addr</dfn>) {</td></tr>
<tr><th id="162">162</th><td>    <b>return</b> (<a class="local col8 ref" href="#318addr" title='addr' data-ref="318addr" data-ref-filename="318addr">addr</a> &gt;= <a class="member fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>()) &amp;&amp; (<a class="local col8 ref" href="#318addr" title='addr' data-ref="318addr" data-ref-filename="318addr">addr</a> &lt; <a class="member fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>() + <a class="tu member fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>());</td></tr>
<tr><th id="163">163</th><td>  }</td></tr>
<tr><th id="164">164</th><td>};</td></tr>
<tr><th id="165">165</th><td></td></tr>
<tr><th id="166">166</th><td><b>class</b> <dfn class="type def" id="__asan::LargeChunkHeader" title='__asan::LargeChunkHeader' data-ref="__asan::LargeChunkHeader" data-ref-filename="__asan..LargeChunkHeader">LargeChunkHeader</dfn> {</td></tr>
<tr><th id="167">167</th><td>  <em>static</em> <b>constexpr</b> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl" id="__asan::LargeChunkHeader::kAllocBegMagic" title='__asan::LargeChunkHeader::kAllocBegMagic' data-type='const __sanitizer::uptr' data-ref="__asan::LargeChunkHeader::kAllocBegMagic" data-ref-filename="__asan..LargeChunkHeader..kAllocBegMagic">kAllocBegMagic</dfn> =</td></tr>
<tr><th id="168">168</th><td>      <a class="macro" href="../sanitizer_common/sanitizer_platform.h.html#131" title="(0xCC6E96B9CC6E96B9ULL)" data-ref="_M/FIRST_32_SECOND_64">FIRST_32_SECOND_64</a>(<var>0xCC6E96B9</var>, <var>0xCC6E96B9CC6E96B9ULL</var>);</td></tr>
<tr><th id="169">169</th><td>  <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uintptr_t" title='__sanitizer::atomic_uintptr_t' data-ref="__sanitizer::atomic_uintptr_t" data-ref-filename="__sanitizer..atomic_uintptr_t">atomic_uintptr_t</a> <dfn class="tu decl field" id="__asan::LargeChunkHeader::magic" title='__asan::LargeChunkHeader::magic' data-type='__sanitizer::atomic_uintptr_t' data-ref="__asan::LargeChunkHeader::magic" data-ref-filename="__asan..LargeChunkHeader..magic">magic</dfn>;</td></tr>
<tr><th id="170">170</th><td>  <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="tu decl field" id="__asan::LargeChunkHeader::chunk_header" title='__asan::LargeChunkHeader::chunk_header' data-type='__asan::AsanChunk *' data-ref="__asan::LargeChunkHeader::chunk_header" data-ref-filename="__asan..LargeChunkHeader..chunk_header">chunk_header</dfn>;</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td> <b>public</b>:</td></tr>
<tr><th id="173">173</th><td>  <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="tu decl def fn" id="__asan::LargeChunkHeader::Get" title='__asan::LargeChunkHeader::Get' data-type='__asan::AsanChunk * __asan::LargeChunkHeader::Get() const' data-ref="__asan::LargeChunkHeader::Get" data-ref-filename="__asan..LargeChunkHeader..Get">Get</dfn>() <em>const</em> {</td></tr>
<tr><th id="174">174</th><td>    <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu member field" href="#__asan::LargeChunkHeader::magic" title='__asan::LargeChunkHeader::magic' data-use='a' data-ref="__asan::LargeChunkHeader::magic" data-ref-filename="__asan..LargeChunkHeader..magic">magic</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>) == <a class="tu member" href="#__asan::LargeChunkHeader::kAllocBegMagic" title='__asan::LargeChunkHeader::kAllocBegMagic' data-use='r' data-ref="__asan::LargeChunkHeader::kAllocBegMagic" data-ref-filename="__asan..LargeChunkHeader..kAllocBegMagic">kAllocBegMagic</a></td></tr>
<tr><th id="175">175</th><td>               ? <a class="tu member field" href="#__asan::LargeChunkHeader::chunk_header" title='__asan::LargeChunkHeader::chunk_header' data-use='r' data-ref="__asan::LargeChunkHeader::chunk_header" data-ref-filename="__asan..LargeChunkHeader..chunk_header">chunk_header</a></td></tr>
<tr><th id="176">176</th><td>               : <b>nullptr</b>;</td></tr>
<tr><th id="177">177</th><td>  }</td></tr>
<tr><th id="178">178</th><td></td></tr>
<tr><th id="179">179</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::LargeChunkHeader::Set" title='__asan::LargeChunkHeader::Set' data-type='void __asan::LargeChunkHeader::Set(__asan::AsanChunk * p)' data-ref="__asan::LargeChunkHeader::Set" data-ref-filename="__asan..LargeChunkHeader..Set">Set</dfn>(<a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col9 decl" id="319p" title='p' data-type='__asan::AsanChunk *' data-ref="319p" data-ref-filename="319p">p</dfn>) {</td></tr>
<tr><th id="180">180</th><td>    <b>if</b> (<a class="local col9 ref" href="#319p" title='p' data-ref="319p" data-ref-filename="319p">p</a>) {</td></tr>
<tr><th id="181">181</th><td>      <a class="tu member field" href="#__asan::LargeChunkHeader::chunk_header" title='__asan::LargeChunkHeader::chunk_header' data-use='w' data-ref="__asan::LargeChunkHeader::chunk_header" data-ref-filename="__asan..LargeChunkHeader..chunk_header">chunk_header</a> = <a class="local col9 ref" href="#319p" title='p' data-ref="319p" data-ref-filename="319p">p</a>;</td></tr>
<tr><th id="182">182</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="tu member field" href="#__asan::LargeChunkHeader::magic" title='__asan::LargeChunkHeader::magic' data-use='a' data-ref="__asan::LargeChunkHeader::magic" data-ref-filename="__asan..LargeChunkHeader..magic">magic</a>, <a class="tu member" href="#__asan::LargeChunkHeader::kAllocBegMagic" title='__asan::LargeChunkHeader::kAllocBegMagic' data-use='r' data-ref="__asan::LargeChunkHeader::kAllocBegMagic" data-ref-filename="__asan..LargeChunkHeader..kAllocBegMagic">kAllocBegMagic</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="183">183</th><td>      <b>return</b>;</td></tr>
<tr><th id="184">184</th><td>    }</td></tr>
<tr><th id="185">185</th><td></td></tr>
<tr><th id="186">186</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="320old" title='old' data-type='__sanitizer::uptr' data-ref="320old" data-ref-filename="320old">old</dfn> = <a class="tu member" href="#__asan::LargeChunkHeader::kAllocBegMagic" title='__asan::LargeChunkHeader::kAllocBegMagic' data-use='r' data-ref="__asan::LargeChunkHeader::kAllocBegMagic" data-ref-filename="__asan..LargeChunkHeader..kAllocBegMagic">kAllocBegMagic</a>;</td></tr>
<tr><th id="187">187</th><td>    <b>if</b> (!<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang.h.html#__sanitizer::atomic_compare_exchange_strong" title='__sanitizer::atomic_compare_exchange_strong' data-ref="__sanitizer::atomic_compare_exchange_strong" data-ref-filename="__sanitizer..atomic_compare_exchange_strong">atomic_compare_exchange_strong</a>(&amp;<a class="tu member field" href="#__asan::LargeChunkHeader::magic" title='__asan::LargeChunkHeader::magic' data-use='a' data-ref="__asan::LargeChunkHeader::magic" data-ref-filename="__asan..LargeChunkHeader..magic">magic</a>, &amp;<a class="local col0 ref" href="#320old" title='old' data-ref="320old" data-ref-filename="320old">old</a>, <var>0</var>,</td></tr>
<tr><th id="188">188</th><td>                                        <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>)) {</td></tr>
<tr><th id="189">189</th><td>      <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((old)); __sanitizer::u64 v2 = (__sanitizer::u64)((kAllocBegMagic)); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 189, &quot;(&quot; &quot;(old)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(kAllocBegMagic)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col0 ref" href="#320old" title='old' data-ref="320old" data-ref-filename="320old">old</a>, <a class="tu member" href="#__asan::LargeChunkHeader::kAllocBegMagic" title='__asan::LargeChunkHeader::kAllocBegMagic' data-use='r' data-ref="__asan::LargeChunkHeader::kAllocBegMagic" data-ref-filename="__asan..LargeChunkHeader..kAllocBegMagic">kAllocBegMagic</a>);</td></tr>
<tr><th id="190">190</th><td>    }</td></tr>
<tr><th id="191">191</th><td>  }</td></tr>
<tr><th id="192">192</th><td>};</td></tr>
<tr><th id="193">193</th><td></td></tr>
<tr><th id="194">194</th><td><b>struct</b> <dfn class="type def" id="__asan::QuarantineCallback" title='__asan::QuarantineCallback' data-ref="__asan::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback">QuarantineCallback</dfn> {</td></tr>
<tr><th id="195">195</th><td>  <dfn class="tu decl def fn" id="__asan::QuarantineCallback::QuarantineCallback" title='__asan::QuarantineCallback::QuarantineCallback' data-type='void __asan::QuarantineCallback::QuarantineCallback(__asan::AllocatorCache * cache, __sanitizer::BufferedStackTrace * stack)' data-ref="__asan::QuarantineCallback::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback..QuarantineCallback">QuarantineCallback</dfn>(<a class="typedef" href="asan_allocator.h.html#__asan::AllocatorCache" title='__asan::AllocatorCache' data-type='AsanAllocator::AllocatorCache' data-ref="__asan::AllocatorCache" data-ref-filename="__asan..AllocatorCache">AllocatorCache</a> *<dfn class="local col1 decl" id="321cache" title='cache' data-type='__asan::AllocatorCache *' data-ref="321cache" data-ref-filename="321cache">cache</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col2 decl" id="322stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="322stack" data-ref-filename="322stack">stack</dfn>)</td></tr>
<tr><th id="196">196</th><td>      : <a class="tu member field" href="#__asan::QuarantineCallback::cache_" title='__asan::QuarantineCallback::cache_' data-use='w' data-ref="__asan::QuarantineCallback::cache_" data-ref-filename="__asan..QuarantineCallback..cache_">cache_</a>(<a class="local col1 ref" href="#321cache" title='cache' data-ref="321cache" data-ref-filename="321cache">cache</a>),</td></tr>
<tr><th id="197">197</th><td>        <a class="tu member field" href="#__asan::QuarantineCallback::stack_" title='__asan::QuarantineCallback::stack_' data-use='w' data-ref="__asan::QuarantineCallback::stack_" data-ref-filename="__asan..QuarantineCallback..stack_">stack_</a>(<a class="local col2 ref" href="#322stack" title='stack' data-ref="322stack" data-ref-filename="322stack">stack</a>) {</td></tr>
<tr><th id="198">198</th><td>  }</td></tr>
<tr><th id="199">199</th><td></td></tr>
<tr><th id="200">200</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::QuarantineCallback::Recycle" title='__asan::QuarantineCallback::Recycle' data-type='void __asan::QuarantineCallback::Recycle(__asan::AsanChunk * m)' data-ref="__asan::QuarantineCallback::Recycle" data-ref-filename="__asan..QuarantineCallback..Recycle">Recycle</dfn>(<a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col3 decl" id="323m" title='m' data-type='__asan::AsanChunk *' data-ref="323m" data-ref-filename="323m">m</dfn>) {</td></tr>
<tr><th id="201">201</th><td>    <em>void</em> *<dfn class="local col4 decl" id="324p" title='p' data-type='void *' data-ref="324p" data-ref-filename="324p">p</dfn> = <a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>().<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::GetBlockBegin" title='__sanitizer::CombinedAllocator::GetBlockBegin' data-ref="__sanitizer::CombinedAllocator::GetBlockBegin" data-ref-filename="__sanitizer..CombinedAllocator..GetBlockBegin">GetBlockBegin</a>(<a class="local col3 ref" href="#323m" title='m' data-ref="323m" data-ref-filename="323m">m</a>);</td></tr>
<tr><th id="202">202</th><td>    <b>if</b> (<a class="local col4 ref" href="#324p" title='p' data-ref="324p" data-ref-filename="324p">p</a> != <a class="local col3 ref" href="#323m" title='m' data-ref="323m" data-ref-filename="323m">m</a>) {</td></tr>
<tr><th id="203">203</th><td>      <i>// Clear the magic value, as allocator internals may overwrite the</i></td></tr>
<tr><th id="204">204</th><td><i>      // contents of deallocated chunk, confusing GetAsanChunk lookup.</i></td></tr>
<tr><th id="205">205</th><td>      <b>reinterpret_cast</b>&lt;<a class="type" href="#__asan::LargeChunkHeader" title='__asan::LargeChunkHeader' data-ref="__asan::LargeChunkHeader" data-ref-filename="__asan..LargeChunkHeader">LargeChunkHeader</a> *&gt;(<a class="local col4 ref" href="#324p" title='p' data-ref="324p" data-ref-filename="324p">p</a>)-&gt;<a class="tu ref fn" href="#__asan::LargeChunkHeader::Set" title='__asan::LargeChunkHeader::Set' data-use='c' data-ref="__asan::LargeChunkHeader::Set" data-ref-filename="__asan..LargeChunkHeader..Set">Set</a>(<b>nullptr</b>);</td></tr>
<tr><th id="206">206</th><td>    }</td></tr>
<tr><th id="207">207</th><td></td></tr>
<tr><th id="208">208</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="local col5 decl" id="325old_chunk_state" title='old_chunk_state' data-type='__sanitizer::u8' data-ref="325old_chunk_state" data-ref-filename="325old_chunk_state">old_chunk_state</dfn> = <a class="enum" href="#__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</a>;</td></tr>
<tr><th id="209">209</th><td>    <b>if</b> (!<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang.h.html#__sanitizer::atomic_compare_exchange_strong" title='__sanitizer::atomic_compare_exchange_strong' data-ref="__sanitizer::atomic_compare_exchange_strong" data-ref-filename="__sanitizer..atomic_compare_exchange_strong">atomic_compare_exchange_strong</a>(&amp;<a class="local col3 ref" href="#323m" title='m' data-ref="323m" data-ref-filename="323m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, &amp;<a class="local col5 ref" href="#325old_chunk_state" title='old_chunk_state' data-ref="325old_chunk_state" data-ref-filename="325old_chunk_state">old_chunk_state</a>,</td></tr>
<tr><th id="210">210</th><td>                                        <a class="enum" href="#__asan::CHUNK_INVALID" title='__asan::CHUNK_INVALID' data-ref="__asan::CHUNK_INVALID" data-ref-filename="__asan..CHUNK_INVALID">CHUNK_INVALID</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>)) {</td></tr>
<tr><th id="211">211</th><td>      <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((old_chunk_state)); __sanitizer::u64 v2 = (__sanitizer::u64)((CHUNK_QUARANTINE)); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 211, &quot;(&quot; &quot;(old_chunk_state)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(CHUNK_QUARANTINE)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col5 ref" href="#325old_chunk_state" title='old_chunk_state' data-ref="325old_chunk_state" data-ref-filename="325old_chunk_state">old_chunk_state</a>, <a class="enum" href="#__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</a>);</td></tr>
<tr><th id="212">212</th><td>    }</td></tr>
<tr><th id="213">213</th><td></td></tr>
<tr><th id="214">214</th><td>    <a class="ref fn" href="asan_poisoning.h.html#__asan::PoisonShadow" title='__asan::PoisonShadow' data-ref="__asan::PoisonShadow" data-ref-filename="__asan..PoisonShadow">PoisonShadow</a>(<a class="local col3 ref" href="#323m" title='m' data-ref="323m" data-ref-filename="323m">m</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>(),</td></tr>
<tr><th id="215">215</th><td>                 <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::RoundUpTo" title='__sanitizer::RoundUpTo' data-ref="__sanitizer::RoundUpTo" data-ref-filename="__sanitizer..RoundUpTo">RoundUpTo</a>(<a class="local col3 ref" href="#323m" title='m' data-ref="323m" data-ref-filename="323m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>(), <a class="macro" href="asan_mapping.h.html#257" title="(1ULL &lt;&lt; kDefaultShadowScale)" data-ref="_M/SHADOW_GRANULARITY">SHADOW_GRANULARITY</a>),</td></tr>
<tr><th id="216">216</th><td>                 <a class="ref" href="asan_internal.h.html#__asan::kAsanHeapLeftRedzoneMagic" title='__asan::kAsanHeapLeftRedzoneMagic' data-ref="__asan::kAsanHeapLeftRedzoneMagic" data-ref-filename="__asan..kAsanHeapLeftRedzoneMagic">kAsanHeapLeftRedzoneMagic</a>);</td></tr>
<tr><th id="217">217</th><td></td></tr>
<tr><th id="218">218</th><td>    <i>// Statistics.</i></td></tr>
<tr><th id="219">219</th><td>    <a class="type" href="asan_stats.h.html#__asan::AsanStats" title='__asan::AsanStats' data-ref="__asan::AsanStats" data-ref-filename="__asan..AsanStats">AsanStats</a> &amp;<dfn class="local col6 decl" id="326thread_stats" title='thread_stats' data-type='__asan::AsanStats &amp;' data-ref="326thread_stats" data-ref-filename="326thread_stats">thread_stats</dfn> = <a class="ref fn" href="asan_stats.h.html#__asan::GetCurrentThreadStats" title='__asan::GetCurrentThreadStats' data-ref="__asan::GetCurrentThreadStats" data-ref-filename="__asan..GetCurrentThreadStats">GetCurrentThreadStats</a>();</td></tr>
<tr><th id="220">220</th><td>    <a class="local col6 ref" href="#326thread_stats" title='thread_stats' data-ref="326thread_stats" data-ref-filename="326thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::real_frees" title='__asan::AsanStats::real_frees' data-ref="__asan::AsanStats::real_frees" data-ref-filename="__asan..AsanStats..real_frees">real_frees</a>++;</td></tr>
<tr><th id="221">221</th><td>    <a class="local col6 ref" href="#326thread_stats" title='thread_stats' data-ref="326thread_stats" data-ref-filename="326thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::really_freed" title='__asan::AsanStats::really_freed' data-ref="__asan::AsanStats::really_freed" data-ref-filename="__asan..AsanStats..really_freed">really_freed</a> += <a class="local col3 ref" href="#323m" title='m' data-ref="323m" data-ref-filename="323m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>();</td></tr>
<tr><th id="222">222</th><td></td></tr>
<tr><th id="223">223</th><td>    <a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>().<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::Deallocate" title='__sanitizer::CombinedAllocator::Deallocate' data-ref="__sanitizer::CombinedAllocator::Deallocate" data-ref-filename="__sanitizer..CombinedAllocator..Deallocate">Deallocate</a>(<a class="tu member field" href="#__asan::QuarantineCallback::cache_" title='__asan::QuarantineCallback::cache_' data-use='r' data-ref="__asan::QuarantineCallback::cache_" data-ref-filename="__asan..QuarantineCallback..cache_">cache_</a>, <a class="local col4 ref" href="#324p" title='p' data-ref="324p" data-ref-filename="324p">p</a>);</td></tr>
<tr><th id="224">224</th><td>  }</td></tr>
<tr><th id="225">225</th><td></td></tr>
<tr><th id="226">226</th><td>  <em>void</em> *<dfn class="tu decl def fn" id="__asan::QuarantineCallback::Allocate" title='__asan::QuarantineCallback::Allocate' data-type='void * __asan::QuarantineCallback::Allocate(__sanitizer::uptr size)' data-ref="__asan::QuarantineCallback::Allocate" data-ref-filename="__asan..QuarantineCallback..Allocate">Allocate</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="327size" title='size' data-type='__sanitizer::uptr' data-ref="327size" data-ref-filename="327size">size</dfn>) {</td></tr>
<tr><th id="227">227</th><td>    <em>void</em> *<dfn class="local col8 decl" id="328res" title='res' data-type='void *' data-ref="328res" data-ref-filename="328res">res</dfn> = <a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>().<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::Allocate" title='__sanitizer::CombinedAllocator::Allocate' data-ref="__sanitizer::CombinedAllocator::Allocate" data-ref-filename="__sanitizer..CombinedAllocator..Allocate">Allocate</a>(<a class="tu member field" href="#__asan::QuarantineCallback::cache_" title='__asan::QuarantineCallback::cache_' data-use='r' data-ref="__asan::QuarantineCallback::cache_" data-ref-filename="__asan..QuarantineCallback..cache_">cache_</a>, <a class="local col7 ref" href="#327size" title='size' data-ref="327size" data-ref-filename="327size">size</a>, <var>1</var>);</td></tr>
<tr><th id="228">228</th><td>    <i>// TODO(alekseys): Consider making quarantine OOM-friendly.</i></td></tr>
<tr><th id="229">229</th><td>    <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(!res), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(!<a class="local col8 ref" href="#328res" title='res' data-ref="328res" data-ref-filename="328res">res</a>))</td></tr>
<tr><th id="230">230</th><td>      <a class="ref fn" href="asan_report.h.html#__asan::ReportOutOfMemory" title='__asan::ReportOutOfMemory' data-ref="__asan::ReportOutOfMemory" data-ref-filename="__asan..ReportOutOfMemory">ReportOutOfMemory</a>(<a class="local col7 ref" href="#327size" title='size' data-ref="327size" data-ref-filename="327size">size</a>, <a class="tu member field" href="#__asan::QuarantineCallback::stack_" title='__asan::QuarantineCallback::stack_' data-use='r' data-ref="__asan::QuarantineCallback::stack_" data-ref-filename="__asan..QuarantineCallback..stack_">stack_</a>);</td></tr>
<tr><th id="231">231</th><td>    <b>return</b> <a class="local col8 ref" href="#328res" title='res' data-ref="328res" data-ref-filename="328res">res</a>;</td></tr>
<tr><th id="232">232</th><td>  }</td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::QuarantineCallback::Deallocate" title='__asan::QuarantineCallback::Deallocate' data-type='void __asan::QuarantineCallback::Deallocate(void * p)' data-ref="__asan::QuarantineCallback::Deallocate" data-ref-filename="__asan..QuarantineCallback..Deallocate">Deallocate</dfn>(<em>void</em> *<dfn class="local col9 decl" id="329p" title='p' data-type='void *' data-ref="329p" data-ref-filename="329p">p</dfn>) {</td></tr>
<tr><th id="235">235</th><td>    <a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>().<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::Deallocate" title='__sanitizer::CombinedAllocator::Deallocate' data-ref="__sanitizer::CombinedAllocator::Deallocate" data-ref-filename="__sanitizer..CombinedAllocator..Deallocate">Deallocate</a>(<a class="tu member field" href="#__asan::QuarantineCallback::cache_" title='__asan::QuarantineCallback::cache_' data-use='r' data-ref="__asan::QuarantineCallback::cache_" data-ref-filename="__asan..QuarantineCallback..cache_">cache_</a>, <a class="local col9 ref" href="#329p" title='p' data-ref="329p" data-ref-filename="329p">p</a>);</td></tr>
<tr><th id="236">236</th><td>  }</td></tr>
<tr><th id="237">237</th><td></td></tr>
<tr><th id="238">238</th><td> <b>private</b>:</td></tr>
<tr><th id="239">239</th><td>  <a class="typedef" href="asan_allocator.h.html#__asan::AllocatorCache" title='__asan::AllocatorCache' data-type='AsanAllocator::AllocatorCache' data-ref="__asan::AllocatorCache" data-ref-filename="__asan..AllocatorCache">AllocatorCache</a>* <em>const</em> <dfn class="tu decl field" id="__asan::QuarantineCallback::cache_" title='__asan::QuarantineCallback::cache_' data-type='__asan::AllocatorCache *const' data-ref="__asan::QuarantineCallback::cache_" data-ref-filename="__asan..QuarantineCallback..cache_">cache_</dfn>;</td></tr>
<tr><th id="240">240</th><td>  <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a>* <em>const</em> <dfn class="tu decl field" id="__asan::QuarantineCallback::stack_" title='__asan::QuarantineCallback::stack_' data-type='__sanitizer::BufferedStackTrace *const' data-ref="__asan::QuarantineCallback::stack_" data-ref-filename="__asan..QuarantineCallback..stack_">stack_</dfn>;</td></tr>
<tr><th id="241">241</th><td>};</td></tr>
<tr><th id="242">242</th><td></td></tr>
<tr><th id="243">243</th><td><b>typedef</b> <a class="type" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine" title='__sanitizer::Quarantine' data-ref="__sanitizer::Quarantine" data-ref-filename="__sanitizer..Quarantine">Quarantine</a>&lt;<a class="type" href="#__asan::QuarantineCallback" title='__asan::QuarantineCallback' data-ref="__asan::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback">QuarantineCallback</a>, <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a>&gt; <dfn class="typedef" id="__asan::AsanQuarantine" title='__asan::AsanQuarantine' data-type='Quarantine&lt;__asan::QuarantineCallback, __asan::AsanChunk&gt;' data-ref="__asan::AsanQuarantine" data-ref-filename="__asan..AsanQuarantine">AsanQuarantine</dfn>;</td></tr>
<tr><th id="244">244</th><td><b>typedef</b> <a class="typedef" href="#__asan::AsanQuarantine" title='__asan::AsanQuarantine' data-type='Quarantine&lt;__asan::QuarantineCallback, __asan::AsanChunk&gt;' data-ref="__asan::AsanQuarantine" data-ref-filename="__asan..AsanQuarantine">AsanQuarantine</a>::<a class="typedef" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine{__asan::QuarantineCallback,__asan::AsanChunk}::Cache" title='__sanitizer::Quarantine&lt;__asan::QuarantineCallback, __asan::AsanChunk&gt;::Cache' data-type='QuarantineCache&lt;__asan::QuarantineCallback&gt;' data-ref="__sanitizer::Quarantine{__asan::QuarantineCallback,__asan::AsanChunk}::Cache" data-ref-filename="__sanitizer..Quarantine{__asan..QuarantineCallback,__asan..AsanChunk}..Cache">Cache</a> <dfn class="typedef" id="__asan::QuarantineCache" title='__asan::QuarantineCache' data-type='AsanQuarantine::Cache' data-ref="__asan::QuarantineCache" data-ref-filename="__asan..QuarantineCache">QuarantineCache</dfn>;</td></tr>
<tr><th id="245">245</th><td></td></tr>
<tr><th id="246">246</th><td><em>void</em> <a class="type" href="asan_allocator.h.html#__asan::AsanMapUnmapCallback" title='__asan::AsanMapUnmapCallback' data-ref="__asan::AsanMapUnmapCallback" data-ref-filename="__asan..AsanMapUnmapCallback">AsanMapUnmapCallback</a>::<dfn class="decl def fn" id="__asan::AsanMapUnmapCallback::OnMap" title='__asan::AsanMapUnmapCallback::OnMap' data-ref="__asan::AsanMapUnmapCallback::OnMap" data-ref-filename="__asan..AsanMapUnmapCallback..OnMap">OnMap</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="330p" title='p' data-type='__sanitizer::uptr' data-ref="330p" data-ref-filename="330p">p</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="331size" title='size' data-type='__sanitizer::uptr' data-ref="331size" data-ref-filename="331size">size</dfn>) <em>const</em> {</td></tr>
<tr><th id="247">247</th><td>  <a class="ref fn" href="asan_poisoning.h.html#__asan::PoisonShadow" title='__asan::PoisonShadow' data-ref="__asan::PoisonShadow" data-ref-filename="__asan..PoisonShadow">PoisonShadow</a>(<a class="local col0 ref" href="#330p" title='p' data-ref="330p" data-ref-filename="330p">p</a>, <a class="local col1 ref" href="#331size" title='size' data-ref="331size" data-ref-filename="331size">size</a>, <a class="ref" href="asan_internal.h.html#__asan::kAsanHeapLeftRedzoneMagic" title='__asan::kAsanHeapLeftRedzoneMagic' data-ref="__asan::kAsanHeapLeftRedzoneMagic" data-ref-filename="__asan..kAsanHeapLeftRedzoneMagic">kAsanHeapLeftRedzoneMagic</a>);</td></tr>
<tr><th id="248">248</th><td>  <i>// Statistics.</i></td></tr>
<tr><th id="249">249</th><td>  <a class="type" href="asan_stats.h.html#__asan::AsanStats" title='__asan::AsanStats' data-ref="__asan::AsanStats" data-ref-filename="__asan..AsanStats">AsanStats</a> &amp;<dfn class="local col2 decl" id="332thread_stats" title='thread_stats' data-type='__asan::AsanStats &amp;' data-ref="332thread_stats" data-ref-filename="332thread_stats">thread_stats</dfn> = <a class="ref fn" href="asan_stats.h.html#__asan::GetCurrentThreadStats" title='__asan::GetCurrentThreadStats' data-ref="__asan::GetCurrentThreadStats" data-ref-filename="__asan..GetCurrentThreadStats">GetCurrentThreadStats</a>();</td></tr>
<tr><th id="250">250</th><td>  <a class="local col2 ref" href="#332thread_stats" title='thread_stats' data-ref="332thread_stats" data-ref-filename="332thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::mmaps" title='__asan::AsanStats::mmaps' data-ref="__asan::AsanStats::mmaps" data-ref-filename="__asan..AsanStats..mmaps">mmaps</a>++;</td></tr>
<tr><th id="251">251</th><td>  <a class="local col2 ref" href="#332thread_stats" title='thread_stats' data-ref="332thread_stats" data-ref-filename="332thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::mmaped" title='__asan::AsanStats::mmaped' data-ref="__asan::AsanStats::mmaped" data-ref-filename="__asan..AsanStats..mmaped">mmaped</a> += <a class="local col1 ref" href="#331size" title='size' data-ref="331size" data-ref-filename="331size">size</a>;</td></tr>
<tr><th id="252">252</th><td>}</td></tr>
<tr><th id="253">253</th><td><em>void</em> <a class="type" href="asan_allocator.h.html#__asan::AsanMapUnmapCallback" title='__asan::AsanMapUnmapCallback' data-ref="__asan::AsanMapUnmapCallback" data-ref-filename="__asan..AsanMapUnmapCallback">AsanMapUnmapCallback</a>::<dfn class="decl def fn" id="__asan::AsanMapUnmapCallback::OnUnmap" title='__asan::AsanMapUnmapCallback::OnUnmap' data-ref="__asan::AsanMapUnmapCallback::OnUnmap" data-ref-filename="__asan..AsanMapUnmapCallback..OnUnmap">OnUnmap</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="333p" title='p' data-type='__sanitizer::uptr' data-ref="333p" data-ref-filename="333p">p</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="334size" title='size' data-type='__sanitizer::uptr' data-ref="334size" data-ref-filename="334size">size</dfn>) <em>const</em> {</td></tr>
<tr><th id="254">254</th><td>  <a class="ref fn" href="asan_poisoning.h.html#__asan::PoisonShadow" title='__asan::PoisonShadow' data-ref="__asan::PoisonShadow" data-ref-filename="__asan..PoisonShadow">PoisonShadow</a>(<a class="local col3 ref" href="#333p" title='p' data-ref="333p" data-ref-filename="333p">p</a>, <a class="local col4 ref" href="#334size" title='size' data-ref="334size" data-ref-filename="334size">size</a>, <var>0</var>);</td></tr>
<tr><th id="255">255</th><td>  <i>// We are about to unmap a chunk of user memory.</i></td></tr>
<tr><th id="256">256</th><td><i>  // Mark the corresponding shadow memory as not needed.</i></td></tr>
<tr><th id="257">257</th><td>  <a class="ref fn" href="asan_poisoning.h.html#__asan::FlushUnneededASanShadowMemory" title='__asan::FlushUnneededASanShadowMemory' data-ref="__asan::FlushUnneededASanShadowMemory" data-ref-filename="__asan..FlushUnneededASanShadowMemory">FlushUnneededASanShadowMemory</a>(<a class="local col3 ref" href="#333p" title='p' data-ref="333p" data-ref-filename="333p">p</a>, <a class="local col4 ref" href="#334size" title='size' data-ref="334size" data-ref-filename="334size">size</a>);</td></tr>
<tr><th id="258">258</th><td>  <i>// Statistics.</i></td></tr>
<tr><th id="259">259</th><td>  <a class="type" href="asan_stats.h.html#__asan::AsanStats" title='__asan::AsanStats' data-ref="__asan::AsanStats" data-ref-filename="__asan..AsanStats">AsanStats</a> &amp;<dfn class="local col5 decl" id="335thread_stats" title='thread_stats' data-type='__asan::AsanStats &amp;' data-ref="335thread_stats" data-ref-filename="335thread_stats">thread_stats</dfn> = <a class="ref fn" href="asan_stats.h.html#__asan::GetCurrentThreadStats" title='__asan::GetCurrentThreadStats' data-ref="__asan::GetCurrentThreadStats" data-ref-filename="__asan..GetCurrentThreadStats">GetCurrentThreadStats</a>();</td></tr>
<tr><th id="260">260</th><td>  <a class="local col5 ref" href="#335thread_stats" title='thread_stats' data-ref="335thread_stats" data-ref-filename="335thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::munmaps" title='__asan::AsanStats::munmaps' data-ref="__asan::AsanStats::munmaps" data-ref-filename="__asan..AsanStats..munmaps">munmaps</a>++;</td></tr>
<tr><th id="261">261</th><td>  <a class="local col5 ref" href="#335thread_stats" title='thread_stats' data-ref="335thread_stats" data-ref-filename="335thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::munmaped" title='__asan::AsanStats::munmaped' data-ref="__asan::AsanStats::munmaped" data-ref-filename="__asan..AsanStats..munmaped">munmaped</a> += <a class="local col4 ref" href="#334size" title='size' data-ref="334size" data-ref-filename="334size">size</a>;</td></tr>
<tr><th id="262">262</th><td>}</td></tr>
<tr><th id="263">263</th><td></td></tr>
<tr><th id="264">264</th><td><i>// We can not use THREADLOCAL because it is not supported on some of the</i></td></tr>
<tr><th id="265">265</th><td><i>// platforms we care about (OSX 10.6, Android).</i></td></tr>
<tr><th id="266">266</th><td><i>// static THREADLOCAL AllocatorCache cache;</i></td></tr>
<tr><th id="267">267</th><td><a class="typedef" href="asan_allocator.h.html#__asan::AllocatorCache" title='__asan::AllocatorCache' data-type='AsanAllocator::AllocatorCache' data-ref="__asan::AllocatorCache" data-ref-filename="__asan..AllocatorCache">AllocatorCache</a> *<dfn class="decl def fn" id="__asan::GetAllocatorCache" title='__asan::GetAllocatorCache' data-ref="__asan::GetAllocatorCache" data-ref-filename="__asan..GetAllocatorCache">GetAllocatorCache</dfn>(<a class="type" href="asan_allocator.h.html#__asan::AsanThreadLocalMallocStorage" title='__asan::AsanThreadLocalMallocStorage' data-ref="__asan::AsanThreadLocalMallocStorage" data-ref-filename="__asan..AsanThreadLocalMallocStorage">AsanThreadLocalMallocStorage</a> *<dfn class="local col6 decl" id="336ms" title='ms' data-type='__asan::AsanThreadLocalMallocStorage *' data-ref="336ms" data-ref-filename="336ms">ms</dfn>) {</td></tr>
<tr><th id="268">268</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((ms)); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 268, &quot;(&quot; &quot;(ms)&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="local col6 ref" href="#336ms" title='ms' data-ref="336ms" data-ref-filename="336ms">ms</a>);</td></tr>
<tr><th id="269">269</th><td>  <b>return</b> &amp;<a class="local col6 ref" href="#336ms" title='ms' data-ref="336ms" data-ref-filename="336ms">ms</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AsanThreadLocalMallocStorage::allocator_cache" title='__asan::AsanThreadLocalMallocStorage::allocator_cache' data-ref="__asan::AsanThreadLocalMallocStorage::allocator_cache" data-ref-filename="__asan..AsanThreadLocalMallocStorage..allocator_cache">allocator_cache</a>;</td></tr>
<tr><th id="270">270</th><td>}</td></tr>
<tr><th id="271">271</th><td></td></tr>
<tr><th id="272">272</th><td><a class="typedef" href="#__asan::QuarantineCache" title='__asan::QuarantineCache' data-type='AsanQuarantine::Cache' data-ref="__asan::QuarantineCache" data-ref-filename="__asan..QuarantineCache">QuarantineCache</a> *<dfn class="decl def fn" id="__asan::GetQuarantineCache" title='__asan::GetQuarantineCache' data-ref="__asan::GetQuarantineCache" data-ref-filename="__asan..GetQuarantineCache">GetQuarantineCache</dfn>(<a class="type" href="asan_allocator.h.html#__asan::AsanThreadLocalMallocStorage" title='__asan::AsanThreadLocalMallocStorage' data-ref="__asan::AsanThreadLocalMallocStorage" data-ref-filename="__asan..AsanThreadLocalMallocStorage">AsanThreadLocalMallocStorage</a> *<dfn class="local col7 decl" id="337ms" title='ms' data-type='__asan::AsanThreadLocalMallocStorage *' data-ref="337ms" data-ref-filename="337ms">ms</dfn>) {</td></tr>
<tr><th id="273">273</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((ms)); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 273, &quot;(&quot; &quot;(ms)&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="local col7 ref" href="#337ms" title='ms' data-ref="337ms" data-ref-filename="337ms">ms</a>);</td></tr>
<tr><th id="274">274</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#303" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((sizeof(QuarantineCache))); __sanitizer::u64 v2 = (__sanitizer::u64)((sizeof(ms-&gt;quarantine_cache))); if (__builtin_expect(!!(!(v1 &lt;= v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 274, &quot;(&quot; &quot;(sizeof(QuarantineCache))&quot; &quot;) &quot; &quot;&lt;=&quot; &quot; (&quot; &quot;(sizeof(ms-&gt;quarantine_cache))&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_LE">CHECK_LE</a>(<b>sizeof</b>(<a class="typedef" href="#__asan::QuarantineCache" title='__asan::QuarantineCache' data-type='AsanQuarantine::Cache' data-ref="__asan::QuarantineCache" data-ref-filename="__asan..QuarantineCache">QuarantineCache</a>), <b>sizeof</b>(<a class="local col7 ref" href="#337ms" title='ms' data-ref="337ms" data-ref-filename="337ms">ms</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AsanThreadLocalMallocStorage::quarantine_cache" title='__asan::AsanThreadLocalMallocStorage::quarantine_cache' data-ref="__asan::AsanThreadLocalMallocStorage::quarantine_cache" data-ref-filename="__asan..AsanThreadLocalMallocStorage..quarantine_cache">quarantine_cache</a>));</td></tr>
<tr><th id="275">275</th><td>  <b>return</b> <b>reinterpret_cast</b>&lt;<a class="typedef" href="#__asan::QuarantineCache" title='__asan::QuarantineCache' data-type='AsanQuarantine::Cache' data-ref="__asan::QuarantineCache" data-ref-filename="__asan..QuarantineCache">QuarantineCache</a> *&gt;(<a class="local col7 ref" href="#337ms" title='ms' data-ref="337ms" data-ref-filename="337ms">ms</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AsanThreadLocalMallocStorage::quarantine_cache" title='__asan::AsanThreadLocalMallocStorage::quarantine_cache' data-ref="__asan::AsanThreadLocalMallocStorage::quarantine_cache" data-ref-filename="__asan..AsanThreadLocalMallocStorage..quarantine_cache">quarantine_cache</a>);</td></tr>
<tr><th id="276">276</th><td>}</td></tr>
<tr><th id="277">277</th><td></td></tr>
<tr><th id="278">278</th><td><em>void</em> <a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a>::<dfn class="decl def fn" id="__asan::AllocatorOptions::SetFrom" title='__asan::AllocatorOptions::SetFrom' data-ref="__asan::AllocatorOptions::SetFrom" data-ref-filename="__asan..AllocatorOptions..SetFrom">SetFrom</dfn>(<em>const</em> <a class="type" href="asan_flags.h.html#__asan::Flags" title='__asan::Flags' data-ref="__asan::Flags" data-ref-filename="__asan..Flags">Flags</a> *<dfn class="local col8 decl" id="338f" title='f' data-type='const __asan::Flags *' data-ref="338f" data-ref-filename="338f">f</dfn>, <em>const</em> <a class="type" href="../sanitizer_common/sanitizer_flags.h.html#__sanitizer::CommonFlags" title='__sanitizer::CommonFlags' data-ref="__sanitizer::CommonFlags" data-ref-filename="__sanitizer..CommonFlags">CommonFlags</a> *<dfn class="local col9 decl" id="339cf" title='cf' data-type='const __sanitizer::CommonFlags *' data-ref="339cf" data-ref-filename="339cf">cf</dfn>) {</td></tr>
<tr><th id="279">279</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::quarantine_size_mb" title='__asan::AllocatorOptions::quarantine_size_mb' data-ref="__asan::AllocatorOptions::quarantine_size_mb" data-ref-filename="__asan..AllocatorOptions..quarantine_size_mb">quarantine_size_mb</a> = <a class="local col8 ref" href="#338f" title='f' data-ref="338f" data-ref-filename="338f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#21" title='__asan::Flags::quarantine_size_mb' data-ref="__asan::Flags::quarantine_size_mb" data-ref-filename="__asan..Flags..quarantine_size_mb">quarantine_size_mb</a>;</td></tr>
<tr><th id="280">280</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::thread_local_quarantine_size_kb" title='__asan::AllocatorOptions::thread_local_quarantine_size_kb' data-ref="__asan::AllocatorOptions::thread_local_quarantine_size_kb" data-ref-filename="__asan..AllocatorOptions..thread_local_quarantine_size_kb">thread_local_quarantine_size_kb</a> = <a class="local col8 ref" href="#338f" title='f' data-ref="338f" data-ref-filename="338f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#25" title='__asan::Flags::thread_local_quarantine_size_kb' data-ref="__asan::Flags::thread_local_quarantine_size_kb" data-ref-filename="__asan..Flags..thread_local_quarantine_size_kb">thread_local_quarantine_size_kb</a>;</td></tr>
<tr><th id="281">281</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::min_redzone" title='__asan::AllocatorOptions::min_redzone' data-ref="__asan::AllocatorOptions::min_redzone" data-ref-filename="__asan..AllocatorOptions..min_redzone">min_redzone</a> = <a class="local col8 ref" href="#338f" title='f' data-ref="338f" data-ref-filename="338f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#31" title='__asan::Flags::redzone' data-ref="__asan::Flags::redzone" data-ref-filename="__asan..Flags..redzone">redzone</a>;</td></tr>
<tr><th id="282">282</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::max_redzone" title='__asan::AllocatorOptions::max_redzone' data-ref="__asan::AllocatorOptions::max_redzone" data-ref-filename="__asan..AllocatorOptions..max_redzone">max_redzone</a> = <a class="local col8 ref" href="#338f" title='f' data-ref="338f" data-ref-filename="338f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#34" title='__asan::Flags::max_redzone' data-ref="__asan::Flags::max_redzone" data-ref-filename="__asan..Flags..max_redzone">max_redzone</a>;</td></tr>
<tr><th id="283">283</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::may_return_null" title='__asan::AllocatorOptions::may_return_null' data-ref="__asan::AllocatorOptions::may_return_null" data-ref-filename="__asan..AllocatorOptions..may_return_null">may_return_null</a> = <a class="local col9 ref" href="#339cf" title='cf' data-ref="339cf" data-ref-filename="339cf">cf</a>-&gt;<a class="ref field" href="../sanitizer_common/sanitizer_flags.inc.html#78" title='__sanitizer::CommonFlags::allocator_may_return_null' data-ref="__sanitizer::CommonFlags::allocator_may_return_null" data-ref-filename="__sanitizer..CommonFlags..allocator_may_return_null">allocator_may_return_null</a>;</td></tr>
<tr><th id="284">284</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::alloc_dealloc_mismatch" title='__asan::AllocatorOptions::alloc_dealloc_mismatch' data-ref="__asan::AllocatorOptions::alloc_dealloc_mismatch" data-ref-filename="__asan..AllocatorOptions..alloc_dealloc_mismatch">alloc_dealloc_mismatch</a> = <a class="local col8 ref" href="#338f" title='f' data-ref="338f" data-ref-filename="338f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#120" title='__asan::Flags::alloc_dealloc_mismatch' data-ref="__asan::Flags::alloc_dealloc_mismatch" data-ref-filename="__asan..Flags..alloc_dealloc_mismatch">alloc_dealloc_mismatch</a>;</td></tr>
<tr><th id="285">285</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::release_to_os_interval_ms" title='__asan::AllocatorOptions::release_to_os_interval_ms' data-ref="__asan::AllocatorOptions::release_to_os_interval_ms" data-ref-filename="__asan..AllocatorOptions..release_to_os_interval_ms">release_to_os_interval_ms</a> = <a class="local col9 ref" href="#339cf" title='cf' data-ref="339cf" data-ref-filename="339cf">cf</a>-&gt;<a class="ref field" href="../sanitizer_common/sanitizer_flags.inc.html#145" title='__sanitizer::CommonFlags::allocator_release_to_os_interval_ms' data-ref="__sanitizer::CommonFlags::allocator_release_to_os_interval_ms" data-ref-filename="__sanitizer..CommonFlags..allocator_release_to_os_interval_ms">allocator_release_to_os_interval_ms</a>;</td></tr>
<tr><th id="286">286</th><td>}</td></tr>
<tr><th id="287">287</th><td></td></tr>
<tr><th id="288">288</th><td><em>void</em> <a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a>::<dfn class="decl def fn" id="__asan::AllocatorOptions::CopyTo" title='__asan::AllocatorOptions::CopyTo' data-ref="__asan::AllocatorOptions::CopyTo" data-ref-filename="__asan..AllocatorOptions..CopyTo">CopyTo</dfn>(<a class="type" href="asan_flags.h.html#__asan::Flags" title='__asan::Flags' data-ref="__asan::Flags" data-ref-filename="__asan..Flags">Flags</a> *<dfn class="local col0 decl" id="340f" title='f' data-type='__asan::Flags *' data-ref="340f" data-ref-filename="340f">f</dfn>, <a class="type" href="../sanitizer_common/sanitizer_flags.h.html#__sanitizer::CommonFlags" title='__sanitizer::CommonFlags' data-ref="__sanitizer::CommonFlags" data-ref-filename="__sanitizer..CommonFlags">CommonFlags</a> *<dfn class="local col1 decl" id="341cf" title='cf' data-type='__sanitizer::CommonFlags *' data-ref="341cf" data-ref-filename="341cf">cf</dfn>) {</td></tr>
<tr><th id="289">289</th><td>  <a class="local col0 ref" href="#340f" title='f' data-ref="340f" data-ref-filename="340f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#21" title='__asan::Flags::quarantine_size_mb' data-ref="__asan::Flags::quarantine_size_mb" data-ref-filename="__asan..Flags..quarantine_size_mb">quarantine_size_mb</a> = <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::quarantine_size_mb" title='__asan::AllocatorOptions::quarantine_size_mb' data-ref="__asan::AllocatorOptions::quarantine_size_mb" data-ref-filename="__asan..AllocatorOptions..quarantine_size_mb">quarantine_size_mb</a>;</td></tr>
<tr><th id="290">290</th><td>  <a class="local col0 ref" href="#340f" title='f' data-ref="340f" data-ref-filename="340f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#25" title='__asan::Flags::thread_local_quarantine_size_kb' data-ref="__asan::Flags::thread_local_quarantine_size_kb" data-ref-filename="__asan..Flags..thread_local_quarantine_size_kb">thread_local_quarantine_size_kb</a> = <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::thread_local_quarantine_size_kb" title='__asan::AllocatorOptions::thread_local_quarantine_size_kb' data-ref="__asan::AllocatorOptions::thread_local_quarantine_size_kb" data-ref-filename="__asan..AllocatorOptions..thread_local_quarantine_size_kb">thread_local_quarantine_size_kb</a>;</td></tr>
<tr><th id="291">291</th><td>  <a class="local col0 ref" href="#340f" title='f' data-ref="340f" data-ref-filename="340f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#31" title='__asan::Flags::redzone' data-ref="__asan::Flags::redzone" data-ref-filename="__asan..Flags..redzone">redzone</a> = <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::min_redzone" title='__asan::AllocatorOptions::min_redzone' data-ref="__asan::AllocatorOptions::min_redzone" data-ref-filename="__asan..AllocatorOptions..min_redzone">min_redzone</a>;</td></tr>
<tr><th id="292">292</th><td>  <a class="local col0 ref" href="#340f" title='f' data-ref="340f" data-ref-filename="340f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#34" title='__asan::Flags::max_redzone' data-ref="__asan::Flags::max_redzone" data-ref-filename="__asan..Flags..max_redzone">max_redzone</a> = <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::max_redzone" title='__asan::AllocatorOptions::max_redzone' data-ref="__asan::AllocatorOptions::max_redzone" data-ref-filename="__asan..AllocatorOptions..max_redzone">max_redzone</a>;</td></tr>
<tr><th id="293">293</th><td>  <a class="local col1 ref" href="#341cf" title='cf' data-ref="341cf" data-ref-filename="341cf">cf</a>-&gt;<a class="ref field" href="../sanitizer_common/sanitizer_flags.inc.html#78" title='__sanitizer::CommonFlags::allocator_may_return_null' data-ref="__sanitizer::CommonFlags::allocator_may_return_null" data-ref-filename="__sanitizer..CommonFlags..allocator_may_return_null">allocator_may_return_null</a> = <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::may_return_null" title='__asan::AllocatorOptions::may_return_null' data-ref="__asan::AllocatorOptions::may_return_null" data-ref-filename="__asan..AllocatorOptions..may_return_null">may_return_null</a>;</td></tr>
<tr><th id="294">294</th><td>  <a class="local col0 ref" href="#340f" title='f' data-ref="340f" data-ref-filename="340f">f</a>-&gt;<a class="ref field" href="asan_flags.inc.html#120" title='__asan::Flags::alloc_dealloc_mismatch' data-ref="__asan::Flags::alloc_dealloc_mismatch" data-ref-filename="__asan..Flags..alloc_dealloc_mismatch">alloc_dealloc_mismatch</a> = <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::alloc_dealloc_mismatch" title='__asan::AllocatorOptions::alloc_dealloc_mismatch' data-ref="__asan::AllocatorOptions::alloc_dealloc_mismatch" data-ref-filename="__asan..AllocatorOptions..alloc_dealloc_mismatch">alloc_dealloc_mismatch</a>;</td></tr>
<tr><th id="295">295</th><td>  <a class="local col1 ref" href="#341cf" title='cf' data-ref="341cf" data-ref-filename="341cf">cf</a>-&gt;<a class="ref field" href="../sanitizer_common/sanitizer_flags.inc.html#145" title='__sanitizer::CommonFlags::allocator_release_to_os_interval_ms' data-ref="__sanitizer::CommonFlags::allocator_release_to_os_interval_ms" data-ref-filename="__sanitizer..CommonFlags..allocator_release_to_os_interval_ms">allocator_release_to_os_interval_ms</a> = <a class="member field" href="asan_allocator.h.html#__asan::AllocatorOptions::release_to_os_interval_ms" title='__asan::AllocatorOptions::release_to_os_interval_ms' data-ref="__asan::AllocatorOptions::release_to_os_interval_ms" data-ref-filename="__asan..AllocatorOptions..release_to_os_interval_ms">release_to_os_interval_ms</a>;</td></tr>
<tr><th id="296">296</th><td>}</td></tr>
<tr><th id="297">297</th><td></td></tr>
<tr><th id="298">298</th><td><b>struct</b> <dfn class="type def" id="__asan::Allocator" title='__asan::Allocator' data-ref="__asan::Allocator" data-ref-filename="__asan..Allocator">Allocator</dfn> {</td></tr>
<tr><th id="299">299</th><td>  <em>static</em> <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl" id="__asan::Allocator::kMaxAllowedMallocSize" title='__asan::Allocator::kMaxAllowedMallocSize' data-type='const __sanitizer::uptr' data-ref="__asan::Allocator::kMaxAllowedMallocSize" data-ref-filename="__asan..Allocator..kMaxAllowedMallocSize">kMaxAllowedMallocSize</dfn> =</td></tr>
<tr><th id="300">300</th><td>      <a class="macro" href="../sanitizer_common/sanitizer_platform.h.html#131" title="(1ULL &lt;&lt; 40)" data-ref="_M/FIRST_32_SECOND_64">FIRST_32_SECOND_64</a>(<var>3UL</var> &lt;&lt; <var>30</var>, <var>1ULL</var> &lt;&lt; <var>40</var>);</td></tr>
<tr><th id="301">301</th><td></td></tr>
<tr><th id="302">302</th><td>  <a class="typedef" href="asan_allocator.h.html#__asan::AsanAllocator" title='__asan::AsanAllocator' data-type='AsanAllocatorASVT&lt;__sanitizer::LocalAddressSpaceView&gt;' data-ref="__asan::AsanAllocator" data-ref-filename="__asan..AsanAllocator">AsanAllocator</a> <dfn class="tu decl field" id="__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-type='__asan::AsanAllocator' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</dfn>;</td></tr>
<tr><th id="303">303</th><td>  <a class="typedef" href="#__asan::AsanQuarantine" title='__asan::AsanQuarantine' data-type='Quarantine&lt;__asan::QuarantineCallback, __asan::AsanChunk&gt;' data-ref="__asan::AsanQuarantine" data-ref-filename="__asan..AsanQuarantine">AsanQuarantine</a> <dfn class="tu decl field" id="__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-type='__asan::AsanQuarantine' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</dfn>;</td></tr>
<tr><th id="304">304</th><td>  <a class="type" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::StaticSpinMutex" title='__sanitizer::StaticSpinMutex' data-ref="__sanitizer::StaticSpinMutex" data-ref-filename="__sanitizer..StaticSpinMutex">StaticSpinMutex</a> <dfn class="tu decl field" id="__asan::Allocator::fallback_mutex" title='__asan::Allocator::fallback_mutex' data-type='__sanitizer::StaticSpinMutex' data-ref="__asan::Allocator::fallback_mutex" data-ref-filename="__asan..Allocator..fallback_mutex">fallback_mutex</dfn>;</td></tr>
<tr><th id="305">305</th><td>  <a class="typedef" href="asan_allocator.h.html#__asan::AllocatorCache" title='__asan::AllocatorCache' data-type='AsanAllocator::AllocatorCache' data-ref="__asan::AllocatorCache" data-ref-filename="__asan..AllocatorCache">AllocatorCache</a> <dfn class="tu decl field" id="__asan::Allocator::fallback_allocator_cache" title='__asan::Allocator::fallback_allocator_cache' data-type='__asan::AllocatorCache' data-ref="__asan::Allocator::fallback_allocator_cache" data-ref-filename="__asan..Allocator..fallback_allocator_cache">fallback_allocator_cache</dfn>;</td></tr>
<tr><th id="306">306</th><td>  <a class="typedef" href="#__asan::QuarantineCache" title='__asan::QuarantineCache' data-type='AsanQuarantine::Cache' data-ref="__asan::QuarantineCache" data-ref-filename="__asan..QuarantineCache">QuarantineCache</a> <dfn class="tu decl field" id="__asan::Allocator::fallback_quarantine_cache" title='__asan::Allocator::fallback_quarantine_cache' data-type='__asan::QuarantineCache' data-ref="__asan::Allocator::fallback_quarantine_cache" data-ref-filename="__asan..Allocator..fallback_quarantine_cache">fallback_quarantine_cache</dfn>;</td></tr>
<tr><th id="307">307</th><td></td></tr>
<tr><th id="308">308</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl field" id="__asan::Allocator::max_user_defined_malloc_size" title='__asan::Allocator::max_user_defined_malloc_size' data-type='__sanitizer::uptr' data-ref="__asan::Allocator::max_user_defined_malloc_size" data-ref-filename="__asan..Allocator..max_user_defined_malloc_size">max_user_defined_malloc_size</dfn>;</td></tr>
<tr><th id="309">309</th><td>  <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint8_t" title='__sanitizer::atomic_uint8_t' data-ref="__sanitizer::atomic_uint8_t" data-ref-filename="__sanitizer..atomic_uint8_t">atomic_uint8_t</a> <dfn class="tu decl field" id="__asan::Allocator::rss_limit_exceeded" title='__asan::Allocator::rss_limit_exceeded' data-type='__sanitizer::atomic_uint8_t' data-ref="__asan::Allocator::rss_limit_exceeded" data-ref-filename="__asan..Allocator..rss_limit_exceeded">rss_limit_exceeded</dfn>;</td></tr>
<tr><th id="310">310</th><td></td></tr>
<tr><th id="311">311</th><td>  <i  data-doc="__asan::Allocator::min_redzone">// ------------------- Options --------------------------</i></td></tr>
<tr><th id="312">312</th><td>  <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint16_t" title='__sanitizer::atomic_uint16_t' data-ref="__sanitizer::atomic_uint16_t" data-ref-filename="__sanitizer..atomic_uint16_t">atomic_uint16_t</a> <dfn class="tu decl field" id="__asan::Allocator::min_redzone" title='__asan::Allocator::min_redzone' data-type='__sanitizer::atomic_uint16_t' data-ref="__asan::Allocator::min_redzone" data-ref-filename="__asan..Allocator..min_redzone">min_redzone</dfn>;</td></tr>
<tr><th id="313">313</th><td>  <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint16_t" title='__sanitizer::atomic_uint16_t' data-ref="__sanitizer::atomic_uint16_t" data-ref-filename="__sanitizer..atomic_uint16_t">atomic_uint16_t</a> <dfn class="tu decl field" id="__asan::Allocator::max_redzone" title='__asan::Allocator::max_redzone' data-type='__sanitizer::atomic_uint16_t' data-ref="__asan::Allocator::max_redzone" data-ref-filename="__asan..Allocator..max_redzone">max_redzone</dfn>;</td></tr>
<tr><th id="314">314</th><td>  <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint8_t" title='__sanitizer::atomic_uint8_t' data-ref="__sanitizer::atomic_uint8_t" data-ref-filename="__sanitizer..atomic_uint8_t">atomic_uint8_t</a> <dfn class="tu decl field" id="__asan::Allocator::alloc_dealloc_mismatch" title='__asan::Allocator::alloc_dealloc_mismatch' data-type='__sanitizer::atomic_uint8_t' data-ref="__asan::Allocator::alloc_dealloc_mismatch" data-ref-filename="__asan..Allocator..alloc_dealloc_mismatch">alloc_dealloc_mismatch</dfn>;</td></tr>
<tr><th id="315">315</th><td></td></tr>
<tr><th id="316">316</th><td>  <i  data-doc="__asan::Allocator::Allocator">// ------------------- Initialization ------------------------</i></td></tr>
<tr><th id="317">317</th><td>  <b>explicit</b> <dfn class="tu decl def fn" id="__asan::Allocator::Allocator" title='__asan::Allocator::Allocator' data-type='void __asan::Allocator::Allocator(__sanitizer::LinkerInitialized )' data-ref="__asan::Allocator::Allocator" data-ref-filename="__asan..Allocator..Allocator">Allocator</dfn>(<a class="type" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::LinkerInitialized" title='__sanitizer::LinkerInitialized' data-ref="__sanitizer::LinkerInitialized" data-ref-filename="__sanitizer..LinkerInitialized">LinkerInitialized</a>)</td></tr>
<tr><th id="318">318</th><td>      : <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='w' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a><a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::Quarantine{Callback,Node}" title='__sanitizer::Quarantine::Quarantine&lt;Callback, Node&gt;' data-ref="__sanitizer::Quarantine::Quarantine{Callback,Node}" data-ref-filename="__sanitizer..Quarantine..Quarantine{Callback,Node}">(</a><a class="enum" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::LINKER_INITIALIZED" title='__sanitizer::LINKER_INITIALIZED' data-ref="__sanitizer::LINKER_INITIALIZED" data-ref-filename="__sanitizer..LINKER_INITIALIZED">LINKER_INITIALIZED</a>),</td></tr>
<tr><th id="319">319</th><td>        <a class="tu member field" href="#__asan::Allocator::fallback_quarantine_cache" title='__asan::Allocator::fallback_quarantine_cache' data-use='w' data-ref="__asan::Allocator::fallback_quarantine_cache" data-ref-filename="__asan..Allocator..fallback_quarantine_cache">fallback_quarantine_cache</a><a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::QuarantineCache::QuarantineCache{Node}" title='__sanitizer::QuarantineCache::QuarantineCache&lt;Node&gt;' data-ref="__sanitizer::QuarantineCache::QuarantineCache{Node}" data-ref-filename="__sanitizer..QuarantineCache..QuarantineCache{Node}">(</a><a class="enum" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::LINKER_INITIALIZED" title='__sanitizer::LINKER_INITIALIZED' data-ref="__sanitizer::LINKER_INITIALIZED" data-ref-filename="__sanitizer..LINKER_INITIALIZED">LINKER_INITIALIZED</a>) {}</td></tr>
<tr><th id="320">320</th><td></td></tr>
<tr><th id="321">321</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::CheckOptions" title='__asan::Allocator::CheckOptions' data-type='void __asan::Allocator::CheckOptions(const __asan::AllocatorOptions &amp; options) const' data-ref="__asan::Allocator::CheckOptions" data-ref-filename="__asan..Allocator..CheckOptions">CheckOptions</dfn>(<em>const</em> <a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a> &amp;<dfn class="local col2 decl" id="342options" title='options' data-type='const __asan::AllocatorOptions &amp;' data-ref="342options" data-ref-filename="342options">options</dfn>) <em>const</em> {</td></tr>
<tr><th id="322">322</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#305" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((options.min_redzone)); __sanitizer::u64 v2 = (__sanitizer::u64)((16)); if (__builtin_expect(!!(!(v1 &gt;= v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 322, &quot;(&quot; &quot;(options.min_redzone)&quot; &quot;) &quot; &quot;&gt;=&quot; &quot; (&quot; &quot;(16)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_GE">CHECK_GE</a>(<a class="local col2 ref" href="#342options" title='options' data-ref="342options" data-ref-filename="342options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::min_redzone" title='__asan::AllocatorOptions::min_redzone' data-ref="__asan::AllocatorOptions::min_redzone" data-ref-filename="__asan..AllocatorOptions..min_redzone">min_redzone</a>, <var>16</var>);</td></tr>
<tr><th id="323">323</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#305" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((options.max_redzone)); __sanitizer::u64 v2 = (__sanitizer::u64)((options.min_redzone)); if (__builtin_expect(!!(!(v1 &gt;= v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 323, &quot;(&quot; &quot;(options.max_redzone)&quot; &quot;) &quot; &quot;&gt;=&quot; &quot; (&quot; &quot;(options.min_redzone)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_GE">CHECK_GE</a>(<a class="local col2 ref" href="#342options" title='options' data-ref="342options" data-ref-filename="342options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::max_redzone" title='__asan::AllocatorOptions::max_redzone' data-ref="__asan::AllocatorOptions::max_redzone" data-ref-filename="__asan..AllocatorOptions..max_redzone">max_redzone</a>, <a class="local col2 ref" href="#342options" title='options' data-ref="342options" data-ref-filename="342options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::min_redzone" title='__asan::AllocatorOptions::min_redzone' data-ref="__asan::AllocatorOptions::min_redzone" data-ref-filename="__asan..AllocatorOptions..min_redzone">min_redzone</a>);</td></tr>
<tr><th id="324">324</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#303" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((options.max_redzone)); __sanitizer::u64 v2 = (__sanitizer::u64)((2048)); if (__builtin_expect(!!(!(v1 &lt;= v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 324, &quot;(&quot; &quot;(options.max_redzone)&quot; &quot;) &quot; &quot;&lt;=&quot; &quot; (&quot; &quot;(2048)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_LE">CHECK_LE</a>(<a class="local col2 ref" href="#342options" title='options' data-ref="342options" data-ref-filename="342options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::max_redzone" title='__asan::AllocatorOptions::max_redzone' data-ref="__asan::AllocatorOptions::max_redzone" data-ref-filename="__asan..AllocatorOptions..max_redzone">max_redzone</a>, <var>2048</var>);</td></tr>
<tr><th id="325">325</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((IsPowerOfTwo(options.min_redzone))); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 325, &quot;(&quot; &quot;(IsPowerOfTwo(options.min_redzone))&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::IsPowerOfTwo" title='__sanitizer::IsPowerOfTwo' data-ref="__sanitizer::IsPowerOfTwo" data-ref-filename="__sanitizer..IsPowerOfTwo">IsPowerOfTwo</a>(<a class="local col2 ref" href="#342options" title='options' data-ref="342options" data-ref-filename="342options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::min_redzone" title='__asan::AllocatorOptions::min_redzone' data-ref="__asan::AllocatorOptions::min_redzone" data-ref-filename="__asan..AllocatorOptions..min_redzone">min_redzone</a>));</td></tr>
<tr><th id="326">326</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((IsPowerOfTwo(options.max_redzone))); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 326, &quot;(&quot; &quot;(IsPowerOfTwo(options.max_redzone))&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::IsPowerOfTwo" title='__sanitizer::IsPowerOfTwo' data-ref="__sanitizer::IsPowerOfTwo" data-ref-filename="__sanitizer..IsPowerOfTwo">IsPowerOfTwo</a>(<a class="local col2 ref" href="#342options" title='options' data-ref="342options" data-ref-filename="342options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::max_redzone" title='__asan::AllocatorOptions::max_redzone' data-ref="__asan::AllocatorOptions::max_redzone" data-ref-filename="__asan..AllocatorOptions..max_redzone">max_redzone</a>));</td></tr>
<tr><th id="327">327</th><td>  }</td></tr>
<tr><th id="328">328</th><td></td></tr>
<tr><th id="329">329</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::SharedInitCode" title='__asan::Allocator::SharedInitCode' data-type='void __asan::Allocator::SharedInitCode(const __asan::AllocatorOptions &amp; options)' data-ref="__asan::Allocator::SharedInitCode" data-ref-filename="__asan..Allocator..SharedInitCode">SharedInitCode</dfn>(<em>const</em> <a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a> &amp;<dfn class="local col3 decl" id="343options" title='options' data-type='const __asan::AllocatorOptions &amp;' data-ref="343options" data-ref-filename="343options">options</dfn>) {</td></tr>
<tr><th id="330">330</th><td>    <a class="tu member fn" href="#__asan::Allocator::CheckOptions" title='__asan::Allocator::CheckOptions' data-use='c' data-ref="__asan::Allocator::CheckOptions" data-ref-filename="__asan..Allocator..CheckOptions">CheckOptions</a>(<a class="local col3 ref" href="#343options" title='options' data-ref="343options" data-ref-filename="343options">options</a>);</td></tr>
<tr><th id="331">331</th><td>    <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='m' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::Init" title='__sanitizer::Quarantine::Init' data-ref="__sanitizer::Quarantine::Init" data-ref-filename="__sanitizer..Quarantine..Init">Init</a>((<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col3 ref" href="#343options" title='options' data-ref="343options" data-ref-filename="343options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::quarantine_size_mb" title='__asan::AllocatorOptions::quarantine_size_mb' data-ref="__asan::AllocatorOptions::quarantine_size_mb" data-ref-filename="__asan..AllocatorOptions..quarantine_size_mb">quarantine_size_mb</a> &lt;&lt; <var>20</var>,</td></tr>
<tr><th id="332">332</th><td>                    (<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col3 ref" href="#343options" title='options' data-ref="343options" data-ref-filename="343options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::thread_local_quarantine_size_kb" title='__asan::AllocatorOptions::thread_local_quarantine_size_kb' data-ref="__asan::AllocatorOptions::thread_local_quarantine_size_kb" data-ref-filename="__asan..AllocatorOptions..thread_local_quarantine_size_kb">thread_local_quarantine_size_kb</a> &lt;&lt; <var>10</var>);</td></tr>
<tr><th id="333">333</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="tu member field" href="#__asan::Allocator::alloc_dealloc_mismatch" title='__asan::Allocator::alloc_dealloc_mismatch' data-use='a' data-ref="__asan::Allocator::alloc_dealloc_mismatch" data-ref-filename="__asan..Allocator..alloc_dealloc_mismatch">alloc_dealloc_mismatch</a>, <a class="local col3 ref" href="#343options" title='options' data-ref="343options" data-ref-filename="343options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::alloc_dealloc_mismatch" title='__asan::AllocatorOptions::alloc_dealloc_mismatch' data-ref="__asan::AllocatorOptions::alloc_dealloc_mismatch" data-ref-filename="__asan..AllocatorOptions..alloc_dealloc_mismatch">alloc_dealloc_mismatch</a>,</td></tr>
<tr><th id="334">334</th><td>                 <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="335">335</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="tu member field" href="#__asan::Allocator::min_redzone" title='__asan::Allocator::min_redzone' data-use='a' data-ref="__asan::Allocator::min_redzone" data-ref-filename="__asan..Allocator..min_redzone">min_redzone</a>, <a class="local col3 ref" href="#343options" title='options' data-ref="343options" data-ref-filename="343options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::min_redzone" title='__asan::AllocatorOptions::min_redzone' data-ref="__asan::AllocatorOptions::min_redzone" data-ref-filename="__asan..AllocatorOptions..min_redzone">min_redzone</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="336">336</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="tu member field" href="#__asan::Allocator::max_redzone" title='__asan::Allocator::max_redzone' data-use='a' data-ref="__asan::Allocator::max_redzone" data-ref-filename="__asan..Allocator..max_redzone">max_redzone</a>, <a class="local col3 ref" href="#343options" title='options' data-ref="343options" data-ref-filename="343options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::max_redzone" title='__asan::AllocatorOptions::max_redzone' data-ref="__asan::AllocatorOptions::max_redzone" data-ref-filename="__asan..AllocatorOptions..max_redzone">max_redzone</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="337">337</th><td>  }</td></tr>
<tr><th id="338">338</th><td></td></tr>
<tr><th id="339">339</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::InitLinkerInitialized" title='__asan::Allocator::InitLinkerInitialized' data-type='void __asan::Allocator::InitLinkerInitialized(const __asan::AllocatorOptions &amp; options)' data-ref="__asan::Allocator::InitLinkerInitialized" data-ref-filename="__asan..Allocator..InitLinkerInitialized">InitLinkerInitialized</dfn>(<em>const</em> <a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a> &amp;<dfn class="local col4 decl" id="344options" title='options' data-type='const __asan::AllocatorOptions &amp;' data-ref="344options" data-ref-filename="344options">options</dfn>) {</td></tr>
<tr><th id="340">340</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::SetAllocatorMayReturnNull" title='__sanitizer::SetAllocatorMayReturnNull' data-ref="__sanitizer::SetAllocatorMayReturnNull" data-ref-filename="__sanitizer..SetAllocatorMayReturnNull">SetAllocatorMayReturnNull</a>(<a class="local col4 ref" href="#344options" title='options' data-ref="344options" data-ref-filename="344options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::may_return_null" title='__asan::AllocatorOptions::may_return_null' data-ref="__asan::AllocatorOptions::may_return_null" data-ref-filename="__asan..AllocatorOptions..may_return_null">may_return_null</a>);</td></tr>
<tr><th id="341">341</th><td>    <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::InitLinkerInitialized" title='__sanitizer::CombinedAllocator::InitLinkerInitialized' data-ref="__sanitizer::CombinedAllocator::InitLinkerInitialized" data-ref-filename="__sanitizer..CombinedAllocator..InitLinkerInitialized">InitLinkerInitialized</a>(<a class="local col4 ref" href="#344options" title='options' data-ref="344options" data-ref-filename="344options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::release_to_os_interval_ms" title='__asan::AllocatorOptions::release_to_os_interval_ms' data-ref="__asan::AllocatorOptions::release_to_os_interval_ms" data-ref-filename="__asan..AllocatorOptions..release_to_os_interval_ms">release_to_os_interval_ms</a>);</td></tr>
<tr><th id="342">342</th><td>    <a class="tu member fn" href="#__asan::Allocator::SharedInitCode" title='__asan::Allocator::SharedInitCode' data-use='c' data-ref="__asan::Allocator::SharedInitCode" data-ref-filename="__asan..Allocator..SharedInitCode">SharedInitCode</a>(<a class="local col4 ref" href="#344options" title='options' data-ref="344options" data-ref-filename="344options">options</a>);</td></tr>
<tr><th id="343">343</th><td>    <a class="tu member field" href="#__asan::Allocator::max_user_defined_malloc_size" title='__asan::Allocator::max_user_defined_malloc_size' data-use='w' data-ref="__asan::Allocator::max_user_defined_malloc_size" data-ref-filename="__asan..Allocator..max_user_defined_malloc_size">max_user_defined_malloc_size</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_flags.h.html#__sanitizer::common_flags" title='__sanitizer::common_flags' data-ref="__sanitizer::common_flags" data-ref-filename="__sanitizer..common_flags">common_flags</a>()-&gt;<a class="ref field" href="../sanitizer_common/sanitizer_flags.inc.html#141" title='__sanitizer::CommonFlags::max_allocation_size_mb' data-ref="__sanitizer::CommonFlags::max_allocation_size_mb" data-ref-filename="__sanitizer..CommonFlags..max_allocation_size_mb">max_allocation_size_mb</a></td></tr>
<tr><th id="344">344</th><td>                                       ? <a class="ref fn" href="../sanitizer_common/sanitizer_flags.h.html#__sanitizer::common_flags" title='__sanitizer::common_flags' data-ref="__sanitizer::common_flags" data-ref-filename="__sanitizer..common_flags">common_flags</a>()-&gt;<a class="ref field" href="../sanitizer_common/sanitizer_flags.inc.html#141" title='__sanitizer::CommonFlags::max_allocation_size_mb' data-ref="__sanitizer::CommonFlags::max_allocation_size_mb" data-ref-filename="__sanitizer..CommonFlags..max_allocation_size_mb">max_allocation_size_mb</a></td></tr>
<tr><th id="345">345</th><td>                                             &lt;&lt; <var>20</var></td></tr>
<tr><th id="346">346</th><td>                                       : <a class="tu member" href="#__asan::Allocator::kMaxAllowedMallocSize" title='__asan::Allocator::kMaxAllowedMallocSize' data-use='r' data-ref="__asan::Allocator::kMaxAllowedMallocSize" data-ref-filename="__asan..Allocator..kMaxAllowedMallocSize">kMaxAllowedMallocSize</a>;</td></tr>
<tr><th id="347">347</th><td>  }</td></tr>
<tr><th id="348">348</th><td></td></tr>
<tr><th id="349">349</th><td>  <em>bool</em> <dfn class="tu decl def fn" id="__asan::Allocator::RssLimitExceeded" title='__asan::Allocator::RssLimitExceeded' data-type='bool __asan::Allocator::RssLimitExceeded()' data-ref="__asan::Allocator::RssLimitExceeded" data-ref-filename="__asan..Allocator..RssLimitExceeded">RssLimitExceeded</dfn>() {</td></tr>
<tr><th id="350">350</th><td>    <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu member field" href="#__asan::Allocator::rss_limit_exceeded" title='__asan::Allocator::rss_limit_exceeded' data-use='a' data-ref="__asan::Allocator::rss_limit_exceeded" data-ref-filename="__asan..Allocator..rss_limit_exceeded">rss_limit_exceeded</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>);</td></tr>
<tr><th id="351">351</th><td>  }</td></tr>
<tr><th id="352">352</th><td></td></tr>
<tr><th id="353">353</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::SetRssLimitExceeded" title='__asan::Allocator::SetRssLimitExceeded' data-type='void __asan::Allocator::SetRssLimitExceeded(bool limit_exceeded)' data-ref="__asan::Allocator::SetRssLimitExceeded" data-ref-filename="__asan..Allocator..SetRssLimitExceeded">SetRssLimitExceeded</dfn>(<em>bool</em> <dfn class="local col5 decl" id="345limit_exceeded" title='limit_exceeded' data-type='bool' data-ref="345limit_exceeded" data-ref-filename="345limit_exceeded">limit_exceeded</dfn>) {</td></tr>
<tr><th id="354">354</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="tu member field" href="#__asan::Allocator::rss_limit_exceeded" title='__asan::Allocator::rss_limit_exceeded' data-use='a' data-ref="__asan::Allocator::rss_limit_exceeded" data-ref-filename="__asan..Allocator..rss_limit_exceeded">rss_limit_exceeded</a>, <a class="local col5 ref" href="#345limit_exceeded" title='limit_exceeded' data-ref="345limit_exceeded" data-ref-filename="345limit_exceeded">limit_exceeded</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>);</td></tr>
<tr><th id="355">355</th><td>  }</td></tr>
<tr><th id="356">356</th><td></td></tr>
<tr><th id="357">357</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::RePoisonChunk" title='__asan::Allocator::RePoisonChunk' data-type='void __asan::Allocator::RePoisonChunk(__sanitizer::uptr chunk)' data-ref="__asan::Allocator::RePoisonChunk" data-ref-filename="__asan..Allocator..RePoisonChunk">RePoisonChunk</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="346chunk" title='chunk' data-type='__sanitizer::uptr' data-ref="346chunk" data-ref-filename="346chunk">chunk</dfn>) {</td></tr>
<tr><th id="358">358</th><td>    <i>// This could be a user-facing chunk (with redzones), or some internal</i></td></tr>
<tr><th id="359">359</th><td><i>    // housekeeping chunk, like TransferBatch. Start by assuming the former.</i></td></tr>
<tr><th id="360">360</th><td>    <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col7 decl" id="347ac" title='ac' data-type='__asan::AsanChunk *' data-ref="347ac" data-ref-filename="347ac">ac</dfn> = <a class="tu member fn" href="#__asan::Allocator::GetAsanChunk" title='__asan::Allocator::GetAsanChunk' data-use='c' data-ref="__asan::Allocator::GetAsanChunk" data-ref-filename="__asan..Allocator..GetAsanChunk">GetAsanChunk</a>((<em>void</em> *)<a class="local col6 ref" href="#346chunk" title='chunk' data-ref="346chunk" data-ref-filename="346chunk">chunk</a>);</td></tr>
<tr><th id="361">361</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="348allocated_size" title='allocated_size' data-type='__sanitizer::uptr' data-ref="348allocated_size" data-ref-filename="348allocated_size">allocated_size</dfn> = <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::GetActuallyAllocatedSize" title='__sanitizer::CombinedAllocator::GetActuallyAllocatedSize' data-ref="__sanitizer::CombinedAllocator::GetActuallyAllocatedSize" data-ref-filename="__sanitizer..CombinedAllocator..GetActuallyAllocatedSize">GetActuallyAllocatedSize</a>((<em>void</em> *)<a class="local col6 ref" href="#346chunk" title='chunk' data-ref="346chunk" data-ref-filename="346chunk">chunk</a>);</td></tr>
<tr><th id="362">362</th><td>    <b>if</b> (<a class="local col7 ref" href="#347ac" title='ac' data-ref="347ac" data-ref-filename="347ac">ac</a> &amp;&amp; <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col7 ref" href="#347ac" title='ac' data-ref="347ac" data-ref-filename="347ac">ac</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>) ==</td></tr>
<tr><th id="363">363</th><td>                  <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>) {</td></tr>
<tr><th id="364">364</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="349beg" title='beg' data-type='__sanitizer::uptr' data-ref="349beg" data-ref-filename="349beg">beg</dfn> = <a class="local col7 ref" href="#347ac" title='ac' data-ref="347ac" data-ref-filename="347ac">ac</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>();</td></tr>
<tr><th id="365">365</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="350end" title='end' data-type='__sanitizer::uptr' data-ref="350end" data-ref-filename="350end">end</dfn> = <a class="local col7 ref" href="#347ac" title='ac' data-ref="347ac" data-ref-filename="347ac">ac</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>() + <a class="local col7 ref" href="#347ac" title='ac' data-ref="347ac" data-ref-filename="347ac">ac</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>();</td></tr>
<tr><th id="366">366</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="351chunk_end" title='chunk_end' data-type='__sanitizer::uptr' data-ref="351chunk_end" data-ref-filename="351chunk_end">chunk_end</dfn> = <a class="local col6 ref" href="#346chunk" title='chunk' data-ref="346chunk" data-ref-filename="346chunk">chunk</a> + <a class="local col8 ref" href="#348allocated_size" title='allocated_size' data-ref="348allocated_size" data-ref-filename="348allocated_size">allocated_size</a>;</td></tr>
<tr><th id="367">367</th><td>      <b>if</b> (<a class="local col6 ref" href="#346chunk" title='chunk' data-ref="346chunk" data-ref-filename="346chunk">chunk</a> &lt; <a class="local col9 ref" href="#349beg" title='beg' data-ref="349beg" data-ref-filename="349beg">beg</a> &amp;&amp; <a class="local col9 ref" href="#349beg" title='beg' data-ref="349beg" data-ref-filename="349beg">beg</a> &lt; <a class="local col0 ref" href="#350end" title='end' data-ref="350end" data-ref-filename="350end">end</a> &amp;&amp; <a class="local col0 ref" href="#350end" title='end' data-ref="350end" data-ref-filename="350end">end</a> &lt;= <a class="local col1 ref" href="#351chunk_end" title='chunk_end' data-ref="351chunk_end" data-ref-filename="351chunk_end">chunk_end</a>) {</td></tr>
<tr><th id="368">368</th><td>        <i>// Looks like a valid AsanChunk in use, poison redzones only.</i></td></tr>
<tr><th id="369">369</th><td>        <a class="ref fn" href="asan_poisoning.h.html#__asan::PoisonShadow" title='__asan::PoisonShadow' data-ref="__asan::PoisonShadow" data-ref-filename="__asan..PoisonShadow">PoisonShadow</a>(<a class="local col6 ref" href="#346chunk" title='chunk' data-ref="346chunk" data-ref-filename="346chunk">chunk</a>, <a class="local col9 ref" href="#349beg" title='beg' data-ref="349beg" data-ref-filename="349beg">beg</a> - <a class="local col6 ref" href="#346chunk" title='chunk' data-ref="346chunk" data-ref-filename="346chunk">chunk</a>, <a class="ref" href="asan_internal.h.html#__asan::kAsanHeapLeftRedzoneMagic" title='__asan::kAsanHeapLeftRedzoneMagic' data-ref="__asan::kAsanHeapLeftRedzoneMagic" data-ref-filename="__asan..kAsanHeapLeftRedzoneMagic">kAsanHeapLeftRedzoneMagic</a>);</td></tr>
<tr><th id="370">370</th><td>        <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="352end_aligned_down" title='end_aligned_down' data-type='__sanitizer::uptr' data-ref="352end_aligned_down" data-ref-filename="352end_aligned_down">end_aligned_down</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::RoundDownTo" title='__sanitizer::RoundDownTo' data-ref="__sanitizer::RoundDownTo" data-ref-filename="__sanitizer..RoundDownTo">RoundDownTo</a>(<a class="local col0 ref" href="#350end" title='end' data-ref="350end" data-ref-filename="350end">end</a>, <a class="macro" href="asan_mapping.h.html#257" title="(1ULL &lt;&lt; kDefaultShadowScale)" data-ref="_M/SHADOW_GRANULARITY">SHADOW_GRANULARITY</a>);</td></tr>
<tr><th id="371">371</th><td>        <a class="ref fn" href="asan_poisoning.h.html#__asan::FastPoisonShadowPartialRightRedzone" title='__asan::FastPoisonShadowPartialRightRedzone' data-ref="__asan::FastPoisonShadowPartialRightRedzone" data-ref-filename="__asan..FastPoisonShadowPartialRightRedzone">FastPoisonShadowPartialRightRedzone</a>(</td></tr>
<tr><th id="372">372</th><td>            <a class="local col2 ref" href="#352end_aligned_down" title='end_aligned_down' data-ref="352end_aligned_down" data-ref-filename="352end_aligned_down">end_aligned_down</a>, <a class="local col0 ref" href="#350end" title='end' data-ref="350end" data-ref-filename="350end">end</a> - <a class="local col2 ref" href="#352end_aligned_down" title='end_aligned_down' data-ref="352end_aligned_down" data-ref-filename="352end_aligned_down">end_aligned_down</a>,</td></tr>
<tr><th id="373">373</th><td>            <a class="local col1 ref" href="#351chunk_end" title='chunk_end' data-ref="351chunk_end" data-ref-filename="351chunk_end">chunk_end</a> - <a class="local col2 ref" href="#352end_aligned_down" title='end_aligned_down' data-ref="352end_aligned_down" data-ref-filename="352end_aligned_down">end_aligned_down</a>, <a class="ref" href="asan_internal.h.html#__asan::kAsanHeapLeftRedzoneMagic" title='__asan::kAsanHeapLeftRedzoneMagic' data-ref="__asan::kAsanHeapLeftRedzoneMagic" data-ref-filename="__asan..kAsanHeapLeftRedzoneMagic">kAsanHeapLeftRedzoneMagic</a>);</td></tr>
<tr><th id="374">374</th><td>        <b>return</b>;</td></tr>
<tr><th id="375">375</th><td>      }</td></tr>
<tr><th id="376">376</th><td>    }</td></tr>
<tr><th id="377">377</th><td></td></tr>
<tr><th id="378">378</th><td>    <i>// This is either not an AsanChunk or freed or quarantined AsanChunk.</i></td></tr>
<tr><th id="379">379</th><td><i>    // In either case, poison everything.</i></td></tr>
<tr><th id="380">380</th><td>    <a class="ref fn" href="asan_poisoning.h.html#__asan::PoisonShadow" title='__asan::PoisonShadow' data-ref="__asan::PoisonShadow" data-ref-filename="__asan..PoisonShadow">PoisonShadow</a>(<a class="local col6 ref" href="#346chunk" title='chunk' data-ref="346chunk" data-ref-filename="346chunk">chunk</a>, <a class="local col8 ref" href="#348allocated_size" title='allocated_size' data-ref="348allocated_size" data-ref-filename="348allocated_size">allocated_size</a>, <a class="ref" href="asan_internal.h.html#__asan::kAsanHeapLeftRedzoneMagic" title='__asan::kAsanHeapLeftRedzoneMagic' data-ref="__asan::kAsanHeapLeftRedzoneMagic" data-ref-filename="__asan..kAsanHeapLeftRedzoneMagic">kAsanHeapLeftRedzoneMagic</a>);</td></tr>
<tr><th id="381">381</th><td>  }</td></tr>
<tr><th id="382">382</th><td></td></tr>
<tr><th id="383">383</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::ReInitialize" title='__asan::Allocator::ReInitialize' data-type='void __asan::Allocator::ReInitialize(const __asan::AllocatorOptions &amp; options)' data-ref="__asan::Allocator::ReInitialize" data-ref-filename="__asan..Allocator..ReInitialize">ReInitialize</dfn>(<em>const</em> <a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a> &amp;<dfn class="local col3 decl" id="353options" title='options' data-type='const __asan::AllocatorOptions &amp;' data-ref="353options" data-ref-filename="353options">options</dfn>) {</td></tr>
<tr><th id="384">384</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::SetAllocatorMayReturnNull" title='__sanitizer::SetAllocatorMayReturnNull' data-ref="__sanitizer::SetAllocatorMayReturnNull" data-ref-filename="__sanitizer..SetAllocatorMayReturnNull">SetAllocatorMayReturnNull</a>(<a class="local col3 ref" href="#353options" title='options' data-ref="353options" data-ref-filename="353options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::may_return_null" title='__asan::AllocatorOptions::may_return_null' data-ref="__asan::AllocatorOptions::may_return_null" data-ref-filename="__asan..AllocatorOptions..may_return_null">may_return_null</a>);</td></tr>
<tr><th id="385">385</th><td>    <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::SetReleaseToOSIntervalMs" title='__sanitizer::CombinedAllocator::SetReleaseToOSIntervalMs' data-ref="__sanitizer::CombinedAllocator::SetReleaseToOSIntervalMs" data-ref-filename="__sanitizer..CombinedAllocator..SetReleaseToOSIntervalMs">SetReleaseToOSIntervalMs</a>(<a class="local col3 ref" href="#353options" title='options' data-ref="353options" data-ref-filename="353options">options</a>.<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::release_to_os_interval_ms" title='__asan::AllocatorOptions::release_to_os_interval_ms' data-ref="__asan::AllocatorOptions::release_to_os_interval_ms" data-ref-filename="__asan..AllocatorOptions..release_to_os_interval_ms">release_to_os_interval_ms</a>);</td></tr>
<tr><th id="386">386</th><td>    <a class="tu member fn" href="#__asan::Allocator::SharedInitCode" title='__asan::Allocator::SharedInitCode' data-use='c' data-ref="__asan::Allocator::SharedInitCode" data-ref-filename="__asan..Allocator..SharedInitCode">SharedInitCode</a>(<a class="local col3 ref" href="#353options" title='options' data-ref="353options" data-ref-filename="353options">options</a>);</td></tr>
<tr><th id="387">387</th><td></td></tr>
<tr><th id="388">388</th><td>    <i>// Poison all existing allocation's redzones.</i></td></tr>
<tr><th id="389">389</th><td>    <b>if</b> (<a class="ref fn" href="asan_poisoning.h.html#__asan::CanPoisonMemory" title='__asan::CanPoisonMemory' data-ref="__asan::CanPoisonMemory" data-ref-filename="__asan..CanPoisonMemory">CanPoisonMemory</a>()) {</td></tr>
<tr><th id="390">390</th><td>      <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ForceLock" title='__sanitizer::CombinedAllocator::ForceLock' data-ref="__sanitizer::CombinedAllocator::ForceLock" data-ref-filename="__sanitizer..CombinedAllocator..ForceLock">ForceLock</a>();</td></tr>
<tr><th id="391">391</th><td>      <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ForEachChunk" title='__sanitizer::CombinedAllocator::ForEachChunk' data-ref="__sanitizer::CombinedAllocator::ForEachChunk" data-ref-filename="__sanitizer..CombinedAllocator..ForEachChunk">ForEachChunk</a>(</td></tr>
<tr><th id="392">392</th><td>          [](<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="354chunk" title='chunk' data-type='__sanitizer::uptr' data-ref="354chunk" data-ref-filename="354chunk">chunk</dfn>, <em>void</em> *<dfn class="local col5 decl" id="355alloc" title='alloc' data-type='void *' data-ref="355alloc" data-ref-filename="355alloc">alloc</dfn>) {</td></tr>
<tr><th id="393">393</th><td>            ((<a class="type" href="#__asan::Allocator" title='__asan::Allocator' data-ref="__asan::Allocator" data-ref-filename="__asan..Allocator">Allocator</a> *)<a class="local col5 ref" href="#355alloc" title='alloc' data-ref="355alloc" data-ref-filename="355alloc">alloc</a>)-&gt;<a class="tu member fn" href="#__asan::Allocator::RePoisonChunk" title='__asan::Allocator::RePoisonChunk' data-use='c' data-ref="__asan::Allocator::RePoisonChunk" data-ref-filename="__asan..Allocator..RePoisonChunk">RePoisonChunk</a>(<a class="local col4 ref" href="#354chunk" title='chunk' data-ref="354chunk" data-ref-filename="354chunk">chunk</a>);</td></tr>
<tr><th id="394">394</th><td>          },</td></tr>
<tr><th id="395">395</th><td>          <b>this</b>);</td></tr>
<tr><th id="396">396</th><td>      <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ForceUnlock" title='__sanitizer::CombinedAllocator::ForceUnlock' data-ref="__sanitizer::CombinedAllocator::ForceUnlock" data-ref-filename="__sanitizer..CombinedAllocator..ForceUnlock">ForceUnlock</a>();</td></tr>
<tr><th id="397">397</th><td>    }</td></tr>
<tr><th id="398">398</th><td>  }</td></tr>
<tr><th id="399">399</th><td></td></tr>
<tr><th id="400">400</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::GetOptions" title='__asan::Allocator::GetOptions' data-type='void __asan::Allocator::GetOptions(__asan::AllocatorOptions * options) const' data-ref="__asan::Allocator::GetOptions" data-ref-filename="__asan..Allocator..GetOptions">GetOptions</dfn>(<a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a> *<dfn class="local col6 decl" id="356options" title='options' data-type='__asan::AllocatorOptions *' data-ref="356options" data-ref-filename="356options">options</dfn>) <em>const</em> {</td></tr>
<tr><th id="401">401</th><td>    <a class="local col6 ref" href="#356options" title='options' data-ref="356options" data-ref-filename="356options">options</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::quarantine_size_mb" title='__asan::AllocatorOptions::quarantine_size_mb' data-ref="__asan::AllocatorOptions::quarantine_size_mb" data-ref-filename="__asan..AllocatorOptions..quarantine_size_mb">quarantine_size_mb</a> = <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='m' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::GetSize" title='__sanitizer::Quarantine::GetSize' data-ref="__sanitizer::Quarantine::GetSize" data-ref-filename="__sanitizer..Quarantine..GetSize">GetSize</a>() &gt;&gt; <var>20</var>;</td></tr>
<tr><th id="402">402</th><td>    <a class="local col6 ref" href="#356options" title='options' data-ref="356options" data-ref-filename="356options">options</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::thread_local_quarantine_size_kb" title='__asan::AllocatorOptions::thread_local_quarantine_size_kb' data-ref="__asan::AllocatorOptions::thread_local_quarantine_size_kb" data-ref-filename="__asan..AllocatorOptions..thread_local_quarantine_size_kb">thread_local_quarantine_size_kb</a> = <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='m' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::GetCacheSize" title='__sanitizer::Quarantine::GetCacheSize' data-ref="__sanitizer::Quarantine::GetCacheSize" data-ref-filename="__sanitizer..Quarantine..GetCacheSize">GetCacheSize</a>() &gt;&gt; <var>10</var>;</td></tr>
<tr><th id="403">403</th><td>    <a class="local col6 ref" href="#356options" title='options' data-ref="356options" data-ref-filename="356options">options</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::min_redzone" title='__asan::AllocatorOptions::min_redzone' data-ref="__asan::AllocatorOptions::min_redzone" data-ref-filename="__asan..AllocatorOptions..min_redzone">min_redzone</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu member field" href="#__asan::Allocator::min_redzone" title='__asan::Allocator::min_redzone' data-use='a' data-ref="__asan::Allocator::min_redzone" data-ref-filename="__asan..Allocator..min_redzone">min_redzone</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>);</td></tr>
<tr><th id="404">404</th><td>    <a class="local col6 ref" href="#356options" title='options' data-ref="356options" data-ref-filename="356options">options</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::max_redzone" title='__asan::AllocatorOptions::max_redzone' data-ref="__asan::AllocatorOptions::max_redzone" data-ref-filename="__asan..AllocatorOptions..max_redzone">max_redzone</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu member field" href="#__asan::Allocator::max_redzone" title='__asan::Allocator::max_redzone' data-use='a' data-ref="__asan::Allocator::max_redzone" data-ref-filename="__asan..Allocator..max_redzone">max_redzone</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>);</td></tr>
<tr><th id="405">405</th><td>    <a class="local col6 ref" href="#356options" title='options' data-ref="356options" data-ref-filename="356options">options</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::may_return_null" title='__asan::AllocatorOptions::may_return_null' data-ref="__asan::AllocatorOptions::may_return_null" data-ref-filename="__asan..AllocatorOptions..may_return_null">may_return_null</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>();</td></tr>
<tr><th id="406">406</th><td>    <a class="local col6 ref" href="#356options" title='options' data-ref="356options" data-ref-filename="356options">options</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::alloc_dealloc_mismatch" title='__asan::AllocatorOptions::alloc_dealloc_mismatch' data-ref="__asan::AllocatorOptions::alloc_dealloc_mismatch" data-ref-filename="__asan..AllocatorOptions..alloc_dealloc_mismatch">alloc_dealloc_mismatch</a> =</td></tr>
<tr><th id="407">407</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu member field" href="#__asan::Allocator::alloc_dealloc_mismatch" title='__asan::Allocator::alloc_dealloc_mismatch' data-use='a' data-ref="__asan::Allocator::alloc_dealloc_mismatch" data-ref-filename="__asan..Allocator..alloc_dealloc_mismatch">alloc_dealloc_mismatch</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>);</td></tr>
<tr><th id="408">408</th><td>    <a class="local col6 ref" href="#356options" title='options' data-ref="356options" data-ref-filename="356options">options</a>-&gt;<a class="ref field" href="asan_allocator.h.html#__asan::AllocatorOptions::release_to_os_interval_ms" title='__asan::AllocatorOptions::release_to_os_interval_ms' data-ref="__asan::AllocatorOptions::release_to_os_interval_ms" data-ref-filename="__asan..AllocatorOptions..release_to_os_interval_ms">release_to_os_interval_ms</a> = <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ReleaseToOSIntervalMs" title='__sanitizer::CombinedAllocator::ReleaseToOSIntervalMs' data-ref="__sanitizer::CombinedAllocator::ReleaseToOSIntervalMs" data-ref-filename="__sanitizer..CombinedAllocator..ReleaseToOSIntervalMs">ReleaseToOSIntervalMs</a>();</td></tr>
<tr><th id="409">409</th><td>  }</td></tr>
<tr><th id="410">410</th><td></td></tr>
<tr><th id="411">411</th><td>  <i  data-doc="__asan::Allocator::ComputeRZLog">// -------------------- Helper methods. -------------------------</i></td></tr>
<tr><th id="412">412</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl def fn" id="__asan::Allocator::ComputeRZLog" title='__asan::Allocator::ComputeRZLog' data-type='__sanitizer::uptr __asan::Allocator::ComputeRZLog(__sanitizer::uptr user_requested_size)' data-ref="__asan::Allocator::ComputeRZLog" data-ref-filename="__asan..Allocator..ComputeRZLog">ComputeRZLog</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="357user_requested_size" title='user_requested_size' data-type='__sanitizer::uptr' data-ref="357user_requested_size" data-ref-filename="357user_requested_size">user_requested_size</dfn>) {</td></tr>
<tr><th id="413">413</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col8 decl" id="358rz_log" title='rz_log' data-type='__sanitizer::u32' data-ref="358rz_log" data-ref-filename="358rz_log">rz_log</dfn> = <a class="local col7 ref" href="#357user_requested_size" title='user_requested_size' data-ref="357user_requested_size" data-ref-filename="357user_requested_size">user_requested_size</a> &lt;= <var>64</var> - <var>16</var>            ? <var>0</var></td></tr>
<tr><th id="414">414</th><td>                 : <a class="local col7 ref" href="#357user_requested_size" title='user_requested_size' data-ref="357user_requested_size" data-ref-filename="357user_requested_size">user_requested_size</a> &lt;= <var>128</var> - <var>32</var>         ? <var>1</var></td></tr>
<tr><th id="415">415</th><td>                 : <a class="local col7 ref" href="#357user_requested_size" title='user_requested_size' data-ref="357user_requested_size" data-ref-filename="357user_requested_size">user_requested_size</a> &lt;= <var>512</var> - <var>64</var>         ? <var>2</var></td></tr>
<tr><th id="416">416</th><td>                 : <a class="local col7 ref" href="#357user_requested_size" title='user_requested_size' data-ref="357user_requested_size" data-ref-filename="357user_requested_size">user_requested_size</a> &lt;= <var>4096</var> - <var>128</var>       ? <var>3</var></td></tr>
<tr><th id="417">417</th><td>                 : <a class="local col7 ref" href="#357user_requested_size" title='user_requested_size' data-ref="357user_requested_size" data-ref-filename="357user_requested_size">user_requested_size</a> &lt;= (<var>1</var> &lt;&lt; <var>14</var>) - <var>256</var>  ? <var>4</var></td></tr>
<tr><th id="418">418</th><td>                 : <a class="local col7 ref" href="#357user_requested_size" title='user_requested_size' data-ref="357user_requested_size" data-ref-filename="357user_requested_size">user_requested_size</a> &lt;= (<var>1</var> &lt;&lt; <var>15</var>) - <var>512</var>  ? <var>5</var></td></tr>
<tr><th id="419">419</th><td>                 : <a class="local col7 ref" href="#357user_requested_size" title='user_requested_size' data-ref="357user_requested_size" data-ref-filename="357user_requested_size">user_requested_size</a> &lt;= (<var>1</var> &lt;&lt; <var>16</var>) - <var>1024</var> ? <var>6</var></td></tr>
<tr><th id="420">420</th><td>                                                           : <var>7</var>;</td></tr>
<tr><th id="421">421</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col9 decl" id="359hdr_log" title='hdr_log' data-type='__sanitizer::u32' data-ref="359hdr_log" data-ref-filename="359hdr_log">hdr_log</dfn> = <a class="tu ref fn" href="#__asan::RZSize2Log" title='__asan::RZSize2Log' data-use='c' data-ref="__asan::RZSize2Log" data-ref-filename="__asan..RZSize2Log">RZSize2Log</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::RoundUpToPowerOfTwo" title='__sanitizer::RoundUpToPowerOfTwo' data-ref="__sanitizer::RoundUpToPowerOfTwo" data-ref-filename="__sanitizer..RoundUpToPowerOfTwo">RoundUpToPowerOfTwo</a>(<b>sizeof</b>(<a class="type" href="#__asan::ChunkHeader" title='__asan::ChunkHeader' data-ref="__asan::ChunkHeader" data-ref-filename="__asan..ChunkHeader">ChunkHeader</a>)));</td></tr>
<tr><th id="422">422</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col0 decl" id="360min_log" title='min_log' data-type='__sanitizer::u32' data-ref="360min_log" data-ref-filename="360min_log">min_log</dfn> = <a class="tu ref fn" href="#__asan::RZSize2Log" title='__asan::RZSize2Log' data-use='c' data-ref="__asan::RZSize2Log" data-ref-filename="__asan..RZSize2Log">RZSize2Log</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu member field" href="#__asan::Allocator::min_redzone" title='__asan::Allocator::min_redzone' data-use='a' data-ref="__asan::Allocator::min_redzone" data-ref-filename="__asan..Allocator..min_redzone">min_redzone</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>));</td></tr>
<tr><th id="423">423</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col1 decl" id="361max_log" title='max_log' data-type='__sanitizer::u32' data-ref="361max_log" data-ref-filename="361max_log">max_log</dfn> = <a class="tu ref fn" href="#__asan::RZSize2Log" title='__asan::RZSize2Log' data-use='c' data-ref="__asan::RZSize2Log" data-ref-filename="__asan..RZSize2Log">RZSize2Log</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu member field" href="#__asan::Allocator::max_redzone" title='__asan::Allocator::max_redzone' data-use='a' data-ref="__asan::Allocator::max_redzone" data-ref-filename="__asan..Allocator..max_redzone">max_redzone</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>));</td></tr>
<tr><th id="424">424</th><td>    <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Min" title='__sanitizer::Min' data-ref="__sanitizer::Min" data-ref-filename="__sanitizer..Min">Min</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Max" title='__sanitizer::Max' data-ref="__sanitizer::Max" data-ref-filename="__sanitizer..Max">Max</a>(<a class="local col8 ref" href="#358rz_log" title='rz_log' data-ref="358rz_log" data-ref-filename="358rz_log">rz_log</a>, <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Max" title='__sanitizer::Max' data-ref="__sanitizer::Max" data-ref-filename="__sanitizer..Max">Max</a>(<a class="local col0 ref" href="#360min_log" title='min_log' data-ref="360min_log" data-ref-filename="360min_log">min_log</a>, <a class="local col9 ref" href="#359hdr_log" title='hdr_log' data-ref="359hdr_log" data-ref-filename="359hdr_log">hdr_log</a>)), <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Max" title='__sanitizer::Max' data-ref="__sanitizer::Max" data-ref-filename="__sanitizer..Max">Max</a>(<a class="local col1 ref" href="#361max_log" title='max_log' data-ref="361max_log" data-ref-filename="361max_log">max_log</a>, <a class="local col9 ref" href="#359hdr_log" title='hdr_log' data-ref="359hdr_log" data-ref-filename="359hdr_log">hdr_log</a>));</td></tr>
<tr><th id="425">425</th><td>  }</td></tr>
<tr><th id="426">426</th><td></td></tr>
<tr><th id="427">427</th><td>  <em>static</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl def fn" id="__asan::Allocator::ComputeUserRequestedAlignmentLog" title='__asan::Allocator::ComputeUserRequestedAlignmentLog' data-type='static __sanitizer::uptr __asan::Allocator::ComputeUserRequestedAlignmentLog(__sanitizer::uptr user_requested_alignment)' data-ref="__asan::Allocator::ComputeUserRequestedAlignmentLog" data-ref-filename="__asan..Allocator..ComputeUserRequestedAlignmentLog">ComputeUserRequestedAlignmentLog</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="362user_requested_alignment" title='user_requested_alignment' data-type='__sanitizer::uptr' data-ref="362user_requested_alignment" data-ref-filename="362user_requested_alignment">user_requested_alignment</dfn>) {</td></tr>
<tr><th id="428">428</th><td>    <b>if</b> (<a class="local col2 ref" href="#362user_requested_alignment" title='user_requested_alignment' data-ref="362user_requested_alignment" data-ref-filename="362user_requested_alignment">user_requested_alignment</a> &lt; <var>8</var>)</td></tr>
<tr><th id="429">429</th><td>      <b>return</b> <var>0</var>;</td></tr>
<tr><th id="430">430</th><td>    <b>if</b> (<a class="local col2 ref" href="#362user_requested_alignment" title='user_requested_alignment' data-ref="362user_requested_alignment" data-ref-filename="362user_requested_alignment">user_requested_alignment</a> &gt; <var>512</var>)</td></tr>
<tr><th id="431">431</th><td>      <a class="local col2 ref" href="#362user_requested_alignment" title='user_requested_alignment' data-ref="362user_requested_alignment" data-ref-filename="362user_requested_alignment">user_requested_alignment</a> = <var>512</var>;</td></tr>
<tr><th id="432">432</th><td>    <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Log2" title='__sanitizer::Log2' data-ref="__sanitizer::Log2" data-ref-filename="__sanitizer..Log2">Log2</a>(<a class="local col2 ref" href="#362user_requested_alignment" title='user_requested_alignment' data-ref="362user_requested_alignment" data-ref-filename="362user_requested_alignment">user_requested_alignment</a>) - <var>2</var>;</td></tr>
<tr><th id="433">433</th><td>  }</td></tr>
<tr><th id="434">434</th><td></td></tr>
<tr><th id="435">435</th><td>  <em>static</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl def fn" id="__asan::Allocator::ComputeUserAlignment" title='__asan::Allocator::ComputeUserAlignment' data-type='static __sanitizer::uptr __asan::Allocator::ComputeUserAlignment(__sanitizer::uptr user_requested_alignment_log)' data-ref="__asan::Allocator::ComputeUserAlignment" data-ref-filename="__asan..Allocator..ComputeUserAlignment">ComputeUserAlignment</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="363user_requested_alignment_log" title='user_requested_alignment_log' data-type='__sanitizer::uptr' data-ref="363user_requested_alignment_log" data-ref-filename="363user_requested_alignment_log">user_requested_alignment_log</dfn>) {</td></tr>
<tr><th id="436">436</th><td>    <b>if</b> (<a class="local col3 ref" href="#363user_requested_alignment_log" title='user_requested_alignment_log' data-ref="363user_requested_alignment_log" data-ref-filename="363user_requested_alignment_log">user_requested_alignment_log</a> == <var>0</var>)</td></tr>
<tr><th id="437">437</th><td>      <b>return</b> <var>0</var>;</td></tr>
<tr><th id="438">438</th><td>    <b>return</b> <var>1LL</var> &lt;&lt; (<a class="local col3 ref" href="#363user_requested_alignment_log" title='user_requested_alignment_log' data-ref="363user_requested_alignment_log" data-ref-filename="363user_requested_alignment_log">user_requested_alignment_log</a> + <var>2</var>);</td></tr>
<tr><th id="439">439</th><td>  }</td></tr>
<tr><th id="440">440</th><td></td></tr>
<tr><th id="441">441</th><td>  <i  data-doc="__asan::Allocator::ChooseChunk">// We have an address between two chunks, and we want to report just one.</i></td></tr>
<tr><th id="442">442</th><td>  <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="tu decl def fn" id="__asan::Allocator::ChooseChunk" title='__asan::Allocator::ChooseChunk' data-type='__asan::AsanChunk * __asan::Allocator::ChooseChunk(__sanitizer::uptr addr, __asan::AsanChunk * left_chunk, __asan::AsanChunk * right_chunk)' data-ref="__asan::Allocator::ChooseChunk" data-ref-filename="__asan..Allocator..ChooseChunk">ChooseChunk</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="364addr" title='addr' data-type='__sanitizer::uptr' data-ref="364addr" data-ref-filename="364addr">addr</dfn>, <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col5 decl" id="365left_chunk" title='left_chunk' data-type='__asan::AsanChunk *' data-ref="365left_chunk" data-ref-filename="365left_chunk">left_chunk</dfn>,</td></tr>
<tr><th id="443">443</th><td>                         <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col6 decl" id="366right_chunk" title='right_chunk' data-type='__asan::AsanChunk *' data-ref="366right_chunk" data-ref-filename="366right_chunk">right_chunk</dfn>) {</td></tr>
<tr><th id="444">444</th><td>    <b>if</b> (!<a class="local col5 ref" href="#365left_chunk" title='left_chunk' data-ref="365left_chunk" data-ref-filename="365left_chunk">left_chunk</a>)</td></tr>
<tr><th id="445">445</th><td>      <b>return</b> <a class="local col6 ref" href="#366right_chunk" title='right_chunk' data-ref="366right_chunk" data-ref-filename="366right_chunk">right_chunk</a>;</td></tr>
<tr><th id="446">446</th><td>    <b>if</b> (!<a class="local col6 ref" href="#366right_chunk" title='right_chunk' data-ref="366right_chunk" data-ref-filename="366right_chunk">right_chunk</a>)</td></tr>
<tr><th id="447">447</th><td>      <b>return</b> <a class="local col5 ref" href="#365left_chunk" title='left_chunk' data-ref="365left_chunk" data-ref-filename="365left_chunk">left_chunk</a>;</td></tr>
<tr><th id="448">448</th><td>    <i>// Prefer an allocated chunk over freed chunk and freed chunk</i></td></tr>
<tr><th id="449">449</th><td><i>    // over available chunk.</i></td></tr>
<tr><th id="450">450</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="local col7 decl" id="367left_state" title='left_state' data-type='__sanitizer::u8' data-ref="367left_state" data-ref-filename="367left_state">left_state</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col5 ref" href="#365left_chunk" title='left_chunk' data-ref="365left_chunk" data-ref-filename="365left_chunk">left_chunk</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>);</td></tr>
<tr><th id="451">451</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="local col8 decl" id="368right_state" title='right_state' data-type='__sanitizer::u8' data-ref="368right_state" data-ref-filename="368right_state">right_state</dfn> =</td></tr>
<tr><th id="452">452</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col6 ref" href="#366right_chunk" title='right_chunk' data-ref="366right_chunk" data-ref-filename="366right_chunk">right_chunk</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>);</td></tr>
<tr><th id="453">453</th><td>    <b>if</b> (<a class="local col7 ref" href="#367left_state" title='left_state' data-ref="367left_state" data-ref-filename="367left_state">left_state</a> != <a class="local col8 ref" href="#368right_state" title='right_state' data-ref="368right_state" data-ref-filename="368right_state">right_state</a>) {</td></tr>
<tr><th id="454">454</th><td>      <b>if</b> (<a class="local col7 ref" href="#367left_state" title='left_state' data-ref="367left_state" data-ref-filename="367left_state">left_state</a> == <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>)</td></tr>
<tr><th id="455">455</th><td>        <b>return</b> <a class="local col5 ref" href="#365left_chunk" title='left_chunk' data-ref="365left_chunk" data-ref-filename="365left_chunk">left_chunk</a>;</td></tr>
<tr><th id="456">456</th><td>      <b>if</b> (<a class="local col8 ref" href="#368right_state" title='right_state' data-ref="368right_state" data-ref-filename="368right_state">right_state</a> == <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>)</td></tr>
<tr><th id="457">457</th><td>        <b>return</b> <a class="local col6 ref" href="#366right_chunk" title='right_chunk' data-ref="366right_chunk" data-ref-filename="366right_chunk">right_chunk</a>;</td></tr>
<tr><th id="458">458</th><td>      <b>if</b> (<a class="local col7 ref" href="#367left_state" title='left_state' data-ref="367left_state" data-ref-filename="367left_state">left_state</a> == <a class="enum" href="#__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</a>)</td></tr>
<tr><th id="459">459</th><td>        <b>return</b> <a class="local col5 ref" href="#365left_chunk" title='left_chunk' data-ref="365left_chunk" data-ref-filename="365left_chunk">left_chunk</a>;</td></tr>
<tr><th id="460">460</th><td>      <b>if</b> (<a class="local col8 ref" href="#368right_state" title='right_state' data-ref="368right_state" data-ref-filename="368right_state">right_state</a> == <a class="enum" href="#__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</a>)</td></tr>
<tr><th id="461">461</th><td>        <b>return</b> <a class="local col6 ref" href="#366right_chunk" title='right_chunk' data-ref="366right_chunk" data-ref-filename="366right_chunk">right_chunk</a>;</td></tr>
<tr><th id="462">462</th><td>    }</td></tr>
<tr><th id="463">463</th><td>    <i>// Same chunk_state: choose based on offset.</i></td></tr>
<tr><th id="464">464</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::sptr" title='__sanitizer::sptr' data-type='long' data-ref="__sanitizer::sptr" data-ref-filename="__sanitizer..sptr">sptr</a> <dfn class="local col9 decl" id="369l_offset" title='l_offset' data-type='__sanitizer::sptr' data-ref="369l_offset" data-ref-filename="369l_offset">l_offset</dfn> = <var>0</var>, <dfn class="local col0 decl" id="370r_offset" title='r_offset' data-type='__sanitizer::sptr' data-ref="370r_offset" data-ref-filename="370r_offset">r_offset</dfn> = <var>0</var>;</td></tr>
<tr><th id="465">465</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((AsanChunkView(left_chunk).AddrIsAtRight(addr, 1, &amp;l_offset))); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 465, &quot;(&quot; &quot;(AsanChunkView(left_chunk).AddrIsAtRight(addr, 1, &amp;l_offset))&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a><a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AsanChunkView" title='__asan::AsanChunkView::AsanChunkView' data-ref="__asan::AsanChunkView::AsanChunkView" data-ref-filename="__asan..AsanChunkView..AsanChunkView">(</a><a class="local col5 ref" href="#365left_chunk" title='left_chunk' data-ref="365left_chunk" data-ref-filename="365left_chunk">left_chunk</a>).<a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AddrIsAtRight" title='__asan::AsanChunkView::AddrIsAtRight' data-ref="__asan::AsanChunkView::AddrIsAtRight" data-ref-filename="__asan..AsanChunkView..AddrIsAtRight">AddrIsAtRight</a>(<a class="local col4 ref" href="#364addr" title='addr' data-ref="364addr" data-ref-filename="364addr">addr</a>, <var>1</var>, &amp;<a class="local col9 ref" href="#369l_offset" title='l_offset' data-ref="369l_offset" data-ref-filename="369l_offset">l_offset</a>));</td></tr>
<tr><th id="466">466</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((AsanChunkView(right_chunk).AddrIsAtLeft(addr, 1, &amp;r_offset))); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 466, &quot;(&quot; &quot;(AsanChunkView(right_chunk).AddrIsAtLeft(addr, 1, &amp;r_offset))&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a><a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AsanChunkView" title='__asan::AsanChunkView::AsanChunkView' data-ref="__asan::AsanChunkView::AsanChunkView" data-ref-filename="__asan..AsanChunkView..AsanChunkView">(</a><a class="local col6 ref" href="#366right_chunk" title='right_chunk' data-ref="366right_chunk" data-ref-filename="366right_chunk">right_chunk</a>).<a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AddrIsAtLeft" title='__asan::AsanChunkView::AddrIsAtLeft' data-ref="__asan::AsanChunkView::AddrIsAtLeft" data-ref-filename="__asan..AsanChunkView..AddrIsAtLeft">AddrIsAtLeft</a>(<a class="local col4 ref" href="#364addr" title='addr' data-ref="364addr" data-ref-filename="364addr">addr</a>, <var>1</var>, &amp;<a class="local col0 ref" href="#370r_offset" title='r_offset' data-ref="370r_offset" data-ref-filename="370r_offset">r_offset</a>));</td></tr>
<tr><th id="467">467</th><td>    <b>if</b> (<a class="local col9 ref" href="#369l_offset" title='l_offset' data-ref="369l_offset" data-ref-filename="369l_offset">l_offset</a> &lt; <a class="local col0 ref" href="#370r_offset" title='r_offset' data-ref="370r_offset" data-ref-filename="370r_offset">r_offset</a>)</td></tr>
<tr><th id="468">468</th><td>      <b>return</b> <a class="local col5 ref" href="#365left_chunk" title='left_chunk' data-ref="365left_chunk" data-ref-filename="365left_chunk">left_chunk</a>;</td></tr>
<tr><th id="469">469</th><td>    <b>return</b> <a class="local col6 ref" href="#366right_chunk" title='right_chunk' data-ref="366right_chunk" data-ref-filename="366right_chunk">right_chunk</a>;</td></tr>
<tr><th id="470">470</th><td>  }</td></tr>
<tr><th id="471">471</th><td></td></tr>
<tr><th id="472">472</th><td>  <em>bool</em> <dfn class="tu decl def fn" id="__asan::Allocator::UpdateAllocationStack" title='__asan::Allocator::UpdateAllocationStack' data-type='bool __asan::Allocator::UpdateAllocationStack(__sanitizer::uptr addr, __sanitizer::BufferedStackTrace * stack)' data-ref="__asan::Allocator::UpdateAllocationStack" data-ref-filename="__asan..Allocator..UpdateAllocationStack">UpdateAllocationStack</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="371addr" title='addr' data-type='__sanitizer::uptr' data-ref="371addr" data-ref-filename="371addr">addr</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col2 decl" id="372stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="372stack" data-ref-filename="372stack">stack</dfn>) {</td></tr>
<tr><th id="473">473</th><td>    <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col3 decl" id="373m" title='m' data-type='__asan::AsanChunk *' data-ref="373m" data-ref-filename="373m">m</dfn> = <a class="tu member fn" href="#__asan::Allocator::GetAsanChunkByAddr" title='__asan::Allocator::GetAsanChunkByAddr' data-use='c' data-ref="__asan::Allocator::GetAsanChunkByAddr" data-ref-filename="__asan..Allocator..GetAsanChunkByAddr">GetAsanChunkByAddr</a>(<a class="local col1 ref" href="#371addr" title='addr' data-ref="371addr" data-ref-filename="371addr">addr</a>);</td></tr>
<tr><th id="474">474</th><td>    <b>if</b> (!<a class="local col3 ref" href="#373m" title='m' data-ref="373m" data-ref-filename="373m">m</a>) <b>return</b> <b>false</b>;</td></tr>
<tr><th id="475">475</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col3 ref" href="#373m" title='m' data-ref="373m" data-ref-filename="373m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>) != <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>)</td></tr>
<tr><th id="476">476</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="477">477</th><td>    <b>if</b> (<a class="local col3 ref" href="#373m" title='m' data-ref="373m" data-ref-filename="373m">m</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>() != <a class="local col1 ref" href="#371addr" title='addr' data-ref="371addr" data-ref-filename="371addr">addr</a>) <b>return</b> <b>false</b>;</td></tr>
<tr><th id="478">478</th><td>    <a class="type" href="asan_thread.h.html#__asan::AsanThread" title='__asan::AsanThread' data-ref="__asan::AsanThread" data-ref-filename="__asan..AsanThread">AsanThread</a> *<dfn class="local col4 decl" id="374t" title='t' data-type='__asan::AsanThread *' data-ref="374t" data-ref-filename="374t">t</dfn> = <a class="ref fn" href="asan_thread.h.html#__asan::GetCurrentThread" title='__asan::GetCurrentThread' data-ref="__asan::GetCurrentThread" data-ref-filename="__asan..GetCurrentThread">GetCurrentThread</a>();</td></tr>
<tr><th id="479">479</th><td>    <a class="local col3 ref" href="#373m" title='m' data-ref="373m" data-ref-filename="373m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::SetAllocContext" title='__asan::ChunkHeader::SetAllocContext' data-use='c' data-ref="__asan::ChunkHeader::SetAllocContext" data-ref-filename="__asan..ChunkHeader..SetAllocContext">SetAllocContext</a>(<a class="local col4 ref" href="#374t" title='t' data-ref="374t" data-ref-filename="374t">t</a> ? <a class="local col4 ref" href="#374t" title='t' data-ref="374t" data-ref-filename="374t">t</a>-&gt;<a class="ref fn" href="asan_thread.h.html#__asan::AsanThread::tid" title='__asan::AsanThread::tid' data-ref="__asan::AsanThread::tid" data-ref-filename="__asan..AsanThread..tid">tid</a>() : <var>0</var>, <a class="ref fn" href="../sanitizer_common/sanitizer_stackdepot.h.html#__sanitizer::StackDepotPut" title='__sanitizer::StackDepotPut' data-ref="__sanitizer::StackDepotPut" data-ref-filename="__sanitizer..StackDepotPut">StackDepotPut</a>(<a class="ref fn fake" href="../sanitizer_common/sanitizer_stacktrace.h.html#41" title='__sanitizer::StackTrace::StackTrace' data-ref="__sanitizer::StackTrace::StackTrace" data-ref-filename="__sanitizer..StackTrace..StackTrace"></a>*<a class="local col2 ref" href="#372stack" title='stack' data-ref="372stack" data-ref-filename="372stack">stack</a>));</td></tr>
<tr><th id="480">480</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="481">481</th><td>  }</td></tr>
<tr><th id="482">482</th><td></td></tr>
<tr><th id="483">483</th><td>  <i  data-doc="__asan::Allocator::Allocate">// -------------------- Allocation/Deallocation routines ---------------</i></td></tr>
<tr><th id="484">484</th><td>  <em>void</em> *<dfn class="tu decl def fn" id="__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-type='void * __asan::Allocator::Allocate(__sanitizer::uptr size, __sanitizer::uptr alignment, __sanitizer::BufferedStackTrace * stack, __asan::AllocType alloc_type, bool can_fill)' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="375size" title='size' data-type='__sanitizer::uptr' data-ref="375size" data-ref-filename="375size">size</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="376alignment" title='alignment' data-type='__sanitizer::uptr' data-ref="376alignment" data-ref-filename="376alignment">alignment</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col7 decl" id="377stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="377stack" data-ref-filename="377stack">stack</dfn>,</td></tr>
<tr><th id="485">485</th><td>                 <a class="type" href="asan_allocator.h.html#__asan::AllocType" title='__asan::AllocType' data-ref="__asan::AllocType" data-ref-filename="__asan..AllocType">AllocType</a> <dfn class="local col8 decl" id="378alloc_type" title='alloc_type' data-type='__asan::AllocType' data-ref="378alloc_type" data-ref-filename="378alloc_type">alloc_type</dfn>, <em>bool</em> <dfn class="local col9 decl" id="379can_fill" title='can_fill' data-type='bool' data-ref="379can_fill" data-ref-filename="379can_fill">can_fill</dfn>) {</td></tr>
<tr><th id="486">486</th><td>    <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(!asan_inited), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(!<a class="ref" href="asan_internal.h.html#__asan::asan_inited" title='__asan::asan_inited' data-ref="__asan::asan_inited" data-ref-filename="__asan..asan_inited">asan_inited</a>))</td></tr>
<tr><th id="487">487</th><td>      <a class="ref fn" href="asan_internal.h.html#__asan::AsanInitFromRtl" title='__asan::AsanInitFromRtl' data-ref="__asan::AsanInitFromRtl" data-ref-filename="__asan..AsanInitFromRtl">AsanInitFromRtl</a>();</td></tr>
<tr><th id="488">488</th><td>    <b>if</b> (<a class="tu member fn" href="#__asan::Allocator::RssLimitExceeded" title='__asan::Allocator::RssLimitExceeded' data-use='c' data-ref="__asan::Allocator::RssLimitExceeded" data-ref-filename="__asan..Allocator..RssLimitExceeded">RssLimitExceeded</a>()) {</td></tr>
<tr><th id="489">489</th><td>      <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>())</td></tr>
<tr><th id="490">490</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="491">491</th><td>      <a class="ref fn" href="asan_report.h.html#__asan::ReportRssLimitExceeded" title='__asan::ReportRssLimitExceeded' data-ref="__asan::ReportRssLimitExceeded" data-ref-filename="__asan..ReportRssLimitExceeded">ReportRssLimitExceeded</a>(<a class="local col7 ref" href="#377stack" title='stack' data-ref="377stack" data-ref-filename="377stack">stack</a>);</td></tr>
<tr><th id="492">492</th><td>    }</td></tr>
<tr><th id="493">493</th><td>    <a class="type" href="asan_flags.h.html#__asan::Flags" title='__asan::Flags' data-ref="__asan::Flags" data-ref-filename="__asan..Flags">Flags</a> &amp;<dfn class="local col0 decl" id="380fl" title='fl' data-type='__asan::Flags &amp;' data-ref="380fl" data-ref-filename="380fl">fl</dfn> = *<a class="ref fn" href="asan_flags.h.html#__asan::flags" title='__asan::flags' data-ref="__asan::flags" data-ref-filename="__asan..flags">flags</a>();</td></tr>
<tr><th id="494">494</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((stack)); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 494, &quot;(&quot; &quot;(stack)&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="local col7 ref" href="#377stack" title='stack' data-ref="377stack" data-ref-filename="377stack">stack</a>);</td></tr>
<tr><th id="495">495</th><td>    <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="381min_alignment" title='min_alignment' data-type='const __sanitizer::uptr' data-ref="381min_alignment" data-ref-filename="381min_alignment">min_alignment</dfn> = <a class="macro" href="asan_mapping.h.html#257" title="(1ULL &lt;&lt; kDefaultShadowScale)" data-ref="_M/SHADOW_GRANULARITY">SHADOW_GRANULARITY</a>;</td></tr>
<tr><th id="496">496</th><td>    <em>const</em> <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="382user_requested_alignment_log" title='user_requested_alignment_log' data-type='const __sanitizer::uptr' data-ref="382user_requested_alignment_log" data-ref-filename="382user_requested_alignment_log">user_requested_alignment_log</dfn> =</td></tr>
<tr><th id="497">497</th><td>        <a class="tu member fn" href="#__asan::Allocator::ComputeUserRequestedAlignmentLog" title='__asan::Allocator::ComputeUserRequestedAlignmentLog' data-use='c' data-ref="__asan::Allocator::ComputeUserRequestedAlignmentLog" data-ref-filename="__asan..Allocator..ComputeUserRequestedAlignmentLog">ComputeUserRequestedAlignmentLog</a>(<a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a>);</td></tr>
<tr><th id="498">498</th><td>    <b>if</b> (<a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a> &lt; <a class="local col1 ref" href="#381min_alignment" title='min_alignment' data-ref="381min_alignment" data-ref-filename="381min_alignment">min_alignment</a>)</td></tr>
<tr><th id="499">499</th><td>      <a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a> = <a class="local col1 ref" href="#381min_alignment" title='min_alignment' data-ref="381min_alignment" data-ref-filename="381min_alignment">min_alignment</a>;</td></tr>
<tr><th id="500">500</th><td>    <b>if</b> (<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a> == <var>0</var>) {</td></tr>
<tr><th id="501">501</th><td>      <i>// We'd be happy to avoid allocating memory for zero-size requests, but</i></td></tr>
<tr><th id="502">502</th><td><i>      // some programs/tests depend on this behavior and assume that malloc</i></td></tr>
<tr><th id="503">503</th><td><i>      // would not return NULL even for zero-size allocations. Moreover, it</i></td></tr>
<tr><th id="504">504</th><td><i>      // looks like operator new should never return NULL, and results of</i></td></tr>
<tr><th id="505">505</th><td><i>      // consecutive "new" calls must be different even if the allocated size</i></td></tr>
<tr><th id="506">506</th><td><i>      // is zero.</i></td></tr>
<tr><th id="507">507</th><td>      <a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a> = <var>1</var>;</td></tr>
<tr><th id="508">508</th><td>    }</td></tr>
<tr><th id="509">509</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((IsPowerOfTwo(alignment))); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 509, &quot;(&quot; &quot;(IsPowerOfTwo(alignment))&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::IsPowerOfTwo" title='__sanitizer::IsPowerOfTwo' data-ref="__sanitizer::IsPowerOfTwo" data-ref-filename="__sanitizer..IsPowerOfTwo">IsPowerOfTwo</a>(<a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a>));</td></tr>
<tr><th id="510">510</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="383rz_log" title='rz_log' data-type='__sanitizer::uptr' data-ref="383rz_log" data-ref-filename="383rz_log">rz_log</dfn> = <a class="tu member fn" href="#__asan::Allocator::ComputeRZLog" title='__asan::Allocator::ComputeRZLog' data-use='c' data-ref="__asan::Allocator::ComputeRZLog" data-ref-filename="__asan..Allocator..ComputeRZLog">ComputeRZLog</a>(<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>);</td></tr>
<tr><th id="511">511</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="384rz_size" title='rz_size' data-type='__sanitizer::uptr' data-ref="384rz_size" data-ref-filename="384rz_size">rz_size</dfn> = <a class="tu ref fn" href="#__asan::RZLog2Size" title='__asan::RZLog2Size' data-use='c' data-ref="__asan::RZLog2Size" data-ref-filename="__asan..RZLog2Size">RZLog2Size</a>(<a class="local col3 ref" href="#383rz_log" title='rz_log' data-ref="383rz_log" data-ref-filename="383rz_log">rz_log</a>);</td></tr>
<tr><th id="512">512</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="385rounded_size" title='rounded_size' data-type='__sanitizer::uptr' data-ref="385rounded_size" data-ref-filename="385rounded_size">rounded_size</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::RoundUpTo" title='__sanitizer::RoundUpTo' data-ref="__sanitizer::RoundUpTo" data-ref-filename="__sanitizer..RoundUpTo">RoundUpTo</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Max" title='__sanitizer::Max' data-ref="__sanitizer::Max" data-ref-filename="__sanitizer..Max">Max</a>(<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>, <a class="tu ref" href="#__asan::kChunkHeader2Size" title='__asan::kChunkHeader2Size' data-use='r' data-ref="__asan::kChunkHeader2Size" data-ref-filename="__asan..kChunkHeader2Size">kChunkHeader2Size</a>), <a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a>);</td></tr>
<tr><th id="513">513</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="386needed_size" title='needed_size' data-type='__sanitizer::uptr' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</dfn> = <a class="local col5 ref" href="#385rounded_size" title='rounded_size' data-ref="385rounded_size" data-ref-filename="385rounded_size">rounded_size</a> + <a class="local col4 ref" href="#384rz_size" title='rz_size' data-ref="384rz_size" data-ref-filename="384rz_size">rz_size</a>;</td></tr>
<tr><th id="514">514</th><td>    <b>if</b> (<a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a> &gt; <a class="local col1 ref" href="#381min_alignment" title='min_alignment' data-ref="381min_alignment" data-ref-filename="381min_alignment">min_alignment</a>)</td></tr>
<tr><th id="515">515</th><td>      <a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a> += <a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a>;</td></tr>
<tr><th id="516">516</th><td>    <i>// If we are allocating from the secondary allocator, there will be no</i></td></tr>
<tr><th id="517">517</th><td><i>    // automatic right redzone, so add the right redzone manually.</i></td></tr>
<tr><th id="518">518</th><td>    <b>if</b> (!<a class="typedef" href="asan_allocator.h.html#__asan::PrimaryAllocator" title='__asan::PrimaryAllocator' data-type='PrimaryAllocatorASVT&lt;__sanitizer::LocalAddressSpaceView&gt;' data-ref="__asan::PrimaryAllocator" data-ref-filename="__asan..PrimaryAllocator">PrimaryAllocator</a>::<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_primary64.h.html#__sanitizer::SizeClassAllocator64::CanAllocate" title='__sanitizer::SizeClassAllocator64::CanAllocate' data-ref="__sanitizer::SizeClassAllocator64::CanAllocate" data-ref-filename="__sanitizer..SizeClassAllocator64..CanAllocate">CanAllocate</a>(<a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a>, <a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a>))</td></tr>
<tr><th id="519">519</th><td>      <a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a> += <a class="local col4 ref" href="#384rz_size" title='rz_size' data-ref="384rz_size" data-ref-filename="384rz_size">rz_size</a>;</td></tr>
<tr><th id="520">520</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((IsAligned(needed_size, min_alignment))); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 520, &quot;(&quot; &quot;(IsAligned(needed_size, min_alignment))&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::IsAligned" title='__sanitizer::IsAligned' data-ref="__sanitizer::IsAligned" data-ref-filename="__sanitizer..IsAligned">IsAligned</a>(<a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a>, <a class="local col1 ref" href="#381min_alignment" title='min_alignment' data-ref="381min_alignment" data-ref-filename="381min_alignment">min_alignment</a>));</td></tr>
<tr><th id="521">521</th><td>    <b>if</b> (<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a> &gt; <a class="tu member" href="#__asan::Allocator::kMaxAllowedMallocSize" title='__asan::Allocator::kMaxAllowedMallocSize' data-use='r' data-ref="__asan::Allocator::kMaxAllowedMallocSize" data-ref-filename="__asan..Allocator..kMaxAllowedMallocSize">kMaxAllowedMallocSize</a> || <a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a> &gt; <a class="tu member" href="#__asan::Allocator::kMaxAllowedMallocSize" title='__asan::Allocator::kMaxAllowedMallocSize' data-use='r' data-ref="__asan::Allocator::kMaxAllowedMallocSize" data-ref-filename="__asan..Allocator..kMaxAllowedMallocSize">kMaxAllowedMallocSize</a> ||</td></tr>
<tr><th id="522">522</th><td>        <a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a> &gt; <a class="tu member field" href="#__asan::Allocator::max_user_defined_malloc_size" title='__asan::Allocator::max_user_defined_malloc_size' data-use='r' data-ref="__asan::Allocator::max_user_defined_malloc_size" data-ref-filename="__asan..Allocator..max_user_defined_malloc_size">max_user_defined_malloc_size</a>) {</td></tr>
<tr><th id="523">523</th><td>      <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>()) {</td></tr>
<tr><th id="524">524</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"WARNING: AddressSanitizer failed to allocate 0x%zx bytes\n"</q>,</td></tr>
<tr><th id="525">525</th><td>               (<em>void</em>*)<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>);</td></tr>
<tr><th id="526">526</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="527">527</th><td>      }</td></tr>
<tr><th id="528">528</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="387malloc_limit" title='malloc_limit' data-type='__sanitizer::uptr' data-ref="387malloc_limit" data-ref-filename="387malloc_limit">malloc_limit</dfn> =</td></tr>
<tr><th id="529">529</th><td>          <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Min" title='__sanitizer::Min' data-ref="__sanitizer::Min" data-ref-filename="__sanitizer..Min">Min</a>(<a class="tu member" href="#__asan::Allocator::kMaxAllowedMallocSize" title='__asan::Allocator::kMaxAllowedMallocSize' data-use='r' data-ref="__asan::Allocator::kMaxAllowedMallocSize" data-ref-filename="__asan..Allocator..kMaxAllowedMallocSize">kMaxAllowedMallocSize</a>, <a class="tu member field" href="#__asan::Allocator::max_user_defined_malloc_size" title='__asan::Allocator::max_user_defined_malloc_size' data-use='r' data-ref="__asan::Allocator::max_user_defined_malloc_size" data-ref-filename="__asan..Allocator..max_user_defined_malloc_size">max_user_defined_malloc_size</a>);</td></tr>
<tr><th id="530">530</th><td>      <a class="ref fn" href="asan_report.h.html#__asan::ReportAllocationSizeTooBig" title='__asan::ReportAllocationSizeTooBig' data-ref="__asan::ReportAllocationSizeTooBig" data-ref-filename="__asan..ReportAllocationSizeTooBig">ReportAllocationSizeTooBig</a>(<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>, <a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a>, <a class="local col7 ref" href="#387malloc_limit" title='malloc_limit' data-ref="387malloc_limit" data-ref-filename="387malloc_limit">malloc_limit</a>, <a class="local col7 ref" href="#377stack" title='stack' data-ref="377stack" data-ref-filename="377stack">stack</a>);</td></tr>
<tr><th id="531">531</th><td>    }</td></tr>
<tr><th id="532">532</th><td></td></tr>
<tr><th id="533">533</th><td>    <a class="type" href="asan_thread.h.html#__asan::AsanThread" title='__asan::AsanThread' data-ref="__asan::AsanThread" data-ref-filename="__asan..AsanThread">AsanThread</a> *<dfn class="local col8 decl" id="388t" title='t' data-type='__asan::AsanThread *' data-ref="388t" data-ref-filename="388t">t</dfn> = <a class="ref fn" href="asan_thread.h.html#__asan::GetCurrentThread" title='__asan::GetCurrentThread' data-ref="__asan::GetCurrentThread" data-ref-filename="__asan..GetCurrentThread">GetCurrentThread</a>();</td></tr>
<tr><th id="534">534</th><td>    <em>void</em> *<dfn class="local col9 decl" id="389allocated" title='allocated' data-type='void *' data-ref="389allocated" data-ref-filename="389allocated">allocated</dfn>;</td></tr>
<tr><th id="535">535</th><td>    <b>if</b> (<a class="local col8 ref" href="#388t" title='t' data-ref="388t" data-ref-filename="388t">t</a>) {</td></tr>
<tr><th id="536">536</th><td>      <a class="typedef" href="asan_allocator.h.html#__asan::AllocatorCache" title='__asan::AllocatorCache' data-type='AsanAllocator::AllocatorCache' data-ref="__asan::AllocatorCache" data-ref-filename="__asan..AllocatorCache">AllocatorCache</a> *<dfn class="local col0 decl" id="390cache" title='cache' data-type='__asan::AllocatorCache *' data-ref="390cache" data-ref-filename="390cache">cache</dfn> = <a class="ref fn" href="#__asan::GetAllocatorCache" title='__asan::GetAllocatorCache' data-ref="__asan::GetAllocatorCache" data-ref-filename="__asan..GetAllocatorCache">GetAllocatorCache</a>(&amp;<a class="local col8 ref" href="#388t" title='t' data-ref="388t" data-ref-filename="388t">t</a>-&gt;<a class="ref fn" href="asan_thread.h.html#__asan::AsanThread::malloc_storage" title='__asan::AsanThread::malloc_storage' data-ref="__asan::AsanThread::malloc_storage" data-ref-filename="__asan..AsanThread..malloc_storage">malloc_storage</a>());</td></tr>
<tr><th id="537">537</th><td>      <a class="local col9 ref" href="#389allocated" title='allocated' data-ref="389allocated" data-ref-filename="389allocated">allocated</a> = <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::Allocate" title='__sanitizer::CombinedAllocator::Allocate' data-ref="__sanitizer::CombinedAllocator::Allocate" data-ref-filename="__sanitizer..CombinedAllocator..Allocate">Allocate</a>(<a class="local col0 ref" href="#390cache" title='cache' data-ref="390cache" data-ref-filename="390cache">cache</a>, <a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a>, <var>8</var>);</td></tr>
<tr><th id="538">538</th><td>    } <b>else</b> {</td></tr>
<tr><th id="539">539</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col1 decl" id="391l" title='l' data-type='__sanitizer::SpinMutexLock' data-ref="391l" data-ref-filename="391l">l</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu member field" href="#__asan::Allocator::fallback_mutex" title='__asan::Allocator::fallback_mutex' data-use='a' data-ref="__asan::Allocator::fallback_mutex" data-ref-filename="__asan..Allocator..fallback_mutex">fallback_mutex</a>);</td></tr>
<tr><th id="540">540</th><td>      <a class="typedef" href="asan_allocator.h.html#__asan::AllocatorCache" title='__asan::AllocatorCache' data-type='AsanAllocator::AllocatorCache' data-ref="__asan::AllocatorCache" data-ref-filename="__asan..AllocatorCache">AllocatorCache</a> *<dfn class="local col2 decl" id="392cache" title='cache' data-type='__asan::AllocatorCache *' data-ref="392cache" data-ref-filename="392cache">cache</dfn> = &amp;<a class="tu member field" href="#__asan::Allocator::fallback_allocator_cache" title='__asan::Allocator::fallback_allocator_cache' data-use='a' data-ref="__asan::Allocator::fallback_allocator_cache" data-ref-filename="__asan..Allocator..fallback_allocator_cache">fallback_allocator_cache</a>;</td></tr>
<tr><th id="541">541</th><td>      <a class="local col9 ref" href="#389allocated" title='allocated' data-ref="389allocated" data-ref-filename="389allocated">allocated</a> = <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::Allocate" title='__sanitizer::CombinedAllocator::Allocate' data-ref="__sanitizer::CombinedAllocator::Allocate" data-ref-filename="__sanitizer..CombinedAllocator..Allocate">Allocate</a>(<a class="local col2 ref" href="#392cache" title='cache' data-ref="392cache" data-ref-filename="392cache">cache</a>, <a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a>, <var>8</var>);</td></tr>
<tr><th id="542">542</th><td>    }</td></tr>
<tr><th id="543">543</th><td>    <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(!allocated), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(!<a class="local col9 ref" href="#389allocated" title='allocated' data-ref="389allocated" data-ref-filename="389allocated">allocated</a>)) {</td></tr>
<tr><th id="544">544</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::SetAllocatorOutOfMemory" title='__sanitizer::SetAllocatorOutOfMemory' data-ref="__sanitizer::SetAllocatorOutOfMemory" data-ref-filename="__sanitizer..SetAllocatorOutOfMemory">SetAllocatorOutOfMemory</a>();</td></tr>
<tr><th id="545">545</th><td>      <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>())</td></tr>
<tr><th id="546">546</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="547">547</th><td>      <a class="ref fn" href="asan_report.h.html#__asan::ReportOutOfMemory" title='__asan::ReportOutOfMemory' data-ref="__asan::ReportOutOfMemory" data-ref-filename="__asan..ReportOutOfMemory">ReportOutOfMemory</a>(<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>, <a class="local col7 ref" href="#377stack" title='stack' data-ref="377stack" data-ref-filename="377stack">stack</a>);</td></tr>
<tr><th id="548">548</th><td>    }</td></tr>
<tr><th id="549">549</th><td></td></tr>
<tr><th id="550">550</th><td>    <b>if</b> (*(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> *)<a class="macro" href="asan_mapping.h.html#293" title="((((uptr)allocated) &gt;&gt; kDefaultShadowScale) + (kDefaultShort64bitShadowOffset))" data-ref="_M/MEM_TO_SHADOW">MEM_TO_SHADOW</a>((<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col9 ref" href="#389allocated" title='allocated' data-ref="389allocated" data-ref-filename="389allocated">allocated</a>) == <var>0</var> &amp;&amp; <a class="ref fn" href="asan_poisoning.h.html#__asan::CanPoisonMemory" title='__asan::CanPoisonMemory' data-ref="__asan::CanPoisonMemory" data-ref-filename="__asan..CanPoisonMemory">CanPoisonMemory</a>()) {</td></tr>
<tr><th id="551">551</th><td>      <i>// Heap poisoning is enabled, but the allocator provides an unpoisoned</i></td></tr>
<tr><th id="552">552</th><td><i>      // chunk. This is possible if CanPoisonMemory() was false for some</i></td></tr>
<tr><th id="553">553</th><td><i>      // time, for example, due to flags()-&gt;start_disabled.</i></td></tr>
<tr><th id="554">554</th><td><i>      // Anyway, poison the block before using it for anything else.</i></td></tr>
<tr><th id="555">555</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="393allocated_size" title='allocated_size' data-type='__sanitizer::uptr' data-ref="393allocated_size" data-ref-filename="393allocated_size">allocated_size</dfn> = <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::GetActuallyAllocatedSize" title='__sanitizer::CombinedAllocator::GetActuallyAllocatedSize' data-ref="__sanitizer::CombinedAllocator::GetActuallyAllocatedSize" data-ref-filename="__sanitizer..CombinedAllocator..GetActuallyAllocatedSize">GetActuallyAllocatedSize</a>(<a class="local col9 ref" href="#389allocated" title='allocated' data-ref="389allocated" data-ref-filename="389allocated">allocated</a>);</td></tr>
<tr><th id="556">556</th><td>      <a class="ref fn" href="asan_poisoning.h.html#__asan::PoisonShadow" title='__asan::PoisonShadow' data-ref="__asan::PoisonShadow" data-ref-filename="__asan..PoisonShadow">PoisonShadow</a>((<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col9 ref" href="#389allocated" title='allocated' data-ref="389allocated" data-ref-filename="389allocated">allocated</a>, <a class="local col3 ref" href="#393allocated_size" title='allocated_size' data-ref="393allocated_size" data-ref-filename="393allocated_size">allocated_size</a>, <a class="ref" href="asan_internal.h.html#__asan::kAsanHeapLeftRedzoneMagic" title='__asan::kAsanHeapLeftRedzoneMagic' data-ref="__asan::kAsanHeapLeftRedzoneMagic" data-ref-filename="__asan..kAsanHeapLeftRedzoneMagic">kAsanHeapLeftRedzoneMagic</a>);</td></tr>
<tr><th id="557">557</th><td>    }</td></tr>
<tr><th id="558">558</th><td></td></tr>
<tr><th id="559">559</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="394alloc_beg" title='alloc_beg' data-type='__sanitizer::uptr' data-ref="394alloc_beg" data-ref-filename="394alloc_beg">alloc_beg</dfn> = <b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col9 ref" href="#389allocated" title='allocated' data-ref="389allocated" data-ref-filename="389allocated">allocated</a>);</td></tr>
<tr><th id="560">560</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="395alloc_end" title='alloc_end' data-type='__sanitizer::uptr' data-ref="395alloc_end" data-ref-filename="395alloc_end">alloc_end</dfn> = <a class="local col4 ref" href="#394alloc_beg" title='alloc_beg' data-ref="394alloc_beg" data-ref-filename="394alloc_beg">alloc_beg</a> + <a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a>;</td></tr>
<tr><th id="561">561</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="396user_beg" title='user_beg' data-type='__sanitizer::uptr' data-ref="396user_beg" data-ref-filename="396user_beg">user_beg</dfn> = <a class="local col4 ref" href="#394alloc_beg" title='alloc_beg' data-ref="394alloc_beg" data-ref-filename="394alloc_beg">alloc_beg</a> + <a class="local col4 ref" href="#384rz_size" title='rz_size' data-ref="384rz_size" data-ref-filename="384rz_size">rz_size</a>;</td></tr>
<tr><th id="562">562</th><td>    <b>if</b> (!<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::IsAligned" title='__sanitizer::IsAligned' data-ref="__sanitizer::IsAligned" data-ref-filename="__sanitizer..IsAligned">IsAligned</a>(<a class="local col6 ref" href="#396user_beg" title='user_beg' data-ref="396user_beg" data-ref-filename="396user_beg">user_beg</a>, <a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a>))</td></tr>
<tr><th id="563">563</th><td>      <a class="local col6 ref" href="#396user_beg" title='user_beg' data-ref="396user_beg" data-ref-filename="396user_beg">user_beg</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::RoundUpTo" title='__sanitizer::RoundUpTo' data-ref="__sanitizer::RoundUpTo" data-ref-filename="__sanitizer..RoundUpTo">RoundUpTo</a>(<a class="local col6 ref" href="#396user_beg" title='user_beg' data-ref="396user_beg" data-ref-filename="396user_beg">user_beg</a>, <a class="local col6 ref" href="#376alignment" title='alignment' data-ref="376alignment" data-ref-filename="376alignment">alignment</a>);</td></tr>
<tr><th id="564">564</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="397user_end" title='user_end' data-type='__sanitizer::uptr' data-ref="397user_end" data-ref-filename="397user_end">user_end</dfn> = <a class="local col6 ref" href="#396user_beg" title='user_beg' data-ref="396user_beg" data-ref-filename="396user_beg">user_beg</a> + <a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>;</td></tr>
<tr><th id="565">565</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#303" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((user_end)); __sanitizer::u64 v2 = (__sanitizer::u64)((alloc_end)); if (__builtin_expect(!!(!(v1 &lt;= v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 565, &quot;(&quot; &quot;(user_end)&quot; &quot;) &quot; &quot;&lt;=&quot; &quot; (&quot; &quot;(alloc_end)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_LE">CHECK_LE</a>(<a class="local col7 ref" href="#397user_end" title='user_end' data-ref="397user_end" data-ref-filename="397user_end">user_end</a>, <a class="local col5 ref" href="#395alloc_end" title='alloc_end' data-ref="395alloc_end" data-ref-filename="395alloc_end">alloc_end</a>);</td></tr>
<tr><th id="566">566</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="398chunk_beg" title='chunk_beg' data-type='__sanitizer::uptr' data-ref="398chunk_beg" data-ref-filename="398chunk_beg">chunk_beg</dfn> = <a class="local col6 ref" href="#396user_beg" title='user_beg' data-ref="396user_beg" data-ref-filename="396user_beg">user_beg</a> - <a class="tu ref" href="#__asan::kChunkHeaderSize" title='__asan::kChunkHeaderSize' data-use='r' data-ref="__asan::kChunkHeaderSize" data-ref-filename="__asan..kChunkHeaderSize">kChunkHeaderSize</a>;</td></tr>
<tr><th id="567">567</th><td>    <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col9 decl" id="399m" title='m' data-type='__asan::AsanChunk *' data-ref="399m" data-ref-filename="399m">m</dfn> = <b>reinterpret_cast</b>&lt;<a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *&gt;(<a class="local col8 ref" href="#398chunk_beg" title='chunk_beg' data-ref="398chunk_beg" data-ref-filename="398chunk_beg">chunk_beg</a>);</td></tr>
<tr><th id="568">568</th><td>    <a class="local col9 ref" href="#399m" title='m' data-ref="399m" data-ref-filename="399m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::alloc_type" title='__asan::ChunkHeader::alloc_type' data-use='w' data-ref="__asan::ChunkHeader::alloc_type" data-ref-filename="__asan..ChunkHeader..alloc_type">alloc_type</a> = <a class="local col8 ref" href="#378alloc_type" title='alloc_type' data-ref="378alloc_type" data-ref-filename="378alloc_type">alloc_type</a>;</td></tr>
<tr><th id="569">569</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((size)); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 569, &quot;(&quot; &quot;(size)&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>);</td></tr>
<tr><th id="570">570</th><td>    <a class="local col9 ref" href="#399m" title='m' data-ref="399m" data-ref-filename="399m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::SetUsedSize" title='__asan::ChunkHeader::SetUsedSize' data-use='c' data-ref="__asan::ChunkHeader::SetUsedSize" data-ref-filename="__asan..ChunkHeader..SetUsedSize">SetUsedSize</a>(<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>);</td></tr>
<tr><th id="571">571</th><td>    <a class="local col9 ref" href="#399m" title='m' data-ref="399m" data-ref-filename="399m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::user_requested_alignment_log" title='__asan::ChunkHeader::user_requested_alignment_log' data-use='w' data-ref="__asan::ChunkHeader::user_requested_alignment_log" data-ref-filename="__asan..ChunkHeader..user_requested_alignment_log">user_requested_alignment_log</a> = <a class="local col2 ref" href="#382user_requested_alignment_log" title='user_requested_alignment_log' data-ref="382user_requested_alignment_log" data-ref-filename="382user_requested_alignment_log">user_requested_alignment_log</a>;</td></tr>
<tr><th id="572">572</th><td></td></tr>
<tr><th id="573">573</th><td>    <a class="local col9 ref" href="#399m" title='m' data-ref="399m" data-ref-filename="399m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::SetAllocContext" title='__asan::ChunkHeader::SetAllocContext' data-use='c' data-ref="__asan::ChunkHeader::SetAllocContext" data-ref-filename="__asan..ChunkHeader..SetAllocContext">SetAllocContext</a>(<a class="local col8 ref" href="#388t" title='t' data-ref="388t" data-ref-filename="388t">t</a> ? <a class="local col8 ref" href="#388t" title='t' data-ref="388t" data-ref-filename="388t">t</a>-&gt;<a class="ref fn" href="asan_thread.h.html#__asan::AsanThread::tid" title='__asan::AsanThread::tid' data-ref="__asan::AsanThread::tid" data-ref-filename="__asan..AsanThread..tid">tid</a>() : <var>0</var>, <a class="ref fn" href="../sanitizer_common/sanitizer_stackdepot.h.html#__sanitizer::StackDepotPut" title='__sanitizer::StackDepotPut' data-ref="__sanitizer::StackDepotPut" data-ref-filename="__sanitizer..StackDepotPut">StackDepotPut</a>(<a class="ref fn fake" href="../sanitizer_common/sanitizer_stacktrace.h.html#41" title='__sanitizer::StackTrace::StackTrace' data-ref="__sanitizer::StackTrace::StackTrace" data-ref-filename="__sanitizer..StackTrace..StackTrace"></a>*<a class="local col7 ref" href="#377stack" title='stack' data-ref="377stack" data-ref-filename="377stack">stack</a>));</td></tr>
<tr><th id="574">574</th><td></td></tr>
<tr><th id="575">575</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="400size_rounded_down_to_granularity" title='size_rounded_down_to_granularity' data-type='__sanitizer::uptr' data-ref="400size_rounded_down_to_granularity" data-ref-filename="400size_rounded_down_to_granularity">size_rounded_down_to_granularity</dfn> =</td></tr>
<tr><th id="576">576</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::RoundDownTo" title='__sanitizer::RoundDownTo' data-ref="__sanitizer::RoundDownTo" data-ref-filename="__sanitizer..RoundDownTo">RoundDownTo</a>(<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>, <a class="macro" href="asan_mapping.h.html#257" title="(1ULL &lt;&lt; kDefaultShadowScale)" data-ref="_M/SHADOW_GRANULARITY">SHADOW_GRANULARITY</a>);</td></tr>
<tr><th id="577">577</th><td>    <i>// Unpoison the bulk of the memory region.</i></td></tr>
<tr><th id="578">578</th><td>    <b>if</b> (<a class="local col0 ref" href="#400size_rounded_down_to_granularity" title='size_rounded_down_to_granularity' data-ref="400size_rounded_down_to_granularity" data-ref-filename="400size_rounded_down_to_granularity">size_rounded_down_to_granularity</a>)</td></tr>
<tr><th id="579">579</th><td>      <a class="ref fn" href="asan_poisoning.h.html#__asan::PoisonShadow" title='__asan::PoisonShadow' data-ref="__asan::PoisonShadow" data-ref-filename="__asan..PoisonShadow">PoisonShadow</a>(<a class="local col6 ref" href="#396user_beg" title='user_beg' data-ref="396user_beg" data-ref-filename="396user_beg">user_beg</a>, <a class="local col0 ref" href="#400size_rounded_down_to_granularity" title='size_rounded_down_to_granularity' data-ref="400size_rounded_down_to_granularity" data-ref-filename="400size_rounded_down_to_granularity">size_rounded_down_to_granularity</a>, <var>0</var>);</td></tr>
<tr><th id="580">580</th><td>    <i>// Deal with the end of the region if size is not aligned to granularity.</i></td></tr>
<tr><th id="581">581</th><td>    <b>if</b> (<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a> != <a class="local col0 ref" href="#400size_rounded_down_to_granularity" title='size_rounded_down_to_granularity' data-ref="400size_rounded_down_to_granularity" data-ref-filename="400size_rounded_down_to_granularity">size_rounded_down_to_granularity</a> &amp;&amp; <a class="ref fn" href="asan_poisoning.h.html#__asan::CanPoisonMemory" title='__asan::CanPoisonMemory' data-ref="__asan::CanPoisonMemory" data-ref-filename="__asan..CanPoisonMemory">CanPoisonMemory</a>()) {</td></tr>
<tr><th id="582">582</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> *<dfn class="local col1 decl" id="401shadow" title='shadow' data-type='__sanitizer::u8 *' data-ref="401shadow" data-ref-filename="401shadow">shadow</dfn> =</td></tr>
<tr><th id="583">583</th><td>          (<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> *)<a class="ref fn" href="asan_mapping.h.html#__asan::MemToShadow" title='__asan::MemToShadow' data-ref="__asan::MemToShadow" data-ref-filename="__asan..MemToShadow">MemToShadow</a>(<a class="local col6 ref" href="#396user_beg" title='user_beg' data-ref="396user_beg" data-ref-filename="396user_beg">user_beg</a> + <a class="local col0 ref" href="#400size_rounded_down_to_granularity" title='size_rounded_down_to_granularity' data-ref="400size_rounded_down_to_granularity" data-ref-filename="400size_rounded_down_to_granularity">size_rounded_down_to_granularity</a>);</td></tr>
<tr><th id="584">584</th><td>      *<a class="local col1 ref" href="#401shadow" title='shadow' data-ref="401shadow" data-ref-filename="401shadow">shadow</a> = <a class="local col0 ref" href="#380fl" title='fl' data-ref="380fl" data-ref-filename="380fl">fl</a>.<a class="ref field" href="asan_flags.inc.html#109" title='__asan::Flags::poison_partial' data-ref="__asan::Flags::poison_partial" data-ref-filename="__asan..Flags..poison_partial">poison_partial</a> ? (<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a> &amp; (<a class="macro" href="asan_mapping.h.html#257" title="(1ULL &lt;&lt; kDefaultShadowScale)" data-ref="_M/SHADOW_GRANULARITY">SHADOW_GRANULARITY</a> - <var>1</var>)) : <var>0</var>;</td></tr>
<tr><th id="585">585</th><td>    }</td></tr>
<tr><th id="586">586</th><td></td></tr>
<tr><th id="587">587</th><td>    <a class="type" href="asan_stats.h.html#__asan::AsanStats" title='__asan::AsanStats' data-ref="__asan::AsanStats" data-ref-filename="__asan..AsanStats">AsanStats</a> &amp;<dfn class="local col2 decl" id="402thread_stats" title='thread_stats' data-type='__asan::AsanStats &amp;' data-ref="402thread_stats" data-ref-filename="402thread_stats">thread_stats</dfn> = <a class="ref fn" href="asan_stats.h.html#__asan::GetCurrentThreadStats" title='__asan::GetCurrentThreadStats' data-ref="__asan::GetCurrentThreadStats" data-ref-filename="__asan..GetCurrentThreadStats">GetCurrentThreadStats</a>();</td></tr>
<tr><th id="588">588</th><td>    <a class="local col2 ref" href="#402thread_stats" title='thread_stats' data-ref="402thread_stats" data-ref-filename="402thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::mallocs" title='__asan::AsanStats::mallocs' data-ref="__asan::AsanStats::mallocs" data-ref-filename="__asan..AsanStats..mallocs">mallocs</a>++;</td></tr>
<tr><th id="589">589</th><td>    <a class="local col2 ref" href="#402thread_stats" title='thread_stats' data-ref="402thread_stats" data-ref-filename="402thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::malloced" title='__asan::AsanStats::malloced' data-ref="__asan::AsanStats::malloced" data-ref-filename="__asan..AsanStats..malloced">malloced</a> += <a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>;</td></tr>
<tr><th id="590">590</th><td>    <a class="local col2 ref" href="#402thread_stats" title='thread_stats' data-ref="402thread_stats" data-ref-filename="402thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::malloced_redzones" title='__asan::AsanStats::malloced_redzones' data-ref="__asan::AsanStats::malloced_redzones" data-ref-filename="__asan..AsanStats..malloced_redzones">malloced_redzones</a> += <a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a> - <a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>;</td></tr>
<tr><th id="591">591</th><td>    <b>if</b> (<a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a> &gt; <a class="typedef" href="asan_allocator.h.html#__asan::SizeClassMap" title='__asan::SizeClassMap' data-type='__sanitizer::DefaultSizeClassMap' data-ref="__asan::SizeClassMap" data-ref-filename="__asan..SizeClassMap">SizeClassMap</a>::<a class="ref" href="../sanitizer_common/sanitizer_allocator_size_class_map.h.html#__sanitizer::SizeClassMap::kMaxSize" title='__sanitizer::SizeClassMap::kMaxSize' data-ref="__sanitizer::SizeClassMap::kMaxSize" data-ref-filename="__sanitizer..SizeClassMap..kMaxSize">kMaxSize</a>)</td></tr>
<tr><th id="592">592</th><td>      <a class="local col2 ref" href="#402thread_stats" title='thread_stats' data-ref="402thread_stats" data-ref-filename="402thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::malloc_large" title='__asan::AsanStats::malloc_large' data-ref="__asan::AsanStats::malloc_large" data-ref-filename="__asan..AsanStats..malloc_large">malloc_large</a>++;</td></tr>
<tr><th id="593">593</th><td>    <b>else</b></td></tr>
<tr><th id="594">594</th><td>      <a class="local col2 ref" href="#402thread_stats" title='thread_stats' data-ref="402thread_stats" data-ref-filename="402thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::malloced_by_size" title='__asan::AsanStats::malloced_by_size' data-ref="__asan::AsanStats::malloced_by_size" data-ref-filename="__asan..AsanStats..malloced_by_size">malloced_by_size</a>[<a class="typedef" href="asan_allocator.h.html#__asan::SizeClassMap" title='__asan::SizeClassMap' data-type='__sanitizer::DefaultSizeClassMap' data-ref="__asan::SizeClassMap" data-ref-filename="__asan..SizeClassMap">SizeClassMap</a>::<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_size_class_map.h.html#__sanitizer::SizeClassMap::ClassID" title='__sanitizer::SizeClassMap::ClassID' data-ref="__sanitizer::SizeClassMap::ClassID" data-ref-filename="__sanitizer..SizeClassMap..ClassID">ClassID</a>(<a class="local col6 ref" href="#386needed_size" title='needed_size' data-ref="386needed_size" data-ref-filename="386needed_size">needed_size</a>)]++;</td></tr>
<tr><th id="595">595</th><td></td></tr>
<tr><th id="596">596</th><td>    <em>void</em> *<dfn class="local col3 decl" id="403res" title='res' data-type='void *' data-ref="403res" data-ref-filename="403res">res</dfn> = <b>reinterpret_cast</b>&lt;<em>void</em> *&gt;(<a class="local col6 ref" href="#396user_beg" title='user_beg' data-ref="396user_beg" data-ref-filename="396user_beg">user_beg</a>);</td></tr>
<tr><th id="597">597</th><td>    <b>if</b> (<a class="local col9 ref" href="#379can_fill" title='can_fill' data-ref="379can_fill" data-ref-filename="379can_fill">can_fill</a> &amp;&amp; <a class="local col0 ref" href="#380fl" title='fl' data-ref="380fl" data-ref-filename="380fl">fl</a>.<a class="ref field" href="asan_flags.inc.html#61" title='__asan::Flags::max_malloc_fill_size' data-ref="__asan::Flags::max_malloc_fill_size" data-ref-filename="__asan..Flags..max_malloc_fill_size">max_malloc_fill_size</a>) {</td></tr>
<tr><th id="598">598</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="404fill_size" title='fill_size' data-type='__sanitizer::uptr' data-ref="404fill_size" data-ref-filename="404fill_size">fill_size</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Min" title='__sanitizer::Min' data-ref="__sanitizer::Min" data-ref-filename="__sanitizer..Min">Min</a>(<a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>, (<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col0 ref" href="#380fl" title='fl' data-ref="380fl" data-ref-filename="380fl">fl</a>.<a class="ref field" href="asan_flags.inc.html#61" title='__asan::Flags::max_malloc_fill_size' data-ref="__asan::Flags::max_malloc_fill_size" data-ref-filename="__asan..Flags..max_malloc_fill_size">max_malloc_fill_size</a>);</td></tr>
<tr><th id="599">599</th><td>      <a class="macro" href="../interception/interception.h.html#171" title="__interception::real_memset" data-ref="_M/REAL">REAL</a>(memset)(<a class="local col3 ref" href="#403res" title='res' data-ref="403res" data-ref-filename="403res">res</a>, <a class="local col0 ref" href="#380fl" title='fl' data-ref="380fl" data-ref-filename="380fl">fl</a>.<a class="ref field" href="asan_flags.inc.html#69" title='__asan::Flags::malloc_fill_byte' data-ref="__asan::Flags::malloc_fill_byte" data-ref-filename="__asan..Flags..malloc_fill_byte">malloc_fill_byte</a>, <a class="local col4 ref" href="#404fill_size" title='fill_size' data-ref="404fill_size" data-ref-filename="404fill_size">fill_size</a>);</td></tr>
<tr><th id="600">600</th><td>    }</td></tr>
<tr><th id="601">601</th><td><u>#<span data-ppcond="601">if</span> <a class="macro" href="../lsan/lsan_common.h.html#39" title="1" data-ref="_M/CAN_SANITIZE_LEAKS">CAN_SANITIZE_LEAKS</a></u></td></tr>
<tr><th id="602">602</th><td>    <a class="local col9 ref" href="#399m" title='m' data-ref="399m" data-ref-filename="399m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::lsan_tag" title='__asan::ChunkHeader::lsan_tag' data-use='w' data-ref="__asan::ChunkHeader::lsan_tag" data-ref-filename="__asan..ChunkHeader..lsan_tag">lsan_tag</a> = <span class="namespace">__lsan::</span><a class="ref fn" href="../lsan/lsan_common.h.html#__lsan::DisabledInThisThread" title='__lsan::DisabledInThisThread' data-ref="__lsan::DisabledInThisThread" data-ref-filename="__lsan..DisabledInThisThread">DisabledInThisThread</a>() ? <span class="namespace">__lsan::</span><a class="enum" href="../lsan/lsan_common.h.html#__lsan::kIgnored" title='__lsan::kIgnored' data-ref="__lsan::kIgnored" data-ref-filename="__lsan..kIgnored">kIgnored</a></td></tr>
<tr><th id="603">603</th><td>                                                 : <span class="namespace">__lsan::</span><a class="enum" href="../lsan/lsan_common.h.html#__lsan::kDirectlyLeaked" title='__lsan::kDirectlyLeaked' data-ref="__lsan::kDirectlyLeaked" data-ref-filename="__lsan..kDirectlyLeaked">kDirectlyLeaked</a>;</td></tr>
<tr><th id="604">604</th><td><u>#<span data-ppcond="601">endif</span></u></td></tr>
<tr><th id="605">605</th><td>    <i>// Must be the last mutation of metadata in this function.</i></td></tr>
<tr><th id="606">606</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="local col9 ref" href="#399m" title='m' data-ref="399m" data-ref-filename="399m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="607">607</th><td>    <b>if</b> (<a class="local col4 ref" href="#394alloc_beg" title='alloc_beg' data-ref="394alloc_beg" data-ref-filename="394alloc_beg">alloc_beg</a> != <a class="local col8 ref" href="#398chunk_beg" title='chunk_beg' data-ref="398chunk_beg" data-ref-filename="398chunk_beg">chunk_beg</a>) {</td></tr>
<tr><th id="608">608</th><td>      <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#303" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((alloc_beg + sizeof(LargeChunkHeader))); __sanitizer::u64 v2 = (__sanitizer::u64)((chunk_beg)); if (__builtin_expect(!!(!(v1 &lt;= v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 608, &quot;(&quot; &quot;(alloc_beg + sizeof(LargeChunkHeader))&quot; &quot;) &quot; &quot;&lt;=&quot; &quot; (&quot; &quot;(chunk_beg)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_LE">CHECK_LE</a>(<a class="local col4 ref" href="#394alloc_beg" title='alloc_beg' data-ref="394alloc_beg" data-ref-filename="394alloc_beg">alloc_beg</a> + <b>sizeof</b>(<a class="type" href="#__asan::LargeChunkHeader" title='__asan::LargeChunkHeader' data-ref="__asan::LargeChunkHeader" data-ref-filename="__asan..LargeChunkHeader">LargeChunkHeader</a>), <a class="local col8 ref" href="#398chunk_beg" title='chunk_beg' data-ref="398chunk_beg" data-ref-filename="398chunk_beg">chunk_beg</a>);</td></tr>
<tr><th id="609">609</th><td>      <b>reinterpret_cast</b>&lt;<a class="type" href="#__asan::LargeChunkHeader" title='__asan::LargeChunkHeader' data-ref="__asan::LargeChunkHeader" data-ref-filename="__asan..LargeChunkHeader">LargeChunkHeader</a> *&gt;(<a class="local col4 ref" href="#394alloc_beg" title='alloc_beg' data-ref="394alloc_beg" data-ref-filename="394alloc_beg">alloc_beg</a>)-&gt;<a class="tu ref fn" href="#__asan::LargeChunkHeader::Set" title='__asan::LargeChunkHeader::Set' data-use='c' data-ref="__asan::LargeChunkHeader::Set" data-ref-filename="__asan..LargeChunkHeader..Set">Set</a>(<a class="local col9 ref" href="#399m" title='m' data-ref="399m" data-ref-filename="399m">m</a>);</td></tr>
<tr><th id="610">610</th><td>    }</td></tr>
<tr><th id="611">611</th><td>    <a class="macro" href="asan_internal.h.html#128" title="do { if (&amp;__sanitizer_malloc_hook) __sanitizer_malloc_hook(res, size); RunMallocHooks(res, size); } while (false)" data-ref="_M/ASAN_MALLOC_HOOK">ASAN_MALLOC_HOOK</a>(<a class="local col3 ref" href="#403res" title='res' data-ref="403res" data-ref-filename="403res">res</a>, <a class="local col5 ref" href="#375size" title='size' data-ref="375size" data-ref-filename="375size">size</a>);</td></tr>
<tr><th id="612">612</th><td>    <b>return</b> <a class="local col3 ref" href="#403res" title='res' data-ref="403res" data-ref-filename="403res">res</a>;</td></tr>
<tr><th id="613">613</th><td>  }</td></tr>
<tr><th id="614">614</th><td></td></tr>
<tr><th id="615">615</th><td>  <i  data-doc="__asan::Allocator::AtomicallySetQuarantineFlagIfAllocated">// Set quarantine flag if chunk is allocated, issue ASan error report on</i></td></tr>
<tr><th id="616">616</th><td><i  data-doc="__asan::Allocator::AtomicallySetQuarantineFlagIfAllocated">  // available and quarantined chunks. Return true on success, false otherwise.</i></td></tr>
<tr><th id="617">617</th><td>  <em>bool</em> <dfn class="tu decl def fn" id="__asan::Allocator::AtomicallySetQuarantineFlagIfAllocated" title='__asan::Allocator::AtomicallySetQuarantineFlagIfAllocated' data-type='bool __asan::Allocator::AtomicallySetQuarantineFlagIfAllocated(__asan::AsanChunk * m, void * ptr, __sanitizer::BufferedStackTrace * stack)' data-ref="__asan::Allocator::AtomicallySetQuarantineFlagIfAllocated" data-ref-filename="__asan..Allocator..AtomicallySetQuarantineFlagIfAllocated">AtomicallySetQuarantineFlagIfAllocated</dfn>(<a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col5 decl" id="405m" title='m' data-type='__asan::AsanChunk *' data-ref="405m" data-ref-filename="405m">m</dfn>, <em>void</em> *<dfn class="local col6 decl" id="406ptr" title='ptr' data-type='void *' data-ref="406ptr" data-ref-filename="406ptr">ptr</dfn>,</td></tr>
<tr><th id="618">618</th><td>                                              <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col7 decl" id="407stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="407stack" data-ref-filename="407stack">stack</dfn>) {</td></tr>
<tr><th id="619">619</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="local col8 decl" id="408old_chunk_state" title='old_chunk_state' data-type='__sanitizer::u8' data-ref="408old_chunk_state" data-ref-filename="408old_chunk_state">old_chunk_state</dfn> = <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>;</td></tr>
<tr><th id="620">620</th><td>    <i>// Flip the chunk_state atomically to avoid race on double-free.</i></td></tr>
<tr><th id="621">621</th><td>    <b>if</b> (!<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang.h.html#__sanitizer::atomic_compare_exchange_strong" title='__sanitizer::atomic_compare_exchange_strong' data-ref="__sanitizer::atomic_compare_exchange_strong" data-ref-filename="__sanitizer..atomic_compare_exchange_strong">atomic_compare_exchange_strong</a>(&amp;<a class="local col5 ref" href="#405m" title='m' data-ref="405m" data-ref-filename="405m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, &amp;<a class="local col8 ref" href="#408old_chunk_state" title='old_chunk_state' data-ref="408old_chunk_state" data-ref-filename="408old_chunk_state">old_chunk_state</a>,</td></tr>
<tr><th id="622">622</th><td>                                        <a class="enum" href="#__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</a>,</td></tr>
<tr><th id="623">623</th><td>                                        <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>)) {</td></tr>
<tr><th id="624">624</th><td>      <a class="tu member fn" href="#__asan::Allocator::ReportInvalidFree" title='__asan::Allocator::ReportInvalidFree' data-use='c' data-ref="__asan::Allocator::ReportInvalidFree" data-ref-filename="__asan..Allocator..ReportInvalidFree">ReportInvalidFree</a>(<a class="local col6 ref" href="#406ptr" title='ptr' data-ref="406ptr" data-ref-filename="406ptr">ptr</a>, <a class="local col8 ref" href="#408old_chunk_state" title='old_chunk_state' data-ref="408old_chunk_state" data-ref-filename="408old_chunk_state">old_chunk_state</a>, <a class="local col7 ref" href="#407stack" title='stack' data-ref="407stack" data-ref-filename="407stack">stack</a>);</td></tr>
<tr><th id="625">625</th><td>      <i>// It's not safe to push a chunk in quarantine on invalid free.</i></td></tr>
<tr><th id="626">626</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="627">627</th><td>    }</td></tr>
<tr><th id="628">628</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((CHUNK_ALLOCATED)); __sanitizer::u64 v2 = (__sanitizer::u64)((old_chunk_state)); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 628, &quot;(&quot; &quot;(CHUNK_ALLOCATED)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(old_chunk_state)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>, <a class="local col8 ref" href="#408old_chunk_state" title='old_chunk_state' data-ref="408old_chunk_state" data-ref-filename="408old_chunk_state">old_chunk_state</a>);</td></tr>
<tr><th id="629">629</th><td>    <i>// It was a user data.</i></td></tr>
<tr><th id="630">630</th><td>    <a class="local col5 ref" href="#405m" title='m' data-ref="405m" data-ref-filename="405m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkBase::SetFreeContext" title='__asan::ChunkBase::SetFreeContext' data-use='c' data-ref="__asan::ChunkBase::SetFreeContext" data-ref-filename="__asan..ChunkBase..SetFreeContext">SetFreeContext</a>(<a class="ref" href="asan_thread.h.html#__asan::kInvalidTid" title='__asan::kInvalidTid' data-ref="__asan::kInvalidTid" data-ref-filename="__asan..kInvalidTid">kInvalidTid</a>, <var>0</var>);</td></tr>
<tr><th id="631">631</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="632">632</th><td>  }</td></tr>
<tr><th id="633">633</th><td></td></tr>
<tr><th id="634">634</th><td>  <i  data-doc="__asan::Allocator::QuarantineChunk">// Expects the chunk to already be marked as quarantined by using</i></td></tr>
<tr><th id="635">635</th><td><i  data-doc="__asan::Allocator::QuarantineChunk">  // AtomicallySetQuarantineFlagIfAllocated.</i></td></tr>
<tr><th id="636">636</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::QuarantineChunk" title='__asan::Allocator::QuarantineChunk' data-type='void __asan::Allocator::QuarantineChunk(__asan::AsanChunk * m, void * ptr, __sanitizer::BufferedStackTrace * stack)' data-ref="__asan::Allocator::QuarantineChunk" data-ref-filename="__asan..Allocator..QuarantineChunk">QuarantineChunk</dfn>(<a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col9 decl" id="409m" title='m' data-type='__asan::AsanChunk *' data-ref="409m" data-ref-filename="409m">m</dfn>, <em>void</em> *<dfn class="local col0 decl" id="410ptr" title='ptr' data-type='void *' data-ref="410ptr" data-ref-filename="410ptr">ptr</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col1 decl" id="411stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="411stack" data-ref-filename="411stack">stack</dfn>) {</td></tr>
<tr><th id="637">637</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((atomic_load(&amp;m-&gt;chunk_state, memory_order_relaxed))); __sanitizer::u64 v2 = (__sanitizer::u64)((CHUNK_QUARANTINE)); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 638, &quot;(&quot; &quot;(atomic_load(&amp;m-&gt;chunk_state, memory_order_relaxed))&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(CHUNK_QUARANTINE)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>),</td></tr>
<tr><th id="638">638</th><td>             <a class="enum" href="#__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</a>);</td></tr>
<tr><th id="639">639</th><td>    <a class="type" href="asan_thread.h.html#__asan::AsanThread" title='__asan::AsanThread' data-ref="__asan::AsanThread" data-ref-filename="__asan..AsanThread">AsanThread</a> *<dfn class="local col2 decl" id="412t" title='t' data-type='__asan::AsanThread *' data-ref="412t" data-ref-filename="412t">t</dfn> = <a class="ref fn" href="asan_thread.h.html#__asan::GetCurrentThread" title='__asan::GetCurrentThread' data-ref="__asan::GetCurrentThread" data-ref-filename="__asan..GetCurrentThread">GetCurrentThread</a>();</td></tr>
<tr><th id="640">640</th><td>    <a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkBase::SetFreeContext" title='__asan::ChunkBase::SetFreeContext' data-use='c' data-ref="__asan::ChunkBase::SetFreeContext" data-ref-filename="__asan..ChunkBase..SetFreeContext">SetFreeContext</a>(<a class="local col2 ref" href="#412t" title='t' data-ref="412t" data-ref-filename="412t">t</a> ? <a class="local col2 ref" href="#412t" title='t' data-ref="412t" data-ref-filename="412t">t</a>-&gt;<a class="ref fn" href="asan_thread.h.html#__asan::AsanThread::tid" title='__asan::AsanThread::tid' data-ref="__asan::AsanThread::tid" data-ref-filename="__asan..AsanThread..tid">tid</a>() : <var>0</var>, <a class="ref fn" href="../sanitizer_common/sanitizer_stackdepot.h.html#__sanitizer::StackDepotPut" title='__sanitizer::StackDepotPut' data-ref="__sanitizer::StackDepotPut" data-ref-filename="__sanitizer..StackDepotPut">StackDepotPut</a>(<a class="ref fn fake" href="../sanitizer_common/sanitizer_stacktrace.h.html#41" title='__sanitizer::StackTrace::StackTrace' data-ref="__sanitizer::StackTrace::StackTrace" data-ref-filename="__sanitizer..StackTrace..StackTrace"></a>*<a class="local col1 ref" href="#411stack" title='stack' data-ref="411stack" data-ref-filename="411stack">stack</a>));</td></tr>
<tr><th id="641">641</th><td></td></tr>
<tr><th id="642">642</th><td>    <a class="type" href="asan_flags.h.html#__asan::Flags" title='__asan::Flags' data-ref="__asan::Flags" data-ref-filename="__asan..Flags">Flags</a> &amp;<dfn class="local col3 decl" id="413fl" title='fl' data-type='__asan::Flags &amp;' data-ref="413fl" data-ref-filename="413fl">fl</dfn> = *<a class="ref fn" href="asan_flags.h.html#__asan::flags" title='__asan::flags' data-ref="__asan::flags" data-ref-filename="__asan..flags">flags</a>();</td></tr>
<tr><th id="643">643</th><td>    <b>if</b> (<a class="local col3 ref" href="#413fl" title='fl' data-ref="413fl" data-ref-filename="413fl">fl</a>.<a class="ref field" href="asan_flags.inc.html#65" title='__asan::Flags::max_free_fill_size' data-ref="__asan::Flags::max_free_fill_size" data-ref-filename="__asan..Flags..max_free_fill_size">max_free_fill_size</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="644">644</th><td>      <i>// We have to skip the chunk header, it contains free_context_id.</i></td></tr>
<tr><th id="645">645</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="414scribble_start" title='scribble_start' data-type='__sanitizer::uptr' data-ref="414scribble_start" data-ref-filename="414scribble_start">scribble_start</dfn> = (<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a> + <a class="tu ref" href="#__asan::kChunkHeaderSize" title='__asan::kChunkHeaderSize' data-use='r' data-ref="__asan::kChunkHeaderSize" data-ref-filename="__asan..kChunkHeaderSize">kChunkHeaderSize</a> + <a class="tu ref" href="#__asan::kChunkHeader2Size" title='__asan::kChunkHeader2Size' data-use='r' data-ref="__asan::kChunkHeader2Size" data-ref-filename="__asan..kChunkHeader2Size">kChunkHeader2Size</a>;</td></tr>
<tr><th id="646">646</th><td>      <b>if</b> (<a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>() &gt;= <a class="tu ref" href="#__asan::kChunkHeader2Size" title='__asan::kChunkHeader2Size' data-use='r' data-ref="__asan::kChunkHeader2Size" data-ref-filename="__asan..kChunkHeader2Size">kChunkHeader2Size</a>) {  <i>// Skip Header2 in user area.</i></td></tr>
<tr><th id="647">647</th><td>        <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="415size_to_fill" title='size_to_fill' data-type='__sanitizer::uptr' data-ref="415size_to_fill" data-ref-filename="415size_to_fill">size_to_fill</dfn> = <a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>() - <a class="tu ref" href="#__asan::kChunkHeader2Size" title='__asan::kChunkHeader2Size' data-use='r' data-ref="__asan::kChunkHeader2Size" data-ref-filename="__asan..kChunkHeader2Size">kChunkHeader2Size</a>;</td></tr>
<tr><th id="648">648</th><td>        <a class="local col5 ref" href="#415size_to_fill" title='size_to_fill' data-ref="415size_to_fill" data-ref-filename="415size_to_fill">size_to_fill</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Min" title='__sanitizer::Min' data-ref="__sanitizer::Min" data-ref-filename="__sanitizer..Min">Min</a>(<a class="local col5 ref" href="#415size_to_fill" title='size_to_fill' data-ref="415size_to_fill" data-ref-filename="415size_to_fill">size_to_fill</a>, (<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col3 ref" href="#413fl" title='fl' data-ref="413fl" data-ref-filename="413fl">fl</a>.<a class="ref field" href="asan_flags.inc.html#65" title='__asan::Flags::max_free_fill_size' data-ref="__asan::Flags::max_free_fill_size" data-ref-filename="__asan..Flags..max_free_fill_size">max_free_fill_size</a>);</td></tr>
<tr><th id="649">649</th><td>        <a class="macro" href="../interception/interception.h.html#171" title="__interception::real_memset" data-ref="_M/REAL">REAL</a>(memset)((<em>void</em> *)<a class="local col4 ref" href="#414scribble_start" title='scribble_start' data-ref="414scribble_start" data-ref-filename="414scribble_start">scribble_start</a>, <a class="local col3 ref" href="#413fl" title='fl' data-ref="413fl" data-ref-filename="413fl">fl</a>.<a class="ref field" href="asan_flags.inc.html#71" title='__asan::Flags::free_fill_byte' data-ref="__asan::Flags::free_fill_byte" data-ref-filename="__asan..Flags..free_fill_byte">free_fill_byte</a>, <a class="local col5 ref" href="#415size_to_fill" title='size_to_fill' data-ref="415size_to_fill" data-ref-filename="415size_to_fill">size_to_fill</a>);</td></tr>
<tr><th id="650">650</th><td>      }</td></tr>
<tr><th id="651">651</th><td>    }</td></tr>
<tr><th id="652">652</th><td></td></tr>
<tr><th id="653">653</th><td>    <i>// Poison the region.</i></td></tr>
<tr><th id="654">654</th><td>    <a class="ref fn" href="asan_poisoning.h.html#__asan::PoisonShadow" title='__asan::PoisonShadow' data-ref="__asan::PoisonShadow" data-ref-filename="__asan..PoisonShadow">PoisonShadow</a>(<a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>(),</td></tr>
<tr><th id="655">655</th><td>                 <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::RoundUpTo" title='__sanitizer::RoundUpTo' data-ref="__sanitizer::RoundUpTo" data-ref-filename="__sanitizer..RoundUpTo">RoundUpTo</a>(<a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>(), <a class="macro" href="asan_mapping.h.html#257" title="(1ULL &lt;&lt; kDefaultShadowScale)" data-ref="_M/SHADOW_GRANULARITY">SHADOW_GRANULARITY</a>),</td></tr>
<tr><th id="656">656</th><td>                 <a class="ref" href="asan_internal.h.html#__asan::kAsanHeapFreeMagic" title='__asan::kAsanHeapFreeMagic' data-ref="__asan::kAsanHeapFreeMagic" data-ref-filename="__asan..kAsanHeapFreeMagic">kAsanHeapFreeMagic</a>);</td></tr>
<tr><th id="657">657</th><td></td></tr>
<tr><th id="658">658</th><td>    <a class="type" href="asan_stats.h.html#__asan::AsanStats" title='__asan::AsanStats' data-ref="__asan::AsanStats" data-ref-filename="__asan..AsanStats">AsanStats</a> &amp;<dfn class="local col6 decl" id="416thread_stats" title='thread_stats' data-type='__asan::AsanStats &amp;' data-ref="416thread_stats" data-ref-filename="416thread_stats">thread_stats</dfn> = <a class="ref fn" href="asan_stats.h.html#__asan::GetCurrentThreadStats" title='__asan::GetCurrentThreadStats' data-ref="__asan::GetCurrentThreadStats" data-ref-filename="__asan..GetCurrentThreadStats">GetCurrentThreadStats</a>();</td></tr>
<tr><th id="659">659</th><td>    <a class="local col6 ref" href="#416thread_stats" title='thread_stats' data-ref="416thread_stats" data-ref-filename="416thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::frees" title='__asan::AsanStats::frees' data-ref="__asan::AsanStats::frees" data-ref-filename="__asan..AsanStats..frees">frees</a>++;</td></tr>
<tr><th id="660">660</th><td>    <a class="local col6 ref" href="#416thread_stats" title='thread_stats' data-ref="416thread_stats" data-ref-filename="416thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::freed" title='__asan::AsanStats::freed' data-ref="__asan::AsanStats::freed" data-ref-filename="__asan..AsanStats..freed">freed</a> += <a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>();</td></tr>
<tr><th id="661">661</th><td></td></tr>
<tr><th id="662">662</th><td>    <i>// Push into quarantine.</i></td></tr>
<tr><th id="663">663</th><td>    <b>if</b> (<a class="local col2 ref" href="#412t" title='t' data-ref="412t" data-ref-filename="412t">t</a>) {</td></tr>
<tr><th id="664">664</th><td>      <a class="type" href="asan_allocator.h.html#__asan::AsanThreadLocalMallocStorage" title='__asan::AsanThreadLocalMallocStorage' data-ref="__asan::AsanThreadLocalMallocStorage" data-ref-filename="__asan..AsanThreadLocalMallocStorage">AsanThreadLocalMallocStorage</a> *<dfn class="local col7 decl" id="417ms" title='ms' data-type='__asan::AsanThreadLocalMallocStorage *' data-ref="417ms" data-ref-filename="417ms">ms</dfn> = &amp;<a class="local col2 ref" href="#412t" title='t' data-ref="412t" data-ref-filename="412t">t</a>-&gt;<a class="ref fn" href="asan_thread.h.html#__asan::AsanThread::malloc_storage" title='__asan::AsanThread::malloc_storage' data-ref="__asan::AsanThread::malloc_storage" data-ref-filename="__asan..AsanThread..malloc_storage">malloc_storage</a>();</td></tr>
<tr><th id="665">665</th><td>      <a class="typedef" href="asan_allocator.h.html#__asan::AllocatorCache" title='__asan::AllocatorCache' data-type='AsanAllocator::AllocatorCache' data-ref="__asan::AllocatorCache" data-ref-filename="__asan..AllocatorCache">AllocatorCache</a> *<dfn class="local col8 decl" id="418ac" title='ac' data-type='__asan::AllocatorCache *' data-ref="418ac" data-ref-filename="418ac">ac</dfn> = <a class="ref fn" href="#__asan::GetAllocatorCache" title='__asan::GetAllocatorCache' data-ref="__asan::GetAllocatorCache" data-ref-filename="__asan..GetAllocatorCache">GetAllocatorCache</a>(<a class="local col7 ref" href="#417ms" title='ms' data-ref="417ms" data-ref-filename="417ms">ms</a>);</td></tr>
<tr><th id="666">666</th><td>      <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='m' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::Put" title='__sanitizer::Quarantine::Put' data-ref="__sanitizer::Quarantine::Put" data-ref-filename="__sanitizer..Quarantine..Put">Put</a>(<a class="ref fn" href="#__asan::GetQuarantineCache" title='__asan::GetQuarantineCache' data-ref="__asan::GetQuarantineCache" data-ref-filename="__asan..GetQuarantineCache">GetQuarantineCache</a>(<a class="local col7 ref" href="#417ms" title='ms' data-ref="417ms" data-ref-filename="417ms">ms</a>), <a class="type" href="#__asan::QuarantineCallback" title='__asan::QuarantineCallback' data-ref="__asan::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback">QuarantineCallback</a><a class="tu ref fn" href="#__asan::QuarantineCallback::QuarantineCallback" title='__asan::QuarantineCallback::QuarantineCallback' data-use='c' data-ref="__asan::QuarantineCallback::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback..QuarantineCallback">(</a><a class="local col8 ref" href="#418ac" title='ac' data-ref="418ac" data-ref-filename="418ac">ac</a>, <a class="local col1 ref" href="#411stack" title='stack' data-ref="411stack" data-ref-filename="411stack">stack</a>), <a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>,</td></tr>
<tr><th id="667">667</th><td>                     <a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>());</td></tr>
<tr><th id="668">668</th><td>    } <b>else</b> {</td></tr>
<tr><th id="669">669</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col9 decl" id="419l" title='l' data-type='__sanitizer::SpinMutexLock' data-ref="419l" data-ref-filename="419l">l</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu member field" href="#__asan::Allocator::fallback_mutex" title='__asan::Allocator::fallback_mutex' data-use='a' data-ref="__asan::Allocator::fallback_mutex" data-ref-filename="__asan..Allocator..fallback_mutex">fallback_mutex</a>);</td></tr>
<tr><th id="670">670</th><td>      <a class="typedef" href="asan_allocator.h.html#__asan::AllocatorCache" title='__asan::AllocatorCache' data-type='AsanAllocator::AllocatorCache' data-ref="__asan::AllocatorCache" data-ref-filename="__asan..AllocatorCache">AllocatorCache</a> *<dfn class="local col0 decl" id="420ac" title='ac' data-type='__asan::AllocatorCache *' data-ref="420ac" data-ref-filename="420ac">ac</dfn> = &amp;<a class="tu member field" href="#__asan::Allocator::fallback_allocator_cache" title='__asan::Allocator::fallback_allocator_cache' data-use='a' data-ref="__asan::Allocator::fallback_allocator_cache" data-ref-filename="__asan..Allocator..fallback_allocator_cache">fallback_allocator_cache</a>;</td></tr>
<tr><th id="671">671</th><td>      <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='m' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::Put" title='__sanitizer::Quarantine::Put' data-ref="__sanitizer::Quarantine::Put" data-ref-filename="__sanitizer..Quarantine..Put">Put</a>(&amp;<a class="tu member field" href="#__asan::Allocator::fallback_quarantine_cache" title='__asan::Allocator::fallback_quarantine_cache' data-use='a' data-ref="__asan::Allocator::fallback_quarantine_cache" data-ref-filename="__asan..Allocator..fallback_quarantine_cache">fallback_quarantine_cache</a>, <a class="type" href="#__asan::QuarantineCallback" title='__asan::QuarantineCallback' data-ref="__asan::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback">QuarantineCallback</a><a class="tu ref fn" href="#__asan::QuarantineCallback::QuarantineCallback" title='__asan::QuarantineCallback::QuarantineCallback' data-use='c' data-ref="__asan::QuarantineCallback::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback..QuarantineCallback">(</a><a class="local col0 ref" href="#420ac" title='ac' data-ref="420ac" data-ref-filename="420ac">ac</a>, <a class="local col1 ref" href="#411stack" title='stack' data-ref="411stack" data-ref-filename="411stack">stack</a>),</td></tr>
<tr><th id="672">672</th><td>                     <a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>, <a class="local col9 ref" href="#409m" title='m' data-ref="409m" data-ref-filename="409m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>());</td></tr>
<tr><th id="673">673</th><td>    }</td></tr>
<tr><th id="674">674</th><td>  }</td></tr>
<tr><th id="675">675</th><td></td></tr>
<tr><th id="676">676</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::Deallocate" title='__asan::Allocator::Deallocate' data-type='void __asan::Allocator::Deallocate(void * ptr, __sanitizer::uptr delete_size, __sanitizer::uptr delete_alignment, __sanitizer::BufferedStackTrace * stack, __asan::AllocType alloc_type)' data-ref="__asan::Allocator::Deallocate" data-ref-filename="__asan..Allocator..Deallocate">Deallocate</dfn>(<em>void</em> *<dfn class="local col1 decl" id="421ptr" title='ptr' data-type='void *' data-ref="421ptr" data-ref-filename="421ptr">ptr</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="422delete_size" title='delete_size' data-type='__sanitizer::uptr' data-ref="422delete_size" data-ref-filename="422delete_size">delete_size</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="423delete_alignment" title='delete_alignment' data-type='__sanitizer::uptr' data-ref="423delete_alignment" data-ref-filename="423delete_alignment">delete_alignment</dfn>,</td></tr>
<tr><th id="677">677</th><td>                  <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col4 decl" id="424stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="424stack" data-ref-filename="424stack">stack</dfn>, <a class="type" href="asan_allocator.h.html#__asan::AllocType" title='__asan::AllocType' data-ref="__asan::AllocType" data-ref-filename="__asan..AllocType">AllocType</a> <dfn class="local col5 decl" id="425alloc_type" title='alloc_type' data-type='__asan::AllocType' data-ref="425alloc_type" data-ref-filename="425alloc_type">alloc_type</dfn>) {</td></tr>
<tr><th id="678">678</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="426p" title='p' data-type='__sanitizer::uptr' data-ref="426p" data-ref-filename="426p">p</dfn> = <b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col1 ref" href="#421ptr" title='ptr' data-ref="421ptr" data-ref-filename="421ptr">ptr</a>);</td></tr>
<tr><th id="679">679</th><td>    <b>if</b> (<a class="local col6 ref" href="#426p" title='p' data-ref="426p" data-ref-filename="426p">p</a> == <var>0</var>) <b>return</b>;</td></tr>
<tr><th id="680">680</th><td></td></tr>
<tr><th id="681">681</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="427chunk_beg" title='chunk_beg' data-type='__sanitizer::uptr' data-ref="427chunk_beg" data-ref-filename="427chunk_beg">chunk_beg</dfn> = <a class="local col6 ref" href="#426p" title='p' data-ref="426p" data-ref-filename="426p">p</a> - <a class="tu ref" href="#__asan::kChunkHeaderSize" title='__asan::kChunkHeaderSize' data-use='r' data-ref="__asan::kChunkHeaderSize" data-ref-filename="__asan..kChunkHeaderSize">kChunkHeaderSize</a>;</td></tr>
<tr><th id="682">682</th><td>    <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col8 decl" id="428m" title='m' data-type='__asan::AsanChunk *' data-ref="428m" data-ref-filename="428m">m</dfn> = <b>reinterpret_cast</b>&lt;<a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *&gt;(<a class="local col7 ref" href="#427chunk_beg" title='chunk_beg' data-ref="427chunk_beg" data-ref-filename="427chunk_beg">chunk_beg</a>);</td></tr>
<tr><th id="683">683</th><td></td></tr>
<tr><th id="684">684</th><td>    <i>// On Windows, uninstrumented DLLs may allocate memory before ASan hooks</i></td></tr>
<tr><th id="685">685</th><td><i>    // malloc. Don't report an invalid free in this case.</i></td></tr>
<tr><th id="686">686</th><td>    <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_platform.h.html#93" title="0" data-ref="_M/SANITIZER_WINDOWS">SANITIZER_WINDOWS</a> &amp;&amp;</td></tr>
<tr><th id="687">687</th><td>        !<a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>().<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::PointerIsMine" title='__sanitizer::CombinedAllocator::PointerIsMine' data-ref="__sanitizer::CombinedAllocator::PointerIsMine" data-ref-filename="__sanitizer..CombinedAllocator..PointerIsMine">PointerIsMine</a>(<a class="local col1 ref" href="#421ptr" title='ptr' data-ref="421ptr" data-ref-filename="421ptr">ptr</a>)) {</td></tr>
<tr><th id="688">688</th><td>      <b>if</b> (!<a class="ref fn" href="asan_internal.h.html#__asan::IsSystemHeapAddress" title='__asan::IsSystemHeapAddress' data-ref="__asan::IsSystemHeapAddress" data-ref-filename="__asan..IsSystemHeapAddress">IsSystemHeapAddress</a>(<a class="local col6 ref" href="#426p" title='p' data-ref="426p" data-ref-filename="426p">p</a>))</td></tr>
<tr><th id="689">689</th><td>        <a class="ref fn" href="asan_report.h.html#__asan::ReportFreeNotMalloced" title='__asan::ReportFreeNotMalloced' data-ref="__asan::ReportFreeNotMalloced" data-ref-filename="__asan..ReportFreeNotMalloced">ReportFreeNotMalloced</a>(<a class="local col6 ref" href="#426p" title='p' data-ref="426p" data-ref-filename="426p">p</a>, <a class="local col4 ref" href="#424stack" title='stack' data-ref="424stack" data-ref-filename="424stack">stack</a>);</td></tr>
<tr><th id="690">690</th><td>      <b>return</b>;</td></tr>
<tr><th id="691">691</th><td>    }</td></tr>
<tr><th id="692">692</th><td></td></tr>
<tr><th id="693">693</th><td>    <a class="macro" href="asan_internal.h.html#133" title="do { if (&amp;__sanitizer_free_hook) __sanitizer_free_hook(ptr); RunFreeHooks(ptr); } while (false)" data-ref="_M/ASAN_FREE_HOOK">ASAN_FREE_HOOK</a>(<a class="local col1 ref" href="#421ptr" title='ptr' data-ref="421ptr" data-ref-filename="421ptr">ptr</a>);</td></tr>
<tr><th id="694">694</th><td></td></tr>
<tr><th id="695">695</th><td>    <i>// Must mark the chunk as quarantined before any changes to its metadata.</i></td></tr>
<tr><th id="696">696</th><td><i>    // Do not quarantine given chunk if we failed to set CHUNK_QUARANTINE flag.</i></td></tr>
<tr><th id="697">697</th><td>    <b>if</b> (!<a class="tu member fn" href="#__asan::Allocator::AtomicallySetQuarantineFlagIfAllocated" title='__asan::Allocator::AtomicallySetQuarantineFlagIfAllocated' data-use='c' data-ref="__asan::Allocator::AtomicallySetQuarantineFlagIfAllocated" data-ref-filename="__asan..Allocator..AtomicallySetQuarantineFlagIfAllocated">AtomicallySetQuarantineFlagIfAllocated</a>(<a class="local col8 ref" href="#428m" title='m' data-ref="428m" data-ref-filename="428m">m</a>, <a class="local col1 ref" href="#421ptr" title='ptr' data-ref="421ptr" data-ref-filename="421ptr">ptr</a>, <a class="local col4 ref" href="#424stack" title='stack' data-ref="424stack" data-ref-filename="424stack">stack</a>)) <b>return</b>;</td></tr>
<tr><th id="698">698</th><td></td></tr>
<tr><th id="699">699</th><td>    <b>if</b> (<a class="local col8 ref" href="#428m" title='m' data-ref="428m" data-ref-filename="428m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::alloc_type" title='__asan::ChunkHeader::alloc_type' data-use='r' data-ref="__asan::ChunkHeader::alloc_type" data-ref-filename="__asan..ChunkHeader..alloc_type">alloc_type</a> != <a class="local col5 ref" href="#425alloc_type" title='alloc_type' data-ref="425alloc_type" data-ref-filename="425alloc_type">alloc_type</a>) {</td></tr>
<tr><th id="700">700</th><td>      <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu member field" href="#__asan::Allocator::alloc_dealloc_mismatch" title='__asan::Allocator::alloc_dealloc_mismatch' data-use='a' data-ref="__asan::Allocator::alloc_dealloc_mismatch" data-ref-filename="__asan..Allocator..alloc_dealloc_mismatch">alloc_dealloc_mismatch</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>)) {</td></tr>
<tr><th id="701">701</th><td>        <a class="ref fn" href="asan_report.h.html#__asan::ReportAllocTypeMismatch" title='__asan::ReportAllocTypeMismatch' data-ref="__asan::ReportAllocTypeMismatch" data-ref-filename="__asan..ReportAllocTypeMismatch">ReportAllocTypeMismatch</a>((<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col1 ref" href="#421ptr" title='ptr' data-ref="421ptr" data-ref-filename="421ptr">ptr</a>, <a class="local col4 ref" href="#424stack" title='stack' data-ref="424stack" data-ref-filename="424stack">stack</a>, (<a class="type" href="asan_allocator.h.html#__asan::AllocType" title='__asan::AllocType' data-ref="__asan::AllocType" data-ref-filename="__asan..AllocType">AllocType</a>)<a class="local col8 ref" href="#428m" title='m' data-ref="428m" data-ref-filename="428m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::alloc_type" title='__asan::ChunkHeader::alloc_type' data-use='r' data-ref="__asan::ChunkHeader::alloc_type" data-ref-filename="__asan..ChunkHeader..alloc_type">alloc_type</a>,</td></tr>
<tr><th id="702">702</th><td>                                (<a class="type" href="asan_allocator.h.html#__asan::AllocType" title='__asan::AllocType' data-ref="__asan::AllocType" data-ref-filename="__asan..AllocType">AllocType</a>)<a class="local col5 ref" href="#425alloc_type" title='alloc_type' data-ref="425alloc_type" data-ref-filename="425alloc_type">alloc_type</a>);</td></tr>
<tr><th id="703">703</th><td>      }</td></tr>
<tr><th id="704">704</th><td>    } <b>else</b> {</td></tr>
<tr><th id="705">705</th><td>      <b>if</b> (<a class="ref fn" href="asan_flags.h.html#__asan::flags" title='__asan::flags' data-ref="__asan::flags" data-ref-filename="__asan..flags">flags</a>()-&gt;<a class="ref field" href="asan_flags.inc.html#124" title='__asan::Flags::new_delete_type_mismatch' data-ref="__asan::Flags::new_delete_type_mismatch" data-ref-filename="__asan..Flags..new_delete_type_mismatch">new_delete_type_mismatch</a> &amp;&amp;</td></tr>
<tr><th id="706">706</th><td>          (<a class="local col5 ref" href="#425alloc_type" title='alloc_type' data-ref="425alloc_type" data-ref-filename="425alloc_type">alloc_type</a> == <a class="enum" href="asan_allocator.h.html#__asan::FROM_NEW" title='__asan::FROM_NEW' data-ref="__asan::FROM_NEW" data-ref-filename="__asan..FROM_NEW">FROM_NEW</a> || <a class="local col5 ref" href="#425alloc_type" title='alloc_type' data-ref="425alloc_type" data-ref-filename="425alloc_type">alloc_type</a> == <a class="enum" href="asan_allocator.h.html#__asan::FROM_NEW_BR" title='__asan::FROM_NEW_BR' data-ref="__asan::FROM_NEW_BR" data-ref-filename="__asan..FROM_NEW_BR">FROM_NEW_BR</a>) &amp;&amp;</td></tr>
<tr><th id="707">707</th><td>          ((<a class="local col2 ref" href="#422delete_size" title='delete_size' data-ref="422delete_size" data-ref-filename="422delete_size">delete_size</a> &amp;&amp; <a class="local col2 ref" href="#422delete_size" title='delete_size' data-ref="422delete_size" data-ref-filename="422delete_size">delete_size</a> != <a class="local col8 ref" href="#428m" title='m' data-ref="428m" data-ref-filename="428m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>()) ||</td></tr>
<tr><th id="708">708</th><td>           <a class="tu member fn" href="#__asan::Allocator::ComputeUserRequestedAlignmentLog" title='__asan::Allocator::ComputeUserRequestedAlignmentLog' data-use='c' data-ref="__asan::Allocator::ComputeUserRequestedAlignmentLog" data-ref-filename="__asan..Allocator..ComputeUserRequestedAlignmentLog">ComputeUserRequestedAlignmentLog</a>(<a class="local col3 ref" href="#423delete_alignment" title='delete_alignment' data-ref="423delete_alignment" data-ref-filename="423delete_alignment">delete_alignment</a>) !=</td></tr>
<tr><th id="709">709</th><td>               <a class="local col8 ref" href="#428m" title='m' data-ref="428m" data-ref-filename="428m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::user_requested_alignment_log" title='__asan::ChunkHeader::user_requested_alignment_log' data-use='r' data-ref="__asan::ChunkHeader::user_requested_alignment_log" data-ref-filename="__asan..ChunkHeader..user_requested_alignment_log">user_requested_alignment_log</a>)) {</td></tr>
<tr><th id="710">710</th><td>        <a class="ref fn" href="asan_report.h.html#__asan::ReportNewDeleteTypeMismatch" title='__asan::ReportNewDeleteTypeMismatch' data-ref="__asan::ReportNewDeleteTypeMismatch" data-ref-filename="__asan..ReportNewDeleteTypeMismatch">ReportNewDeleteTypeMismatch</a>(<a class="local col6 ref" href="#426p" title='p' data-ref="426p" data-ref-filename="426p">p</a>, <a class="local col2 ref" href="#422delete_size" title='delete_size' data-ref="422delete_size" data-ref-filename="422delete_size">delete_size</a>, <a class="local col3 ref" href="#423delete_alignment" title='delete_alignment' data-ref="423delete_alignment" data-ref-filename="423delete_alignment">delete_alignment</a>, <a class="local col4 ref" href="#424stack" title='stack' data-ref="424stack" data-ref-filename="424stack">stack</a>);</td></tr>
<tr><th id="711">711</th><td>      }</td></tr>
<tr><th id="712">712</th><td>    }</td></tr>
<tr><th id="713">713</th><td></td></tr>
<tr><th id="714">714</th><td>    <a class="tu member fn" href="#__asan::Allocator::QuarantineChunk" title='__asan::Allocator::QuarantineChunk' data-use='c' data-ref="__asan::Allocator::QuarantineChunk" data-ref-filename="__asan..Allocator..QuarantineChunk">QuarantineChunk</a>(<a class="local col8 ref" href="#428m" title='m' data-ref="428m" data-ref-filename="428m">m</a>, <a class="local col1 ref" href="#421ptr" title='ptr' data-ref="421ptr" data-ref-filename="421ptr">ptr</a>, <a class="local col4 ref" href="#424stack" title='stack' data-ref="424stack" data-ref-filename="424stack">stack</a>);</td></tr>
<tr><th id="715">715</th><td>  }</td></tr>
<tr><th id="716">716</th><td></td></tr>
<tr><th id="717">717</th><td>  <em>void</em> *<dfn class="tu decl def fn" id="__asan::Allocator::Reallocate" title='__asan::Allocator::Reallocate' data-type='void * __asan::Allocator::Reallocate(void * old_ptr, __sanitizer::uptr new_size, __sanitizer::BufferedStackTrace * stack)' data-ref="__asan::Allocator::Reallocate" data-ref-filename="__asan..Allocator..Reallocate">Reallocate</dfn>(<em>void</em> *<dfn class="local col9 decl" id="429old_ptr" title='old_ptr' data-type='void *' data-ref="429old_ptr" data-ref-filename="429old_ptr">old_ptr</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="430new_size" title='new_size' data-type='__sanitizer::uptr' data-ref="430new_size" data-ref-filename="430new_size">new_size</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col1 decl" id="431stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="431stack" data-ref-filename="431stack">stack</dfn>) {</td></tr>
<tr><th id="718">718</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((old_ptr &amp;&amp; new_size)); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 718, &quot;(&quot; &quot;(old_ptr &amp;&amp; new_size)&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="local col9 ref" href="#429old_ptr" title='old_ptr' data-ref="429old_ptr" data-ref-filename="429old_ptr">old_ptr</a> &amp;&amp; <a class="local col0 ref" href="#430new_size" title='new_size' data-ref="430new_size" data-ref-filename="430new_size">new_size</a>);</td></tr>
<tr><th id="719">719</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="432p" title='p' data-type='__sanitizer::uptr' data-ref="432p" data-ref-filename="432p">p</dfn> = <b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col9 ref" href="#429old_ptr" title='old_ptr' data-ref="429old_ptr" data-ref-filename="429old_ptr">old_ptr</a>);</td></tr>
<tr><th id="720">720</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="433chunk_beg" title='chunk_beg' data-type='__sanitizer::uptr' data-ref="433chunk_beg" data-ref-filename="433chunk_beg">chunk_beg</dfn> = <a class="local col2 ref" href="#432p" title='p' data-ref="432p" data-ref-filename="432p">p</a> - <a class="tu ref" href="#__asan::kChunkHeaderSize" title='__asan::kChunkHeaderSize' data-use='r' data-ref="__asan::kChunkHeaderSize" data-ref-filename="__asan..kChunkHeaderSize">kChunkHeaderSize</a>;</td></tr>
<tr><th id="721">721</th><td>    <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col4 decl" id="434m" title='m' data-type='__asan::AsanChunk *' data-ref="434m" data-ref-filename="434m">m</dfn> = <b>reinterpret_cast</b>&lt;<a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *&gt;(<a class="local col3 ref" href="#433chunk_beg" title='chunk_beg' data-ref="433chunk_beg" data-ref-filename="433chunk_beg">chunk_beg</a>);</td></tr>
<tr><th id="722">722</th><td></td></tr>
<tr><th id="723">723</th><td>    <a class="type" href="asan_stats.h.html#__asan::AsanStats" title='__asan::AsanStats' data-ref="__asan::AsanStats" data-ref-filename="__asan..AsanStats">AsanStats</a> &amp;<dfn class="local col5 decl" id="435thread_stats" title='thread_stats' data-type='__asan::AsanStats &amp;' data-ref="435thread_stats" data-ref-filename="435thread_stats">thread_stats</dfn> = <a class="ref fn" href="asan_stats.h.html#__asan::GetCurrentThreadStats" title='__asan::GetCurrentThreadStats' data-ref="__asan::GetCurrentThreadStats" data-ref-filename="__asan..GetCurrentThreadStats">GetCurrentThreadStats</a>();</td></tr>
<tr><th id="724">724</th><td>    <a class="local col5 ref" href="#435thread_stats" title='thread_stats' data-ref="435thread_stats" data-ref-filename="435thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::reallocs" title='__asan::AsanStats::reallocs' data-ref="__asan::AsanStats::reallocs" data-ref-filename="__asan..AsanStats..reallocs">reallocs</a>++;</td></tr>
<tr><th id="725">725</th><td>    <a class="local col5 ref" href="#435thread_stats" title='thread_stats' data-ref="435thread_stats" data-ref-filename="435thread_stats">thread_stats</a>.<a class="ref field" href="asan_stats.h.html#__asan::AsanStats::realloced" title='__asan::AsanStats::realloced' data-ref="__asan::AsanStats::realloced" data-ref-filename="__asan..AsanStats..realloced">realloced</a> += <a class="local col0 ref" href="#430new_size" title='new_size' data-ref="430new_size" data-ref-filename="430new_size">new_size</a>;</td></tr>
<tr><th id="726">726</th><td></td></tr>
<tr><th id="727">727</th><td>    <em>void</em> *<dfn class="local col6 decl" id="436new_ptr" title='new_ptr' data-type='void *' data-ref="436new_ptr" data-ref-filename="436new_ptr">new_ptr</dfn> = <a class="tu member fn" href="#__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-use='c' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</a>(<a class="local col0 ref" href="#430new_size" title='new_size' data-ref="430new_size" data-ref-filename="430new_size">new_size</a>, <var>8</var>, <a class="local col1 ref" href="#431stack" title='stack' data-ref="431stack" data-ref-filename="431stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>, <b>true</b>);</td></tr>
<tr><th id="728">728</th><td>    <b>if</b> (<a class="local col6 ref" href="#436new_ptr" title='new_ptr' data-ref="436new_ptr" data-ref-filename="436new_ptr">new_ptr</a>) {</td></tr>
<tr><th id="729">729</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="local col7 decl" id="437chunk_state" title='chunk_state' data-type='__sanitizer::u8' data-ref="437chunk_state" data-ref-filename="437chunk_state">chunk_state</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col4 ref" href="#434m" title='m' data-ref="434m" data-ref-filename="434m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>);</td></tr>
<tr><th id="730">730</th><td>      <b>if</b> (<a class="local col7 ref" href="#437chunk_state" title='chunk_state' data-ref="437chunk_state" data-ref-filename="437chunk_state">chunk_state</a> != <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>)</td></tr>
<tr><th id="731">731</th><td>        <a class="tu member fn" href="#__asan::Allocator::ReportInvalidFree" title='__asan::Allocator::ReportInvalidFree' data-use='c' data-ref="__asan::Allocator::ReportInvalidFree" data-ref-filename="__asan..Allocator..ReportInvalidFree">ReportInvalidFree</a>(<a class="local col9 ref" href="#429old_ptr" title='old_ptr' data-ref="429old_ptr" data-ref-filename="429old_ptr">old_ptr</a>, <a class="local col7 ref" href="#437chunk_state" title='chunk_state' data-ref="437chunk_state" data-ref-filename="437chunk_state">chunk_state</a>, <a class="local col1 ref" href="#431stack" title='stack' data-ref="431stack" data-ref-filename="431stack">stack</a>);</td></tr>
<tr><th id="732">732</th><td>      <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#301" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((__interception::real_memcpy)); __sanitizer::u64 v2 = (__sanitizer::u64)((nullptr)); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 732, &quot;(&quot; &quot;(__interception::real_memcpy)&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;(nullptr)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_NE">CHECK_NE</a>(<a class="macro" href="../interception/interception.h.html#171" title="__interception::real_memcpy" data-ref="_M/REAL">REAL</a>(memcpy), <b>nullptr</b>);</td></tr>
<tr><th id="733">733</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="438memcpy_size" title='memcpy_size' data-type='__sanitizer::uptr' data-ref="438memcpy_size" data-ref-filename="438memcpy_size">memcpy_size</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Min" title='__sanitizer::Min' data-ref="__sanitizer::Min" data-ref-filename="__sanitizer..Min">Min</a>(<a class="local col0 ref" href="#430new_size" title='new_size' data-ref="430new_size" data-ref-filename="430new_size">new_size</a>, <a class="local col4 ref" href="#434m" title='m' data-ref="434m" data-ref-filename="434m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>());</td></tr>
<tr><th id="734">734</th><td>      <i>// If realloc() races with free(), we may start copying freed memory.</i></td></tr>
<tr><th id="735">735</th><td><i>      // However, we will report racy double-free later anyway.</i></td></tr>
<tr><th id="736">736</th><td>      <a class="macro" href="../interception/interception.h.html#171" title="__interception::real_memcpy" data-ref="_M/REAL">REAL</a>(memcpy)(<a class="local col6 ref" href="#436new_ptr" title='new_ptr' data-ref="436new_ptr" data-ref-filename="436new_ptr">new_ptr</a>, <a class="local col9 ref" href="#429old_ptr" title='old_ptr' data-ref="429old_ptr" data-ref-filename="429old_ptr">old_ptr</a>, <a class="local col8 ref" href="#438memcpy_size" title='memcpy_size' data-ref="438memcpy_size" data-ref-filename="438memcpy_size">memcpy_size</a>);</td></tr>
<tr><th id="737">737</th><td>      <a class="tu member fn" href="#__asan::Allocator::Deallocate" title='__asan::Allocator::Deallocate' data-use='c' data-ref="__asan::Allocator::Deallocate" data-ref-filename="__asan..Allocator..Deallocate">Deallocate</a>(<a class="local col9 ref" href="#429old_ptr" title='old_ptr' data-ref="429old_ptr" data-ref-filename="429old_ptr">old_ptr</a>, <var>0</var>, <var>0</var>, <a class="local col1 ref" href="#431stack" title='stack' data-ref="431stack" data-ref-filename="431stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>);</td></tr>
<tr><th id="738">738</th><td>    }</td></tr>
<tr><th id="739">739</th><td>    <b>return</b> <a class="local col6 ref" href="#436new_ptr" title='new_ptr' data-ref="436new_ptr" data-ref-filename="436new_ptr">new_ptr</a>;</td></tr>
<tr><th id="740">740</th><td>  }</td></tr>
<tr><th id="741">741</th><td></td></tr>
<tr><th id="742">742</th><td>  <em>void</em> *<dfn class="tu decl def fn" id="__asan::Allocator::Calloc" title='__asan::Allocator::Calloc' data-type='void * __asan::Allocator::Calloc(__sanitizer::uptr nmemb, __sanitizer::uptr size, __sanitizer::BufferedStackTrace * stack)' data-ref="__asan::Allocator::Calloc" data-ref-filename="__asan..Allocator..Calloc">Calloc</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="439nmemb" title='nmemb' data-type='__sanitizer::uptr' data-ref="439nmemb" data-ref-filename="439nmemb">nmemb</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="440size" title='size' data-type='__sanitizer::uptr' data-ref="440size" data-ref-filename="440size">size</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col1 decl" id="441stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="441stack" data-ref-filename="441stack">stack</dfn>) {</td></tr>
<tr><th id="743">743</th><td>    <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(CheckForCallocOverflow(size, nmemb)), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::CheckForCallocOverflow" title='__sanitizer::CheckForCallocOverflow' data-ref="__sanitizer::CheckForCallocOverflow" data-ref-filename="__sanitizer..CheckForCallocOverflow">CheckForCallocOverflow</a>(<a class="local col0 ref" href="#440size" title='size' data-ref="440size" data-ref-filename="440size">size</a>, <a class="local col9 ref" href="#439nmemb" title='nmemb' data-ref="439nmemb" data-ref-filename="439nmemb">nmemb</a>))) {</td></tr>
<tr><th id="744">744</th><td>      <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>())</td></tr>
<tr><th id="745">745</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="746">746</th><td>      <a class="ref fn" href="asan_report.h.html#__asan::ReportCallocOverflow" title='__asan::ReportCallocOverflow' data-ref="__asan::ReportCallocOverflow" data-ref-filename="__asan..ReportCallocOverflow">ReportCallocOverflow</a>(<a class="local col9 ref" href="#439nmemb" title='nmemb' data-ref="439nmemb" data-ref-filename="439nmemb">nmemb</a>, <a class="local col0 ref" href="#440size" title='size' data-ref="440size" data-ref-filename="440size">size</a>, <a class="local col1 ref" href="#441stack" title='stack' data-ref="441stack" data-ref-filename="441stack">stack</a>);</td></tr>
<tr><th id="747">747</th><td>    }</td></tr>
<tr><th id="748">748</th><td>    <em>void</em> *<dfn class="local col2 decl" id="442ptr" title='ptr' data-type='void *' data-ref="442ptr" data-ref-filename="442ptr">ptr</dfn> = <a class="tu member fn" href="#__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-use='c' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</a>(<a class="local col9 ref" href="#439nmemb" title='nmemb' data-ref="439nmemb" data-ref-filename="439nmemb">nmemb</a> * <a class="local col0 ref" href="#440size" title='size' data-ref="440size" data-ref-filename="440size">size</a>, <var>8</var>, <a class="local col1 ref" href="#441stack" title='stack' data-ref="441stack" data-ref-filename="441stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>, <b>false</b>);</td></tr>
<tr><th id="749">749</th><td>    <i>// If the memory comes from the secondary allocator no need to clear it</i></td></tr>
<tr><th id="750">750</th><td><i>    // as it comes directly from mmap.</i></td></tr>
<tr><th id="751">751</th><td>    <b>if</b> (<a class="local col2 ref" href="#442ptr" title='ptr' data-ref="442ptr" data-ref-filename="442ptr">ptr</a> &amp;&amp; <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::FromPrimary" title='__sanitizer::CombinedAllocator::FromPrimary' data-ref="__sanitizer::CombinedAllocator::FromPrimary" data-ref-filename="__sanitizer..CombinedAllocator..FromPrimary">FromPrimary</a>(<a class="local col2 ref" href="#442ptr" title='ptr' data-ref="442ptr" data-ref-filename="442ptr">ptr</a>))</td></tr>
<tr><th id="752">752</th><td>      <a class="macro" href="../interception/interception.h.html#171" title="__interception::real_memset" data-ref="_M/REAL">REAL</a>(memset)(<a class="local col2 ref" href="#442ptr" title='ptr' data-ref="442ptr" data-ref-filename="442ptr">ptr</a>, <var>0</var>, <a class="local col9 ref" href="#439nmemb" title='nmemb' data-ref="439nmemb" data-ref-filename="439nmemb">nmemb</a> * <a class="local col0 ref" href="#440size" title='size' data-ref="440size" data-ref-filename="440size">size</a>);</td></tr>
<tr><th id="753">753</th><td>    <b>return</b> <a class="local col2 ref" href="#442ptr" title='ptr' data-ref="442ptr" data-ref-filename="442ptr">ptr</a>;</td></tr>
<tr><th id="754">754</th><td>  }</td></tr>
<tr><th id="755">755</th><td></td></tr>
<tr><th id="756">756</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::ReportInvalidFree" title='__asan::Allocator::ReportInvalidFree' data-type='void __asan::Allocator::ReportInvalidFree(void * ptr, __sanitizer::u8 chunk_state, __sanitizer::BufferedStackTrace * stack)' data-ref="__asan::Allocator::ReportInvalidFree" data-ref-filename="__asan..Allocator..ReportInvalidFree">ReportInvalidFree</dfn>(<em>void</em> *<dfn class="local col3 decl" id="443ptr" title='ptr' data-type='void *' data-ref="443ptr" data-ref-filename="443ptr">ptr</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="local col4 decl" id="444chunk_state" title='chunk_state' data-type='__sanitizer::u8' data-ref="444chunk_state" data-ref-filename="444chunk_state">chunk_state</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col5 decl" id="445stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="445stack" data-ref-filename="445stack">stack</dfn>) {</td></tr>
<tr><th id="757">757</th><td>    <b>if</b> (<a class="local col4 ref" href="#444chunk_state" title='chunk_state' data-ref="444chunk_state" data-ref-filename="444chunk_state">chunk_state</a> == <a class="enum" href="#__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</a>)</td></tr>
<tr><th id="758">758</th><td>      <a class="ref fn" href="asan_report.h.html#__asan::ReportDoubleFree" title='__asan::ReportDoubleFree' data-ref="__asan::ReportDoubleFree" data-ref-filename="__asan..ReportDoubleFree">ReportDoubleFree</a>((<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col3 ref" href="#443ptr" title='ptr' data-ref="443ptr" data-ref-filename="443ptr">ptr</a>, <a class="local col5 ref" href="#445stack" title='stack' data-ref="445stack" data-ref-filename="445stack">stack</a>);</td></tr>
<tr><th id="759">759</th><td>    <b>else</b></td></tr>
<tr><th id="760">760</th><td>      <a class="ref fn" href="asan_report.h.html#__asan::ReportFreeNotMalloced" title='__asan::ReportFreeNotMalloced' data-ref="__asan::ReportFreeNotMalloced" data-ref-filename="__asan..ReportFreeNotMalloced">ReportFreeNotMalloced</a>((<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col3 ref" href="#443ptr" title='ptr' data-ref="443ptr" data-ref-filename="443ptr">ptr</a>, <a class="local col5 ref" href="#445stack" title='stack' data-ref="445stack" data-ref-filename="445stack">stack</a>);</td></tr>
<tr><th id="761">761</th><td>  }</td></tr>
<tr><th id="762">762</th><td></td></tr>
<tr><th id="763">763</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::CommitBack" title='__asan::Allocator::CommitBack' data-type='void __asan::Allocator::CommitBack(__asan::AsanThreadLocalMallocStorage * ms, __sanitizer::BufferedStackTrace * stack)' data-ref="__asan::Allocator::CommitBack" data-ref-filename="__asan..Allocator..CommitBack">CommitBack</dfn>(<a class="type" href="asan_allocator.h.html#__asan::AsanThreadLocalMallocStorage" title='__asan::AsanThreadLocalMallocStorage' data-ref="__asan::AsanThreadLocalMallocStorage" data-ref-filename="__asan..AsanThreadLocalMallocStorage">AsanThreadLocalMallocStorage</a> *<dfn class="local col6 decl" id="446ms" title='ms' data-type='__asan::AsanThreadLocalMallocStorage *' data-ref="446ms" data-ref-filename="446ms">ms</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col7 decl" id="447stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="447stack" data-ref-filename="447stack">stack</dfn>) {</td></tr>
<tr><th id="764">764</th><td>    <a class="typedef" href="asan_allocator.h.html#__asan::AllocatorCache" title='__asan::AllocatorCache' data-type='AsanAllocator::AllocatorCache' data-ref="__asan::AllocatorCache" data-ref-filename="__asan..AllocatorCache">AllocatorCache</a> *<dfn class="local col8 decl" id="448ac" title='ac' data-type='__asan::AllocatorCache *' data-ref="448ac" data-ref-filename="448ac">ac</dfn> = <a class="ref fn" href="#__asan::GetAllocatorCache" title='__asan::GetAllocatorCache' data-ref="__asan::GetAllocatorCache" data-ref-filename="__asan..GetAllocatorCache">GetAllocatorCache</a>(<a class="local col6 ref" href="#446ms" title='ms' data-ref="446ms" data-ref-filename="446ms">ms</a>);</td></tr>
<tr><th id="765">765</th><td>    <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='m' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::Drain" title='__sanitizer::Quarantine::Drain' data-ref="__sanitizer::Quarantine::Drain" data-ref-filename="__sanitizer..Quarantine..Drain">Drain</a>(<a class="ref fn" href="#__asan::GetQuarantineCache" title='__asan::GetQuarantineCache' data-ref="__asan::GetQuarantineCache" data-ref-filename="__asan..GetQuarantineCache">GetQuarantineCache</a>(<a class="local col6 ref" href="#446ms" title='ms' data-ref="446ms" data-ref-filename="446ms">ms</a>), <a class="type" href="#__asan::QuarantineCallback" title='__asan::QuarantineCallback' data-ref="__asan::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback">QuarantineCallback</a><a class="tu ref fn" href="#__asan::QuarantineCallback::QuarantineCallback" title='__asan::QuarantineCallback::QuarantineCallback' data-use='c' data-ref="__asan::QuarantineCallback::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback..QuarantineCallback">(</a><a class="local col8 ref" href="#448ac" title='ac' data-ref="448ac" data-ref-filename="448ac">ac</a>, <a class="local col7 ref" href="#447stack" title='stack' data-ref="447stack" data-ref-filename="447stack">stack</a>));</td></tr>
<tr><th id="766">766</th><td>    <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::SwallowCache" title='__sanitizer::CombinedAllocator::SwallowCache' data-ref="__sanitizer::CombinedAllocator::SwallowCache" data-ref-filename="__sanitizer..CombinedAllocator..SwallowCache">SwallowCache</a>(<a class="local col8 ref" href="#448ac" title='ac' data-ref="448ac" data-ref-filename="448ac">ac</a>);</td></tr>
<tr><th id="767">767</th><td>  }</td></tr>
<tr><th id="768">768</th><td></td></tr>
<tr><th id="769">769</th><td>  <i  data-doc="__asan::Allocator::GetAsanChunk">// -------------------------- Chunk lookup ----------------------</i></td></tr>
<tr><th id="770">770</th><td><i  data-doc="__asan::Allocator::GetAsanChunk"></i></td></tr>
<tr><th id="771">771</th><td><i  data-doc="__asan::Allocator::GetAsanChunk">  // Assumes alloc_beg == allocator.GetBlockBegin(alloc_beg).</i></td></tr>
<tr><th id="772">772</th><td><i  data-doc="__asan::Allocator::GetAsanChunk">  // Returns nullptr if AsanChunk is not yet initialized just after</i></td></tr>
<tr><th id="773">773</th><td><i  data-doc="__asan::Allocator::GetAsanChunk">  // get_allocator().Allocate(), or is being destroyed just before</i></td></tr>
<tr><th id="774">774</th><td><i  data-doc="__asan::Allocator::GetAsanChunk">  // get_allocator().Deallocate().</i></td></tr>
<tr><th id="775">775</th><td>  <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="tu decl def fn" id="__asan::Allocator::GetAsanChunk" title='__asan::Allocator::GetAsanChunk' data-type='__asan::AsanChunk * __asan::Allocator::GetAsanChunk(void * alloc_beg)' data-ref="__asan::Allocator::GetAsanChunk" data-ref-filename="__asan..Allocator..GetAsanChunk">GetAsanChunk</dfn>(<em>void</em> *<dfn class="local col9 decl" id="449alloc_beg" title='alloc_beg' data-type='void *' data-ref="449alloc_beg" data-ref-filename="449alloc_beg">alloc_beg</dfn>) {</td></tr>
<tr><th id="776">776</th><td>    <b>if</b> (!<a class="local col9 ref" href="#449alloc_beg" title='alloc_beg' data-ref="449alloc_beg" data-ref-filename="449alloc_beg">alloc_beg</a>)</td></tr>
<tr><th id="777">777</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="778">778</th><td>    <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col0 decl" id="450p" title='p' data-type='__asan::AsanChunk *' data-ref="450p" data-ref-filename="450p">p</dfn> = <b>reinterpret_cast</b>&lt;<a class="type" href="#__asan::LargeChunkHeader" title='__asan::LargeChunkHeader' data-ref="__asan::LargeChunkHeader" data-ref-filename="__asan..LargeChunkHeader">LargeChunkHeader</a> *&gt;(<a class="local col9 ref" href="#449alloc_beg" title='alloc_beg' data-ref="449alloc_beg" data-ref-filename="449alloc_beg">alloc_beg</a>)-&gt;<a class="tu ref fn" href="#__asan::LargeChunkHeader::Get" title='__asan::LargeChunkHeader::Get' data-use='c' data-ref="__asan::LargeChunkHeader::Get" data-ref-filename="__asan..LargeChunkHeader..Get">Get</a>();</td></tr>
<tr><th id="779">779</th><td>    <b>if</b> (!<a class="local col0 ref" href="#450p" title='p' data-ref="450p" data-ref-filename="450p">p</a>) {</td></tr>
<tr><th id="780">780</th><td>      <b>if</b> (!<a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::FromPrimary" title='__sanitizer::CombinedAllocator::FromPrimary' data-ref="__sanitizer::CombinedAllocator::FromPrimary" data-ref-filename="__sanitizer..CombinedAllocator..FromPrimary">FromPrimary</a>(<a class="local col9 ref" href="#449alloc_beg" title='alloc_beg' data-ref="449alloc_beg" data-ref-filename="449alloc_beg">alloc_beg</a>))</td></tr>
<tr><th id="781">781</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="782">782</th><td>      <a class="local col0 ref" href="#450p" title='p' data-ref="450p" data-ref-filename="450p">p</a> = <b>reinterpret_cast</b>&lt;<a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *&gt;(<a class="local col9 ref" href="#449alloc_beg" title='alloc_beg' data-ref="449alloc_beg" data-ref-filename="449alloc_beg">alloc_beg</a>);</td></tr>
<tr><th id="783">783</th><td>    }</td></tr>
<tr><th id="784">784</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u8" title='__sanitizer::u8' data-type='unsigned char' data-ref="__sanitizer::u8" data-ref-filename="__sanitizer..u8">u8</a> <dfn class="local col1 decl" id="451state" title='state' data-type='__sanitizer::u8' data-ref="451state" data-ref-filename="451state">state</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col0 ref" href="#450p" title='p' data-ref="450p" data-ref-filename="450p">p</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>);</td></tr>
<tr><th id="785">785</th><td>    <i>// It does not guaranty that Chunk is initialized, but it's</i></td></tr>
<tr><th id="786">786</th><td><i>    // definitely not for any other value.</i></td></tr>
<tr><th id="787">787</th><td>    <b>if</b> (<a class="local col1 ref" href="#451state" title='state' data-ref="451state" data-ref-filename="451state">state</a> == <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a> || <a class="local col1 ref" href="#451state" title='state' data-ref="451state" data-ref-filename="451state">state</a> == <a class="enum" href="#__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</a>)</td></tr>
<tr><th id="788">788</th><td>      <b>return</b> <a class="local col0 ref" href="#450p" title='p' data-ref="450p" data-ref-filename="450p">p</a>;</td></tr>
<tr><th id="789">789</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="790">790</th><td>  }</td></tr>
<tr><th id="791">791</th><td></td></tr>
<tr><th id="792">792</th><td>  <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="tu decl def fn" id="__asan::Allocator::GetAsanChunkByAddr" title='__asan::Allocator::GetAsanChunkByAddr' data-type='__asan::AsanChunk * __asan::Allocator::GetAsanChunkByAddr(__sanitizer::uptr p)' data-ref="__asan::Allocator::GetAsanChunkByAddr" data-ref-filename="__asan..Allocator..GetAsanChunkByAddr">GetAsanChunkByAddr</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="452p" title='p' data-type='__sanitizer::uptr' data-ref="452p" data-ref-filename="452p">p</dfn>) {</td></tr>
<tr><th id="793">793</th><td>    <em>void</em> *<dfn class="local col3 decl" id="453alloc_beg" title='alloc_beg' data-type='void *' data-ref="453alloc_beg" data-ref-filename="453alloc_beg">alloc_beg</dfn> = <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::GetBlockBegin" title='__sanitizer::CombinedAllocator::GetBlockBegin' data-ref="__sanitizer::CombinedAllocator::GetBlockBegin" data-ref-filename="__sanitizer..CombinedAllocator..GetBlockBegin">GetBlockBegin</a>(<b>reinterpret_cast</b>&lt;<em>void</em> *&gt;(<a class="local col2 ref" href="#452p" title='p' data-ref="452p" data-ref-filename="452p">p</a>));</td></tr>
<tr><th id="794">794</th><td>    <b>return</b> <a class="tu member fn" href="#__asan::Allocator::GetAsanChunk" title='__asan::Allocator::GetAsanChunk' data-use='c' data-ref="__asan::Allocator::GetAsanChunk" data-ref-filename="__asan..Allocator..GetAsanChunk">GetAsanChunk</a>(<a class="local col3 ref" href="#453alloc_beg" title='alloc_beg' data-ref="453alloc_beg" data-ref-filename="453alloc_beg">alloc_beg</a>);</td></tr>
<tr><th id="795">795</th><td>  }</td></tr>
<tr><th id="796">796</th><td></td></tr>
<tr><th id="797">797</th><td>  <i  data-doc="__asan::Allocator::GetAsanChunkByAddrFastLocked">// Allocator must be locked when this function is called.</i></td></tr>
<tr><th id="798">798</th><td>  <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="tu decl def fn" id="__asan::Allocator::GetAsanChunkByAddrFastLocked" title='__asan::Allocator::GetAsanChunkByAddrFastLocked' data-type='__asan::AsanChunk * __asan::Allocator::GetAsanChunkByAddrFastLocked(__sanitizer::uptr p)' data-ref="__asan::Allocator::GetAsanChunkByAddrFastLocked" data-ref-filename="__asan..Allocator..GetAsanChunkByAddrFastLocked">GetAsanChunkByAddrFastLocked</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="454p" title='p' data-type='__sanitizer::uptr' data-ref="454p" data-ref-filename="454p">p</dfn>) {</td></tr>
<tr><th id="799">799</th><td>    <em>void</em> *<dfn class="local col5 decl" id="455alloc_beg" title='alloc_beg' data-type='void *' data-ref="455alloc_beg" data-ref-filename="455alloc_beg">alloc_beg</dfn> =</td></tr>
<tr><th id="800">800</th><td>        <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::GetBlockBeginFastLocked" title='__sanitizer::CombinedAllocator::GetBlockBeginFastLocked' data-ref="__sanitizer::CombinedAllocator::GetBlockBeginFastLocked" data-ref-filename="__sanitizer..CombinedAllocator..GetBlockBeginFastLocked">GetBlockBeginFastLocked</a>(<b>reinterpret_cast</b>&lt;<em>void</em> *&gt;(<a class="local col4 ref" href="#454p" title='p' data-ref="454p" data-ref-filename="454p">p</a>));</td></tr>
<tr><th id="801">801</th><td>    <b>return</b> <a class="tu member fn" href="#__asan::Allocator::GetAsanChunk" title='__asan::Allocator::GetAsanChunk' data-use='c' data-ref="__asan::Allocator::GetAsanChunk" data-ref-filename="__asan..Allocator..GetAsanChunk">GetAsanChunk</a>(<a class="local col5 ref" href="#455alloc_beg" title='alloc_beg' data-ref="455alloc_beg" data-ref-filename="455alloc_beg">alloc_beg</a>);</td></tr>
<tr><th id="802">802</th><td>  }</td></tr>
<tr><th id="803">803</th><td></td></tr>
<tr><th id="804">804</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl def fn" id="__asan::Allocator::AllocationSize" title='__asan::Allocator::AllocationSize' data-type='__sanitizer::uptr __asan::Allocator::AllocationSize(__sanitizer::uptr p)' data-ref="__asan::Allocator::AllocationSize" data-ref-filename="__asan..Allocator..AllocationSize">AllocationSize</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="456p" title='p' data-type='__sanitizer::uptr' data-ref="456p" data-ref-filename="456p">p</dfn>) {</td></tr>
<tr><th id="805">805</th><td>    <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col7 decl" id="457m" title='m' data-type='__asan::AsanChunk *' data-ref="457m" data-ref-filename="457m">m</dfn> = <a class="tu member fn" href="#__asan::Allocator::GetAsanChunkByAddr" title='__asan::Allocator::GetAsanChunkByAddr' data-use='c' data-ref="__asan::Allocator::GetAsanChunkByAddr" data-ref-filename="__asan..Allocator..GetAsanChunkByAddr">GetAsanChunkByAddr</a>(<a class="local col6 ref" href="#456p" title='p' data-ref="456p" data-ref-filename="456p">p</a>);</td></tr>
<tr><th id="806">806</th><td>    <b>if</b> (!<a class="local col7 ref" href="#457m" title='m' data-ref="457m" data-ref-filename="457m">m</a>) <b>return</b> <var>0</var>;</td></tr>
<tr><th id="807">807</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col7 ref" href="#457m" title='m' data-ref="457m" data-ref-filename="457m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>) != <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>)</td></tr>
<tr><th id="808">808</th><td>      <b>return</b> <var>0</var>;</td></tr>
<tr><th id="809">809</th><td>    <b>if</b> (<a class="local col7 ref" href="#457m" title='m' data-ref="457m" data-ref-filename="457m">m</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>() != <a class="local col6 ref" href="#456p" title='p' data-ref="456p" data-ref-filename="456p">p</a>) <b>return</b> <var>0</var>;</td></tr>
<tr><th id="810">810</th><td>    <b>return</b> <a class="local col7 ref" href="#457m" title='m' data-ref="457m" data-ref-filename="457m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>();</td></tr>
<tr><th id="811">811</th><td>  }</td></tr>
<tr><th id="812">812</th><td></td></tr>
<tr><th id="813">813</th><td>  <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a> <dfn class="tu decl def fn" id="__asan::Allocator::FindHeapChunkByAddress" title='__asan::Allocator::FindHeapChunkByAddress' data-type='__asan::AsanChunkView __asan::Allocator::FindHeapChunkByAddress(__sanitizer::uptr addr)' data-ref="__asan::Allocator::FindHeapChunkByAddress" data-ref-filename="__asan..Allocator..FindHeapChunkByAddress">FindHeapChunkByAddress</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="458addr" title='addr' data-type='__sanitizer::uptr' data-ref="458addr" data-ref-filename="458addr">addr</dfn>) {</td></tr>
<tr><th id="814">814</th><td>    <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col9 decl" id="459m1" title='m1' data-type='__asan::AsanChunk *' data-ref="459m1" data-ref-filename="459m1">m1</dfn> = <a class="tu member fn" href="#__asan::Allocator::GetAsanChunkByAddr" title='__asan::Allocator::GetAsanChunkByAddr' data-use='c' data-ref="__asan::Allocator::GetAsanChunkByAddr" data-ref-filename="__asan..Allocator..GetAsanChunkByAddr">GetAsanChunkByAddr</a>(<a class="local col8 ref" href="#458addr" title='addr' data-ref="458addr" data-ref-filename="458addr">addr</a>);</td></tr>
<tr><th id="815">815</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::sptr" title='__sanitizer::sptr' data-type='long' data-ref="__sanitizer::sptr" data-ref-filename="__sanitizer..sptr">sptr</a> <dfn class="local col0 decl" id="460offset" title='offset' data-type='__sanitizer::sptr' data-ref="460offset" data-ref-filename="460offset">offset</dfn> = <var>0</var>;</td></tr>
<tr><th id="816">816</th><td>    <b>if</b> (!<a class="local col9 ref" href="#459m1" title='m1' data-ref="459m1" data-ref-filename="459m1">m1</a> || <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a><a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AsanChunkView" title='__asan::AsanChunkView::AsanChunkView' data-ref="__asan::AsanChunkView::AsanChunkView" data-ref-filename="__asan..AsanChunkView..AsanChunkView">(</a><a class="local col9 ref" href="#459m1" title='m1' data-ref="459m1" data-ref-filename="459m1">m1</a>).<a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AddrIsAtLeft" title='__asan::AsanChunkView::AddrIsAtLeft' data-ref="__asan::AsanChunkView::AddrIsAtLeft" data-ref-filename="__asan..AsanChunkView..AddrIsAtLeft">AddrIsAtLeft</a>(<a class="local col8 ref" href="#458addr" title='addr' data-ref="458addr" data-ref-filename="458addr">addr</a>, <var>1</var>, &amp;<a class="local col0 ref" href="#460offset" title='offset' data-ref="460offset" data-ref-filename="460offset">offset</a>)) {</td></tr>
<tr><th id="817">817</th><td>      <i>// The address is in the chunk's left redzone, so maybe it is actually</i></td></tr>
<tr><th id="818">818</th><td><i>      // a right buffer overflow from the other chunk to the left.</i></td></tr>
<tr><th id="819">819</th><td><i>      // Search a bit to the left to see if there is another chunk.</i></td></tr>
<tr><th id="820">820</th><td>      <a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col1 decl" id="461m2" title='m2' data-type='__asan::AsanChunk *' data-ref="461m2" data-ref-filename="461m2">m2</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="821">821</th><td>      <b>for</b> (<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="462l" title='l' data-type='__sanitizer::uptr' data-ref="462l" data-ref-filename="462l">l</dfn> = <var>1</var>; <a class="local col2 ref" href="#462l" title='l' data-ref="462l" data-ref-filename="462l">l</a> &lt; <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::GetPageSizeCached" title='__sanitizer::GetPageSizeCached' data-ref="__sanitizer::GetPageSizeCached" data-ref-filename="__sanitizer..GetPageSizeCached">GetPageSizeCached</a>(); <a class="local col2 ref" href="#462l" title='l' data-ref="462l" data-ref-filename="462l">l</a>++) {</td></tr>
<tr><th id="822">822</th><td>        <a class="local col1 ref" href="#461m2" title='m2' data-ref="461m2" data-ref-filename="461m2">m2</a> = <a class="tu member fn" href="#__asan::Allocator::GetAsanChunkByAddr" title='__asan::Allocator::GetAsanChunkByAddr' data-use='c' data-ref="__asan::Allocator::GetAsanChunkByAddr" data-ref-filename="__asan..Allocator..GetAsanChunkByAddr">GetAsanChunkByAddr</a>(<a class="local col8 ref" href="#458addr" title='addr' data-ref="458addr" data-ref-filename="458addr">addr</a> - <a class="local col2 ref" href="#462l" title='l' data-ref="462l" data-ref-filename="462l">l</a>);</td></tr>
<tr><th id="823">823</th><td>        <b>if</b> (<a class="local col1 ref" href="#461m2" title='m2' data-ref="461m2" data-ref-filename="461m2">m2</a> == <a class="local col9 ref" href="#459m1" title='m1' data-ref="459m1" data-ref-filename="459m1">m1</a>) <b>continue</b>;  <i>// Still the same chunk.</i></td></tr>
<tr><th id="824">824</th><td>        <b>break</b>;</td></tr>
<tr><th id="825">825</th><td>      }</td></tr>
<tr><th id="826">826</th><td>      <b>if</b> (<a class="local col1 ref" href="#461m2" title='m2' data-ref="461m2" data-ref-filename="461m2">m2</a> &amp;&amp; <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a><a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AsanChunkView" title='__asan::AsanChunkView::AsanChunkView' data-ref="__asan::AsanChunkView::AsanChunkView" data-ref-filename="__asan..AsanChunkView..AsanChunkView">(</a><a class="local col1 ref" href="#461m2" title='m2' data-ref="461m2" data-ref-filename="461m2">m2</a>).<a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AddrIsAtRight" title='__asan::AsanChunkView::AddrIsAtRight' data-ref="__asan::AsanChunkView::AddrIsAtRight" data-ref-filename="__asan..AsanChunkView..AddrIsAtRight">AddrIsAtRight</a>(<a class="local col8 ref" href="#458addr" title='addr' data-ref="458addr" data-ref-filename="458addr">addr</a>, <var>1</var>, &amp;<a class="local col0 ref" href="#460offset" title='offset' data-ref="460offset" data-ref-filename="460offset">offset</a>))</td></tr>
<tr><th id="827">827</th><td>        <a class="local col9 ref" href="#459m1" title='m1' data-ref="459m1" data-ref-filename="459m1">m1</a> = <a class="tu member fn" href="#__asan::Allocator::ChooseChunk" title='__asan::Allocator::ChooseChunk' data-use='c' data-ref="__asan::Allocator::ChooseChunk" data-ref-filename="__asan..Allocator..ChooseChunk">ChooseChunk</a>(<a class="local col8 ref" href="#458addr" title='addr' data-ref="458addr" data-ref-filename="458addr">addr</a>, <a class="local col1 ref" href="#461m2" title='m2' data-ref="461m2" data-ref-filename="461m2">m2</a>, <a class="local col9 ref" href="#459m1" title='m1' data-ref="459m1" data-ref-filename="459m1">m1</a>);</td></tr>
<tr><th id="828">828</th><td>    }</td></tr>
<tr><th id="829">829</th><td>    <b>return</b> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a><a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AsanChunkView" title='__asan::AsanChunkView::AsanChunkView' data-ref="__asan::AsanChunkView::AsanChunkView" data-ref-filename="__asan..AsanChunkView..AsanChunkView">(</a><a class="local col9 ref" href="#459m1" title='m1' data-ref="459m1" data-ref-filename="459m1">m1</a>);</td></tr>
<tr><th id="830">830</th><td>  }</td></tr>
<tr><th id="831">831</th><td></td></tr>
<tr><th id="832">832</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::Purge" title='__asan::Allocator::Purge' data-type='void __asan::Allocator::Purge(__sanitizer::BufferedStackTrace * stack)' data-ref="__asan::Allocator::Purge" data-ref-filename="__asan..Allocator..Purge">Purge</dfn>(<a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col3 decl" id="463stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="463stack" data-ref-filename="463stack">stack</dfn>) {</td></tr>
<tr><th id="833">833</th><td>    <a class="type" href="asan_thread.h.html#__asan::AsanThread" title='__asan::AsanThread' data-ref="__asan::AsanThread" data-ref-filename="__asan..AsanThread">AsanThread</a> *<dfn class="local col4 decl" id="464t" title='t' data-type='__asan::AsanThread *' data-ref="464t" data-ref-filename="464t">t</dfn> = <a class="ref fn" href="asan_thread.h.html#__asan::GetCurrentThread" title='__asan::GetCurrentThread' data-ref="__asan::GetCurrentThread" data-ref-filename="__asan..GetCurrentThread">GetCurrentThread</a>();</td></tr>
<tr><th id="834">834</th><td>    <b>if</b> (<a class="local col4 ref" href="#464t" title='t' data-ref="464t" data-ref-filename="464t">t</a>) {</td></tr>
<tr><th id="835">835</th><td>      <a class="type" href="asan_allocator.h.html#__asan::AsanThreadLocalMallocStorage" title='__asan::AsanThreadLocalMallocStorage' data-ref="__asan::AsanThreadLocalMallocStorage" data-ref-filename="__asan..AsanThreadLocalMallocStorage">AsanThreadLocalMallocStorage</a> *<dfn class="local col5 decl" id="465ms" title='ms' data-type='__asan::AsanThreadLocalMallocStorage *' data-ref="465ms" data-ref-filename="465ms">ms</dfn> = &amp;<a class="local col4 ref" href="#464t" title='t' data-ref="464t" data-ref-filename="464t">t</a>-&gt;<a class="ref fn" href="asan_thread.h.html#__asan::AsanThread::malloc_storage" title='__asan::AsanThread::malloc_storage' data-ref="__asan::AsanThread::malloc_storage" data-ref-filename="__asan..AsanThread..malloc_storage">malloc_storage</a>();</td></tr>
<tr><th id="836">836</th><td>      <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='m' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::DrainAndRecycle" title='__sanitizer::Quarantine::DrainAndRecycle' data-ref="__sanitizer::Quarantine::DrainAndRecycle" data-ref-filename="__sanitizer..Quarantine..DrainAndRecycle">DrainAndRecycle</a>(<a class="ref fn" href="#__asan::GetQuarantineCache" title='__asan::GetQuarantineCache' data-ref="__asan::GetQuarantineCache" data-ref-filename="__asan..GetQuarantineCache">GetQuarantineCache</a>(<a class="local col5 ref" href="#465ms" title='ms' data-ref="465ms" data-ref-filename="465ms">ms</a>),</td></tr>
<tr><th id="837">837</th><td>                                 <a class="type" href="#__asan::QuarantineCallback" title='__asan::QuarantineCallback' data-ref="__asan::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback">QuarantineCallback</a><a class="tu ref fn" href="#__asan::QuarantineCallback::QuarantineCallback" title='__asan::QuarantineCallback::QuarantineCallback' data-use='c' data-ref="__asan::QuarantineCallback::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback..QuarantineCallback">(</a><a class="ref fn" href="#__asan::GetAllocatorCache" title='__asan::GetAllocatorCache' data-ref="__asan::GetAllocatorCache" data-ref-filename="__asan..GetAllocatorCache">GetAllocatorCache</a>(<a class="local col5 ref" href="#465ms" title='ms' data-ref="465ms" data-ref-filename="465ms">ms</a>),</td></tr>
<tr><th id="838">838</th><td>                                                    <a class="local col3 ref" href="#463stack" title='stack' data-ref="463stack" data-ref-filename="463stack">stack</a>));</td></tr>
<tr><th id="839">839</th><td>    }</td></tr>
<tr><th id="840">840</th><td>    {</td></tr>
<tr><th id="841">841</th><td>      <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col6 decl" id="466l" title='l' data-type='__sanitizer::SpinMutexLock' data-ref="466l" data-ref-filename="466l">l</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu member field" href="#__asan::Allocator::fallback_mutex" title='__asan::Allocator::fallback_mutex' data-use='a' data-ref="__asan::Allocator::fallback_mutex" data-ref-filename="__asan..Allocator..fallback_mutex">fallback_mutex</a>);</td></tr>
<tr><th id="842">842</th><td>      <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='m' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::DrainAndRecycle" title='__sanitizer::Quarantine::DrainAndRecycle' data-ref="__sanitizer::Quarantine::DrainAndRecycle" data-ref-filename="__sanitizer..Quarantine..DrainAndRecycle">DrainAndRecycle</a>(&amp;<a class="tu member field" href="#__asan::Allocator::fallback_quarantine_cache" title='__asan::Allocator::fallback_quarantine_cache' data-use='a' data-ref="__asan::Allocator::fallback_quarantine_cache" data-ref-filename="__asan..Allocator..fallback_quarantine_cache">fallback_quarantine_cache</a>,</td></tr>
<tr><th id="843">843</th><td>                                 <a class="type" href="#__asan::QuarantineCallback" title='__asan::QuarantineCallback' data-ref="__asan::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback">QuarantineCallback</a><a class="tu ref fn" href="#__asan::QuarantineCallback::QuarantineCallback" title='__asan::QuarantineCallback::QuarantineCallback' data-use='c' data-ref="__asan::QuarantineCallback::QuarantineCallback" data-ref-filename="__asan..QuarantineCallback..QuarantineCallback">(</a>&amp;<a class="tu member field" href="#__asan::Allocator::fallback_allocator_cache" title='__asan::Allocator::fallback_allocator_cache' data-use='a' data-ref="__asan::Allocator::fallback_allocator_cache" data-ref-filename="__asan..Allocator..fallback_allocator_cache">fallback_allocator_cache</a>,</td></tr>
<tr><th id="844">844</th><td>                                                    <a class="local col3 ref" href="#463stack" title='stack' data-ref="463stack" data-ref-filename="463stack">stack</a>));</td></tr>
<tr><th id="845">845</th><td>    }</td></tr>
<tr><th id="846">846</th><td></td></tr>
<tr><th id="847">847</th><td>    <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ForceReleaseToOS" title='__sanitizer::CombinedAllocator::ForceReleaseToOS' data-ref="__sanitizer::CombinedAllocator::ForceReleaseToOS" data-ref-filename="__sanitizer..CombinedAllocator..ForceReleaseToOS">ForceReleaseToOS</a>();</td></tr>
<tr><th id="848">848</th><td>  }</td></tr>
<tr><th id="849">849</th><td></td></tr>
<tr><th id="850">850</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::PrintStats" title='__asan::Allocator::PrintStats' data-type='void __asan::Allocator::PrintStats()' data-ref="__asan::Allocator::PrintStats" data-ref-filename="__asan..Allocator..PrintStats">PrintStats</dfn>() {</td></tr>
<tr><th id="851">851</th><td>    <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::PrintStats" title='__sanitizer::CombinedAllocator::PrintStats' data-ref="__sanitizer::CombinedAllocator::PrintStats" data-ref-filename="__sanitizer..CombinedAllocator..PrintStats">PrintStats</a>();</td></tr>
<tr><th id="852">852</th><td>    <a class="tu member field" href="#__asan::Allocator::quarantine" title='__asan::Allocator::quarantine' data-use='m' data-ref="__asan::Allocator::quarantine" data-ref-filename="__asan..Allocator..quarantine">quarantine</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_quarantine.h.html#__sanitizer::Quarantine::PrintStats" title='__sanitizer::Quarantine::PrintStats' data-ref="__sanitizer::Quarantine::PrintStats" data-ref-filename="__sanitizer..Quarantine..PrintStats">PrintStats</a>();</td></tr>
<tr><th id="853">853</th><td>  }</td></tr>
<tr><th id="854">854</th><td></td></tr>
<tr><th id="855">855</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::ForceLock" title='__asan::Allocator::ForceLock' data-type='void __asan::Allocator::ForceLock()' data-ref="__asan::Allocator::ForceLock" data-ref-filename="__asan..Allocator..ForceLock">ForceLock</dfn>() {</td></tr>
<tr><th id="856">856</th><td>    <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ForceLock" title='__sanitizer::CombinedAllocator::ForceLock' data-ref="__sanitizer::CombinedAllocator::ForceLock" data-ref-filename="__sanitizer..CombinedAllocator..ForceLock">ForceLock</a>();</td></tr>
<tr><th id="857">857</th><td>    <a class="tu member field" href="#__asan::Allocator::fallback_mutex" title='__asan::Allocator::fallback_mutex' data-use='m' data-ref="__asan::Allocator::fallback_mutex" data-ref-filename="__asan..Allocator..fallback_mutex">fallback_mutex</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::StaticSpinMutex::Lock" title='__sanitizer::StaticSpinMutex::Lock' data-ref="__sanitizer::StaticSpinMutex::Lock" data-ref-filename="__sanitizer..StaticSpinMutex..Lock">Lock</a>();</td></tr>
<tr><th id="858">858</th><td>  }</td></tr>
<tr><th id="859">859</th><td></td></tr>
<tr><th id="860">860</th><td>  <em>void</em> <dfn class="tu decl def fn" id="__asan::Allocator::ForceUnlock" title='__asan::Allocator::ForceUnlock' data-type='void __asan::Allocator::ForceUnlock()' data-ref="__asan::Allocator::ForceUnlock" data-ref-filename="__asan..Allocator..ForceUnlock">ForceUnlock</dfn>() {</td></tr>
<tr><th id="861">861</th><td>    <a class="tu member field" href="#__asan::Allocator::fallback_mutex" title='__asan::Allocator::fallback_mutex' data-use='m' data-ref="__asan::Allocator::fallback_mutex" data-ref-filename="__asan..Allocator..fallback_mutex">fallback_mutex</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::StaticSpinMutex::Unlock" title='__sanitizer::StaticSpinMutex::Unlock' data-ref="__sanitizer::StaticSpinMutex::Unlock" data-ref-filename="__sanitizer..StaticSpinMutex..Unlock">Unlock</a>();</td></tr>
<tr><th id="862">862</th><td>    <a class="tu member field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='m' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ForceUnlock" title='__sanitizer::CombinedAllocator::ForceUnlock' data-ref="__sanitizer::CombinedAllocator::ForceUnlock" data-ref-filename="__sanitizer..CombinedAllocator..ForceUnlock">ForceUnlock</a>();</td></tr>
<tr><th id="863">863</th><td>  }</td></tr>
<tr><th id="864">864</th><td>};</td></tr>
<tr><th id="865">865</th><td></td></tr>
<tr><th id="866">866</th><td><em>static</em> <a class="type" href="#__asan::Allocator" title='__asan::Allocator' data-ref="__asan::Allocator" data-ref-filename="__asan..Allocator">Allocator</a> <dfn class="tu decl def" id="__asan::instance" title='__asan::instance' data-type='__asan::Allocator' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</dfn><a class="tu ref fn" href="#__asan::Allocator::Allocator" title='__asan::Allocator::Allocator' data-use='c' data-ref="__asan::Allocator::Allocator" data-ref-filename="__asan..Allocator..Allocator">(</a><a class="enum" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::LINKER_INITIALIZED" title='__sanitizer::LINKER_INITIALIZED' data-ref="__sanitizer::LINKER_INITIALIZED" data-ref-filename="__sanitizer..LINKER_INITIALIZED">LINKER_INITIALIZED</a>);</td></tr>
<tr><th id="867">867</th><td></td></tr>
<tr><th id="868">868</th><td><em>static</em> <a class="typedef" href="asan_allocator.h.html#__asan::AsanAllocator" title='__asan::AsanAllocator' data-type='AsanAllocatorASVT&lt;__sanitizer::LocalAddressSpaceView&gt;' data-ref="__asan::AsanAllocator" data-ref-filename="__asan..AsanAllocator">AsanAllocator</a> &amp;<dfn class="tu decl def fn" id="__asan::get_allocator" title='__asan::get_allocator' data-type='__asan::AsanAllocator &amp; __asan::get_allocator()' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</dfn>() {</td></tr>
<tr><th id="869">869</th><td>  <b>return</b> <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref field" href="#__asan::Allocator::allocator" title='__asan::Allocator::allocator' data-use='a' data-ref="__asan::Allocator::allocator" data-ref-filename="__asan..Allocator..allocator">allocator</a>;</td></tr>
<tr><th id="870">870</th><td>}</td></tr>
<tr><th id="871">871</th><td></td></tr>
<tr><th id="872">872</th><td><em>bool</em> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::IsValid" title='__asan::AsanChunkView::IsValid' data-ref="__asan::AsanChunkView::IsValid" data-ref-filename="__asan..AsanChunkView..IsValid">IsValid</dfn>() <em>const</em> {</td></tr>
<tr><th id="873">873</th><td>  <b>return</b> <a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a> &amp;&amp; <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>) !=</td></tr>
<tr><th id="874">874</th><td>                       <a class="enum" href="#__asan::CHUNK_INVALID" title='__asan::CHUNK_INVALID' data-ref="__asan::CHUNK_INVALID" data-ref-filename="__asan..CHUNK_INVALID">CHUNK_INVALID</a>;</td></tr>
<tr><th id="875">875</th><td>}</td></tr>
<tr><th id="876">876</th><td><em>bool</em> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::IsAllocated" title='__asan::AsanChunkView::IsAllocated' data-ref="__asan::AsanChunkView::IsAllocated" data-ref-filename="__asan..AsanChunkView..IsAllocated">IsAllocated</dfn>() <em>const</em> {</td></tr>
<tr><th id="877">877</th><td>  <b>return</b> <a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a> &amp;&amp; <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>) ==</td></tr>
<tr><th id="878">878</th><td>                       <a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>;</td></tr>
<tr><th id="879">879</th><td>}</td></tr>
<tr><th id="880">880</th><td><em>bool</em> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::IsQuarantined" title='__asan::AsanChunkView::IsQuarantined' data-ref="__asan::AsanChunkView::IsQuarantined" data-ref-filename="__asan..AsanChunkView..IsQuarantined">IsQuarantined</dfn>() <em>const</em> {</td></tr>
<tr><th id="881">881</th><td>  <b>return</b> <a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a> &amp;&amp; <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>) ==</td></tr>
<tr><th id="882">882</th><td>                       <a class="enum" href="#__asan::CHUNK_QUARANTINE" title='__asan::CHUNK_QUARANTINE' data-ref="__asan::CHUNK_QUARANTINE" data-ref-filename="__asan..CHUNK_QUARANTINE">CHUNK_QUARANTINE</a>;</td></tr>
<tr><th id="883">883</th><td>}</td></tr>
<tr><th id="884">884</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::Beg" title='__asan::AsanChunkView::Beg' data-ref="__asan::AsanChunkView::Beg" data-ref-filename="__asan..AsanChunkView..Beg">Beg</dfn>() <em>const</em> { <b>return</b> <a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>(); }</td></tr>
<tr><th id="885">885</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::End" title='__asan::AsanChunkView::End' data-ref="__asan::AsanChunkView::End" data-ref-filename="__asan..AsanChunkView..End">End</dfn>() <em>const</em> { <b>return</b> <a class="member fn" href="#__asan::AsanChunkView::Beg" title='__asan::AsanChunkView::Beg' data-ref="__asan::AsanChunkView::Beg" data-ref-filename="__asan..AsanChunkView..Beg">Beg</a>() + <a class="member fn" href="#__asan::AsanChunkView::UsedSize" title='__asan::AsanChunkView::UsedSize' data-ref="__asan::AsanChunkView::UsedSize" data-ref-filename="__asan..AsanChunkView..UsedSize">UsedSize</a>(); }</td></tr>
<tr><th id="886">886</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::UsedSize" title='__asan::AsanChunkView::UsedSize' data-ref="__asan::AsanChunkView::UsedSize" data-ref-filename="__asan..AsanChunkView..UsedSize">UsedSize</dfn>() <em>const</em> { <b>return</b> <a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>(); }</td></tr>
<tr><th id="887">887</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::UserRequestedAlignment" title='__asan::AsanChunkView::UserRequestedAlignment' data-ref="__asan::AsanChunkView::UserRequestedAlignment" data-ref-filename="__asan..AsanChunkView..UserRequestedAlignment">UserRequestedAlignment</dfn>() <em>const</em> {</td></tr>
<tr><th id="888">888</th><td>  <b>return</b> <a class="type" href="#__asan::Allocator" title='__asan::Allocator' data-ref="__asan::Allocator" data-ref-filename="__asan..Allocator">Allocator</a>::<a class="tu ref fn" href="#__asan::Allocator::ComputeUserAlignment" title='__asan::Allocator::ComputeUserAlignment' data-use='c' data-ref="__asan::Allocator::ComputeUserAlignment" data-ref-filename="__asan..Allocator..ComputeUserAlignment">ComputeUserAlignment</a>(<a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::user_requested_alignment_log" title='__asan::ChunkHeader::user_requested_alignment_log' data-use='r' data-ref="__asan::ChunkHeader::user_requested_alignment_log" data-ref-filename="__asan..ChunkHeader..user_requested_alignment_log">user_requested_alignment_log</a>);</td></tr>
<tr><th id="889">889</th><td>}</td></tr>
<tr><th id="890">890</th><td></td></tr>
<tr><th id="891">891</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::AllocTid" title='__asan::AsanChunkView::AllocTid' data-ref="__asan::AsanChunkView::AllocTid" data-ref-filename="__asan..AsanChunkView..AllocTid">AllocTid</dfn>() <em>const</em> {</td></tr>
<tr><th id="892">892</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col7 decl" id="467tid" title='tid' data-type='__sanitizer::u32' data-ref="467tid" data-ref-filename="467tid">tid</dfn> = <var>0</var>;</td></tr>
<tr><th id="893">893</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col8 decl" id="468stack" title='stack' data-type='__sanitizer::u32' data-ref="468stack" data-ref-filename="468stack">stack</dfn> = <var>0</var>;</td></tr>
<tr><th id="894">894</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::GetAllocContext" title='__asan::ChunkHeader::GetAllocContext' data-use='c' data-ref="__asan::ChunkHeader::GetAllocContext" data-ref-filename="__asan..ChunkHeader..GetAllocContext">GetAllocContext</a>(<span class='refarg'><a class="local col7 ref" href="#467tid" title='tid' data-ref="467tid" data-ref-filename="467tid">tid</a></span>, <span class='refarg'><a class="local col8 ref" href="#468stack" title='stack' data-ref="468stack" data-ref-filename="468stack">stack</a></span>);</td></tr>
<tr><th id="895">895</th><td>  <b>return</b> <a class="local col7 ref" href="#467tid" title='tid' data-ref="467tid" data-ref-filename="467tid">tid</a>;</td></tr>
<tr><th id="896">896</th><td>}</td></tr>
<tr><th id="897">897</th><td></td></tr>
<tr><th id="898">898</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::FreeTid" title='__asan::AsanChunkView::FreeTid' data-ref="__asan::AsanChunkView::FreeTid" data-ref-filename="__asan..AsanChunkView..FreeTid">FreeTid</dfn>() <em>const</em> {</td></tr>
<tr><th id="899">899</th><td>  <b>if</b> (!<a class="member fn" href="#__asan::AsanChunkView::IsQuarantined" title='__asan::AsanChunkView::IsQuarantined' data-ref="__asan::AsanChunkView::IsQuarantined" data-ref-filename="__asan..AsanChunkView..IsQuarantined">IsQuarantined</a>())</td></tr>
<tr><th id="900">900</th><td>    <b>return</b> <a class="ref" href="asan_thread.h.html#__asan::kInvalidTid" title='__asan::kInvalidTid' data-ref="__asan::kInvalidTid" data-ref-filename="__asan..kInvalidTid">kInvalidTid</a>;</td></tr>
<tr><th id="901">901</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col9 decl" id="469tid" title='tid' data-type='__sanitizer::u32' data-ref="469tid" data-ref-filename="469tid">tid</dfn> = <var>0</var>;</td></tr>
<tr><th id="902">902</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col0 decl" id="470stack" title='stack' data-type='__sanitizer::u32' data-ref="470stack" data-ref-filename="470stack">stack</dfn> = <var>0</var>;</td></tr>
<tr><th id="903">903</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkBase::GetFreeContext" title='__asan::ChunkBase::GetFreeContext' data-use='c' data-ref="__asan::ChunkBase::GetFreeContext" data-ref-filename="__asan..ChunkBase..GetFreeContext">GetFreeContext</a>(<span class='refarg'><a class="local col9 ref" href="#469tid" title='tid' data-ref="469tid" data-ref-filename="469tid">tid</a></span>, <span class='refarg'><a class="local col0 ref" href="#470stack" title='stack' data-ref="470stack" data-ref-filename="470stack">stack</a></span>);</td></tr>
<tr><th id="904">904</th><td>  <b>return</b> <a class="local col9 ref" href="#469tid" title='tid' data-ref="469tid" data-ref-filename="469tid">tid</a>;</td></tr>
<tr><th id="905">905</th><td>}</td></tr>
<tr><th id="906">906</th><td></td></tr>
<tr><th id="907">907</th><td><a class="type" href="asan_allocator.h.html#__asan::AllocType" title='__asan::AllocType' data-ref="__asan::AllocType" data-ref-filename="__asan..AllocType">AllocType</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::GetAllocType" title='__asan::AsanChunkView::GetAllocType' data-ref="__asan::AsanChunkView::GetAllocType" data-ref-filename="__asan..AsanChunkView..GetAllocType">GetAllocType</dfn>() <em>const</em> {</td></tr>
<tr><th id="908">908</th><td>  <b>return</b> (<a class="type" href="asan_allocator.h.html#__asan::AllocType" title='__asan::AllocType' data-ref="__asan::AllocType" data-ref-filename="__asan..AllocType">AllocType</a>)<a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::alloc_type" title='__asan::ChunkHeader::alloc_type' data-use='r' data-ref="__asan::ChunkHeader::alloc_type" data-ref-filename="__asan..ChunkHeader..alloc_type">alloc_type</a>;</td></tr>
<tr><th id="909">909</th><td>}</td></tr>
<tr><th id="910">910</th><td></td></tr>
<tr><th id="911">911</th><td><em>static</em> <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::StackTrace" title='__sanitizer::StackTrace' data-ref="__sanitizer::StackTrace" data-ref-filename="__sanitizer..StackTrace">StackTrace</a> <dfn class="tu decl def fn" id="__asan::GetStackTraceFromId" title='__asan::GetStackTraceFromId' data-type='__sanitizer::StackTrace __asan::GetStackTraceFromId(__sanitizer::u32 id)' data-ref="__asan::GetStackTraceFromId" data-ref-filename="__asan..GetStackTraceFromId">GetStackTraceFromId</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col1 decl" id="471id" title='id' data-type='__sanitizer::u32' data-ref="471id" data-ref-filename="471id">id</dfn>) {</td></tr>
<tr><th id="912">912</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((id)); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 912, &quot;(&quot; &quot;(id)&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="local col1 ref" href="#471id" title='id' data-ref="471id" data-ref-filename="471id">id</a>);</td></tr>
<tr><th id="913">913</th><td>  <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::StackTrace" title='__sanitizer::StackTrace' data-ref="__sanitizer::StackTrace" data-ref-filename="__sanitizer..StackTrace">StackTrace</a> <dfn class="local col2 decl" id="472res" title='res' data-type='__sanitizer::StackTrace' data-ref="472res" data-ref-filename="472res">res</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_stackdepot.h.html#__sanitizer::StackDepotGet" title='__sanitizer::StackDepotGet' data-ref="__sanitizer::StackDepotGet" data-ref-filename="__sanitizer..StackDepotGet">StackDepotGet</a>(<a class="local col1 ref" href="#471id" title='id' data-ref="471id" data-ref-filename="471id">id</a>);</td></tr>
<tr><th id="914">914</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((res.trace)); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 914, &quot;(&quot; &quot;(res.trace)&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="local col2 ref" href="#472res" title='res' data-ref="472res" data-ref-filename="472res">res</a>.<a class="ref field" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::StackTrace::trace" title='__sanitizer::StackTrace::trace' data-ref="__sanitizer::StackTrace::trace" data-ref-filename="__sanitizer..StackTrace..trace">trace</a>);</td></tr>
<tr><th id="915">915</th><td>  <b>return</b> <a class="local col2 ref" href="#472res" title='res' data-ref="472res" data-ref-filename="472res">res</a>;</td></tr>
<tr><th id="916">916</th><td>}</td></tr>
<tr><th id="917">917</th><td></td></tr>
<tr><th id="918">918</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::GetAllocStackId" title='__asan::AsanChunkView::GetAllocStackId' data-ref="__asan::AsanChunkView::GetAllocStackId" data-ref-filename="__asan..AsanChunkView..GetAllocStackId">GetAllocStackId</dfn>() <em>const</em> {</td></tr>
<tr><th id="919">919</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col3 decl" id="473tid" title='tid' data-type='__sanitizer::u32' data-ref="473tid" data-ref-filename="473tid">tid</dfn> = <var>0</var>;</td></tr>
<tr><th id="920">920</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col4 decl" id="474stack" title='stack' data-type='__sanitizer::u32' data-ref="474stack" data-ref-filename="474stack">stack</dfn> = <var>0</var>;</td></tr>
<tr><th id="921">921</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::GetAllocContext" title='__asan::ChunkHeader::GetAllocContext' data-use='c' data-ref="__asan::ChunkHeader::GetAllocContext" data-ref-filename="__asan..ChunkHeader..GetAllocContext">GetAllocContext</a>(<span class='refarg'><a class="local col3 ref" href="#473tid" title='tid' data-ref="473tid" data-ref-filename="473tid">tid</a></span>, <span class='refarg'><a class="local col4 ref" href="#474stack" title='stack' data-ref="474stack" data-ref-filename="474stack">stack</a></span>);</td></tr>
<tr><th id="922">922</th><td>  <b>return</b> <a class="local col4 ref" href="#474stack" title='stack' data-ref="474stack" data-ref-filename="474stack">stack</a>;</td></tr>
<tr><th id="923">923</th><td>}</td></tr>
<tr><th id="924">924</th><td></td></tr>
<tr><th id="925">925</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::GetFreeStackId" title='__asan::AsanChunkView::GetFreeStackId' data-ref="__asan::AsanChunkView::GetFreeStackId" data-ref-filename="__asan..AsanChunkView..GetFreeStackId">GetFreeStackId</dfn>() <em>const</em> {</td></tr>
<tr><th id="926">926</th><td>  <b>if</b> (!<a class="member fn" href="#__asan::AsanChunkView::IsQuarantined" title='__asan::AsanChunkView::IsQuarantined' data-ref="__asan::AsanChunkView::IsQuarantined" data-ref-filename="__asan..AsanChunkView..IsQuarantined">IsQuarantined</a>())</td></tr>
<tr><th id="927">927</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="928">928</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col5 decl" id="475tid" title='tid' data-type='__sanitizer::u32' data-ref="475tid" data-ref-filename="475tid">tid</dfn> = <var>0</var>;</td></tr>
<tr><th id="929">929</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col6 decl" id="476stack" title='stack' data-type='__sanitizer::u32' data-ref="476stack" data-ref-filename="476stack">stack</dfn> = <var>0</var>;</td></tr>
<tr><th id="930">930</th><td>  <a class="member field" href="asan_allocator.h.html#__asan::AsanChunkView::chunk_" title='__asan::AsanChunkView::chunk_' data-ref="__asan::AsanChunkView::chunk_" data-ref-filename="__asan..AsanChunkView..chunk_">chunk_</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkBase::GetFreeContext" title='__asan::ChunkBase::GetFreeContext' data-use='c' data-ref="__asan::ChunkBase::GetFreeContext" data-ref-filename="__asan..ChunkBase..GetFreeContext">GetFreeContext</a>(<span class='refarg'><a class="local col5 ref" href="#475tid" title='tid' data-ref="475tid" data-ref-filename="475tid">tid</a></span>, <span class='refarg'><a class="local col6 ref" href="#476stack" title='stack' data-ref="476stack" data-ref-filename="476stack">stack</a></span>);</td></tr>
<tr><th id="931">931</th><td>  <b>return</b> <a class="local col6 ref" href="#476stack" title='stack' data-ref="476stack" data-ref-filename="476stack">stack</a>;</td></tr>
<tr><th id="932">932</th><td>}</td></tr>
<tr><th id="933">933</th><td></td></tr>
<tr><th id="934">934</th><td><a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::StackTrace" title='__sanitizer::StackTrace' data-ref="__sanitizer::StackTrace" data-ref-filename="__sanitizer..StackTrace">StackTrace</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::GetAllocStack" title='__asan::AsanChunkView::GetAllocStack' data-ref="__asan::AsanChunkView::GetAllocStack" data-ref-filename="__asan..AsanChunkView..GetAllocStack">GetAllocStack</dfn>() <em>const</em> {</td></tr>
<tr><th id="935">935</th><td>  <b>return</b> <a class="tu ref fn" href="#__asan::GetStackTraceFromId" title='__asan::GetStackTraceFromId' data-use='c' data-ref="__asan::GetStackTraceFromId" data-ref-filename="__asan..GetStackTraceFromId">GetStackTraceFromId</a>(<a class="member fn" href="#__asan::AsanChunkView::GetAllocStackId" title='__asan::AsanChunkView::GetAllocStackId' data-ref="__asan::AsanChunkView::GetAllocStackId" data-ref-filename="__asan..AsanChunkView..GetAllocStackId">GetAllocStackId</a>());</td></tr>
<tr><th id="936">936</th><td>}</td></tr>
<tr><th id="937">937</th><td></td></tr>
<tr><th id="938">938</th><td><a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::StackTrace" title='__sanitizer::StackTrace' data-ref="__sanitizer::StackTrace" data-ref-filename="__sanitizer..StackTrace">StackTrace</a> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a>::<dfn class="decl def fn" id="__asan::AsanChunkView::GetFreeStack" title='__asan::AsanChunkView::GetFreeStack' data-ref="__asan::AsanChunkView::GetFreeStack" data-ref-filename="__asan..AsanChunkView..GetFreeStack">GetFreeStack</dfn>() <em>const</em> {</td></tr>
<tr><th id="939">939</th><td>  <b>return</b> <a class="tu ref fn" href="#__asan::GetStackTraceFromId" title='__asan::GetStackTraceFromId' data-use='c' data-ref="__asan::GetStackTraceFromId" data-ref-filename="__asan..GetStackTraceFromId">GetStackTraceFromId</a>(<a class="member fn" href="#__asan::AsanChunkView::GetFreeStackId" title='__asan::AsanChunkView::GetFreeStackId' data-ref="__asan::AsanChunkView::GetFreeStackId" data-ref-filename="__asan..AsanChunkView..GetFreeStackId">GetFreeStackId</a>());</td></tr>
<tr><th id="940">940</th><td>}</td></tr>
<tr><th id="941">941</th><td></td></tr>
<tr><th id="942">942</th><td><em>void</em> <dfn class="decl def fn" id="__asan::InitializeAllocator" title='__asan::InitializeAllocator' data-ref="__asan::InitializeAllocator" data-ref-filename="__asan..InitializeAllocator">InitializeAllocator</dfn>(<em>const</em> <a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a> &amp;<dfn class="local col7 decl" id="477options" title='options' data-type='const __asan::AllocatorOptions &amp;' data-ref="477options" data-ref-filename="477options">options</dfn>) {</td></tr>
<tr><th id="943">943</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::InitLinkerInitialized" title='__asan::Allocator::InitLinkerInitialized' data-use='c' data-ref="__asan::Allocator::InitLinkerInitialized" data-ref-filename="__asan..Allocator..InitLinkerInitialized">InitLinkerInitialized</a>(<a class="local col7 ref" href="#477options" title='options' data-ref="477options" data-ref-filename="477options">options</a>);</td></tr>
<tr><th id="944">944</th><td>}</td></tr>
<tr><th id="945">945</th><td></td></tr>
<tr><th id="946">946</th><td><em>void</em> <dfn class="decl def fn" id="__asan::ReInitializeAllocator" title='__asan::ReInitializeAllocator' data-ref="__asan::ReInitializeAllocator" data-ref-filename="__asan..ReInitializeAllocator">ReInitializeAllocator</dfn>(<em>const</em> <a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a> &amp;<dfn class="local col8 decl" id="478options" title='options' data-type='const __asan::AllocatorOptions &amp;' data-ref="478options" data-ref-filename="478options">options</dfn>) {</td></tr>
<tr><th id="947">947</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::ReInitialize" title='__asan::Allocator::ReInitialize' data-use='c' data-ref="__asan::Allocator::ReInitialize" data-ref-filename="__asan..Allocator..ReInitialize">ReInitialize</a>(<a class="local col8 ref" href="#478options" title='options' data-ref="478options" data-ref-filename="478options">options</a>);</td></tr>
<tr><th id="948">948</th><td>}</td></tr>
<tr><th id="949">949</th><td></td></tr>
<tr><th id="950">950</th><td><em>void</em> <dfn class="decl def fn" id="__asan::GetAllocatorOptions" title='__asan::GetAllocatorOptions' data-ref="__asan::GetAllocatorOptions" data-ref-filename="__asan..GetAllocatorOptions">GetAllocatorOptions</dfn>(<a class="type" href="asan_allocator.h.html#__asan::AllocatorOptions" title='__asan::AllocatorOptions' data-ref="__asan::AllocatorOptions" data-ref-filename="__asan..AllocatorOptions">AllocatorOptions</a> *<dfn class="local col9 decl" id="479options" title='options' data-type='__asan::AllocatorOptions *' data-ref="479options" data-ref-filename="479options">options</dfn>) {</td></tr>
<tr><th id="951">951</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::GetOptions" title='__asan::Allocator::GetOptions' data-use='c' data-ref="__asan::Allocator::GetOptions" data-ref-filename="__asan..Allocator..GetOptions">GetOptions</a>(<a class="local col9 ref" href="#479options" title='options' data-ref="479options" data-ref-filename="479options">options</a>);</td></tr>
<tr><th id="952">952</th><td>}</td></tr>
<tr><th id="953">953</th><td></td></tr>
<tr><th id="954">954</th><td><a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a> <dfn class="decl def fn" id="__asan::FindHeapChunkByAddress" title='__asan::FindHeapChunkByAddress' data-ref="__asan::FindHeapChunkByAddress" data-ref-filename="__asan..FindHeapChunkByAddress">FindHeapChunkByAddress</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="480addr" title='addr' data-type='__sanitizer::uptr' data-ref="480addr" data-ref-filename="480addr">addr</dfn>) {</td></tr>
<tr><th id="955">955</th><td>  <b>return</b> <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::FindHeapChunkByAddress" title='__asan::Allocator::FindHeapChunkByAddress' data-use='c' data-ref="__asan::Allocator::FindHeapChunkByAddress" data-ref-filename="__asan..Allocator..FindHeapChunkByAddress">FindHeapChunkByAddress</a>(<a class="local col0 ref" href="#480addr" title='addr' data-ref="480addr" data-ref-filename="480addr">addr</a>);</td></tr>
<tr><th id="956">956</th><td>}</td></tr>
<tr><th id="957">957</th><td><a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a> <dfn class="decl def fn" id="__asan::FindHeapChunkByAllocBeg" title='__asan::FindHeapChunkByAllocBeg' data-ref="__asan::FindHeapChunkByAllocBeg" data-ref-filename="__asan..FindHeapChunkByAllocBeg">FindHeapChunkByAllocBeg</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="481addr" title='addr' data-type='__sanitizer::uptr' data-ref="481addr" data-ref-filename="481addr">addr</dfn>) {</td></tr>
<tr><th id="958">958</th><td>  <b>return</b> <a class="type" href="asan_allocator.h.html#__asan::AsanChunkView" title='__asan::AsanChunkView' data-ref="__asan::AsanChunkView" data-ref-filename="__asan..AsanChunkView">AsanChunkView</a><a class="ref fn" href="asan_allocator.h.html#__asan::AsanChunkView::AsanChunkView" title='__asan::AsanChunkView::AsanChunkView' data-ref="__asan::AsanChunkView::AsanChunkView" data-ref-filename="__asan..AsanChunkView..AsanChunkView">(</a><a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::GetAsanChunk" title='__asan::Allocator::GetAsanChunk' data-use='c' data-ref="__asan::Allocator::GetAsanChunk" data-ref-filename="__asan..Allocator..GetAsanChunk">GetAsanChunk</a>(<b>reinterpret_cast</b>&lt;<em>void</em>*&gt;(<a class="local col1 ref" href="#481addr" title='addr' data-ref="481addr" data-ref-filename="481addr">addr</a>)));</td></tr>
<tr><th id="959">959</th><td>}</td></tr>
<tr><th id="960">960</th><td></td></tr>
<tr><th id="961">961</th><td><em>void</em> <a class="type" href="asan_allocator.h.html#__asan::AsanThreadLocalMallocStorage" title='__asan::AsanThreadLocalMallocStorage' data-ref="__asan::AsanThreadLocalMallocStorage" data-ref-filename="__asan..AsanThreadLocalMallocStorage">AsanThreadLocalMallocStorage</a>::<dfn class="decl def fn" id="__asan::AsanThreadLocalMallocStorage::CommitBack" title='__asan::AsanThreadLocalMallocStorage::CommitBack' data-ref="__asan::AsanThreadLocalMallocStorage::CommitBack" data-ref-filename="__asan..AsanThreadLocalMallocStorage..CommitBack">CommitBack</dfn>() {</td></tr>
<tr><th id="962">962</th><td>  <a class="macro" href="asan_stack.h.html#63" title="BufferedStackTrace stack; if (GetMallocContextSize() &lt;= 2) { stack.size = GetMallocContextSize(); if (GetMallocContextSize() &gt; 0) { stack.top_frame_bp = (__sanitizer::uptr) __builtin_frame_address(0); stack.trace_buffer[0] = StackTrace::GetCurrentPc(); if (GetMallocContextSize() &gt; 1) stack.trace_buffer[1] = (__sanitizer::uptr) __builtin_return_address(0); } } else { stack.Unwind(StackTrace::GetCurrentPc(), (__sanitizer::uptr) __builtin_frame_address(0), nullptr, common_flags()-&gt;fast_unwind_on_malloc, GetMallocContextSize()); }" data-ref="_M/GET_STACK_TRACE_MALLOC">GET_STACK_TRACE_MALLOC</a>;</td></tr>
<tr><th id="963">963</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::CommitBack" title='__asan::Allocator::CommitBack' data-use='c' data-ref="__asan::Allocator::CommitBack" data-ref-filename="__asan..Allocator..CommitBack">CommitBack</a>(<b>this</b>, &amp;<a class="local col2 ref" href="#962" title='stack' data-ref="482stack" data-ref-filename="482stack">stack</a>);</td></tr>
<tr><th id="964">964</th><td>}</td></tr>
<tr><th id="965">965</th><td></td></tr>
<tr><th id="966">966</th><td><em>void</em> <dfn class="decl def fn" id="__asan::PrintInternalAllocatorStats" title='__asan::PrintInternalAllocatorStats' data-ref="__asan::PrintInternalAllocatorStats" data-ref-filename="__asan..PrintInternalAllocatorStats">PrintInternalAllocatorStats</dfn>() {</td></tr>
<tr><th id="967">967</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::PrintStats" title='__asan::Allocator::PrintStats' data-use='c' data-ref="__asan::Allocator::PrintStats" data-ref-filename="__asan..Allocator..PrintStats">PrintStats</a>();</td></tr>
<tr><th id="968">968</th><td>}</td></tr>
<tr><th id="969">969</th><td></td></tr>
<tr><th id="970">970</th><td><em>void</em> <dfn class="decl def fn" id="__asan::asan_free" title='__asan::asan_free' data-ref="__asan::asan_free" data-ref-filename="__asan..asan_free">asan_free</dfn>(<em>void</em> *<dfn class="local col3 decl" id="483ptr" title='ptr' data-type='void *' data-ref="483ptr" data-ref-filename="483ptr">ptr</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col4 decl" id="484stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="484stack" data-ref-filename="484stack">stack</dfn>, <a class="type" href="asan_allocator.h.html#__asan::AllocType" title='__asan::AllocType' data-ref="__asan::AllocType" data-ref-filename="__asan..AllocType">AllocType</a> <dfn class="local col5 decl" id="485alloc_type" title='alloc_type' data-type='__asan::AllocType' data-ref="485alloc_type" data-ref-filename="485alloc_type">alloc_type</dfn>) {</td></tr>
<tr><th id="971">971</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Deallocate" title='__asan::Allocator::Deallocate' data-use='c' data-ref="__asan::Allocator::Deallocate" data-ref-filename="__asan..Allocator..Deallocate">Deallocate</a>(<a class="local col3 ref" href="#483ptr" title='ptr' data-ref="483ptr" data-ref-filename="483ptr">ptr</a>, <var>0</var>, <var>0</var>, <a class="local col4 ref" href="#484stack" title='stack' data-ref="484stack" data-ref-filename="484stack">stack</a>, <a class="local col5 ref" href="#485alloc_type" title='alloc_type' data-ref="485alloc_type" data-ref-filename="485alloc_type">alloc_type</a>);</td></tr>
<tr><th id="972">972</th><td>}</td></tr>
<tr><th id="973">973</th><td></td></tr>
<tr><th id="974">974</th><td><em>void</em> <dfn class="decl def fn" id="__asan::asan_delete" title='__asan::asan_delete' data-ref="__asan::asan_delete" data-ref-filename="__asan..asan_delete">asan_delete</dfn>(<em>void</em> *<dfn class="local col6 decl" id="486ptr" title='ptr' data-type='void *' data-ref="486ptr" data-ref-filename="486ptr">ptr</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="487size" title='size' data-type='__sanitizer::uptr' data-ref="487size" data-ref-filename="487size">size</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="488alignment" title='alignment' data-type='__sanitizer::uptr' data-ref="488alignment" data-ref-filename="488alignment">alignment</dfn>,</td></tr>
<tr><th id="975">975</th><td>                 <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col9 decl" id="489stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="489stack" data-ref-filename="489stack">stack</dfn>, <a class="type" href="asan_allocator.h.html#__asan::AllocType" title='__asan::AllocType' data-ref="__asan::AllocType" data-ref-filename="__asan..AllocType">AllocType</a> <dfn class="local col0 decl" id="490alloc_type" title='alloc_type' data-type='__asan::AllocType' data-ref="490alloc_type" data-ref-filename="490alloc_type">alloc_type</dfn>) {</td></tr>
<tr><th id="976">976</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Deallocate" title='__asan::Allocator::Deallocate' data-use='c' data-ref="__asan::Allocator::Deallocate" data-ref-filename="__asan..Allocator..Deallocate">Deallocate</a>(<a class="local col6 ref" href="#486ptr" title='ptr' data-ref="486ptr" data-ref-filename="486ptr">ptr</a>, <a class="local col7 ref" href="#487size" title='size' data-ref="487size" data-ref-filename="487size">size</a>, <a class="local col8 ref" href="#488alignment" title='alignment' data-ref="488alignment" data-ref-filename="488alignment">alignment</a>, <a class="local col9 ref" href="#489stack" title='stack' data-ref="489stack" data-ref-filename="489stack">stack</a>, <a class="local col0 ref" href="#490alloc_type" title='alloc_type' data-ref="490alloc_type" data-ref-filename="490alloc_type">alloc_type</a>);</td></tr>
<tr><th id="977">977</th><td>}</td></tr>
<tr><th id="978">978</th><td></td></tr>
<tr><th id="979">979</th><td><em>void</em> *<dfn class="decl def fn" id="__asan::asan_malloc" title='__asan::asan_malloc' data-ref="__asan::asan_malloc" data-ref-filename="__asan..asan_malloc">asan_malloc</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="491size" title='size' data-type='__sanitizer::uptr' data-ref="491size" data-ref-filename="491size">size</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col2 decl" id="492stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="492stack" data-ref-filename="492stack">stack</dfn>) {</td></tr>
<tr><th id="980">980</th><td>  <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::SetErrnoOnNull" title='__sanitizer::SetErrnoOnNull' data-ref="__sanitizer::SetErrnoOnNull" data-ref-filename="__sanitizer..SetErrnoOnNull">SetErrnoOnNull</a>(<a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-use='c' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</a>(<a class="local col1 ref" href="#491size" title='size' data-ref="491size" data-ref-filename="491size">size</a>, <var>8</var>, <a class="local col2 ref" href="#492stack" title='stack' data-ref="492stack" data-ref-filename="492stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>, <b>true</b>));</td></tr>
<tr><th id="981">981</th><td>}</td></tr>
<tr><th id="982">982</th><td></td></tr>
<tr><th id="983">983</th><td><em>void</em> *<dfn class="decl def fn" id="__asan::asan_calloc" title='__asan::asan_calloc' data-ref="__asan::asan_calloc" data-ref-filename="__asan..asan_calloc">asan_calloc</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="493nmemb" title='nmemb' data-type='__sanitizer::uptr' data-ref="493nmemb" data-ref-filename="493nmemb">nmemb</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="494size" title='size' data-type='__sanitizer::uptr' data-ref="494size" data-ref-filename="494size">size</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col5 decl" id="495stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="495stack" data-ref-filename="495stack">stack</dfn>) {</td></tr>
<tr><th id="984">984</th><td>  <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::SetErrnoOnNull" title='__sanitizer::SetErrnoOnNull' data-ref="__sanitizer::SetErrnoOnNull" data-ref-filename="__sanitizer..SetErrnoOnNull">SetErrnoOnNull</a>(<a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Calloc" title='__asan::Allocator::Calloc' data-use='c' data-ref="__asan::Allocator::Calloc" data-ref-filename="__asan..Allocator..Calloc">Calloc</a>(<a class="local col3 ref" href="#493nmemb" title='nmemb' data-ref="493nmemb" data-ref-filename="493nmemb">nmemb</a>, <a class="local col4 ref" href="#494size" title='size' data-ref="494size" data-ref-filename="494size">size</a>, <a class="local col5 ref" href="#495stack" title='stack' data-ref="495stack" data-ref-filename="495stack">stack</a>));</td></tr>
<tr><th id="985">985</th><td>}</td></tr>
<tr><th id="986">986</th><td></td></tr>
<tr><th id="987">987</th><td><em>void</em> *<dfn class="decl def fn" id="__asan::asan_reallocarray" title='__asan::asan_reallocarray' data-ref="__asan::asan_reallocarray" data-ref-filename="__asan..asan_reallocarray">asan_reallocarray</dfn>(<em>void</em> *<dfn class="local col6 decl" id="496p" title='p' data-type='void *' data-ref="496p" data-ref-filename="496p">p</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="497nmemb" title='nmemb' data-type='__sanitizer::uptr' data-ref="497nmemb" data-ref-filename="497nmemb">nmemb</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="498size" title='size' data-type='__sanitizer::uptr' data-ref="498size" data-ref-filename="498size">size</dfn>,</td></tr>
<tr><th id="988">988</th><td>                        <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col9 decl" id="499stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="499stack" data-ref-filename="499stack">stack</dfn>) {</td></tr>
<tr><th id="989">989</th><td>  <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(CheckForCallocOverflow(size, nmemb)), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::CheckForCallocOverflow" title='__sanitizer::CheckForCallocOverflow' data-ref="__sanitizer::CheckForCallocOverflow" data-ref-filename="__sanitizer..CheckForCallocOverflow">CheckForCallocOverflow</a>(<a class="local col8 ref" href="#498size" title='size' data-ref="498size" data-ref-filename="498size">size</a>, <a class="local col7 ref" href="#497nmemb" title='nmemb' data-ref="497nmemb" data-ref-filename="497nmemb">nmemb</a>))) {</td></tr>
<tr><th id="990">990</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_errno.h.html#37" title="(*__errno_location())" data-ref="_M/errno">errno</a> = <a class="macro" href="../sanitizer_common/sanitizer_errno_codes.h.html#24" title="12" data-ref="_M/errno_ENOMEM">errno_ENOMEM</a>;</td></tr>
<tr><th id="991">991</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>())</td></tr>
<tr><th id="992">992</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="993">993</th><td>    <a class="ref fn" href="asan_report.h.html#__asan::ReportReallocArrayOverflow" title='__asan::ReportReallocArrayOverflow' data-ref="__asan::ReportReallocArrayOverflow" data-ref-filename="__asan..ReportReallocArrayOverflow">ReportReallocArrayOverflow</a>(<a class="local col7 ref" href="#497nmemb" title='nmemb' data-ref="497nmemb" data-ref-filename="497nmemb">nmemb</a>, <a class="local col8 ref" href="#498size" title='size' data-ref="498size" data-ref-filename="498size">size</a>, <a class="local col9 ref" href="#499stack" title='stack' data-ref="499stack" data-ref-filename="499stack">stack</a>);</td></tr>
<tr><th id="994">994</th><td>  }</td></tr>
<tr><th id="995">995</th><td>  <b>return</b> <a class="ref fn" href="#__asan::asan_realloc" title='__asan::asan_realloc' data-ref="__asan::asan_realloc" data-ref-filename="__asan..asan_realloc">asan_realloc</a>(<a class="local col6 ref" href="#496p" title='p' data-ref="496p" data-ref-filename="496p">p</a>, <a class="local col7 ref" href="#497nmemb" title='nmemb' data-ref="497nmemb" data-ref-filename="497nmemb">nmemb</a> * <a class="local col8 ref" href="#498size" title='size' data-ref="498size" data-ref-filename="498size">size</a>, <a class="local col9 ref" href="#499stack" title='stack' data-ref="499stack" data-ref-filename="499stack">stack</a>);</td></tr>
<tr><th id="996">996</th><td>}</td></tr>
<tr><th id="997">997</th><td></td></tr>
<tr><th id="998">998</th><td><em>void</em> *<dfn class="decl def fn" id="__asan::asan_realloc" title='__asan::asan_realloc' data-ref="__asan::asan_realloc" data-ref-filename="__asan..asan_realloc">asan_realloc</dfn>(<em>void</em> *<dfn class="local col0 decl" id="500p" title='p' data-type='void *' data-ref="500p" data-ref-filename="500p">p</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="501size" title='size' data-type='__sanitizer::uptr' data-ref="501size" data-ref-filename="501size">size</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col2 decl" id="502stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="502stack" data-ref-filename="502stack">stack</dfn>) {</td></tr>
<tr><th id="999">999</th><td>  <b>if</b> (!<a class="local col0 ref" href="#500p" title='p' data-ref="500p" data-ref-filename="500p">p</a>)</td></tr>
<tr><th id="1000">1000</th><td>    <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::SetErrnoOnNull" title='__sanitizer::SetErrnoOnNull' data-ref="__sanitizer::SetErrnoOnNull" data-ref-filename="__sanitizer..SetErrnoOnNull">SetErrnoOnNull</a>(<a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-use='c' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</a>(<a class="local col1 ref" href="#501size" title='size' data-ref="501size" data-ref-filename="501size">size</a>, <var>8</var>, <a class="local col2 ref" href="#502stack" title='stack' data-ref="502stack" data-ref-filename="502stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>, <b>true</b>));</td></tr>
<tr><th id="1001">1001</th><td>  <b>if</b> (<a class="local col1 ref" href="#501size" title='size' data-ref="501size" data-ref-filename="501size">size</a> == <var>0</var>) {</td></tr>
<tr><th id="1002">1002</th><td>    <b>if</b> (<a class="ref fn" href="asan_flags.h.html#__asan::flags" title='__asan::flags' data-ref="__asan::flags" data-ref-filename="__asan..flags">flags</a>()-&gt;<a class="ref field" href="asan_flags.inc.html#154" title='__asan::Flags::allocator_frees_and_returns_null_on_realloc_zero' data-ref="__asan::Flags::allocator_frees_and_returns_null_on_realloc_zero" data-ref-filename="__asan..Flags..allocator_frees_and_returns_null_on_realloc_zero">allocator_frees_and_returns_null_on_realloc_zero</a>) {</td></tr>
<tr><th id="1003">1003</th><td>      <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Deallocate" title='__asan::Allocator::Deallocate' data-use='c' data-ref="__asan::Allocator::Deallocate" data-ref-filename="__asan..Allocator..Deallocate">Deallocate</a>(<a class="local col0 ref" href="#500p" title='p' data-ref="500p" data-ref-filename="500p">p</a>, <var>0</var>, <var>0</var>, <a class="local col2 ref" href="#502stack" title='stack' data-ref="502stack" data-ref-filename="502stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>);</td></tr>
<tr><th id="1004">1004</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1005">1005</th><td>    }</td></tr>
<tr><th id="1006">1006</th><td>    <i>// Allocate a size of 1 if we shouldn't free() on Realloc to 0</i></td></tr>
<tr><th id="1007">1007</th><td>    <a class="local col1 ref" href="#501size" title='size' data-ref="501size" data-ref-filename="501size">size</a> = <var>1</var>;</td></tr>
<tr><th id="1008">1008</th><td>  }</td></tr>
<tr><th id="1009">1009</th><td>  <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::SetErrnoOnNull" title='__sanitizer::SetErrnoOnNull' data-ref="__sanitizer::SetErrnoOnNull" data-ref-filename="__sanitizer..SetErrnoOnNull">SetErrnoOnNull</a>(<a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Reallocate" title='__asan::Allocator::Reallocate' data-use='c' data-ref="__asan::Allocator::Reallocate" data-ref-filename="__asan..Allocator..Reallocate">Reallocate</a>(<a class="local col0 ref" href="#500p" title='p' data-ref="500p" data-ref-filename="500p">p</a>, <a class="local col1 ref" href="#501size" title='size' data-ref="501size" data-ref-filename="501size">size</a>, <a class="local col2 ref" href="#502stack" title='stack' data-ref="502stack" data-ref-filename="502stack">stack</a>));</td></tr>
<tr><th id="1010">1010</th><td>}</td></tr>
<tr><th id="1011">1011</th><td></td></tr>
<tr><th id="1012">1012</th><td><em>void</em> *<dfn class="decl def fn" id="__asan::asan_valloc" title='__asan::asan_valloc' data-ref="__asan::asan_valloc" data-ref-filename="__asan..asan_valloc">asan_valloc</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="503size" title='size' data-type='__sanitizer::uptr' data-ref="503size" data-ref-filename="503size">size</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col4 decl" id="504stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="504stack" data-ref-filename="504stack">stack</dfn>) {</td></tr>
<tr><th id="1013">1013</th><td>  <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::SetErrnoOnNull" title='__sanitizer::SetErrnoOnNull' data-ref="__sanitizer::SetErrnoOnNull" data-ref-filename="__sanitizer..SetErrnoOnNull">SetErrnoOnNull</a>(</td></tr>
<tr><th id="1014">1014</th><td>      <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-use='c' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</a>(<a class="local col3 ref" href="#503size" title='size' data-ref="503size" data-ref-filename="503size">size</a>, <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::GetPageSizeCached" title='__sanitizer::GetPageSizeCached' data-ref="__sanitizer::GetPageSizeCached" data-ref-filename="__sanitizer..GetPageSizeCached">GetPageSizeCached</a>(), <a class="local col4 ref" href="#504stack" title='stack' data-ref="504stack" data-ref-filename="504stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>, <b>true</b>));</td></tr>
<tr><th id="1015">1015</th><td>}</td></tr>
<tr><th id="1016">1016</th><td></td></tr>
<tr><th id="1017">1017</th><td><em>void</em> *<dfn class="decl def fn" id="__asan::asan_pvalloc" title='__asan::asan_pvalloc' data-ref="__asan::asan_pvalloc" data-ref-filename="__asan..asan_pvalloc">asan_pvalloc</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="505size" title='size' data-type='__sanitizer::uptr' data-ref="505size" data-ref-filename="505size">size</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col6 decl" id="506stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="506stack" data-ref-filename="506stack">stack</dfn>) {</td></tr>
<tr><th id="1018">1018</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="507PageSize" title='PageSize' data-type='__sanitizer::uptr' data-ref="507PageSize" data-ref-filename="507PageSize">PageSize</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::GetPageSizeCached" title='__sanitizer::GetPageSizeCached' data-ref="__sanitizer::GetPageSizeCached" data-ref-filename="__sanitizer..GetPageSizeCached">GetPageSizeCached</a>();</td></tr>
<tr><th id="1019">1019</th><td>  <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(CheckForPvallocOverflow(size, PageSize)), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::CheckForPvallocOverflow" title='__sanitizer::CheckForPvallocOverflow' data-ref="__sanitizer::CheckForPvallocOverflow" data-ref-filename="__sanitizer..CheckForPvallocOverflow">CheckForPvallocOverflow</a>(<a class="local col5 ref" href="#505size" title='size' data-ref="505size" data-ref-filename="505size">size</a>, <a class="local col7 ref" href="#507PageSize" title='PageSize' data-ref="507PageSize" data-ref-filename="507PageSize">PageSize</a>))) {</td></tr>
<tr><th id="1020">1020</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_errno.h.html#37" title="(*__errno_location())" data-ref="_M/errno">errno</a> = <a class="macro" href="../sanitizer_common/sanitizer_errno_codes.h.html#24" title="12" data-ref="_M/errno_ENOMEM">errno_ENOMEM</a>;</td></tr>
<tr><th id="1021">1021</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>())</td></tr>
<tr><th id="1022">1022</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1023">1023</th><td>    <a class="ref fn" href="asan_report.h.html#__asan::ReportPvallocOverflow" title='__asan::ReportPvallocOverflow' data-ref="__asan::ReportPvallocOverflow" data-ref-filename="__asan..ReportPvallocOverflow">ReportPvallocOverflow</a>(<a class="local col5 ref" href="#505size" title='size' data-ref="505size" data-ref-filename="505size">size</a>, <a class="local col6 ref" href="#506stack" title='stack' data-ref="506stack" data-ref-filename="506stack">stack</a>);</td></tr>
<tr><th id="1024">1024</th><td>  }</td></tr>
<tr><th id="1025">1025</th><td>  <i>// pvalloc(0) should allocate one page.</i></td></tr>
<tr><th id="1026">1026</th><td>  <a class="local col5 ref" href="#505size" title='size' data-ref="505size" data-ref-filename="505size">size</a> = <a class="local col5 ref" href="#505size" title='size' data-ref="505size" data-ref-filename="505size">size</a> ? <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::RoundUpTo" title='__sanitizer::RoundUpTo' data-ref="__sanitizer::RoundUpTo" data-ref-filename="__sanitizer..RoundUpTo">RoundUpTo</a>(<a class="local col5 ref" href="#505size" title='size' data-ref="505size" data-ref-filename="505size">size</a>, <a class="local col7 ref" href="#507PageSize" title='PageSize' data-ref="507PageSize" data-ref-filename="507PageSize">PageSize</a>) : <a class="local col7 ref" href="#507PageSize" title='PageSize' data-ref="507PageSize" data-ref-filename="507PageSize">PageSize</a>;</td></tr>
<tr><th id="1027">1027</th><td>  <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::SetErrnoOnNull" title='__sanitizer::SetErrnoOnNull' data-ref="__sanitizer::SetErrnoOnNull" data-ref-filename="__sanitizer..SetErrnoOnNull">SetErrnoOnNull</a>(</td></tr>
<tr><th id="1028">1028</th><td>      <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-use='c' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</a>(<a class="local col5 ref" href="#505size" title='size' data-ref="505size" data-ref-filename="505size">size</a>, <a class="local col7 ref" href="#507PageSize" title='PageSize' data-ref="507PageSize" data-ref-filename="507PageSize">PageSize</a>, <a class="local col6 ref" href="#506stack" title='stack' data-ref="506stack" data-ref-filename="506stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>, <b>true</b>));</td></tr>
<tr><th id="1029">1029</th><td>}</td></tr>
<tr><th id="1030">1030</th><td></td></tr>
<tr><th id="1031">1031</th><td><em>void</em> *<dfn class="decl def fn" id="__asan::asan_memalign" title='__asan::asan_memalign' data-ref="__asan::asan_memalign" data-ref-filename="__asan..asan_memalign">asan_memalign</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="508alignment" title='alignment' data-type='__sanitizer::uptr' data-ref="508alignment" data-ref-filename="508alignment">alignment</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="509size" title='size' data-type='__sanitizer::uptr' data-ref="509size" data-ref-filename="509size">size</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col0 decl" id="510stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="510stack" data-ref-filename="510stack">stack</dfn>,</td></tr>
<tr><th id="1032">1032</th><td>                    <a class="type" href="asan_allocator.h.html#__asan::AllocType" title='__asan::AllocType' data-ref="__asan::AllocType" data-ref-filename="__asan..AllocType">AllocType</a> <dfn class="local col1 decl" id="511alloc_type" title='alloc_type' data-type='__asan::AllocType' data-ref="511alloc_type" data-ref-filename="511alloc_type">alloc_type</dfn>) {</td></tr>
<tr><th id="1033">1033</th><td>  <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(!IsPowerOfTwo(alignment)), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(!<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::IsPowerOfTwo" title='__sanitizer::IsPowerOfTwo' data-ref="__sanitizer::IsPowerOfTwo" data-ref-filename="__sanitizer..IsPowerOfTwo">IsPowerOfTwo</a>(<a class="local col8 ref" href="#508alignment" title='alignment' data-ref="508alignment" data-ref-filename="508alignment">alignment</a>))) {</td></tr>
<tr><th id="1034">1034</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_errno.h.html#37" title="(*__errno_location())" data-ref="_M/errno">errno</a> = <a class="macro" href="../sanitizer_common/sanitizer_errno_codes.h.html#26" title="22" data-ref="_M/errno_EINVAL">errno_EINVAL</a>;</td></tr>
<tr><th id="1035">1035</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>())</td></tr>
<tr><th id="1036">1036</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1037">1037</th><td>    <a class="ref fn" href="asan_report.h.html#__asan::ReportInvalidAllocationAlignment" title='__asan::ReportInvalidAllocationAlignment' data-ref="__asan::ReportInvalidAllocationAlignment" data-ref-filename="__asan..ReportInvalidAllocationAlignment">ReportInvalidAllocationAlignment</a>(<a class="local col8 ref" href="#508alignment" title='alignment' data-ref="508alignment" data-ref-filename="508alignment">alignment</a>, <a class="local col0 ref" href="#510stack" title='stack' data-ref="510stack" data-ref-filename="510stack">stack</a>);</td></tr>
<tr><th id="1038">1038</th><td>  }</td></tr>
<tr><th id="1039">1039</th><td>  <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::SetErrnoOnNull" title='__sanitizer::SetErrnoOnNull' data-ref="__sanitizer::SetErrnoOnNull" data-ref-filename="__sanitizer..SetErrnoOnNull">SetErrnoOnNull</a>(</td></tr>
<tr><th id="1040">1040</th><td>      <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-use='c' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</a>(<a class="local col9 ref" href="#509size" title='size' data-ref="509size" data-ref-filename="509size">size</a>, <a class="local col8 ref" href="#508alignment" title='alignment' data-ref="508alignment" data-ref-filename="508alignment">alignment</a>, <a class="local col0 ref" href="#510stack" title='stack' data-ref="510stack" data-ref-filename="510stack">stack</a>, <a class="local col1 ref" href="#511alloc_type" title='alloc_type' data-ref="511alloc_type" data-ref-filename="511alloc_type">alloc_type</a>, <b>true</b>));</td></tr>
<tr><th id="1041">1041</th><td>}</td></tr>
<tr><th id="1042">1042</th><td></td></tr>
<tr><th id="1043">1043</th><td><em>void</em> *<dfn class="decl def fn" id="__asan::asan_aligned_alloc" title='__asan::asan_aligned_alloc' data-ref="__asan::asan_aligned_alloc" data-ref-filename="__asan..asan_aligned_alloc">asan_aligned_alloc</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="512alignment" title='alignment' data-type='__sanitizer::uptr' data-ref="512alignment" data-ref-filename="512alignment">alignment</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="513size" title='size' data-type='__sanitizer::uptr' data-ref="513size" data-ref-filename="513size">size</dfn>, <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col4 decl" id="514stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="514stack" data-ref-filename="514stack">stack</dfn>) {</td></tr>
<tr><th id="1044">1044</th><td>  <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(!CheckAlignedAllocAlignmentAndSize(alignment, size)), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(!<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::CheckAlignedAllocAlignmentAndSize" title='__sanitizer::CheckAlignedAllocAlignmentAndSize' data-ref="__sanitizer::CheckAlignedAllocAlignmentAndSize" data-ref-filename="__sanitizer..CheckAlignedAllocAlignmentAndSize">CheckAlignedAllocAlignmentAndSize</a>(<a class="local col2 ref" href="#512alignment" title='alignment' data-ref="512alignment" data-ref-filename="512alignment">alignment</a>, <a class="local col3 ref" href="#513size" title='size' data-ref="513size" data-ref-filename="513size">size</a>))) {</td></tr>
<tr><th id="1045">1045</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_errno.h.html#37" title="(*__errno_location())" data-ref="_M/errno">errno</a> = <a class="macro" href="../sanitizer_common/sanitizer_errno_codes.h.html#26" title="22" data-ref="_M/errno_EINVAL">errno_EINVAL</a>;</td></tr>
<tr><th id="1046">1046</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>())</td></tr>
<tr><th id="1047">1047</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1048">1048</th><td>    <a class="ref fn" href="asan_report.h.html#__asan::ReportInvalidAlignedAllocAlignment" title='__asan::ReportInvalidAlignedAllocAlignment' data-ref="__asan::ReportInvalidAlignedAllocAlignment" data-ref-filename="__asan..ReportInvalidAlignedAllocAlignment">ReportInvalidAlignedAllocAlignment</a>(<a class="local col3 ref" href="#513size" title='size' data-ref="513size" data-ref-filename="513size">size</a>, <a class="local col2 ref" href="#512alignment" title='alignment' data-ref="512alignment" data-ref-filename="512alignment">alignment</a>, <a class="local col4 ref" href="#514stack" title='stack' data-ref="514stack" data-ref-filename="514stack">stack</a>);</td></tr>
<tr><th id="1049">1049</th><td>  }</td></tr>
<tr><th id="1050">1050</th><td>  <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::SetErrnoOnNull" title='__sanitizer::SetErrnoOnNull' data-ref="__sanitizer::SetErrnoOnNull" data-ref-filename="__sanitizer..SetErrnoOnNull">SetErrnoOnNull</a>(</td></tr>
<tr><th id="1051">1051</th><td>      <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-use='c' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</a>(<a class="local col3 ref" href="#513size" title='size' data-ref="513size" data-ref-filename="513size">size</a>, <a class="local col2 ref" href="#512alignment" title='alignment' data-ref="512alignment" data-ref-filename="512alignment">alignment</a>, <a class="local col4 ref" href="#514stack" title='stack' data-ref="514stack" data-ref-filename="514stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>, <b>true</b>));</td></tr>
<tr><th id="1052">1052</th><td>}</td></tr>
<tr><th id="1053">1053</th><td></td></tr>
<tr><th id="1054">1054</th><td><em>int</em> <dfn class="decl def fn" id="__asan::asan_posix_memalign" title='__asan::asan_posix_memalign' data-ref="__asan::asan_posix_memalign" data-ref-filename="__asan..asan_posix_memalign">asan_posix_memalign</dfn>(<em>void</em> **<dfn class="local col5 decl" id="515memptr" title='memptr' data-type='void **' data-ref="515memptr" data-ref-filename="515memptr">memptr</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="516alignment" title='alignment' data-type='__sanitizer::uptr' data-ref="516alignment" data-ref-filename="516alignment">alignment</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="517size" title='size' data-type='__sanitizer::uptr' data-ref="517size" data-ref-filename="517size">size</dfn>,</td></tr>
<tr><th id="1055">1055</th><td>                        <a class="type" href="../sanitizer_common/sanitizer_stacktrace.h.html#__sanitizer::BufferedStackTrace" title='__sanitizer::BufferedStackTrace' data-ref="__sanitizer::BufferedStackTrace" data-ref-filename="__sanitizer..BufferedStackTrace">BufferedStackTrace</a> *<dfn class="local col8 decl" id="518stack" title='stack' data-type='__sanitizer::BufferedStackTrace *' data-ref="518stack" data-ref-filename="518stack">stack</dfn>) {</td></tr>
<tr><th id="1056">1056</th><td>  <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(!CheckPosixMemalignAlignment(alignment)), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(!<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_checks.h.html#__sanitizer::CheckPosixMemalignAlignment" title='__sanitizer::CheckPosixMemalignAlignment' data-ref="__sanitizer::CheckPosixMemalignAlignment" data-ref-filename="__sanitizer..CheckPosixMemalignAlignment">CheckPosixMemalignAlignment</a>(<a class="local col6 ref" href="#516alignment" title='alignment' data-ref="516alignment" data-ref-filename="516alignment">alignment</a>))) {</td></tr>
<tr><th id="1057">1057</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::AllocatorMayReturnNull" title='__sanitizer::AllocatorMayReturnNull' data-ref="__sanitizer::AllocatorMayReturnNull" data-ref-filename="__sanitizer..AllocatorMayReturnNull">AllocatorMayReturnNull</a>())</td></tr>
<tr><th id="1058">1058</th><td>      <b>return</b> <a class="macro" href="../sanitizer_common/sanitizer_errno_codes.h.html#26" title="22" data-ref="_M/errno_EINVAL">errno_EINVAL</a>;</td></tr>
<tr><th id="1059">1059</th><td>    <a class="ref fn" href="asan_report.h.html#__asan::ReportInvalidPosixMemalignAlignment" title='__asan::ReportInvalidPosixMemalignAlignment' data-ref="__asan::ReportInvalidPosixMemalignAlignment" data-ref-filename="__asan..ReportInvalidPosixMemalignAlignment">ReportInvalidPosixMemalignAlignment</a>(<a class="local col6 ref" href="#516alignment" title='alignment' data-ref="516alignment" data-ref-filename="516alignment">alignment</a>, <a class="local col8 ref" href="#518stack" title='stack' data-ref="518stack" data-ref-filename="518stack">stack</a>);</td></tr>
<tr><th id="1060">1060</th><td>  }</td></tr>
<tr><th id="1061">1061</th><td>  <em>void</em> *<dfn class="local col9 decl" id="519ptr" title='ptr' data-type='void *' data-ref="519ptr" data-ref-filename="519ptr">ptr</dfn> = <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Allocate" title='__asan::Allocator::Allocate' data-use='c' data-ref="__asan::Allocator::Allocate" data-ref-filename="__asan..Allocator..Allocate">Allocate</a>(<a class="local col7 ref" href="#517size" title='size' data-ref="517size" data-ref-filename="517size">size</a>, <a class="local col6 ref" href="#516alignment" title='alignment' data-ref="516alignment" data-ref-filename="516alignment">alignment</a>, <a class="local col8 ref" href="#518stack" title='stack' data-ref="518stack" data-ref-filename="518stack">stack</a>, <a class="enum" href="asan_allocator.h.html#__asan::FROM_MALLOC" title='__asan::FROM_MALLOC' data-ref="__asan::FROM_MALLOC" data-ref-filename="__asan..FROM_MALLOC">FROM_MALLOC</a>, <b>true</b>);</td></tr>
<tr><th id="1062">1062</th><td>  <b>if</b> (<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#229" title="__builtin_expect(!!(!ptr), 0)" data-ref="_M/UNLIKELY">UNLIKELY</a>(!<a class="local col9 ref" href="#519ptr" title='ptr' data-ref="519ptr" data-ref-filename="519ptr">ptr</a>))</td></tr>
<tr><th id="1063">1063</th><td>    <i>// OOM error is already taken care of by Allocate.</i></td></tr>
<tr><th id="1064">1064</th><td>    <b>return</b> <a class="macro" href="../sanitizer_common/sanitizer_errno_codes.h.html#24" title="12" data-ref="_M/errno_ENOMEM">errno_ENOMEM</a>;</td></tr>
<tr><th id="1065">1065</th><td>  <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((IsAligned((uptr)ptr, alignment))); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/asan/asan_allocator.cpp&quot;, 1065, &quot;(&quot; &quot;(IsAligned((uptr)ptr, alignment))&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::IsAligned" title='__sanitizer::IsAligned' data-ref="__sanitizer::IsAligned" data-ref-filename="__sanitizer..IsAligned">IsAligned</a>((<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col9 ref" href="#519ptr" title='ptr' data-ref="519ptr" data-ref-filename="519ptr">ptr</a>, <a class="local col6 ref" href="#516alignment" title='alignment' data-ref="516alignment" data-ref-filename="516alignment">alignment</a>));</td></tr>
<tr><th id="1066">1066</th><td>  *<a class="local col5 ref" href="#515memptr" title='memptr' data-ref="515memptr" data-ref-filename="515memptr">memptr</a> = <a class="local col9 ref" href="#519ptr" title='ptr' data-ref="519ptr" data-ref-filename="519ptr">ptr</a>;</td></tr>
<tr><th id="1067">1067</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="1068">1068</th><td>}</td></tr>
<tr><th id="1069">1069</th><td></td></tr>
<tr><th id="1070">1070</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__asan::asan_malloc_usable_size" title='__asan::asan_malloc_usable_size' data-ref="__asan::asan_malloc_usable_size" data-ref-filename="__asan..asan_malloc_usable_size">asan_malloc_usable_size</dfn>(<em>const</em> <em>void</em> *<dfn class="local col0 decl" id="520ptr" title='ptr' data-type='const void *' data-ref="520ptr" data-ref-filename="520ptr">ptr</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="521pc" title='pc' data-type='__sanitizer::uptr' data-ref="521pc" data-ref-filename="521pc">pc</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="522bp" title='bp' data-type='__sanitizer::uptr' data-ref="522bp" data-ref-filename="522bp">bp</dfn>) {</td></tr>
<tr><th id="1071">1071</th><td>  <b>if</b> (!<a class="local col0 ref" href="#520ptr" title='ptr' data-ref="520ptr" data-ref-filename="520ptr">ptr</a>) <b>return</b> <var>0</var>;</td></tr>
<tr><th id="1072">1072</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="523usable_size" title='usable_size' data-type='__sanitizer::uptr' data-ref="523usable_size" data-ref-filename="523usable_size">usable_size</dfn> = <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::AllocationSize" title='__asan::Allocator::AllocationSize' data-use='c' data-ref="__asan::Allocator::AllocationSize" data-ref-filename="__asan..Allocator..AllocationSize">AllocationSize</a>(<b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col0 ref" href="#520ptr" title='ptr' data-ref="520ptr" data-ref-filename="520ptr">ptr</a>));</td></tr>
<tr><th id="1073">1073</th><td>  <b>if</b> (<a class="ref fn" href="asan_flags.h.html#__asan::flags" title='__asan::flags' data-ref="__asan::flags" data-ref-filename="__asan..flags">flags</a>()-&gt;<a class="ref field" href="asan_flags.inc.html#85" title='__asan::Flags::check_malloc_usable_size' data-ref="__asan::Flags::check_malloc_usable_size" data-ref-filename="__asan..Flags..check_malloc_usable_size">check_malloc_usable_size</a> &amp;&amp; (<a class="local col3 ref" href="#523usable_size" title='usable_size' data-ref="523usable_size" data-ref-filename="523usable_size">usable_size</a> == <var>0</var>)) {</td></tr>
<tr><th id="1074">1074</th><td>    <a class="macro" href="asan_stack.h.html#49" title="BufferedStackTrace stack; stack.Unwind(pc, bp, nullptr, common_flags()-&gt;fast_unwind_on_fatal)" data-ref="_M/GET_STACK_TRACE_FATAL">GET_STACK_TRACE_FATAL</a>(<a class="local col1 ref" href="#521pc" title='pc' data-ref="521pc" data-ref-filename="521pc">pc</a>, <a class="local col2 ref" href="#522bp" title='bp' data-ref="522bp" data-ref-filename="522bp">bp</a>);</td></tr>
<tr><th id="1075">1075</th><td>    <a class="ref fn" href="asan_report.h.html#__asan::ReportMallocUsableSizeNotOwned" title='__asan::ReportMallocUsableSizeNotOwned' data-ref="__asan::ReportMallocUsableSizeNotOwned" data-ref-filename="__asan..ReportMallocUsableSizeNotOwned">ReportMallocUsableSizeNotOwned</a>((<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col0 ref" href="#520ptr" title='ptr' data-ref="520ptr" data-ref-filename="520ptr">ptr</a>, &amp;<a class="local col4 ref" href="#1074" title='stack' data-ref="524stack" data-ref-filename="524stack">stack</a>);</td></tr>
<tr><th id="1076">1076</th><td>  }</td></tr>
<tr><th id="1077">1077</th><td>  <b>return</b> <a class="local col3 ref" href="#523usable_size" title='usable_size' data-ref="523usable_size" data-ref-filename="523usable_size">usable_size</a>;</td></tr>
<tr><th id="1078">1078</th><td>}</td></tr>
<tr><th id="1079">1079</th><td></td></tr>
<tr><th id="1080">1080</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__asan::asan_mz_size" title='__asan::asan_mz_size' data-ref="__asan::asan_mz_size" data-ref-filename="__asan..asan_mz_size">asan_mz_size</dfn>(<em>const</em> <em>void</em> *<dfn class="local col5 decl" id="525ptr" title='ptr' data-type='const void *' data-ref="525ptr" data-ref-filename="525ptr">ptr</dfn>) {</td></tr>
<tr><th id="1081">1081</th><td>  <b>return</b> <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::AllocationSize" title='__asan::Allocator::AllocationSize' data-use='c' data-ref="__asan::Allocator::AllocationSize" data-ref-filename="__asan..Allocator..AllocationSize">AllocationSize</a>(<b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col5 ref" href="#525ptr" title='ptr' data-ref="525ptr" data-ref-filename="525ptr">ptr</a>));</td></tr>
<tr><th id="1082">1082</th><td>}</td></tr>
<tr><th id="1083">1083</th><td></td></tr>
<tr><th id="1084">1084</th><td><em>void</em> <dfn class="decl def fn" id="__asan::asan_mz_force_lock" title='__asan::asan_mz_force_lock' data-ref="__asan::asan_mz_force_lock" data-ref-filename="__asan..asan_mz_force_lock">asan_mz_force_lock</dfn>() {</td></tr>
<tr><th id="1085">1085</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::ForceLock" title='__asan::Allocator::ForceLock' data-use='c' data-ref="__asan::Allocator::ForceLock" data-ref-filename="__asan..Allocator..ForceLock">ForceLock</a>();</td></tr>
<tr><th id="1086">1086</th><td>}</td></tr>
<tr><th id="1087">1087</th><td></td></tr>
<tr><th id="1088">1088</th><td><em>void</em> <dfn class="decl def fn" id="__asan::asan_mz_force_unlock" title='__asan::asan_mz_force_unlock' data-ref="__asan::asan_mz_force_unlock" data-ref-filename="__asan..asan_mz_force_unlock">asan_mz_force_unlock</dfn>() {</td></tr>
<tr><th id="1089">1089</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::ForceUnlock" title='__asan::Allocator::ForceUnlock' data-use='c' data-ref="__asan::Allocator::ForceUnlock" data-ref-filename="__asan..Allocator..ForceUnlock">ForceUnlock</a>();</td></tr>
<tr><th id="1090">1090</th><td>}</td></tr>
<tr><th id="1091">1091</th><td></td></tr>
<tr><th id="1092">1092</th><td><em>void</em> <dfn class="decl def fn" id="__asan::AsanSoftRssLimitExceededCallback" title='__asan::AsanSoftRssLimitExceededCallback' data-ref="__asan::AsanSoftRssLimitExceededCallback" data-ref-filename="__asan..AsanSoftRssLimitExceededCallback">AsanSoftRssLimitExceededCallback</dfn>(<em>bool</em> <dfn class="local col6 decl" id="526limit_exceeded" title='limit_exceeded' data-type='bool' data-ref="526limit_exceeded" data-ref-filename="526limit_exceeded">limit_exceeded</dfn>) {</td></tr>
<tr><th id="1093">1093</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::SetRssLimitExceeded" title='__asan::Allocator::SetRssLimitExceeded' data-use='c' data-ref="__asan::Allocator::SetRssLimitExceeded" data-ref-filename="__asan..Allocator..SetRssLimitExceeded">SetRssLimitExceeded</a>(<a class="local col6 ref" href="#526limit_exceeded" title='limit_exceeded' data-ref="526limit_exceeded" data-ref-filename="526limit_exceeded">limit_exceeded</a>);</td></tr>
<tr><th id="1094">1094</th><td>}</td></tr>
<tr><th id="1095">1095</th><td></td></tr>
<tr><th id="1096">1096</th><td>}  <i>// namespace __asan</i></td></tr>
<tr><th id="1097">1097</th><td></td></tr>
<tr><th id="1098">1098</th><td><i>// --- Implementation of LSan-specific functions --- {{{1</i></td></tr>
<tr><th id="1099">1099</th><td><b>namespace</b> <span class="namespace">__lsan</span> {</td></tr>
<tr><th id="1100">1100</th><td><em>void</em> <dfn class="decl def fn" id="__lsan::LockAllocator" title='__lsan::LockAllocator' data-ref="__lsan::LockAllocator" data-ref-filename="__lsan..LockAllocator">LockAllocator</dfn>() {</td></tr>
<tr><th id="1101">1101</th><td>  <span class="namespace">__asan::</span><a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>().<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ForceLock" title='__sanitizer::CombinedAllocator::ForceLock' data-ref="__sanitizer::CombinedAllocator::ForceLock" data-ref-filename="__sanitizer..CombinedAllocator..ForceLock">ForceLock</a>();</td></tr>
<tr><th id="1102">1102</th><td>}</td></tr>
<tr><th id="1103">1103</th><td></td></tr>
<tr><th id="1104">1104</th><td><em>void</em> <dfn class="decl def fn" id="__lsan::UnlockAllocator" title='__lsan::UnlockAllocator' data-ref="__lsan::UnlockAllocator" data-ref-filename="__lsan..UnlockAllocator">UnlockAllocator</dfn>() {</td></tr>
<tr><th id="1105">1105</th><td>  <span class="namespace">__asan::</span><a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>().<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ForceUnlock" title='__sanitizer::CombinedAllocator::ForceUnlock' data-ref="__sanitizer::CombinedAllocator::ForceUnlock" data-ref-filename="__sanitizer..CombinedAllocator..ForceUnlock">ForceUnlock</a>();</td></tr>
<tr><th id="1106">1106</th><td>}</td></tr>
<tr><th id="1107">1107</th><td></td></tr>
<tr><th id="1108">1108</th><td><em>void</em> <dfn class="decl def fn" id="__lsan::GetAllocatorGlobalRange" title='__lsan::GetAllocatorGlobalRange' data-ref="__lsan::GetAllocatorGlobalRange" data-ref-filename="__lsan..GetAllocatorGlobalRange">GetAllocatorGlobalRange</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> *<dfn class="local col7 decl" id="527begin" title='begin' data-type='__sanitizer::uptr *' data-ref="527begin" data-ref-filename="527begin">begin</dfn>, <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> *<dfn class="local col8 decl" id="528end" title='end' data-type='__sanitizer::uptr *' data-ref="528end" data-ref-filename="528end">end</dfn>) {</td></tr>
<tr><th id="1109">1109</th><td>  *<a class="local col7 ref" href="#527begin" title='begin' data-ref="527begin" data-ref-filename="527begin">begin</a> = (<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)&amp;<span class="namespace">__asan::</span><a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>();</td></tr>
<tr><th id="1110">1110</th><td>  *<a class="local col8 ref" href="#528end" title='end' data-ref="528end" data-ref-filename="528end">end</a> = *<a class="local col7 ref" href="#527begin" title='begin' data-ref="527begin" data-ref-filename="527begin">begin</a> + <b>sizeof</b>(<span class="namespace">__asan::</span><a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>());</td></tr>
<tr><th id="1111">1111</th><td>}</td></tr>
<tr><th id="1112">1112</th><td></td></tr>
<tr><th id="1113">1113</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__lsan::PointsIntoChunk" title='__lsan::PointsIntoChunk' data-ref="__lsan::PointsIntoChunk" data-ref-filename="__lsan..PointsIntoChunk">PointsIntoChunk</dfn>(<em>void</em> *<dfn class="local col9 decl" id="529p" title='p' data-type='void *' data-ref="529p" data-ref-filename="529p">p</dfn>) {</td></tr>
<tr><th id="1114">1114</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="530addr" title='addr' data-type='__sanitizer::uptr' data-ref="530addr" data-ref-filename="530addr">addr</dfn> = <b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a>);</td></tr>
<tr><th id="1115">1115</th><td>  <span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col1 decl" id="531m" title='m' data-type='__asan::AsanChunk *' data-ref="531m" data-ref-filename="531m">m</dfn> = <span class="namespace">__asan::</span><a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::GetAsanChunkByAddrFastLocked" title='__asan::Allocator::GetAsanChunkByAddrFastLocked' data-use='c' data-ref="__asan::Allocator::GetAsanChunkByAddrFastLocked" data-ref-filename="__asan..Allocator..GetAsanChunkByAddrFastLocked">GetAsanChunkByAddrFastLocked</a>(<a class="local col0 ref" href="#530addr" title='addr' data-ref="530addr" data-ref-filename="530addr">addr</a>);</td></tr>
<tr><th id="1116">1116</th><td>  <b>if</b> (!<a class="local col1 ref" href="#531m" title='m' data-ref="531m" data-ref-filename="531m">m</a> || <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col1 ref" href="#531m" title='m' data-ref="531m" data-ref-filename="531m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>) !=</td></tr>
<tr><th id="1117">1117</th><td>                <span class="namespace">__asan::</span><a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>)</td></tr>
<tr><th id="1118">1118</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="1119">1119</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="532chunk" title='chunk' data-type='__sanitizer::uptr' data-ref="532chunk" data-ref-filename="532chunk">chunk</dfn> = <a class="local col1 ref" href="#531m" title='m' data-ref="531m" data-ref-filename="531m">m</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>();</td></tr>
<tr><th id="1120">1120</th><td>  <b>if</b> (<a class="local col1 ref" href="#531m" title='m' data-ref="531m" data-ref-filename="531m">m</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::AddrIsInside" title='__asan::AsanChunk::AddrIsInside' data-ref="__asan::AsanChunk::AddrIsInside" data-ref-filename="__asan..AsanChunk..AddrIsInside">AddrIsInside</a>(<a class="local col0 ref" href="#530addr" title='addr' data-ref="530addr" data-ref-filename="530addr">addr</a>))</td></tr>
<tr><th id="1121">1121</th><td>    <b>return</b> <a class="local col2 ref" href="#532chunk" title='chunk' data-ref="532chunk" data-ref-filename="532chunk">chunk</a>;</td></tr>
<tr><th id="1122">1122</th><td>  <b>if</b> (<a class="ref fn" href="../lsan/lsan_common.h.html#__lsan::IsSpecialCaseOfOperatorNew0" title='__lsan::IsSpecialCaseOfOperatorNew0' data-ref="__lsan::IsSpecialCaseOfOperatorNew0" data-ref-filename="__lsan..IsSpecialCaseOfOperatorNew0">IsSpecialCaseOfOperatorNew0</a>(<a class="local col2 ref" href="#532chunk" title='chunk' data-ref="532chunk" data-ref-filename="532chunk">chunk</a>, <a class="local col1 ref" href="#531m" title='m' data-ref="531m" data-ref-filename="531m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>(), <a class="local col0 ref" href="#530addr" title='addr' data-ref="530addr" data-ref-filename="530addr">addr</a>))</td></tr>
<tr><th id="1123">1123</th><td>    <b>return</b> <a class="local col2 ref" href="#532chunk" title='chunk' data-ref="532chunk" data-ref-filename="532chunk">chunk</a>;</td></tr>
<tr><th id="1124">1124</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="1125">1125</th><td>}</td></tr>
<tr><th id="1126">1126</th><td></td></tr>
<tr><th id="1127">1127</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__lsan::GetUserBegin" title='__lsan::GetUserBegin' data-ref="__lsan::GetUserBegin" data-ref-filename="__lsan..GetUserBegin">GetUserBegin</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="533chunk" title='chunk' data-type='__sanitizer::uptr' data-ref="533chunk" data-ref-filename="533chunk">chunk</dfn>) {</td></tr>
<tr><th id="1128">1128</th><td>  <span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col4 decl" id="534m" title='m' data-type='__asan::AsanChunk *' data-ref="534m" data-ref-filename="534m">m</dfn> = <span class="namespace">__asan::</span><a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::GetAsanChunkByAddrFastLocked" title='__asan::Allocator::GetAsanChunkByAddrFastLocked' data-use='c' data-ref="__asan::Allocator::GetAsanChunkByAddrFastLocked" data-ref-filename="__asan..Allocator..GetAsanChunkByAddrFastLocked">GetAsanChunkByAddrFastLocked</a>(<a class="local col3 ref" href="#533chunk" title='chunk' data-ref="533chunk" data-ref-filename="533chunk">chunk</a>);</td></tr>
<tr><th id="1129">1129</th><td>  <b>return</b> <a class="local col4 ref" href="#534m" title='m' data-ref="534m" data-ref-filename="534m">m</a> ? <a class="local col4 ref" href="#534m" title='m' data-ref="534m" data-ref-filename="534m">m</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::Beg" title='__asan::AsanChunk::Beg' data-ref="__asan::AsanChunk::Beg" data-ref-filename="__asan..AsanChunk..Beg">Beg</a>() : <var>0</var>;</td></tr>
<tr><th id="1130">1130</th><td>}</td></tr>
<tr><th id="1131">1131</th><td></td></tr>
<tr><th id="1132">1132</th><td><a class="type" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata" title='__lsan::LsanMetadata' data-ref="__lsan::LsanMetadata" data-ref-filename="__lsan..LsanMetadata">LsanMetadata</a>::<dfn class="decl def fn" id="__lsan::LsanMetadata::LsanMetadata" title='__lsan::LsanMetadata::LsanMetadata' data-ref="__lsan::LsanMetadata::LsanMetadata" data-ref-filename="__lsan..LsanMetadata..LsanMetadata">LsanMetadata</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="535chunk" title='chunk' data-type='__sanitizer::uptr' data-ref="535chunk" data-ref-filename="535chunk">chunk</dfn>) {</td></tr>
<tr><th id="1133">1133</th><td>  <a class="member field" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata::metadata_" title='__lsan::LsanMetadata::metadata_' data-ref="__lsan::LsanMetadata::metadata_" data-ref-filename="__lsan..LsanMetadata..metadata_">metadata_</a> = <a class="local col5 ref" href="#535chunk" title='chunk' data-ref="535chunk" data-ref-filename="535chunk">chunk</a> ? <b>reinterpret_cast</b>&lt;<em>void</em> *&gt;(<a class="local col5 ref" href="#535chunk" title='chunk' data-ref="535chunk" data-ref-filename="535chunk">chunk</a> - <span class="namespace">__asan::</span><a class="tu ref" href="#__asan::kChunkHeaderSize" title='__asan::kChunkHeaderSize' data-use='r' data-ref="__asan::kChunkHeaderSize" data-ref-filename="__asan..kChunkHeaderSize">kChunkHeaderSize</a>)</td></tr>
<tr><th id="1134">1134</th><td>                    : <b>nullptr</b>;</td></tr>
<tr><th id="1135">1135</th><td>}</td></tr>
<tr><th id="1136">1136</th><td></td></tr>
<tr><th id="1137">1137</th><td><em>bool</em> <a class="type" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata" title='__lsan::LsanMetadata' data-ref="__lsan::LsanMetadata" data-ref-filename="__lsan..LsanMetadata">LsanMetadata</a>::<dfn class="decl def fn" id="__lsan::LsanMetadata::allocated" title='__lsan::LsanMetadata::allocated' data-ref="__lsan::LsanMetadata::allocated" data-ref-filename="__lsan..LsanMetadata..allocated">allocated</dfn>() <em>const</em> {</td></tr>
<tr><th id="1138">1138</th><td>  <b>if</b> (!<a class="member field" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata::metadata_" title='__lsan::LsanMetadata::metadata_' data-ref="__lsan::LsanMetadata::metadata_" data-ref-filename="__lsan..LsanMetadata..metadata_">metadata_</a>)</td></tr>
<tr><th id="1139">1139</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="1140">1140</th><td>  <span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col6 decl" id="536m" title='m' data-type='__asan::AsanChunk *' data-ref="536m" data-ref-filename="536m">m</dfn> = <b>reinterpret_cast</b>&lt;<span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *&gt;(<a class="member field" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata::metadata_" title='__lsan::LsanMetadata::metadata_' data-ref="__lsan::LsanMetadata::metadata_" data-ref-filename="__lsan..LsanMetadata..metadata_">metadata_</a>);</td></tr>
<tr><th id="1141">1141</th><td>  <b>return</b> <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col6 ref" href="#536m" title='m' data-ref="536m" data-ref-filename="536m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>) ==</td></tr>
<tr><th id="1142">1142</th><td>         <span class="namespace">__asan::</span><a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>;</td></tr>
<tr><th id="1143">1143</th><td>}</td></tr>
<tr><th id="1144">1144</th><td></td></tr>
<tr><th id="1145">1145</th><td><a class="type" href="../lsan/lsan_common.h.html#__lsan::ChunkTag" title='__lsan::ChunkTag' data-ref="__lsan::ChunkTag" data-ref-filename="__lsan..ChunkTag">ChunkTag</a> <a class="type" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata" title='__lsan::LsanMetadata' data-ref="__lsan::LsanMetadata" data-ref-filename="__lsan..LsanMetadata">LsanMetadata</a>::<dfn class="decl def fn" id="__lsan::LsanMetadata::tag" title='__lsan::LsanMetadata::tag' data-ref="__lsan::LsanMetadata::tag" data-ref-filename="__lsan..LsanMetadata..tag">tag</dfn>() <em>const</em> {</td></tr>
<tr><th id="1146">1146</th><td>  <span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col7 decl" id="537m" title='m' data-type='__asan::AsanChunk *' data-ref="537m" data-ref-filename="537m">m</dfn> = <b>reinterpret_cast</b>&lt;<span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *&gt;(<a class="member field" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata::metadata_" title='__lsan::LsanMetadata::metadata_' data-ref="__lsan::LsanMetadata::metadata_" data-ref-filename="__lsan..LsanMetadata..metadata_">metadata_</a>);</td></tr>
<tr><th id="1147">1147</th><td>  <b>return</b> <b>static_cast</b>&lt;<a class="type" href="../lsan/lsan_common.h.html#__lsan::ChunkTag" title='__lsan::ChunkTag' data-ref="__lsan::ChunkTag" data-ref-filename="__lsan..ChunkTag">ChunkTag</a>&gt;(<a class="local col7 ref" href="#537m" title='m' data-ref="537m" data-ref-filename="537m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::lsan_tag" title='__asan::ChunkHeader::lsan_tag' data-use='r' data-ref="__asan::ChunkHeader::lsan_tag" data-ref-filename="__asan..ChunkHeader..lsan_tag">lsan_tag</a>);</td></tr>
<tr><th id="1148">1148</th><td>}</td></tr>
<tr><th id="1149">1149</th><td></td></tr>
<tr><th id="1150">1150</th><td><em>void</em> <a class="type" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata" title='__lsan::LsanMetadata' data-ref="__lsan::LsanMetadata" data-ref-filename="__lsan..LsanMetadata">LsanMetadata</a>::<dfn class="decl def fn" id="__lsan::LsanMetadata::set_tag" title='__lsan::LsanMetadata::set_tag' data-ref="__lsan::LsanMetadata::set_tag" data-ref-filename="__lsan..LsanMetadata..set_tag">set_tag</dfn>(<a class="type" href="../lsan/lsan_common.h.html#__lsan::ChunkTag" title='__lsan::ChunkTag' data-ref="__lsan::ChunkTag" data-ref-filename="__lsan..ChunkTag">ChunkTag</a> <dfn class="local col8 decl" id="538value" title='value' data-type='__lsan::ChunkTag' data-ref="538value" data-ref-filename="538value">value</dfn>) {</td></tr>
<tr><th id="1151">1151</th><td>  <span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col9 decl" id="539m" title='m' data-type='__asan::AsanChunk *' data-ref="539m" data-ref-filename="539m">m</dfn> = <b>reinterpret_cast</b>&lt;<span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *&gt;(<a class="member field" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata::metadata_" title='__lsan::LsanMetadata::metadata_' data-ref="__lsan::LsanMetadata::metadata_" data-ref-filename="__lsan..LsanMetadata..metadata_">metadata_</a>);</td></tr>
<tr><th id="1152">1152</th><td>  <a class="local col9 ref" href="#539m" title='m' data-ref="539m" data-ref-filename="539m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::lsan_tag" title='__asan::ChunkHeader::lsan_tag' data-use='w' data-ref="__asan::ChunkHeader::lsan_tag" data-ref-filename="__asan..ChunkHeader..lsan_tag">lsan_tag</a> = <a class="local col8 ref" href="#538value" title='value' data-ref="538value" data-ref-filename="538value">value</a>;</td></tr>
<tr><th id="1153">1153</th><td>}</td></tr>
<tr><th id="1154">1154</th><td></td></tr>
<tr><th id="1155">1155</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="type" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata" title='__lsan::LsanMetadata' data-ref="__lsan::LsanMetadata" data-ref-filename="__lsan..LsanMetadata">LsanMetadata</a>::<dfn class="decl def fn" id="__lsan::LsanMetadata::requested_size" title='__lsan::LsanMetadata::requested_size' data-ref="__lsan::LsanMetadata::requested_size" data-ref-filename="__lsan..LsanMetadata..requested_size">requested_size</dfn>() <em>const</em> {</td></tr>
<tr><th id="1156">1156</th><td>  <span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col0 decl" id="540m" title='m' data-type='__asan::AsanChunk *' data-ref="540m" data-ref-filename="540m">m</dfn> = <b>reinterpret_cast</b>&lt;<span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *&gt;(<a class="member field" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata::metadata_" title='__lsan::LsanMetadata::metadata_' data-ref="__lsan::LsanMetadata::metadata_" data-ref-filename="__lsan..LsanMetadata..metadata_">metadata_</a>);</td></tr>
<tr><th id="1157">1157</th><td>  <b>return</b> <a class="local col0 ref" href="#540m" title='m' data-ref="540m" data-ref-filename="540m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::UsedSize" title='__asan::ChunkHeader::UsedSize' data-use='c' data-ref="__asan::ChunkHeader::UsedSize" data-ref-filename="__asan..ChunkHeader..UsedSize">UsedSize</a>();</td></tr>
<tr><th id="1158">1158</th><td>}</td></tr>
<tr><th id="1159">1159</th><td></td></tr>
<tr><th id="1160">1160</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <a class="type" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata" title='__lsan::LsanMetadata' data-ref="__lsan::LsanMetadata" data-ref-filename="__lsan..LsanMetadata">LsanMetadata</a>::<dfn class="decl def fn" id="__lsan::LsanMetadata::stack_trace_id" title='__lsan::LsanMetadata::stack_trace_id' data-ref="__lsan::LsanMetadata::stack_trace_id" data-ref-filename="__lsan..LsanMetadata..stack_trace_id">stack_trace_id</dfn>() <em>const</em> {</td></tr>
<tr><th id="1161">1161</th><td>  <span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col1 decl" id="541m" title='m' data-type='__asan::AsanChunk *' data-ref="541m" data-ref-filename="541m">m</dfn> = <b>reinterpret_cast</b>&lt;<span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *&gt;(<a class="member field" href="../lsan/lsan_common.h.html#__lsan::LsanMetadata::metadata_" title='__lsan::LsanMetadata::metadata_' data-ref="__lsan::LsanMetadata::metadata_" data-ref-filename="__lsan..LsanMetadata..metadata_">metadata_</a>);</td></tr>
<tr><th id="1162">1162</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col2 decl" id="542tid" title='tid' data-type='__sanitizer::u32' data-ref="542tid" data-ref-filename="542tid">tid</dfn> = <var>0</var>;</td></tr>
<tr><th id="1163">1163</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="local col3 decl" id="543stack" title='stack' data-type='__sanitizer::u32' data-ref="543stack" data-ref-filename="543stack">stack</dfn> = <var>0</var>;</td></tr>
<tr><th id="1164">1164</th><td>  <a class="local col1 ref" href="#541m" title='m' data-ref="541m" data-ref-filename="541m">m</a>-&gt;<a class="tu ref fn" href="#__asan::ChunkHeader::GetAllocContext" title='__asan::ChunkHeader::GetAllocContext' data-use='c' data-ref="__asan::ChunkHeader::GetAllocContext" data-ref-filename="__asan..ChunkHeader..GetAllocContext">GetAllocContext</a>(<span class='refarg'><a class="local col2 ref" href="#542tid" title='tid' data-ref="542tid" data-ref-filename="542tid">tid</a></span>, <span class='refarg'><a class="local col3 ref" href="#543stack" title='stack' data-ref="543stack" data-ref-filename="543stack">stack</a></span>);</td></tr>
<tr><th id="1165">1165</th><td>  <b>return</b> <a class="local col3 ref" href="#543stack" title='stack' data-ref="543stack" data-ref-filename="543stack">stack</a>;</td></tr>
<tr><th id="1166">1166</th><td>}</td></tr>
<tr><th id="1167">1167</th><td></td></tr>
<tr><th id="1168">1168</th><td><em>void</em> <dfn class="decl def fn" id="__lsan::ForEachChunk" title='__lsan::ForEachChunk' data-ref="__lsan::ForEachChunk" data-ref-filename="__lsan..ForEachChunk">ForEachChunk</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_allocator.h.html#__sanitizer::ForEachChunkCallback" title='__sanitizer::ForEachChunkCallback' data-type='void (*)(__sanitizer::uptr, void *)' data-ref="__sanitizer::ForEachChunkCallback" data-ref-filename="__sanitizer..ForEachChunkCallback">ForEachChunkCallback</a> <dfn class="local col4 decl" id="544callback" title='callback' data-type='__sanitizer::ForEachChunkCallback' data-ref="544callback" data-ref-filename="544callback">callback</dfn>, <em>void</em> *<dfn class="local col5 decl" id="545arg" title='arg' data-type='void *' data-ref="545arg" data-ref-filename="545arg">arg</dfn>) {</td></tr>
<tr><th id="1169">1169</th><td>  <span class="namespace">__asan::</span><a class="tu ref fn" href="#__asan::get_allocator" title='__asan::get_allocator' data-use='c' data-ref="__asan::get_allocator" data-ref-filename="__asan..get_allocator">get_allocator</a>().<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_combined.h.html#__sanitizer::CombinedAllocator::ForEachChunk" title='__sanitizer::CombinedAllocator::ForEachChunk' data-ref="__sanitizer::CombinedAllocator::ForEachChunk" data-ref-filename="__sanitizer..CombinedAllocator..ForEachChunk">ForEachChunk</a>(<a class="local col4 ref" href="#544callback" title='callback' data-ref="544callback" data-ref-filename="544callback">callback</a>, <a class="local col5 ref" href="#545arg" title='arg' data-ref="545arg" data-ref-filename="545arg">arg</a>);</td></tr>
<tr><th id="1170">1170</th><td>}</td></tr>
<tr><th id="1171">1171</th><td></td></tr>
<tr><th id="1172">1172</th><td><a class="type" href="../lsan/lsan_common.h.html#__lsan::IgnoreObjectResult" title='__lsan::IgnoreObjectResult' data-ref="__lsan::IgnoreObjectResult" data-ref-filename="__lsan..IgnoreObjectResult">IgnoreObjectResult</a> <dfn class="decl def fn" id="__lsan::IgnoreObjectLocked" title='__lsan::IgnoreObjectLocked' data-ref="__lsan::IgnoreObjectLocked" data-ref-filename="__lsan..IgnoreObjectLocked">IgnoreObjectLocked</dfn>(<em>const</em> <em>void</em> *<dfn class="local col6 decl" id="546p" title='p' data-type='const void *' data-ref="546p" data-ref-filename="546p">p</dfn>) {</td></tr>
<tr><th id="1173">1173</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="547addr" title='addr' data-type='__sanitizer::uptr' data-ref="547addr" data-ref-filename="547addr">addr</dfn> = <b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col6 ref" href="#546p" title='p' data-ref="546p" data-ref-filename="546p">p</a>);</td></tr>
<tr><th id="1174">1174</th><td>  <span class="namespace">__asan::</span><a class="type" href="#__asan::AsanChunk" title='__asan::AsanChunk' data-ref="__asan::AsanChunk" data-ref-filename="__asan..AsanChunk">AsanChunk</a> *<dfn class="local col8 decl" id="548m" title='m' data-type='__asan::AsanChunk *' data-ref="548m" data-ref-filename="548m">m</dfn> = <span class="namespace">__asan::</span><a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::GetAsanChunkByAddr" title='__asan::Allocator::GetAsanChunkByAddr' data-use='c' data-ref="__asan::Allocator::GetAsanChunkByAddr" data-ref-filename="__asan..Allocator..GetAsanChunkByAddr">GetAsanChunkByAddr</a>(<a class="local col7 ref" href="#547addr" title='addr' data-ref="547addr" data-ref-filename="547addr">addr</a>);</td></tr>
<tr><th id="1175">1175</th><td>  <b>if</b> (!<a class="local col8 ref" href="#548m" title='m' data-ref="548m" data-ref-filename="548m">m</a> ||</td></tr>
<tr><th id="1176">1176</th><td>      (<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="local col8 ref" href="#548m" title='m' data-ref="548m" data-ref-filename="548m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::chunk_state" title='__asan::ChunkHeader::chunk_state' data-use='a' data-ref="__asan::ChunkHeader::chunk_state" data-ref-filename="__asan..ChunkHeader..chunk_state">chunk_state</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>) !=</td></tr>
<tr><th id="1177">1177</th><td>       <span class="namespace">__asan::</span><a class="enum" href="#__asan::CHUNK_ALLOCATED" title='__asan::CHUNK_ALLOCATED' data-ref="__asan::CHUNK_ALLOCATED" data-ref-filename="__asan..CHUNK_ALLOCATED">CHUNK_ALLOCATED</a>) ||</td></tr>
<tr><th id="1178">1178</th><td>      !<a class="local col8 ref" href="#548m" title='m' data-ref="548m" data-ref-filename="548m">m</a>-&gt;<a class="ref fn" href="#__asan::AsanChunk::AddrIsInside" title='__asan::AsanChunk::AddrIsInside' data-ref="__asan::AsanChunk::AddrIsInside" data-ref-filename="__asan..AsanChunk..AddrIsInside">AddrIsInside</a>(<a class="local col7 ref" href="#547addr" title='addr' data-ref="547addr" data-ref-filename="547addr">addr</a>)) {</td></tr>
<tr><th id="1179">1179</th><td>    <b>return</b> <a class="enum" href="../lsan/lsan_common.h.html#__lsan::kIgnoreObjectInvalid" title='__lsan::kIgnoreObjectInvalid' data-ref="__lsan::kIgnoreObjectInvalid" data-ref-filename="__lsan..kIgnoreObjectInvalid">kIgnoreObjectInvalid</a>;</td></tr>
<tr><th id="1180">1180</th><td>  }</td></tr>
<tr><th id="1181">1181</th><td>  <b>if</b> (<a class="local col8 ref" href="#548m" title='m' data-ref="548m" data-ref-filename="548m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::lsan_tag" title='__asan::ChunkHeader::lsan_tag' data-use='r' data-ref="__asan::ChunkHeader::lsan_tag" data-ref-filename="__asan..ChunkHeader..lsan_tag">lsan_tag</a> == <a class="enum" href="../lsan/lsan_common.h.html#__lsan::kIgnored" title='__lsan::kIgnored' data-ref="__lsan::kIgnored" data-ref-filename="__lsan..kIgnored">kIgnored</a>)</td></tr>
<tr><th id="1182">1182</th><td>    <b>return</b> <a class="enum" href="../lsan/lsan_common.h.html#__lsan::kIgnoreObjectAlreadyIgnored" title='__lsan::kIgnoreObjectAlreadyIgnored' data-ref="__lsan::kIgnoreObjectAlreadyIgnored" data-ref-filename="__lsan..kIgnoreObjectAlreadyIgnored">kIgnoreObjectAlreadyIgnored</a>;</td></tr>
<tr><th id="1183">1183</th><td>  <a class="local col8 ref" href="#548m" title='m' data-ref="548m" data-ref-filename="548m">m</a>-&gt;<a class="tu ref field" href="#__asan::ChunkHeader::lsan_tag" title='__asan::ChunkHeader::lsan_tag' data-use='w' data-ref="__asan::ChunkHeader::lsan_tag" data-ref-filename="__asan..ChunkHeader..lsan_tag">lsan_tag</a> = <span class="namespace">__lsan::</span><a class="enum" href="../lsan/lsan_common.h.html#__lsan::kIgnored" title='__lsan::kIgnored' data-ref="__lsan::kIgnored" data-ref-filename="__lsan..kIgnored">kIgnored</a>;</td></tr>
<tr><th id="1184">1184</th><td>  <b>return</b> <a class="enum" href="../lsan/lsan_common.h.html#__lsan::kIgnoreObjectSuccess" title='__lsan::kIgnoreObjectSuccess' data-ref="__lsan::kIgnoreObjectSuccess" data-ref-filename="__lsan..kIgnoreObjectSuccess">kIgnoreObjectSuccess</a>;</td></tr>
<tr><th id="1185">1185</th><td>}</td></tr>
<tr><th id="1186">1186</th><td></td></tr>
<tr><th id="1187">1187</th><td><em>void</em> <dfn class="decl def fn" id="__lsan::GetAdditionalThreadContextPtrs" title='__lsan::GetAdditionalThreadContextPtrs' data-ref="__lsan::GetAdditionalThreadContextPtrs" data-ref-filename="__lsan..GetAdditionalThreadContextPtrs">GetAdditionalThreadContextPtrs</dfn>(<a class="type" href="../sanitizer_common/sanitizer_thread_registry.h.html#__sanitizer::ThreadContextBase" title='__sanitizer::ThreadContextBase' data-ref="__sanitizer::ThreadContextBase" data-ref-filename="__sanitizer..ThreadContextBase">ThreadContextBase</a> *<dfn class="local col9 decl" id="549tctx" title='tctx' data-type='__sanitizer::ThreadContextBase *' data-ref="549tctx" data-ref-filename="549tctx">tctx</dfn>, <em>void</em> *<dfn class="local col0 decl" id="550ptrs" title='ptrs' data-type='void *' data-ref="550ptrs" data-ref-filename="550ptrs">ptrs</dfn>) {</td></tr>
<tr><th id="1188">1188</th><td>  <i>// Look for the arg pointer of threads that have been created or are running.</i></td></tr>
<tr><th id="1189">1189</th><td><i>  // This is necessary to prevent false positive leaks due to the AsanThread</i></td></tr>
<tr><th id="1190">1190</th><td><i>  // holding the only live reference to a heap object.  This can happen because</i></td></tr>
<tr><th id="1191">1191</th><td><i>  // the `pthread_create()` interceptor doesn't wait for the child thread to</i></td></tr>
<tr><th id="1192">1192</th><td><i>  // start before returning and thus loosing the the only live reference to the</i></td></tr>
<tr><th id="1193">1193</th><td><i>  // heap object on the stack.</i></td></tr>
<tr><th id="1194">1194</th><td></td></tr>
<tr><th id="1195">1195</th><td>  <span class="namespace">__asan::</span><a class="type" href="asan_thread.h.html#__asan::AsanThreadContext" title='__asan::AsanThreadContext' data-ref="__asan::AsanThreadContext" data-ref-filename="__asan..AsanThreadContext">AsanThreadContext</a> *<dfn class="local col1 decl" id="551atctx" title='atctx' data-type='__asan::AsanThreadContext *' data-ref="551atctx" data-ref-filename="551atctx">atctx</dfn> =</td></tr>
<tr><th id="1196">1196</th><td>      <b>reinterpret_cast</b>&lt;<span class="namespace">__asan::</span><a class="type" href="asan_thread.h.html#__asan::AsanThreadContext" title='__asan::AsanThreadContext' data-ref="__asan::AsanThreadContext" data-ref-filename="__asan..AsanThreadContext">AsanThreadContext</a> *&gt;(<a class="local col9 ref" href="#549tctx" title='tctx' data-ref="549tctx" data-ref-filename="549tctx">tctx</a>);</td></tr>
<tr><th id="1197">1197</th><td>  <span class="namespace">__asan::</span><a class="type" href="asan_thread.h.html#__asan::AsanThread" title='__asan::AsanThread' data-ref="__asan::AsanThread" data-ref-filename="__asan..AsanThread">AsanThread</a> *<dfn class="local col2 decl" id="552asan_thread" title='asan_thread' data-type='__asan::AsanThread *' data-ref="552asan_thread" data-ref-filename="552asan_thread">asan_thread</dfn> = <a class="local col1 ref" href="#551atctx" title='atctx' data-ref="551atctx" data-ref-filename="551atctx">atctx</a>-&gt;<a class="ref field" href="asan_thread.h.html#__asan::AsanThreadContext::thread" title='__asan::AsanThreadContext::thread' data-ref="__asan::AsanThreadContext::thread" data-ref-filename="__asan..AsanThreadContext..thread">thread</a>;</td></tr>
<tr><th id="1198">1198</th><td></td></tr>
<tr><th id="1199">1199</th><td>  <i>// Note ThreadStatusRunning is required because there is a small window where</i></td></tr>
<tr><th id="1200">1200</th><td><i>  // the thread status switches to `ThreadStatusRunning` but the `arg` pointer</i></td></tr>
<tr><th id="1201">1201</th><td><i>  // still isn't on the stack yet.</i></td></tr>
<tr><th id="1202">1202</th><td>  <b>if</b> (<a class="local col1 ref" href="#551atctx" title='atctx' data-ref="551atctx" data-ref-filename="551atctx">atctx</a>-&gt;<a class="ref field" href="../sanitizer_common/sanitizer_thread_registry.h.html#__sanitizer::ThreadContextBase::status" title='__sanitizer::ThreadContextBase::status' data-ref="__sanitizer::ThreadContextBase::status" data-ref-filename="__sanitizer..ThreadContextBase..status">status</a> != <a class="enum" href="../sanitizer_common/sanitizer_thread_registry.h.html#__sanitizer::ThreadStatusCreated" title='__sanitizer::ThreadStatusCreated' data-ref="__sanitizer::ThreadStatusCreated" data-ref-filename="__sanitizer..ThreadStatusCreated">ThreadStatusCreated</a> &amp;&amp;</td></tr>
<tr><th id="1203">1203</th><td>      <a class="local col1 ref" href="#551atctx" title='atctx' data-ref="551atctx" data-ref-filename="551atctx">atctx</a>-&gt;<a class="ref field" href="../sanitizer_common/sanitizer_thread_registry.h.html#__sanitizer::ThreadContextBase::status" title='__sanitizer::ThreadContextBase::status' data-ref="__sanitizer::ThreadContextBase::status" data-ref-filename="__sanitizer..ThreadContextBase..status">status</a> != <a class="enum" href="../sanitizer_common/sanitizer_thread_registry.h.html#__sanitizer::ThreadStatusRunning" title='__sanitizer::ThreadStatusRunning' data-ref="__sanitizer::ThreadStatusRunning" data-ref-filename="__sanitizer..ThreadStatusRunning">ThreadStatusRunning</a>)</td></tr>
<tr><th id="1204">1204</th><td>    <b>return</b>;</td></tr>
<tr><th id="1205">1205</th><td></td></tr>
<tr><th id="1206">1206</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="553thread_arg" title='thread_arg' data-type='__sanitizer::uptr' data-ref="553thread_arg" data-ref-filename="553thread_arg">thread_arg</dfn> = <b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col2 ref" href="#552asan_thread" title='asan_thread' data-ref="552asan_thread" data-ref-filename="552asan_thread">asan_thread</a>-&gt;<a class="ref fn" href="asan_thread.h.html#__asan::AsanThread::get_arg" title='__asan::AsanThread::get_arg' data-ref="__asan::AsanThread::get_arg" data-ref-filename="__asan..AsanThread..get_arg">get_arg</a>());</td></tr>
<tr><th id="1207">1207</th><td>  <b>if</b> (!<a class="local col3 ref" href="#553thread_arg" title='thread_arg' data-ref="553thread_arg" data-ref-filename="553thread_arg">thread_arg</a>)</td></tr>
<tr><th id="1208">1208</th><td>    <b>return</b>;</td></tr>
<tr><th id="1209">1209</th><td></td></tr>
<tr><th id="1210">1210</th><td>  <em>auto</em> <dfn class="local col4 decl" id="554ptrsVec" title='ptrsVec' data-type='__sanitizer::InternalMmapVector&lt;unsigned long&gt; *' data-ref="554ptrsVec" data-ref-filename="554ptrsVec">ptrsVec</dfn> = <b>reinterpret_cast</b>&lt;<a class="type" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::InternalMmapVector" title='__sanitizer::InternalMmapVector' data-ref="__sanitizer::InternalMmapVector" data-ref-filename="__sanitizer..InternalMmapVector">InternalMmapVector</a>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt; *&gt;(<a class="local col0 ref" href="#550ptrs" title='ptrs' data-ref="550ptrs" data-ref-filename="550ptrs">ptrs</a>);</td></tr>
<tr><th id="1211">1211</th><td>  <a class="local col4 ref" href="#554ptrsVec" title='ptrsVec' data-ref="554ptrsVec" data-ref-filename="554ptrsVec">ptrsVec</a>-&gt;<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::InternalMmapVectorNoCtor::push_back" title='__sanitizer::InternalMmapVectorNoCtor::push_back' data-ref="__sanitizer::InternalMmapVectorNoCtor::push_back" data-ref-filename="__sanitizer..InternalMmapVectorNoCtor..push_back">push_back</a>(<a class="local col3 ref" href="#553thread_arg" title='thread_arg' data-ref="553thread_arg" data-ref-filename="553thread_arg">thread_arg</a>);</td></tr>
<tr><th id="1212">1212</th><td>}</td></tr>
<tr><th id="1213">1213</th><td></td></tr>
<tr><th id="1214">1214</th><td>}  <i>// namespace __lsan</i></td></tr>
<tr><th id="1215">1215</th><td></td></tr>
<tr><th id="1216">1216</th><td><i>// ---------------------- Interface ---------------- {{{1</i></td></tr>
<tr><th id="1217">1217</th><td><b>using</b> <b>namespace</b> <span class="namespace">__asan</span>;</td></tr>
<tr><th id="1218">1218</th><td></td></tr>
<tr><th id="1219">1219</th><td><i>// ASan allocator doesn't reserve extra bytes, so normally we would</i></td></tr>
<tr><th id="1220">1220</th><td><i>// just return "size". We don't want to expose our redzone sizes, etc here.</i></td></tr>
<tr><th id="1221">1221</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__sanitizer_get_estimated_allocated_size" title='__sanitizer_get_estimated_allocated_size' data-ref="__sanitizer_get_estimated_allocated_size" data-ref-filename="__sanitizer_get_estimated_allocated_size">__sanitizer_get_estimated_allocated_size</dfn>(<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="555size" title='size' data-type='__sanitizer::uptr' data-ref="555size" data-ref-filename="555size">size</dfn>) {</td></tr>
<tr><th id="1222">1222</th><td>  <b>return</b> <a class="local col5 ref" href="#555size" title='size' data-ref="555size" data-ref-filename="555size">size</a>;</td></tr>
<tr><th id="1223">1223</th><td>}</td></tr>
<tr><th id="1224">1224</th><td></td></tr>
<tr><th id="1225">1225</th><td><em>int</em> <dfn class="decl def fn" id="__sanitizer_get_ownership" title='__sanitizer_get_ownership' data-ref="__sanitizer_get_ownership" data-ref-filename="__sanitizer_get_ownership">__sanitizer_get_ownership</dfn>(<em>const</em> <em>void</em> *<dfn class="local col6 decl" id="556p" title='p' data-type='const void *' data-ref="556p" data-ref-filename="556p">p</dfn>) {</td></tr>
<tr><th id="1226">1226</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="557ptr" title='ptr' data-type='__sanitizer::uptr' data-ref="557ptr" data-ref-filename="557ptr">ptr</dfn> = <b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col6 ref" href="#556p" title='p' data-ref="556p" data-ref-filename="556p">p</a>);</td></tr>
<tr><th id="1227">1227</th><td>  <b>return</b> <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::AllocationSize" title='__asan::Allocator::AllocationSize' data-use='c' data-ref="__asan::Allocator::AllocationSize" data-ref-filename="__asan..Allocator..AllocationSize">AllocationSize</a>(<a class="local col7 ref" href="#557ptr" title='ptr' data-ref="557ptr" data-ref-filename="557ptr">ptr</a>) &gt; <var>0</var>;</td></tr>
<tr><th id="1228">1228</th><td>}</td></tr>
<tr><th id="1229">1229</th><td></td></tr>
<tr><th id="1230">1230</th><td><a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__sanitizer_get_allocated_size" title='__sanitizer_get_allocated_size' data-ref="__sanitizer_get_allocated_size" data-ref-filename="__sanitizer_get_allocated_size">__sanitizer_get_allocated_size</dfn>(<em>const</em> <em>void</em> *<dfn class="local col8 decl" id="558p" title='p' data-type='const void *' data-ref="558p" data-ref-filename="558p">p</dfn>) {</td></tr>
<tr><th id="1231">1231</th><td>  <b>if</b> (!<a class="local col8 ref" href="#558p" title='p' data-ref="558p" data-ref-filename="558p">p</a>) <b>return</b> <var>0</var>;</td></tr>
<tr><th id="1232">1232</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="559ptr" title='ptr' data-type='__sanitizer::uptr' data-ref="559ptr" data-ref-filename="559ptr">ptr</dfn> = <b>reinterpret_cast</b>&lt;<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="local col8 ref" href="#558p" title='p' data-ref="558p" data-ref-filename="558p">p</a>);</td></tr>
<tr><th id="1233">1233</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="560allocated_size" title='allocated_size' data-type='__sanitizer::uptr' data-ref="560allocated_size" data-ref-filename="560allocated_size">allocated_size</dfn> = <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::AllocationSize" title='__asan::Allocator::AllocationSize' data-use='c' data-ref="__asan::Allocator::AllocationSize" data-ref-filename="__asan..Allocator..AllocationSize">AllocationSize</a>(<a class="local col9 ref" href="#559ptr" title='ptr' data-ref="559ptr" data-ref-filename="559ptr">ptr</a>);</td></tr>
<tr><th id="1234">1234</th><td>  <i>// Die if p is not malloced or if it is already freed.</i></td></tr>
<tr><th id="1235">1235</th><td>  <b>if</b> (<a class="local col0 ref" href="#560allocated_size" title='allocated_size' data-ref="560allocated_size" data-ref-filename="560allocated_size">allocated_size</a> == <var>0</var>) {</td></tr>
<tr><th id="1236">1236</th><td>    <a class="macro" href="asan_stack.h.html#54" title="BufferedStackTrace stack; if (kStackTraceMax &lt;= 2) { stack.size = kStackTraceMax; if (kStackTraceMax &gt; 0) { stack.top_frame_bp = (__sanitizer::uptr) __builtin_frame_address(0); stack.trace_buffer[0] = StackTrace::GetCurrentPc(); if (kStackTraceMax &gt; 1) stack.trace_buffer[1] = (__sanitizer::uptr) __builtin_return_address(0); } } else { stack.Unwind(StackTrace::GetCurrentPc(), (__sanitizer::uptr) __builtin_frame_address(0), nullptr, common_flags()-&gt;fast_unwind_on_fatal, kStackTraceMax); }" data-ref="_M/GET_STACK_TRACE_FATAL_HERE">GET_STACK_TRACE_FATAL_HERE</a>;</td></tr>
<tr><th id="1237">1237</th><td>    <a class="ref fn" href="asan_report.h.html#__asan::ReportSanitizerGetAllocatedSizeNotOwned" title='__asan::ReportSanitizerGetAllocatedSizeNotOwned' data-ref="__asan::ReportSanitizerGetAllocatedSizeNotOwned" data-ref-filename="__asan..ReportSanitizerGetAllocatedSizeNotOwned">ReportSanitizerGetAllocatedSizeNotOwned</a>(<a class="local col9 ref" href="#559ptr" title='ptr' data-ref="559ptr" data-ref-filename="559ptr">ptr</a>, &amp;<a class="local col1 ref" href="#1236" title='stack' data-ref="561stack" data-ref-filename="561stack">stack</a>);</td></tr>
<tr><th id="1238">1238</th><td>  }</td></tr>
<tr><th id="1239">1239</th><td>  <b>return</b> <a class="local col0 ref" href="#560allocated_size" title='allocated_size' data-ref="560allocated_size" data-ref-filename="560allocated_size">allocated_size</a>;</td></tr>
<tr><th id="1240">1240</th><td>}</td></tr>
<tr><th id="1241">1241</th><td></td></tr>
<tr><th id="1242">1242</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer_purge_allocator" title='__sanitizer_purge_allocator' data-ref="__sanitizer_purge_allocator" data-ref-filename="__sanitizer_purge_allocator">__sanitizer_purge_allocator</dfn>() {</td></tr>
<tr><th id="1243">1243</th><td>  <a class="macro" href="asan_stack.h.html#63" title="BufferedStackTrace stack; if (GetMallocContextSize() &lt;= 2) { stack.size = GetMallocContextSize(); if (GetMallocContextSize() &gt; 0) { stack.top_frame_bp = (__sanitizer::uptr) __builtin_frame_address(0); stack.trace_buffer[0] = StackTrace::GetCurrentPc(); if (GetMallocContextSize() &gt; 1) stack.trace_buffer[1] = (__sanitizer::uptr) __builtin_return_address(0); } } else { stack.Unwind(StackTrace::GetCurrentPc(), (__sanitizer::uptr) __builtin_frame_address(0), nullptr, common_flags()-&gt;fast_unwind_on_malloc, GetMallocContextSize()); }" data-ref="_M/GET_STACK_TRACE_MALLOC">GET_STACK_TRACE_MALLOC</a>;</td></tr>
<tr><th id="1244">1244</th><td>  <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::Purge" title='__asan::Allocator::Purge' data-use='c' data-ref="__asan::Allocator::Purge" data-ref-filename="__asan..Allocator..Purge">Purge</a>(&amp;<a class="local col2 ref" href="#1243" title='stack' data-ref="562stack" data-ref-filename="562stack">stack</a>);</td></tr>
<tr><th id="1245">1245</th><td>}</td></tr>
<tr><th id="1246">1246</th><td></td></tr>
<tr><th id="1247">1247</th><td><em>int</em> <dfn class="decl def fn" id="__asan_update_allocation_context" title='__asan_update_allocation_context' data-ref="__asan_update_allocation_context" data-ref-filename="__asan_update_allocation_context">__asan_update_allocation_context</dfn>(<em>void</em>* <dfn class="local col3 decl" id="563addr" title='addr' data-type='void *' data-ref="563addr" data-ref-filename="563addr">addr</dfn>) {</td></tr>
<tr><th id="1248">1248</th><td>  <a class="macro" href="asan_stack.h.html#63" title="BufferedStackTrace stack; if (GetMallocContextSize() &lt;= 2) { stack.size = GetMallocContextSize(); if (GetMallocContextSize() &gt; 0) { stack.top_frame_bp = (__sanitizer::uptr) __builtin_frame_address(0); stack.trace_buffer[0] = StackTrace::GetCurrentPc(); if (GetMallocContextSize() &gt; 1) stack.trace_buffer[1] = (__sanitizer::uptr) __builtin_return_address(0); } } else { stack.Unwind(StackTrace::GetCurrentPc(), (__sanitizer::uptr) __builtin_frame_address(0), nullptr, common_flags()-&gt;fast_unwind_on_malloc, GetMallocContextSize()); }" data-ref="_M/GET_STACK_TRACE_MALLOC">GET_STACK_TRACE_MALLOC</a>;</td></tr>
<tr><th id="1249">1249</th><td>  <b>return</b> <a class="tu ref" href="#__asan::instance" title='__asan::instance' data-use='m' data-ref="__asan::instance" data-ref-filename="__asan..instance">instance</a>.<a class="tu ref fn" href="#__asan::Allocator::UpdateAllocationStack" title='__asan::Allocator::UpdateAllocationStack' data-use='c' data-ref="__asan::Allocator::UpdateAllocationStack" data-ref-filename="__asan..Allocator..UpdateAllocationStack">UpdateAllocationStack</a>((<a class="typedef" href="../sanitizer_common/sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="local col3 ref" href="#563addr" title='addr' data-ref="563addr" data-ref-filename="563addr">addr</a>, &amp;<a class="local col4 ref" href="#1248" title='stack' data-ref="564stack" data-ref-filename="564stack">stack</a>);</td></tr>
<tr><th id="1250">1250</th><td>}</td></tr>
<tr><th id="1251">1251</th><td></td></tr>
<tr><th id="1252">1252</th><td><u>#<span data-ppcond="1252">if</span> !<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#72" title="1" data-ref="_M/SANITIZER_SUPPORTS_WEAK_HOOKS">SANITIZER_SUPPORTS_WEAK_HOOKS</a></u></td></tr>
<tr><th id="1253">1253</th><td><i>// Provide default (no-op) implementation of malloc hooks.</i></td></tr>
<tr><th id="1254">1254</th><td>SANITIZER_INTERFACE_WEAK_DEF(<em>void</em>, __sanitizer_malloc_hook,</td></tr>
<tr><th id="1255">1255</th><td>                             <em>void</em> *ptr, uptr size) {</td></tr>
<tr><th id="1256">1256</th><td>  (<em>void</em>)ptr;</td></tr>
<tr><th id="1257">1257</th><td>  (<em>void</em>)size;</td></tr>
<tr><th id="1258">1258</th><td>}</td></tr>
<tr><th id="1259">1259</th><td></td></tr>
<tr><th id="1260">1260</th><td>SANITIZER_INTERFACE_WEAK_DEF(<em>void</em>, __sanitizer_free_hook, <em>void</em> *ptr) {</td></tr>
<tr><th id="1261">1261</th><td>  (<em>void</em>)ptr;</td></tr>
<tr><th id="1262">1262</th><td>}</td></tr>
<tr><th id="1263">1263</th><td><u>#<span data-ppcond="1252">endif</span></u></td></tr>
<tr><th id="1264">1264</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-01</em> from project llvm revision <em>12</em>