<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>xray_log_interface.cpp source code [llvm/compiler-rt/lib/xray/xray_log_interface.cpp] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="__xray::ModeImpl "/>
<link rel="stylesheet" href="../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/compiler-rt/lib/xray/xray_log_interface.cpp'; var root_path = '../../../..'; var data_path = '../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>llvm</a>/<a href='../..'>compiler-rt</a>/<a href='..'>lib</a>/<a href='./'>xray</a>/<a href='xray_log_interface.cpp.html'>xray_log_interface.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===-- xray_log_interface.cpp --------------------------------------------===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td><i>//</i></td></tr>
<tr><th id="9">9</th><td><i>// This file is a part of XRay, a function call tracing system.</i></td></tr>
<tr><th id="10">10</th><td><i>//</i></td></tr>
<tr><th id="11">11</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="12">12</th><td><u>#include <a href="../../include/xray/xray_log_interface.h.html">"xray/xray_log_interface.h"</a></u></td></tr>
<tr><th id="13">13</th><td></td></tr>
<tr><th id="14">14</th><td><u>#include <a href="../sanitizer_common/sanitizer_allocator_internal.h.html">"sanitizer_common/sanitizer_allocator_internal.h"</a></u></td></tr>
<tr><th id="15">15</th><td><u>#include <a href="../sanitizer_common/sanitizer_atomic.h.html">"sanitizer_common/sanitizer_atomic.h"</a></u></td></tr>
<tr><th id="16">16</th><td><u>#include <a href="../sanitizer_common/sanitizer_mutex.h.html">"sanitizer_common/sanitizer_mutex.h"</a></u></td></tr>
<tr><th id="17">17</th><td><u>#include <a href="../../include/xray/xray_interface.h.html">"xray/xray_interface.h"</a></u></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="xray_defs.h.html">"xray_defs.h"</a></u></td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td><b>namespace</b> <span class="namespace">__xray</span> {</td></tr>
<tr><th id="21">21</th><td><em>static</em> <a class="type" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutex" title='__sanitizer::SpinMutex' data-ref="__sanitizer::SpinMutex" data-ref-filename="__sanitizer..SpinMutex">SpinMutex</a> <a class="ref fn fake" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutex::SpinMutex" title='__sanitizer::SpinMutex::SpinMutex' data-ref="__sanitizer::SpinMutex::SpinMutex" data-ref-filename="__sanitizer..SpinMutex..SpinMutex"></a><dfn class="tu decl def" id="__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-type='__sanitizer::SpinMutex' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</dfn>;</td></tr>
<tr><th id="22">22</th><td><em>static</em> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl" title='XRayLogImpl' data-ref="XRayLogImpl" data-ref-filename="XRayLogImpl">XRayLogImpl</a> <dfn class="tu decl def" id="__xray::CurrentXRayImpl" title='__xray::CurrentXRayImpl' data-type='XRayLogImpl' data-ref="__xray::CurrentXRayImpl" data-ref-filename="__xray..CurrentXRayImpl">CurrentXRayImpl</dfn>{<b>nullptr</b>, <b>nullptr</b>, <b>nullptr</b>, <b>nullptr</b>};</td></tr>
<tr><th id="23">23</th><td><em>static</em> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl" title='XRayLogImpl' data-ref="XRayLogImpl" data-ref-filename="XRayLogImpl">XRayLogImpl</a> *<dfn class="tu decl def" id="__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-type='XRayLogImpl *' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="24">24</th><td></td></tr>
<tr><th id="25">25</th><td><i>// This is the default implementation of a buffer iterator, which always yields</i></td></tr>
<tr><th id="26">26</th><td><i>// a null buffer.</i></td></tr>
<tr><th id="27">27</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayBuffer" title='XRayBuffer' data-ref="XRayBuffer" data-ref-filename="XRayBuffer">XRayBuffer</a> <dfn class="decl def fn" id="__xray::NullBufferIterator" title='__xray::NullBufferIterator' data-ref="__xray::NullBufferIterator" data-ref-filename="__xray..NullBufferIterator">NullBufferIterator</dfn>(<a class="type" href="../../include/xray/xray_log_interface.h.html#XRayBuffer" title='XRayBuffer' data-ref="XRayBuffer" data-ref-filename="XRayBuffer">XRayBuffer</a>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="28">28</th><td>  <b>return</b> {<b>nullptr</b>, <var>0</var>};</td></tr>
<tr><th id="29">29</th><td>}</td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><i>// This is the global function responsible for iterating through given buffers.</i></td></tr>
<tr><th id="32">32</th><td><a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uintptr_t" title='__sanitizer::atomic_uintptr_t' data-ref="__sanitizer::atomic_uintptr_t" data-ref-filename="__sanitizer..atomic_uintptr_t">atomic_uintptr_t</a> <dfn class="decl def" id="__xray::XRayBufferIterator" title='__xray::XRayBufferIterator' data-ref="__xray::XRayBufferIterator" data-ref-filename="__xray..XRayBufferIterator">XRayBufferIterator</dfn>{</td></tr>
<tr><th id="33">33</th><td>    <b>reinterpret_cast</b>&lt;<a class="typedef" href="../../../../include/stdint.h.html#uintptr_t" title='uintptr_t' data-type='unsigned long' data-ref="uintptr_t" data-ref-filename="uintptr_t">uintptr_t</a>&gt;(&amp;<a class="ref fn" href="#__xray::NullBufferIterator" title='__xray::NullBufferIterator' data-ref="__xray::NullBufferIterator" data-ref-filename="__xray..NullBufferIterator">NullBufferIterator</a>)};</td></tr>
<tr><th id="34">34</th><td></td></tr>
<tr><th id="35">35</th><td><i>// We use a linked list of Mode to XRayLogImpl mappings. This is a linked list</i></td></tr>
<tr><th id="36">36</th><td><i>// when it should be a map because we're avoiding having to depend on C++</i></td></tr>
<tr><th id="37">37</th><td><i>// standard library data structures at this level of the implementation.</i></td></tr>
<tr><th id="38">38</th><td><b>struct</b> <dfn class="type def" id="__xray::ModeImpl" title='__xray::ModeImpl' data-ref="__xray::ModeImpl" data-ref-filename="__xray..ModeImpl">ModeImpl</dfn> {</td></tr>
<tr><th id="39">39</th><td>  <a class="type" href="#__xray::ModeImpl" title='__xray::ModeImpl' data-ref="__xray::ModeImpl" data-ref-filename="__xray..ModeImpl">ModeImpl</a> *<dfn class="tu decl field" id="__xray::ModeImpl::Next" title='__xray::ModeImpl::Next' data-type='__xray::ModeImpl *' data-ref="__xray::ModeImpl::Next" data-ref-filename="__xray..ModeImpl..Next">Next</dfn>;</td></tr>
<tr><th id="40">40</th><td>  <em>const</em> <em>char</em> *<dfn class="tu decl field" id="__xray::ModeImpl::Mode" title='__xray::ModeImpl::Mode' data-type='const char *' data-ref="__xray::ModeImpl::Mode" data-ref-filename="__xray..ModeImpl..Mode">Mode</dfn>;</td></tr>
<tr><th id="41">41</th><td>  <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl" title='XRayLogImpl' data-ref="XRayLogImpl" data-ref-filename="XRayLogImpl">XRayLogImpl</a> <dfn class="tu decl field" id="__xray::ModeImpl::Impl" title='__xray::ModeImpl::Impl' data-type='XRayLogImpl' data-ref="__xray::ModeImpl::Impl" data-ref-filename="__xray..ModeImpl..Impl">Impl</dfn>;</td></tr>
<tr><th id="42">42</th><td>};</td></tr>
<tr><th id="43">43</th><td></td></tr>
<tr><th id="44">44</th><td><em>static</em> <a class="type" href="#__xray::ModeImpl" title='__xray::ModeImpl' data-ref="__xray::ModeImpl" data-ref-filename="__xray..ModeImpl">ModeImpl</a> <dfn class="tu decl def" id="__xray::SentinelModeImpl" title='__xray::SentinelModeImpl' data-type='__xray::ModeImpl' data-ref="__xray::SentinelModeImpl" data-ref-filename="__xray..SentinelModeImpl">SentinelModeImpl</dfn>{</td></tr>
<tr><th id="45">45</th><td>    <b>nullptr</b>, <b>nullptr</b>, {<b>nullptr</b>, <b>nullptr</b>, <b>nullptr</b>, <b>nullptr</b>}};</td></tr>
<tr><th id="46">46</th><td><em>static</em> <a class="type" href="#__xray::ModeImpl" title='__xray::ModeImpl' data-ref="__xray::ModeImpl" data-ref-filename="__xray..ModeImpl">ModeImpl</a> *<dfn class="tu decl def" id="__xray::ModeImpls" title='__xray::ModeImpls' data-type='__xray::ModeImpl *' data-ref="__xray::ModeImpls" data-ref-filename="__xray..ModeImpls">ModeImpls</dfn> = &amp;<a class="tu ref" href="#__xray::SentinelModeImpl" title='__xray::SentinelModeImpl' data-use='a' data-ref="__xray::SentinelModeImpl" data-ref-filename="__xray..SentinelModeImpl">SentinelModeImpl</a>;</td></tr>
<tr><th id="47">47</th><td><em>static</em> <em>const</em> <a class="type" href="#__xray::ModeImpl" title='__xray::ModeImpl' data-ref="__xray::ModeImpl" data-ref-filename="__xray..ModeImpl">ModeImpl</a> *<dfn class="tu decl def" id="__xray::CurrentMode" title='__xray::CurrentMode' data-type='const __xray::ModeImpl *' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="48">48</th><td></td></tr>
<tr><th id="49">49</th><td>} <i>// namespace __xray</i></td></tr>
<tr><th id="50">50</th><td></td></tr>
<tr><th id="51">51</th><td><b>using</b> <b>namespace</b> <span class="namespace">__xray</span>;</td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td><em>void</em> <dfn class="decl def fn" id="__xray_log_set_buffer_iterator" title='__xray_log_set_buffer_iterator' data-ref="__xray_log_set_buffer_iterator" data-ref-filename="__xray_log_set_buffer_iterator">__xray_log_set_buffer_iterator</dfn>(<a class="type" href="../../include/xray/xray_log_interface.h.html#XRayBuffer" title='XRayBuffer' data-ref="XRayBuffer" data-ref-filename="XRayBuffer">XRayBuffer</a> (*<dfn class="local col1 decl" id="1Iterator" title='Iterator' data-type='XRayBuffer (*)(XRayBuffer)' data-ref="1Iterator" data-ref-filename="1Iterator">Iterator</dfn>)(<a class="type" href="../../include/xray/xray_log_interface.h.html#XRayBuffer" title='XRayBuffer' data-ref="XRayBuffer" data-ref-filename="XRayBuffer">XRayBuffer</a>))</td></tr>
<tr><th id="54">54</th><td>    <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="55">55</th><td>  <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<span class="namespace">__xray::</span><a class="ref" href="#__xray::XRayBufferIterator" title='__xray::XRayBufferIterator' data-ref="__xray::XRayBufferIterator" data-ref-filename="__xray..XRayBufferIterator">XRayBufferIterator</a>,</td></tr>
<tr><th id="56">56</th><td>               <b>reinterpret_cast</b>&lt;<a class="typedef" href="../../../../include/stdint.h.html#uintptr_t" title='uintptr_t' data-type='unsigned long' data-ref="uintptr_t" data-ref-filename="uintptr_t">uintptr_t</a>&gt;(<a class="local col1 ref" href="#1Iterator" title='Iterator' data-ref="1Iterator" data-ref-filename="1Iterator">Iterator</a>), <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="57">57</th><td>}</td></tr>
<tr><th id="58">58</th><td></td></tr>
<tr><th id="59">59</th><td><em>void</em> <dfn class="decl def fn" id="__xray_log_remove_buffer_iterator" title='__xray_log_remove_buffer_iterator' data-ref="__xray_log_remove_buffer_iterator" data-ref-filename="__xray_log_remove_buffer_iterator">__xray_log_remove_buffer_iterator</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="60">60</th><td>  <a class="ref fn" href="#__xray_log_set_buffer_iterator" title='__xray_log_set_buffer_iterator' data-ref="__xray_log_set_buffer_iterator" data-ref-filename="__xray_log_set_buffer_iterator">__xray_log_set_buffer_iterator</a>(&amp;<a class="ref fn" href="#__xray::NullBufferIterator" title='__xray::NullBufferIterator' data-ref="__xray::NullBufferIterator" data-ref-filename="__xray..NullBufferIterator">NullBufferIterator</a>);</td></tr>
<tr><th id="61">61</th><td>}</td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogRegisterStatus" title='XRayLogRegisterStatus' data-ref="XRayLogRegisterStatus" data-ref-filename="XRayLogRegisterStatus">XRayLogRegisterStatus</a></td></tr>
<tr><th id="64">64</th><td><dfn class="decl def fn" id="__xray_log_register_mode" title='__xray_log_register_mode' data-ref="__xray_log_register_mode" data-ref-filename="__xray_log_register_mode">__xray_log_register_mode</dfn>(<em>const</em> <em>char</em> *<dfn class="local col2 decl" id="2Mode" title='Mode' data-type='const char *' data-ref="2Mode" data-ref-filename="2Mode">Mode</dfn>,</td></tr>
<tr><th id="65">65</th><td>                         <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl" title='XRayLogImpl' data-ref="XRayLogImpl" data-ref-filename="XRayLogImpl">XRayLogImpl</a> <dfn class="local col3 decl" id="3Impl" title='Impl' data-type='XRayLogImpl' data-ref="3Impl" data-ref-filename="3Impl">Impl</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="66">66</th><td>  <b>if</b> (<a class="local col3 ref" href="#3Impl" title='Impl' data-ref="3Impl" data-ref-filename="3Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::flush_log" title='XRayLogImpl::flush_log' data-ref="XRayLogImpl::flush_log" data-ref-filename="XRayLogImpl..flush_log">flush_log</a> == <b>nullptr</b> || <a class="local col3 ref" href="#3Impl" title='Impl' data-ref="3Impl" data-ref-filename="3Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::handle_arg0" title='XRayLogImpl::handle_arg0' data-ref="XRayLogImpl::handle_arg0" data-ref-filename="XRayLogImpl..handle_arg0">handle_arg0</a> == <b>nullptr</b> ||</td></tr>
<tr><th id="67">67</th><td>      <a class="local col3 ref" href="#3Impl" title='Impl' data-ref="3Impl" data-ref-filename="3Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::log_finalize" title='XRayLogImpl::log_finalize' data-ref="XRayLogImpl::log_finalize" data-ref-filename="XRayLogImpl..log_finalize">log_finalize</a> == <b>nullptr</b> || <a class="local col3 ref" href="#3Impl" title='Impl' data-ref="3Impl" data-ref-filename="3Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::log_init" title='XRayLogImpl::log_init' data-ref="XRayLogImpl::log_init" data-ref-filename="XRayLogImpl..log_init">log_init</a> == <b>nullptr</b>)</td></tr>
<tr><th id="68">68</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogRegisterStatus" title='XRayLogRegisterStatus' data-ref="XRayLogRegisterStatus" data-ref-filename="XRayLogRegisterStatus">XRayLogRegisterStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_INCOMPLETE_IMPL" title='XRAY_INCOMPLETE_IMPL' data-ref="XRAY_INCOMPLETE_IMPL" data-ref-filename="XRAY_INCOMPLETE_IMPL">XRAY_INCOMPLETE_IMPL</a>;</td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col4 decl" id="4Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="4Guard" data-ref-filename="4Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="71">71</th><td>  <i>// First, look for whether the mode already has a registered implementation.</i></td></tr>
<tr><th id="72">72</th><td>  <b>for</b> (<a class="type" href="#__xray::ModeImpl" title='__xray::ModeImpl' data-ref="__xray::ModeImpl" data-ref-filename="__xray..ModeImpl">ModeImpl</a> *<dfn class="local col5 decl" id="5it" title='it' data-type='__xray::ModeImpl *' data-ref="5it" data-ref-filename="5it">it</dfn> = <a class="tu ref" href="#__xray::ModeImpls" title='__xray::ModeImpls' data-use='r' data-ref="__xray::ModeImpls" data-ref-filename="__xray..ModeImpls">ModeImpls</a>; <a class="local col5 ref" href="#5it" title='it' data-ref="5it" data-ref-filename="5it">it</a> != &amp;<a class="tu ref" href="#__xray::SentinelModeImpl" title='__xray::SentinelModeImpl' data-use='a' data-ref="__xray::SentinelModeImpl" data-ref-filename="__xray..SentinelModeImpl">SentinelModeImpl</a>; <a class="local col5 ref" href="#5it" title='it' data-ref="5it" data-ref-filename="5it">it</a> = <a class="local col5 ref" href="#5it" title='it' data-ref="5it" data-ref-filename="5it">it</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Next" title='__xray::ModeImpl::Next' data-use='r' data-ref="__xray::ModeImpl::Next" data-ref-filename="__xray..ModeImpl..Next">Next</a>) {</td></tr>
<tr><th id="73">73</th><td>    <b>if</b> (!<a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_strcmp" title='__sanitizer::internal_strcmp' data-ref="__sanitizer::internal_strcmp" data-ref-filename="__sanitizer..internal_strcmp">internal_strcmp</a>(<a class="local col2 ref" href="#2Mode" title='Mode' data-ref="2Mode" data-ref-filename="2Mode">Mode</a>, <a class="local col5 ref" href="#5it" title='it' data-ref="5it" data-ref-filename="5it">it</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Mode" title='__xray::ModeImpl::Mode' data-use='r' data-ref="__xray::ModeImpl::Mode" data-ref-filename="__xray..ModeImpl..Mode">Mode</a>))</td></tr>
<tr><th id="74">74</th><td>      <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogRegisterStatus" title='XRayLogRegisterStatus' data-ref="XRayLogRegisterStatus" data-ref-filename="XRayLogRegisterStatus">XRayLogRegisterStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_DUPLICATE_MODE" title='XRAY_DUPLICATE_MODE' data-ref="XRAY_DUPLICATE_MODE" data-ref-filename="XRAY_DUPLICATE_MODE">XRAY_DUPLICATE_MODE</a>;</td></tr>
<tr><th id="75">75</th><td>  }</td></tr>
<tr><th id="76">76</th><td>  <em>auto</em> *<dfn class="local col6 decl" id="6NewModeImpl" title='NewModeImpl' data-type='__xray::ModeImpl *' data-ref="6NewModeImpl" data-ref-filename="6NewModeImpl">NewModeImpl</dfn> = <b>static_cast</b>&lt;<a class="type" href="#__xray::ModeImpl" title='__xray::ModeImpl' data-ref="__xray::ModeImpl" data-ref-filename="__xray..ModeImpl">ModeImpl</a> *&gt;(<a class="ref fn" href="../sanitizer_common/sanitizer_allocator_internal.h.html#__sanitizer::InternalAlloc" title='__sanitizer::InternalAlloc' data-ref="__sanitizer::InternalAlloc" data-ref-filename="__sanitizer..InternalAlloc">InternalAlloc</a>(<b>sizeof</b>(<a class="type" href="#__xray::ModeImpl" title='__xray::ModeImpl' data-ref="__xray::ModeImpl" data-ref-filename="__xray..ModeImpl">ModeImpl</a>)));</td></tr>
<tr><th id="77">77</th><td>  <a class="local col6 ref" href="#6NewModeImpl" title='NewModeImpl' data-ref="6NewModeImpl" data-ref-filename="6NewModeImpl">NewModeImpl</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Next" title='__xray::ModeImpl::Next' data-use='w' data-ref="__xray::ModeImpl::Next" data-ref-filename="__xray..ModeImpl..Next">Next</a> = <a class="tu ref" href="#__xray::ModeImpls" title='__xray::ModeImpls' data-use='r' data-ref="__xray::ModeImpls" data-ref-filename="__xray..ModeImpls">ModeImpls</a>;</td></tr>
<tr><th id="78">78</th><td>  <a class="local col6 ref" href="#6NewModeImpl" title='NewModeImpl' data-ref="6NewModeImpl" data-ref-filename="6NewModeImpl">NewModeImpl</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Mode" title='__xray::ModeImpl::Mode' data-use='w' data-ref="__xray::ModeImpl::Mode" data-ref-filename="__xray..ModeImpl..Mode">Mode</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_strdup" title='__sanitizer::internal_strdup' data-ref="__sanitizer::internal_strdup" data-ref-filename="__sanitizer..internal_strdup">internal_strdup</a>(<a class="local col2 ref" href="#2Mode" title='Mode' data-ref="2Mode" data-ref-filename="2Mode">Mode</a>);</td></tr>
<tr><th id="79">79</th><td>  <a class="local col6 ref" href="#6NewModeImpl" title='NewModeImpl' data-ref="6NewModeImpl" data-ref-filename="6NewModeImpl">NewModeImpl</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Impl" title='__xray::ModeImpl::Impl' data-use='w' data-ref="__xray::ModeImpl::Impl" data-ref-filename="__xray..ModeImpl..Impl">Impl</a> <a class="ref fn" href="../../include/xray/xray_log_interface.h.html#156" title='XRayLogImpl::operator=' data-ref="_ZN11XRayLogImplaSERKS_" data-ref-filename="_ZN11XRayLogImplaSERKS_">=</a> <a class="local col3 ref" href="#3Impl" title='Impl' data-ref="3Impl" data-ref-filename="3Impl">Impl</a>;</td></tr>
<tr><th id="80">80</th><td>  <a class="tu ref" href="#__xray::ModeImpls" title='__xray::ModeImpls' data-use='w' data-ref="__xray::ModeImpls" data-ref-filename="__xray..ModeImpls">ModeImpls</a> = <a class="local col6 ref" href="#6NewModeImpl" title='NewModeImpl' data-ref="6NewModeImpl" data-ref-filename="6NewModeImpl">NewModeImpl</a>;</td></tr>
<tr><th id="81">81</th><td>  <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogRegisterStatus" title='XRayLogRegisterStatus' data-ref="XRayLogRegisterStatus" data-ref-filename="XRayLogRegisterStatus">XRayLogRegisterStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_REGISTRATION_OK" title='XRAY_REGISTRATION_OK' data-ref="XRAY_REGISTRATION_OK" data-ref-filename="XRAY_REGISTRATION_OK">XRAY_REGISTRATION_OK</a>;</td></tr>
<tr><th id="82">82</th><td>}</td></tr>
<tr><th id="83">83</th><td></td></tr>
<tr><th id="84">84</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogRegisterStatus" title='XRayLogRegisterStatus' data-ref="XRayLogRegisterStatus" data-ref-filename="XRayLogRegisterStatus">XRayLogRegisterStatus</a></td></tr>
<tr><th id="85">85</th><td><dfn class="decl def fn" id="__xray_log_select_mode" title='__xray_log_select_mode' data-ref="__xray_log_select_mode" data-ref-filename="__xray_log_select_mode">__xray_log_select_mode</dfn>(<em>const</em> <em>char</em> *<dfn class="local col7 decl" id="7Mode" title='Mode' data-type='const char *' data-ref="7Mode" data-ref-filename="7Mode">Mode</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="86">86</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col8 decl" id="8Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="8Guard" data-ref-filename="8Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="87">87</th><td>  <b>for</b> (<a class="type" href="#__xray::ModeImpl" title='__xray::ModeImpl' data-ref="__xray::ModeImpl" data-ref-filename="__xray..ModeImpl">ModeImpl</a> *<dfn class="local col9 decl" id="9it" title='it' data-type='__xray::ModeImpl *' data-ref="9it" data-ref-filename="9it">it</dfn> = <a class="tu ref" href="#__xray::ModeImpls" title='__xray::ModeImpls' data-use='r' data-ref="__xray::ModeImpls" data-ref-filename="__xray..ModeImpls">ModeImpls</a>; <a class="local col9 ref" href="#9it" title='it' data-ref="9it" data-ref-filename="9it">it</a> != &amp;<a class="tu ref" href="#__xray::SentinelModeImpl" title='__xray::SentinelModeImpl' data-use='a' data-ref="__xray::SentinelModeImpl" data-ref-filename="__xray..SentinelModeImpl">SentinelModeImpl</a>; <a class="local col9 ref" href="#9it" title='it' data-ref="9it" data-ref-filename="9it">it</a> = <a class="local col9 ref" href="#9it" title='it' data-ref="9it" data-ref-filename="9it">it</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Next" title='__xray::ModeImpl::Next' data-use='r' data-ref="__xray::ModeImpl::Next" data-ref-filename="__xray..ModeImpl..Next">Next</a>) {</td></tr>
<tr><th id="88">88</th><td>    <b>if</b> (!<a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_strcmp" title='__sanitizer::internal_strcmp' data-ref="__sanitizer::internal_strcmp" data-ref-filename="__sanitizer..internal_strcmp">internal_strcmp</a>(<a class="local col7 ref" href="#7Mode" title='Mode' data-ref="7Mode" data-ref-filename="7Mode">Mode</a>, <a class="local col9 ref" href="#9it" title='it' data-ref="9it" data-ref-filename="9it">it</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Mode" title='__xray::ModeImpl::Mode' data-use='r' data-ref="__xray::ModeImpl::Mode" data-ref-filename="__xray..ModeImpl..Mode">Mode</a>)) {</td></tr>
<tr><th id="89">89</th><td>      <a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='w' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a> = <a class="local col9 ref" href="#9it" title='it' data-ref="9it" data-ref-filename="9it">it</a>;</td></tr>
<tr><th id="90">90</th><td>      <a class="tu ref" href="#__xray::CurrentXRayImpl" title='__xray::CurrentXRayImpl' data-use='w' data-ref="__xray::CurrentXRayImpl" data-ref-filename="__xray..CurrentXRayImpl">CurrentXRayImpl</a> <a class="ref fn" href="../../include/xray/xray_log_interface.h.html#156" title='XRayLogImpl::operator=' data-ref="_ZN11XRayLogImplaSERKS_" data-ref-filename="_ZN11XRayLogImplaSERKS_">=</a> <a class="local col9 ref" href="#9it" title='it' data-ref="9it" data-ref-filename="9it">it</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Impl" title='__xray::ModeImpl::Impl' data-use='r' data-ref="__xray::ModeImpl::Impl" data-ref-filename="__xray..ModeImpl..Impl">Impl</a>;</td></tr>
<tr><th id="91">91</th><td>      <a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='w' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a> = &amp;<a class="tu ref" href="#__xray::CurrentXRayImpl" title='__xray::CurrentXRayImpl' data-use='a' data-ref="__xray::CurrentXRayImpl" data-ref-filename="__xray..CurrentXRayImpl">CurrentXRayImpl</a>;</td></tr>
<tr><th id="92">92</th><td>      <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_set_handler" title='__xray_set_handler' data-ref="__xray_set_handler" data-ref-filename="__xray_set_handler">__xray_set_handler</a>(<a class="local col9 ref" href="#9it" title='it' data-ref="9it" data-ref-filename="9it">it</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Impl" title='__xray::ModeImpl::Impl' data-use='m' data-ref="__xray::ModeImpl::Impl" data-ref-filename="__xray..ModeImpl..Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::handle_arg0" title='XRayLogImpl::handle_arg0' data-ref="XRayLogImpl::handle_arg0" data-ref-filename="XRayLogImpl..handle_arg0">handle_arg0</a>);</td></tr>
<tr><th id="93">93</th><td>      <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogRegisterStatus" title='XRayLogRegisterStatus' data-ref="XRayLogRegisterStatus" data-ref-filename="XRayLogRegisterStatus">XRayLogRegisterStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_REGISTRATION_OK" title='XRAY_REGISTRATION_OK' data-ref="XRAY_REGISTRATION_OK" data-ref-filename="XRAY_REGISTRATION_OK">XRAY_REGISTRATION_OK</a>;</td></tr>
<tr><th id="94">94</th><td>    }</td></tr>
<tr><th id="95">95</th><td>  }</td></tr>
<tr><th id="96">96</th><td>  <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogRegisterStatus" title='XRayLogRegisterStatus' data-ref="XRayLogRegisterStatus" data-ref-filename="XRayLogRegisterStatus">XRayLogRegisterStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_MODE_NOT_FOUND" title='XRAY_MODE_NOT_FOUND' data-ref="XRAY_MODE_NOT_FOUND" data-ref-filename="XRAY_MODE_NOT_FOUND">XRAY_MODE_NOT_FOUND</a>;</td></tr>
<tr><th id="97">97</th><td>}</td></tr>
<tr><th id="98">98</th><td></td></tr>
<tr><th id="99">99</th><td><em>const</em> <em>char</em> *<dfn class="decl def fn" id="__xray_log_get_current_mode" title='__xray_log_get_current_mode' data-ref="__xray_log_get_current_mode" data-ref-filename="__xray_log_get_current_mode">__xray_log_get_current_mode</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="100">100</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col0 decl" id="10Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="10Guard" data-ref-filename="10Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="101">101</th><td>  <b>if</b> (<a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='r' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a> != <b>nullptr</b>)</td></tr>
<tr><th id="102">102</th><td>    <b>return</b> <a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='r' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Mode" title='__xray::ModeImpl::Mode' data-use='r' data-ref="__xray::ModeImpl::Mode" data-ref-filename="__xray..ModeImpl..Mode">Mode</a>;</td></tr>
<tr><th id="103">103</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="104">104</th><td>}</td></tr>
<tr><th id="105">105</th><td></td></tr>
<tr><th id="106">106</th><td><em>void</em> <dfn class="decl def fn" id="__xray_set_log_impl" title='__xray_set_log_impl' data-ref="__xray_set_log_impl" data-ref-filename="__xray_set_log_impl">__xray_set_log_impl</dfn>(<a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl" title='XRayLogImpl' data-ref="XRayLogImpl" data-ref-filename="XRayLogImpl">XRayLogImpl</a> <dfn class="local col1 decl" id="11Impl" title='Impl' data-type='XRayLogImpl' data-ref="11Impl" data-ref-filename="11Impl">Impl</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="107">107</th><td>  <b>if</b> (<a class="local col1 ref" href="#11Impl" title='Impl' data-ref="11Impl" data-ref-filename="11Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::log_init" title='XRayLogImpl::log_init' data-ref="XRayLogImpl::log_init" data-ref-filename="XRayLogImpl..log_init">log_init</a> == <b>nullptr</b> || <a class="local col1 ref" href="#11Impl" title='Impl' data-ref="11Impl" data-ref-filename="11Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::log_finalize" title='XRayLogImpl::log_finalize' data-ref="XRayLogImpl::log_finalize" data-ref-filename="XRayLogImpl..log_finalize">log_finalize</a> == <b>nullptr</b> ||</td></tr>
<tr><th id="108">108</th><td>      <a class="local col1 ref" href="#11Impl" title='Impl' data-ref="11Impl" data-ref-filename="11Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::handle_arg0" title='XRayLogImpl::handle_arg0' data-ref="XRayLogImpl::handle_arg0" data-ref-filename="XRayLogImpl..handle_arg0">handle_arg0</a> == <b>nullptr</b> || <a class="local col1 ref" href="#11Impl" title='Impl' data-ref="11Impl" data-ref-filename="11Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::flush_log" title='XRayLogImpl::flush_log' data-ref="XRayLogImpl::flush_log" data-ref-filename="XRayLogImpl..flush_log">flush_log</a> == <b>nullptr</b>) {</td></tr>
<tr><th id="109">109</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col2 decl" id="12Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="12Guard" data-ref-filename="12Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="110">110</th><td>    <a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='w' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a> = <b>nullptr</b>;</td></tr>
<tr><th id="111">111</th><td>    <a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='w' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a> = <b>nullptr</b>;</td></tr>
<tr><th id="112">112</th><td>    <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_remove_handler" title='__xray_remove_handler' data-ref="__xray_remove_handler" data-ref-filename="__xray_remove_handler">__xray_remove_handler</a>();</td></tr>
<tr><th id="113">113</th><td>    <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_remove_handler_arg1" title='__xray_remove_handler_arg1' data-ref="__xray_remove_handler_arg1" data-ref-filename="__xray_remove_handler_arg1">__xray_remove_handler_arg1</a>();</td></tr>
<tr><th id="114">114</th><td>    <b>return</b>;</td></tr>
<tr><th id="115">115</th><td>  }</td></tr>
<tr><th id="116">116</th><td></td></tr>
<tr><th id="117">117</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col3 decl" id="13Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="13Guard" data-ref-filename="13Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="118">118</th><td>  <a class="tu ref" href="#__xray::CurrentXRayImpl" title='__xray::CurrentXRayImpl' data-use='w' data-ref="__xray::CurrentXRayImpl" data-ref-filename="__xray..CurrentXRayImpl">CurrentXRayImpl</a> <a class="ref fn" href="../../include/xray/xray_log_interface.h.html#156" title='XRayLogImpl::operator=' data-ref="_ZN11XRayLogImplaSERKS_" data-ref-filename="_ZN11XRayLogImplaSERKS_">=</a> <a class="local col1 ref" href="#11Impl" title='Impl' data-ref="11Impl" data-ref-filename="11Impl">Impl</a>;</td></tr>
<tr><th id="119">119</th><td>  <a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='w' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a> = &amp;<a class="tu ref" href="#__xray::CurrentXRayImpl" title='__xray::CurrentXRayImpl' data-use='a' data-ref="__xray::CurrentXRayImpl" data-ref-filename="__xray..CurrentXRayImpl">CurrentXRayImpl</a>;</td></tr>
<tr><th id="120">120</th><td>  <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_set_handler" title='__xray_set_handler' data-ref="__xray_set_handler" data-ref-filename="__xray_set_handler">__xray_set_handler</a>(<a class="local col1 ref" href="#11Impl" title='Impl' data-ref="11Impl" data-ref-filename="11Impl">Impl</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::handle_arg0" title='XRayLogImpl::handle_arg0' data-ref="XRayLogImpl::handle_arg0" data-ref-filename="XRayLogImpl..handle_arg0">handle_arg0</a>);</td></tr>
<tr><th id="121">121</th><td>}</td></tr>
<tr><th id="122">122</th><td></td></tr>
<tr><th id="123">123</th><td><em>void</em> <dfn class="decl def fn" id="__xray_remove_log_impl" title='__xray_remove_log_impl' data-ref="__xray_remove_log_impl" data-ref-filename="__xray_remove_log_impl">__xray_remove_log_impl</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="124">124</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col4 decl" id="14Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="14Guard" data-ref-filename="14Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="125">125</th><td>  <a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='w' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a> = <b>nullptr</b>;</td></tr>
<tr><th id="126">126</th><td>  <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_remove_handler" title='__xray_remove_handler' data-ref="__xray_remove_handler" data-ref-filename="__xray_remove_handler">__xray_remove_handler</a>();</td></tr>
<tr><th id="127">127</th><td>  <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_remove_handler_arg1" title='__xray_remove_handler_arg1' data-ref="__xray_remove_handler_arg1" data-ref-filename="__xray_remove_handler_arg1">__xray_remove_handler_arg1</a>();</td></tr>
<tr><th id="128">128</th><td>}</td></tr>
<tr><th id="129">129</th><td></td></tr>
<tr><th id="130">130</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a> <dfn class="decl def fn" id="__xray_log_init" title='__xray_log_init' data-ref="__xray_log_init" data-ref-filename="__xray_log_init">__xray_log_init</dfn>(<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="15BufferSize" title='BufferSize' data-type='size_t' data-ref="15BufferSize" data-ref-filename="15BufferSize">BufferSize</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col6 decl" id="16MaxBuffers" title='MaxBuffers' data-type='size_t' data-ref="16MaxBuffers" data-ref-filename="16MaxBuffers">MaxBuffers</dfn>,</td></tr>
<tr><th id="131">131</th><td>                                  <em>void</em> *<dfn class="local col7 decl" id="17Args" title='Args' data-type='void *' data-ref="17Args" data-ref-filename="17Args">Args</dfn>,</td></tr>
<tr><th id="132">132</th><td>                                  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="18ArgsSize" title='ArgsSize' data-type='size_t' data-ref="18ArgsSize" data-ref-filename="18ArgsSize">ArgsSize</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="133">133</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col9 decl" id="19Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="19Guard" data-ref-filename="19Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="134">134</th><td>  <b>if</b> (!<a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>)</td></tr>
<tr><th id="135">135</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_UNINITIALIZED" title='XRAY_LOG_UNINITIALIZED' data-ref="XRAY_LOG_UNINITIALIZED" data-ref-filename="XRAY_LOG_UNINITIALIZED">XRAY_LOG_UNINITIALIZED</a>;</td></tr>
<tr><th id="136">136</th><td>  <b>return</b> <a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>-&gt;<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::log_init" title='XRayLogImpl::log_init' data-ref="XRayLogImpl::log_init" data-ref-filename="XRayLogImpl..log_init">log_init</a>(<a class="local col5 ref" href="#15BufferSize" title='BufferSize' data-ref="15BufferSize" data-ref-filename="15BufferSize">BufferSize</a>, <a class="local col6 ref" href="#16MaxBuffers" title='MaxBuffers' data-ref="16MaxBuffers" data-ref-filename="16MaxBuffers">MaxBuffers</a>, <a class="local col7 ref" href="#17Args" title='Args' data-ref="17Args" data-ref-filename="17Args">Args</a>, <a class="local col8 ref" href="#18ArgsSize" title='ArgsSize' data-ref="18ArgsSize" data-ref-filename="18ArgsSize">ArgsSize</a>);</td></tr>
<tr><th id="137">137</th><td>}</td></tr>
<tr><th id="138">138</th><td></td></tr>
<tr><th id="139">139</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a> <dfn class="decl def fn" id="__xray_log_init_mode" title='__xray_log_init_mode' data-ref="__xray_log_init_mode" data-ref-filename="__xray_log_init_mode">__xray_log_init_mode</dfn>(<em>const</em> <em>char</em> *<dfn class="local col0 decl" id="20Mode" title='Mode' data-type='const char *' data-ref="20Mode" data-ref-filename="20Mode">Mode</dfn>, <em>const</em> <em>char</em> *<dfn class="local col1 decl" id="21Config" title='Config' data-type='const char *' data-ref="21Config" data-ref-filename="21Config">Config</dfn>)</td></tr>
<tr><th id="140">140</th><td>    <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="141">141</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col2 decl" id="22Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="22Guard" data-ref-filename="22Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="142">142</th><td>  <b>if</b> (!<a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>)</td></tr>
<tr><th id="143">143</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_UNINITIALIZED" title='XRAY_LOG_UNINITIALIZED' data-ref="XRAY_LOG_UNINITIALIZED" data-ref-filename="XRAY_LOG_UNINITIALIZED">XRAY_LOG_UNINITIALIZED</a>;</td></tr>
<tr><th id="144">144</th><td></td></tr>
<tr><th id="145">145</th><td>  <b>if</b> (<a class="local col1 ref" href="#21Config" title='Config' data-ref="21Config" data-ref-filename="21Config">Config</a> == <b>nullptr</b>)</td></tr>
<tr><th id="146">146</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_UNINITIALIZED" title='XRAY_LOG_UNINITIALIZED' data-ref="XRAY_LOG_UNINITIALIZED" data-ref-filename="XRAY_LOG_UNINITIALIZED">XRAY_LOG_UNINITIALIZED</a>;</td></tr>
<tr><th id="147">147</th><td></td></tr>
<tr><th id="148">148</th><td>  <i>// Check first whether the current mode is the same as what we expect.</i></td></tr>
<tr><th id="149">149</th><td>  <b>if</b> (<a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='r' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a> == <b>nullptr</b> || <a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_strcmp" title='__sanitizer::internal_strcmp' data-ref="__sanitizer::internal_strcmp" data-ref-filename="__sanitizer..internal_strcmp">internal_strcmp</a>(<a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='r' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Mode" title='__xray::ModeImpl::Mode' data-use='r' data-ref="__xray::ModeImpl::Mode" data-ref-filename="__xray..ModeImpl..Mode">Mode</a>, <a class="local col0 ref" href="#20Mode" title='Mode' data-ref="20Mode" data-ref-filename="20Mode">Mode</a>) != <var>0</var>)</td></tr>
<tr><th id="150">150</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_UNINITIALIZED" title='XRAY_LOG_UNINITIALIZED' data-ref="XRAY_LOG_UNINITIALIZED" data-ref-filename="XRAY_LOG_UNINITIALIZED">XRAY_LOG_UNINITIALIZED</a>;</td></tr>
<tr><th id="151">151</th><td></td></tr>
<tr><th id="152">152</th><td>  <i>// Here we do some work to coerce the pointer we're provided, so that</i></td></tr>
<tr><th id="153">153</th><td><i>  // the implementations that still take void* pointers can handle the</i></td></tr>
<tr><th id="154">154</th><td><i>  // data provided in the Config argument.</i></td></tr>
<tr><th id="155">155</th><td>  <b>return</b> <a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>-&gt;<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::log_init" title='XRayLogImpl::log_init' data-ref="XRayLogImpl::log_init" data-ref-filename="XRayLogImpl..log_init">log_init</a>(</td></tr>
<tr><th id="156">156</th><td>      <var>0</var>, <var>0</var>, <b>const_cast</b>&lt;<em>void</em> *&gt;(<b>static_cast</b>&lt;<em>const</em> <em>void</em> *&gt;(<a class="local col1 ref" href="#21Config" title='Config' data-ref="21Config" data-ref-filename="21Config">Config</a>)), <var>0</var>);</td></tr>
<tr><th id="157">157</th><td>}</td></tr>
<tr><th id="158">158</th><td></td></tr>
<tr><th id="159">159</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a></td></tr>
<tr><th id="160">160</th><td><dfn class="decl def fn" id="__xray_log_init_mode_bin" title='__xray_log_init_mode_bin' data-ref="__xray_log_init_mode_bin" data-ref-filename="__xray_log_init_mode_bin">__xray_log_init_mode_bin</dfn>(<em>const</em> <em>char</em> *<dfn class="local col3 decl" id="23Mode" title='Mode' data-type='const char *' data-ref="23Mode" data-ref-filename="23Mode">Mode</dfn>, <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="24Config" title='Config' data-type='const char *' data-ref="24Config" data-ref-filename="24Config">Config</dfn>,</td></tr>
<tr><th id="161">161</th><td>                         <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="25ConfigSize" title='ConfigSize' data-type='size_t' data-ref="25ConfigSize" data-ref-filename="25ConfigSize">ConfigSize</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="162">162</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col6 decl" id="26Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="26Guard" data-ref-filename="26Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="163">163</th><td>  <b>if</b> (!<a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>)</td></tr>
<tr><th id="164">164</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_UNINITIALIZED" title='XRAY_LOG_UNINITIALIZED' data-ref="XRAY_LOG_UNINITIALIZED" data-ref-filename="XRAY_LOG_UNINITIALIZED">XRAY_LOG_UNINITIALIZED</a>;</td></tr>
<tr><th id="165">165</th><td></td></tr>
<tr><th id="166">166</th><td>  <b>if</b> (<a class="local col4 ref" href="#24Config" title='Config' data-ref="24Config" data-ref-filename="24Config">Config</a> == <b>nullptr</b>)</td></tr>
<tr><th id="167">167</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_UNINITIALIZED" title='XRAY_LOG_UNINITIALIZED' data-ref="XRAY_LOG_UNINITIALIZED" data-ref-filename="XRAY_LOG_UNINITIALIZED">XRAY_LOG_UNINITIALIZED</a>;</td></tr>
<tr><th id="168">168</th><td></td></tr>
<tr><th id="169">169</th><td>  <i>// Check first whether the current mode is the same as what we expect.</i></td></tr>
<tr><th id="170">170</th><td>  <b>if</b> (<a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='r' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a> == <b>nullptr</b> || <a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_strcmp" title='__sanitizer::internal_strcmp' data-ref="__sanitizer::internal_strcmp" data-ref-filename="__sanitizer..internal_strcmp">internal_strcmp</a>(<a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='r' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Mode" title='__xray::ModeImpl::Mode' data-use='r' data-ref="__xray::ModeImpl::Mode" data-ref-filename="__xray..ModeImpl..Mode">Mode</a>, <a class="local col3 ref" href="#23Mode" title='Mode' data-ref="23Mode" data-ref-filename="23Mode">Mode</a>) != <var>0</var>)</td></tr>
<tr><th id="171">171</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_UNINITIALIZED" title='XRAY_LOG_UNINITIALIZED' data-ref="XRAY_LOG_UNINITIALIZED" data-ref-filename="XRAY_LOG_UNINITIALIZED">XRAY_LOG_UNINITIALIZED</a>;</td></tr>
<tr><th id="172">172</th><td></td></tr>
<tr><th id="173">173</th><td>  <i>// Here we do some work to coerce the pointer we're provided, so that</i></td></tr>
<tr><th id="174">174</th><td><i>  // the implementations that still take void* pointers can handle the</i></td></tr>
<tr><th id="175">175</th><td><i>  // data provided in the Config argument.</i></td></tr>
<tr><th id="176">176</th><td>  <b>return</b> <a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>-&gt;<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::log_init" title='XRayLogImpl::log_init' data-ref="XRayLogImpl::log_init" data-ref-filename="XRayLogImpl..log_init">log_init</a>(</td></tr>
<tr><th id="177">177</th><td>      <var>0</var>, <var>0</var>, <b>const_cast</b>&lt;<em>void</em> *&gt;(<b>static_cast</b>&lt;<em>const</em> <em>void</em> *&gt;(<a class="local col4 ref" href="#24Config" title='Config' data-ref="24Config" data-ref-filename="24Config">Config</a>)), <a class="local col5 ref" href="#25ConfigSize" title='ConfigSize' data-ref="25ConfigSize" data-ref-filename="25ConfigSize">ConfigSize</a>);</td></tr>
<tr><th id="178">178</th><td>}</td></tr>
<tr><th id="179">179</th><td></td></tr>
<tr><th id="180">180</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a> <dfn class="decl def fn" id="__xray_log_finalize" title='__xray_log_finalize' data-ref="__xray_log_finalize" data-ref-filename="__xray_log_finalize">__xray_log_finalize</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="181">181</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col7 decl" id="27Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="27Guard" data-ref-filename="27Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="182">182</th><td>  <b>if</b> (!<a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>)</td></tr>
<tr><th id="183">183</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_UNINITIALIZED" title='XRAY_LOG_UNINITIALIZED' data-ref="XRAY_LOG_UNINITIALIZED" data-ref-filename="XRAY_LOG_UNINITIALIZED">XRAY_LOG_UNINITIALIZED</a>;</td></tr>
<tr><th id="184">184</th><td>  <b>return</b> <a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>-&gt;<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::log_finalize" title='XRayLogImpl::log_finalize' data-ref="XRayLogImpl::log_finalize" data-ref-filename="XRayLogImpl..log_finalize">log_finalize</a>();</td></tr>
<tr><th id="185">185</th><td>}</td></tr>
<tr><th id="186">186</th><td></td></tr>
<tr><th id="187">187</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogFlushStatus" title='XRayLogFlushStatus' data-ref="XRayLogFlushStatus" data-ref-filename="XRayLogFlushStatus">XRayLogFlushStatus</a> <dfn class="decl def fn" id="__xray_log_flushLog" title='__xray_log_flushLog' data-ref="__xray_log_flushLog" data-ref-filename="__xray_log_flushLog">__xray_log_flushLog</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="188">188</th><td>  <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col8 decl" id="28Guard" title='Guard' data-type='__sanitizer::SpinMutexLock' data-ref="28Guard" data-ref-filename="28Guard">Guard</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::XRayImplMutex" title='__xray::XRayImplMutex' data-use='a' data-ref="__xray::XRayImplMutex" data-ref-filename="__xray..XRayImplMutex">XRayImplMutex</a>);</td></tr>
<tr><th id="189">189</th><td>  <b>if</b> (!<a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>)</td></tr>
<tr><th id="190">190</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogFlushStatus" title='XRayLogFlushStatus' data-ref="XRayLogFlushStatus" data-ref-filename="XRayLogFlushStatus">XRayLogFlushStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_NOT_FLUSHING" title='XRAY_LOG_NOT_FLUSHING' data-ref="XRAY_LOG_NOT_FLUSHING" data-ref-filename="XRAY_LOG_NOT_FLUSHING">XRAY_LOG_NOT_FLUSHING</a>;</td></tr>
<tr><th id="191">191</th><td>  <b>return</b> <a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>-&gt;<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl::flush_log" title='XRayLogImpl::flush_log' data-ref="XRayLogImpl::flush_log" data-ref-filename="XRayLogImpl..flush_log">flush_log</a>();</td></tr>
<tr><th id="192">192</th><td>}</td></tr>
<tr><th id="193">193</th><td></td></tr>
<tr><th id="194">194</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogFlushStatus" title='XRayLogFlushStatus' data-ref="XRayLogFlushStatus" data-ref-filename="XRayLogFlushStatus">XRayLogFlushStatus</a> <dfn class="decl def fn" id="__xray_log_process_buffers" title='__xray_log_process_buffers' data-ref="__xray_log_process_buffers" data-ref-filename="__xray_log_process_buffers">__xray_log_process_buffers</dfn>(</td></tr>
<tr><th id="195">195</th><td>    <em>void</em> (*<dfn class="local col9 decl" id="29Processor" title='Processor' data-type='void (*)(const char *, XRayBuffer)' data-ref="29Processor" data-ref-filename="29Processor">Processor</dfn>)(<em>const</em> <em>char</em> *, <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayBuffer" title='XRayBuffer' data-ref="XRayBuffer" data-ref-filename="XRayBuffer">XRayBuffer</a>)) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="196">196</th><td>  <i>// We want to make sure that there will be no changes to the global state for</i></td></tr>
<tr><th id="197">197</th><td><i>  // the log by synchronising on the XRayBufferIteratorMutex.</i></td></tr>
<tr><th id="198">198</th><td>  <b>if</b> (!<a class="tu ref" href="#__xray::GlobalXRayImpl" title='__xray::GlobalXRayImpl' data-use='r' data-ref="__xray::GlobalXRayImpl" data-ref-filename="__xray..GlobalXRayImpl">GlobalXRayImpl</a>)</td></tr>
<tr><th id="199">199</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogFlushStatus" title='XRayLogFlushStatus' data-ref="XRayLogFlushStatus" data-ref-filename="XRayLogFlushStatus">XRayLogFlushStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_NOT_FLUSHING" title='XRAY_LOG_NOT_FLUSHING' data-ref="XRAY_LOG_NOT_FLUSHING" data-ref-filename="XRAY_LOG_NOT_FLUSHING">XRAY_LOG_NOT_FLUSHING</a>;</td></tr>
<tr><th id="200">200</th><td>  <em>auto</em> <dfn class="local col0 decl" id="30Iterator" title='Iterator' data-type='XRayBuffer (*)(XRayBuffer)' data-ref="30Iterator" data-ref-filename="30Iterator">Iterator</dfn> = <b>reinterpret_cast</b>&lt;<a class="type" href="../../include/xray/xray_log_interface.h.html#XRayBuffer" title='XRayBuffer' data-ref="XRayBuffer" data-ref-filename="XRayBuffer">XRayBuffer</a> (*)(<a class="type" href="../../include/xray/xray_log_interface.h.html#XRayBuffer" title='XRayBuffer' data-ref="XRayBuffer" data-ref-filename="XRayBuffer">XRayBuffer</a>)&gt;(</td></tr>
<tr><th id="201">201</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="ref" href="#__xray::XRayBufferIterator" title='__xray::XRayBufferIterator' data-ref="__xray::XRayBufferIterator" data-ref-filename="__xray..XRayBufferIterator">XRayBufferIterator</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>));</td></tr>
<tr><th id="202">202</th><td>  <em>auto</em> <dfn class="local col1 decl" id="31Buffer" title='Buffer' data-type='XRayBuffer' data-ref="31Buffer" data-ref-filename="31Buffer">Buffer</dfn> = (*<a class="local col0 ref" href="#30Iterator" title='Iterator' data-ref="30Iterator" data-ref-filename="30Iterator">Iterator</a>)(<a class="type" href="../../include/xray/xray_log_interface.h.html#XRayBuffer" title='XRayBuffer' data-ref="XRayBuffer" data-ref-filename="XRayBuffer">XRayBuffer</a>{<b>nullptr</b>, <var>0</var>});</td></tr>
<tr><th id="203">203</th><td>  <em>auto</em> <dfn class="local col2 decl" id="32Mode" title='Mode' data-type='const char *' data-ref="32Mode" data-ref-filename="32Mode">Mode</dfn> = <a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='r' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a> ? <a class="tu ref" href="#__xray::CurrentMode" title='__xray::CurrentMode' data-use='r' data-ref="__xray::CurrentMode" data-ref-filename="__xray..CurrentMode">CurrentMode</a>-&gt;<a class="tu ref field" href="#__xray::ModeImpl::Mode" title='__xray::ModeImpl::Mode' data-use='r' data-ref="__xray::ModeImpl::Mode" data-ref-filename="__xray..ModeImpl..Mode">Mode</a> : <b>nullptr</b>;</td></tr>
<tr><th id="204">204</th><td>  <b>while</b> (<a class="local col1 ref" href="#31Buffer" title='Buffer' data-ref="31Buffer" data-ref-filename="31Buffer">Buffer</a>.<a class="ref field" href="../../include/xray/xray_log_interface.h.html#XRayBuffer::Data" title='XRayBuffer::Data' data-ref="XRayBuffer::Data" data-ref-filename="XRayBuffer..Data">Data</a> != <b>nullptr</b>) {</td></tr>
<tr><th id="205">205</th><td>    (*<a class="local col9 ref" href="#29Processor" title='Processor' data-ref="29Processor" data-ref-filename="29Processor">Processor</a>)(<a class="local col2 ref" href="#32Mode" title='Mode' data-ref="32Mode" data-ref-filename="32Mode">Mode</a>, <a class="ref fn fake" href="../../include/xray/xray_log_interface.h.html#310" title='XRayBuffer::XRayBuffer' data-ref="_ZN10XRayBufferC1ERKS_" data-ref-filename="_ZN10XRayBufferC1ERKS_"></a><a class="local col1 ref" href="#31Buffer" title='Buffer' data-ref="31Buffer" data-ref-filename="31Buffer">Buffer</a>);</td></tr>
<tr><th id="206">206</th><td>    <a class="local col1 ref" href="#31Buffer" title='Buffer' data-ref="31Buffer" data-ref-filename="31Buffer">Buffer</a> <a class="ref fn" href="../../include/xray/xray_log_interface.h.html#310" title='XRayBuffer::operator=' data-ref="_ZN10XRayBufferaSEOS_" data-ref-filename="_ZN10XRayBufferaSEOS_">=</a> (*<a class="local col0 ref" href="#30Iterator" title='Iterator' data-ref="30Iterator" data-ref-filename="30Iterator">Iterator</a>)(<a class="ref fn fake" href="../../include/xray/xray_log_interface.h.html#310" title='XRayBuffer::XRayBuffer' data-ref="_ZN10XRayBufferC1ERKS_" data-ref-filename="_ZN10XRayBufferC1ERKS_"></a><a class="local col1 ref" href="#31Buffer" title='Buffer' data-ref="31Buffer" data-ref-filename="31Buffer">Buffer</a>);</td></tr>
<tr><th id="207">207</th><td>  }</td></tr>
<tr><th id="208">208</th><td>  <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogFlushStatus" title='XRayLogFlushStatus' data-ref="XRayLogFlushStatus" data-ref-filename="XRayLogFlushStatus">XRayLogFlushStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_FLUSHED" title='XRAY_LOG_FLUSHED' data-ref="XRAY_LOG_FLUSHED" data-ref-filename="XRAY_LOG_FLUSHED">XRAY_LOG_FLUSHED</a>;</td></tr>
<tr><th id="209">209</th><td>}</td></tr>
<tr><th id="210">210</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-01</em> from project llvm revision <em>12</em>