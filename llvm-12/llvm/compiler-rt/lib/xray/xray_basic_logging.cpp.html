<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>xray_basic_logging.cpp source code [llvm/compiler-rt/lib/xray/xray_basic_logging.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/compiler-rt/lib/xray/xray_basic_logging.cpp'; var root_path = '../../../..'; var data_path = '../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>llvm</a>/<a href='../..'>compiler-rt</a>/<a href='..'>lib</a>/<a href='./'>xray</a>/<a href='xray_basic_logging.cpp.html'>xray_basic_logging.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===-- xray_basic_logging.cpp ----------------------------------*- C++ -*-===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td><i>//</i></td></tr>
<tr><th id="9">9</th><td><i>// This file is a part of XRay, a dynamic runtime instrumentation system.</i></td></tr>
<tr><th id="10">10</th><td><i>//</i></td></tr>
<tr><th id="11">11</th><td><i>// Implementation of a simple in-memory log of XRay events. This defines a</i></td></tr>
<tr><th id="12">12</th><td><i>// logging function that's compatible with the XRay handler interface, and</i></td></tr>
<tr><th id="13">13</th><td><i>// routines for exporting data to files.</i></td></tr>
<tr><th id="14">14</th><td><i>//</i></td></tr>
<tr><th id="15">15</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td><u>#include <a href="../../../../include/errno.h.html">&lt;errno.h&gt;</a></u></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="../../../../include/fcntl.h.html">&lt;fcntl.h&gt;</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="../../../../include/pthread.h.html">&lt;pthread.h&gt;</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../../../include/sys/stat.h.html">&lt;sys/stat.h&gt;</a></u></td></tr>
<tr><th id="21">21</th><td><u>#<span data-ppcond="21">if</span> SANITIZER_FREEBSD || SANITIZER_NETBSD || SANITIZER_MAC</u></td></tr>
<tr><th id="22">22</th><td><u>#include &lt;sys/syscall.h&gt;</u></td></tr>
<tr><th id="23">23</th><td><u>#<span data-ppcond="21">endif</span></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="../../../../include/sys/types.h.html">&lt;sys/types.h&gt;</a></u></td></tr>
<tr><th id="25">25</th><td><u>#include <a href="../../../../include/time.h.html">&lt;time.h&gt;</a></u></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="../../../../include/unistd.h.html">&lt;unistd.h&gt;</a></u></td></tr>
<tr><th id="27">27</th><td></td></tr>
<tr><th id="28">28</th><td><u>#include <a href="../sanitizer_common/sanitizer_allocator_internal.h.html">"sanitizer_common/sanitizer_allocator_internal.h"</a></u></td></tr>
<tr><th id="29">29</th><td><u>#include <a href="../sanitizer_common/sanitizer_libc.h.html">"sanitizer_common/sanitizer_libc.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="../../include/xray/xray_records.h.html">"xray/xray_records.h"</a></u></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="xray_recursion_guard.h.html">"xray_recursion_guard.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="xray_basic_flags.h.html">"xray_basic_flags.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="xray_basic_logging.h.html">"xray_basic_logging.h"</a></u></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="xray_defs.h.html">"xray_defs.h"</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="xray_flags.h.html">"xray_flags.h"</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="xray_interface_internal.h.html">"xray_interface_internal.h"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="xray_tsc.h.html">"xray_tsc.h"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="xray_utils.h.html">"xray_utils.h"</a></u></td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td><b>namespace</b> <span class="namespace">__xray</span> {</td></tr>
<tr><th id="41">41</th><td></td></tr>
<tr><th id="42">42</th><td><em>static</em> <a class="type" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutex" title='__sanitizer::SpinMutex' data-ref="__sanitizer::SpinMutex" data-ref-filename="__sanitizer..SpinMutex">SpinMutex</a> <a class="ref fn fake" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutex::SpinMutex" title='__sanitizer::SpinMutex::SpinMutex' data-ref="__sanitizer::SpinMutex::SpinMutex" data-ref-filename="__sanitizer..SpinMutex..SpinMutex"></a><dfn class="tu decl def" id="__xray::LogMutex" title='__xray::LogMutex' data-type='__sanitizer::SpinMutex' data-ref="__xray::LogMutex" data-ref-filename="__xray..LogMutex">LogMutex</dfn>;</td></tr>
<tr><th id="43">43</th><td></td></tr>
<tr><th id="44">44</th><td><b>namespace</b> {</td></tr>
<tr><th id="45">45</th><td><i  data-doc="__xray::(anonymousnamespace)::StackEntry">// We use elements of this type to record the entry TSC of every function ID we</i></td></tr>
<tr><th id="46">46</th><td><i  data-doc="__xray::(anonymousnamespace)::StackEntry">// see as we're tracing a particular thread's execution.</i></td></tr>
<tr><th id="47">47</th><td><b>struct</b> <b>alignas</b>(<var>16</var>) <dfn class="tu type def" id="__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</dfn> {</td></tr>
<tr><th id="48">48</th><td>  <a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::StackEntry::FuncId" title='__xray::(anonymous namespace)::StackEntry::FuncId' data-type='int32_t' data-ref="__xray::(anonymousnamespace)::StackEntry::FuncId" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..FuncId">FuncId</dfn>;</td></tr>
<tr><th id="49">49</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::StackEntry::Type" title='__xray::(anonymous namespace)::StackEntry::Type' data-type='uint16_t' data-ref="__xray::(anonymousnamespace)::StackEntry::Type" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..Type">Type</dfn>;</td></tr>
<tr><th id="50">50</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::StackEntry::CPU" title='__xray::(anonymous namespace)::StackEntry::CPU' data-type='uint8_t' data-ref="__xray::(anonymousnamespace)::StackEntry::CPU" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..CPU">CPU</dfn>;</td></tr>
<tr><th id="51">51</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::StackEntry::Padding" title='__xray::(anonymous namespace)::StackEntry::Padding' data-type='uint8_t' data-ref="__xray::(anonymousnamespace)::StackEntry::Padding" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..Padding">Padding</dfn>;</td></tr>
<tr><th id="52">52</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::StackEntry::TSC" title='__xray::(anonymous namespace)::StackEntry::TSC' data-type='uint64_t' data-ref="__xray::(anonymousnamespace)::StackEntry::TSC" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..TSC">TSC</dfn>;</td></tr>
<tr><th id="53">53</th><td>};</td></tr>
<tr><th id="54">54</th><td></td></tr>
<tr><th id="55">55</th><td><b>static_assert</b>(<b>sizeof</b>(<a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a>) == <var>16</var>, <q>"Wrong size for StackEntry"</q>);</td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td><b>struct</b> <a class="macro" href="xray_defs.h.html#27" title="alignas(64)" data-ref="_M/XRAY_TLS_ALIGNAS">XRAY_TLS_ALIGNAS</a>(<var>64</var>) <dfn class="tu type def" id="__xray::(anonymousnamespace)::ThreadLocalData" title='__xray::(anonymous namespace)::ThreadLocalData' data-ref="__xray::(anonymousnamespace)::ThreadLocalData" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData">ThreadLocalData</dfn> {</td></tr>
<tr><th id="58">58</th><td>  <em>void</em> *<dfn class="tu decl field" id="__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" title='__xray::(anonymous namespace)::ThreadLocalData::InMemoryBuffer' data-type='void *' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..InMemoryBuffer">InMemoryBuffer</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="59">59</th><td>  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::ThreadLocalData::BufferSize" title='__xray::(anonymous namespace)::ThreadLocalData::BufferSize' data-type='size_t' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferSize" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferSize">BufferSize</dfn> = <var>0</var>;</td></tr>
<tr><th id="60">60</th><td>  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-type='size_t' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</dfn> = <var>0</var>;</td></tr>
<tr><th id="61">61</th><td>  <em>void</em> *<dfn class="tu decl field" id="__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" title='__xray::(anonymous namespace)::ThreadLocalData::ShadowStack' data-type='void *' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..ShadowStack">ShadowStack</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="62">62</th><td>  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::ThreadLocalData::StackSize" title='__xray::(anonymous namespace)::ThreadLocalData::StackSize' data-type='size_t' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackSize" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackSize">StackSize</dfn> = <var>0</var>;</td></tr>
<tr><th id="63">63</th><td>  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-type='size_t' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</dfn> = <var>0</var>;</td></tr>
<tr><th id="64">64</th><td>  <span class="namespace">__xray::</span><a class="type" href="xray_utils.h.html#__xray::LogWriter" title='__xray::LogWriter' data-ref="__xray::LogWriter" data-ref-filename="__xray..LogWriter">LogWriter</a> *<dfn class="tu decl field" id="__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" title='__xray::(anonymous namespace)::ThreadLocalData::LogWriter' data-type='__xray::LogWriter *' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..LogWriter">LogWriter</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="65">65</th><td>};</td></tr>
<tr><th id="66">66</th><td></td></tr>
<tr><th id="67">67</th><td><b>struct</b> <dfn class="tu type def" id="__xray::(anonymousnamespace)::BasicLoggingOptions" title='__xray::(anonymous namespace)::BasicLoggingOptions' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions">BasicLoggingOptions</dfn> {</td></tr>
<tr><th id="68">68</th><td>  <em>int</em> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::BasicLoggingOptions::DurationFilterMicros" title='__xray::(anonymous namespace)::BasicLoggingOptions::DurationFilterMicros' data-type='int' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::DurationFilterMicros" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..DurationFilterMicros">DurationFilterMicros</dfn> = <var>0</var>;</td></tr>
<tr><th id="69">69</th><td>  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" title='__xray::(anonymous namespace)::BasicLoggingOptions::MaxStackDepth' data-type='size_t' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..MaxStackDepth">MaxStackDepth</dfn> = <var>0</var>;</td></tr>
<tr><th id="70">70</th><td>  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl field" id="__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" title='__xray::(anonymous namespace)::BasicLoggingOptions::ThreadBufferSize' data-type='size_t' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..ThreadBufferSize">ThreadBufferSize</dfn> = <var>0</var>;</td></tr>
<tr><th id="71">71</th><td>};</td></tr>
<tr><th id="72">72</th><td>} <i>// namespace</i></td></tr>
<tr><th id="73">73</th><td></td></tr>
<tr><th id="74">74</th><td><em>static</em> <a class="typedef" href="../../../../include/bits/pthreadtypes.h.html#pthread_key_t" title='pthread_key_t' data-type='unsigned int' data-ref="pthread_key_t" data-ref-filename="pthread_key_t">pthread_key_t</a> <dfn class="tu decl def" id="__xray::PThreadKey" title='__xray::PThreadKey' data-type='pthread_key_t' data-ref="__xray::PThreadKey" data-ref-filename="__xray..PThreadKey">PThreadKey</dfn>;</td></tr>
<tr><th id="75">75</th><td></td></tr>
<tr><th id="76">76</th><td><em>static</em> <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint8_t" title='__sanitizer::atomic_uint8_t' data-ref="__sanitizer::atomic_uint8_t" data-ref-filename="__sanitizer..atomic_uint8_t">atomic_uint8_t</a> <dfn class="tu decl def" id="__xray::BasicInitialized" title='__xray::BasicInitialized' data-type='__sanitizer::atomic_uint8_t' data-ref="__xray::BasicInitialized" data-ref-filename="__xray..BasicInitialized">BasicInitialized</dfn>{<var>0</var>};</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td><b>struct</b> <a class="tu type" href="#__xray::(anonymousnamespace)::BasicLoggingOptions" title='__xray::(anonymous namespace)::BasicLoggingOptions' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions">BasicLoggingOptions</a> <a class="tu ref fn fake" href="#67" title='__xray::(anonymous namespace)::BasicLoggingOptions::BasicLoggingOptions' data-use='c' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::BasicLoggingOptions" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..BasicLoggingOptions"></a><dfn class="tu decl def" id="__xray::GlobalOptions" title='__xray::GlobalOptions' data-type='struct BasicLoggingOptions' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</dfn>;</td></tr>
<tr><th id="79">79</th><td></td></tr>
<tr><th id="80">80</th><td><b>thread_local</b> <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint8_t" title='__sanitizer::atomic_uint8_t' data-ref="__sanitizer::atomic_uint8_t" data-ref-filename="__sanitizer..atomic_uint8_t">atomic_uint8_t</a> <dfn class="decl def" id="__xray::Guard" title='__xray::Guard' data-ref="__xray::Guard" data-ref-filename="__xray..Guard">Guard</dfn>{<var>0</var>};</td></tr>
<tr><th id="81">81</th><td></td></tr>
<tr><th id="82">82</th><td><em>static</em> <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint8_t" title='__sanitizer::atomic_uint8_t' data-ref="__sanitizer::atomic_uint8_t" data-ref-filename="__sanitizer..atomic_uint8_t">atomic_uint8_t</a> <dfn class="tu decl def" id="__xray::UseRealTSC" title='__xray::UseRealTSC' data-type='__sanitizer::atomic_uint8_t' data-ref="__xray::UseRealTSC" data-ref-filename="__xray..UseRealTSC">UseRealTSC</dfn>{<var>0</var>};</td></tr>
<tr><th id="83">83</th><td><em>static</em> <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint64_t" title='__sanitizer::atomic_uint64_t' data-ref="__sanitizer::atomic_uint64_t" data-ref-filename="__sanitizer..atomic_uint64_t">atomic_uint64_t</a> <dfn class="tu decl def" id="__xray::ThresholdTicks" title='__xray::ThresholdTicks' data-type='__sanitizer::atomic_uint64_t' data-ref="__xray::ThresholdTicks" data-ref-filename="__xray..ThresholdTicks">ThresholdTicks</dfn>{<var>0</var>};</td></tr>
<tr><th id="84">84</th><td><em>static</em> <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint64_t" title='__sanitizer::atomic_uint64_t' data-ref="__sanitizer::atomic_uint64_t" data-ref-filename="__sanitizer..atomic_uint64_t">atomic_uint64_t</a> <dfn class="tu decl def" id="__xray::TicksPerSec" title='__xray::TicksPerSec' data-type='__sanitizer::atomic_uint64_t' data-ref="__xray::TicksPerSec" data-ref-filename="__xray..TicksPerSec">TicksPerSec</dfn>{<var>0</var>};</td></tr>
<tr><th id="85">85</th><td><em>static</em> <a class="type" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::atomic_uint64_t" title='__sanitizer::atomic_uint64_t' data-ref="__sanitizer::atomic_uint64_t" data-ref-filename="__sanitizer..atomic_uint64_t">atomic_uint64_t</a> <dfn class="tu decl def" id="__xray::CycleFrequency" title='__xray::CycleFrequency' data-type='__sanitizer::atomic_uint64_t' data-ref="__xray::CycleFrequency" data-ref-filename="__xray..CycleFrequency">CycleFrequency</dfn>{<a class="ref" href="xray_tsc.h.html#__xray::NanosecondsPerSecond" title='__xray::NanosecondsPerSecond' data-ref="__xray::NanosecondsPerSecond" data-ref-filename="__xray..NanosecondsPerSecond">NanosecondsPerSecond</a>};</td></tr>
<tr><th id="86">86</th><td></td></tr>
<tr><th id="87">87</th><td><em>static</em> <a class="type" href="xray_utils.h.html#__xray::LogWriter" title='__xray::LogWriter' data-ref="__xray::LogWriter" data-ref-filename="__xray..LogWriter">LogWriter</a> *<dfn class="tu decl def fn" id="__xray::getLog" title='__xray::getLog' data-type='__xray::LogWriter * __xray::getLog()' data-ref="__xray::getLog" data-ref-filename="__xray..getLog">getLog</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="88">88</th><td>  <a class="type" href="xray_utils.h.html#__xray::LogWriter" title='__xray::LogWriter' data-ref="__xray::LogWriter" data-ref-filename="__xray..LogWriter">LogWriter</a>* <dfn class="local col0 decl" id="80LW" title='LW' data-type='__xray::LogWriter *' data-ref="80LW" data-ref-filename="80LW">LW</dfn> = <a class="type" href="xray_utils.h.html#__xray::LogWriter" title='__xray::LogWriter' data-ref="__xray::LogWriter" data-ref-filename="__xray..LogWriter">LogWriter</a>::<a class="ref fn" href="xray_utils.h.html#__xray::LogWriter::Open" title='__xray::LogWriter::Open' data-ref="__xray::LogWriter::Open" data-ref-filename="__xray..LogWriter..Open">Open</a>();</td></tr>
<tr><th id="89">89</th><td>  <b>if</b> (<a class="local col0 ref" href="#80LW" title='LW' data-ref="80LW" data-ref-filename="80LW">LW</a> == <b>nullptr</b>)</td></tr>
<tr><th id="90">90</th><td>    <b>return</b> <a class="local col0 ref" href="#80LW" title='LW' data-ref="80LW" data-ref-filename="80LW">LW</a>;</td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td>  <em>static</em> <a class="typedef" href="../../../../include/bits/pthreadtypes.h.html#pthread_once_t" title='pthread_once_t' data-type='int' data-ref="pthread_once_t" data-ref-filename="pthread_once_t">pthread_once_t</a> <dfn class="local col1 decl" id="81DetectOnce" title='DetectOnce' data-type='pthread_once_t' data-ref="81DetectOnce" data-ref-filename="81DetectOnce">DetectOnce</dfn> = <a class="macro" href="../../../../include/pthread.h.html#182" title="0" data-ref="_M/PTHREAD_ONCE_INIT">PTHREAD_ONCE_INIT</a>;</td></tr>
<tr><th id="93">93</th><td>  <a class="ref fn" href="../../../../include/pthread.h.html#pthread_once" title='pthread_once' data-ref="pthread_once" data-ref-filename="pthread_once">pthread_once</a>(&amp;<a class="local col1 ref" href="#81DetectOnce" title='DetectOnce' data-ref="81DetectOnce" data-ref-filename="81DetectOnce">DetectOnce</a>, +<a class="tu ref fn fake" href="#93" title='__xray::getLog()::(anonymous class)::operator void (*)()' data-use='c' data-ref="__xray::getLog()::(anonymousclass)::operatorvoid(*)()" data-ref-filename="__xray..getLog()..(anonymousclass)..operatorvoid(*)()"></a>[] {</td></tr>
<tr><th id="94">94</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu ref" href="#__xray::UseRealTSC" title='__xray::UseRealTSC' data-use='a' data-ref="__xray::UseRealTSC" data-ref-filename="__xray..UseRealTSC">UseRealTSC</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>))</td></tr>
<tr><th id="95">95</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="tu ref" href="#__xray::CycleFrequency" title='__xray::CycleFrequency' data-use='a' data-ref="__xray::CycleFrequency" data-ref-filename="__xray..CycleFrequency">CycleFrequency</a>, <a class="ref fn" href="xray_x86_64.inc.html#__xray::getTSCFrequency" title='__xray::getTSCFrequency' data-ref="__xray::getTSCFrequency" data-ref-filename="__xray..getTSCFrequency">getTSCFrequency</a>(), <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="96">96</th><td>  });</td></tr>
<tr><th id="97">97</th><td></td></tr>
<tr><th id="98">98</th><td>  <i>// Since we're here, we get to write the header. We set it up so that the</i></td></tr>
<tr><th id="99">99</th><td><i>  // header will only be written once, at the start, and let the threads</i></td></tr>
<tr><th id="100">100</th><td><i>  // logging do writes which just append.</i></td></tr>
<tr><th id="101">101</th><td>  <a class="type" href="../../include/xray/xray_records.h.html#__xray::XRayFileHeader" title='__xray::XRayFileHeader' data-ref="__xray::XRayFileHeader" data-ref-filename="__xray..XRayFileHeader">XRayFileHeader</a> <a class="ref fn fake" href="../../include/xray/xray_records.h.html#38" title='__xray::XRayFileHeader::XRayFileHeader' data-ref="__xray::XRayFileHeader::XRayFileHeader" data-ref-filename="__xray..XRayFileHeader..XRayFileHeader"></a><dfn class="local col2 decl" id="82Header" title='Header' data-type='__xray::XRayFileHeader' data-ref="82Header" data-ref-filename="82Header">Header</dfn>;</td></tr>
<tr><th id="102">102</th><td>  <i>// Version 2 includes tail exit records.</i></td></tr>
<tr><th id="103">103</th><td><i>  // Version 3 includes pid inside records.</i></td></tr>
<tr><th id="104">104</th><td>  <a class="local col2 ref" href="#82Header" title='Header' data-ref="82Header" data-ref-filename="82Header">Header</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayFileHeader::Version" title='__xray::XRayFileHeader::Version' data-ref="__xray::XRayFileHeader::Version" data-ref-filename="__xray..XRayFileHeader..Version">Version</a> = <var>3</var>;</td></tr>
<tr><th id="105">105</th><td>  <a class="local col2 ref" href="#82Header" title='Header' data-ref="82Header" data-ref-filename="82Header">Header</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayFileHeader::Type" title='__xray::XRayFileHeader::Type' data-ref="__xray::XRayFileHeader::Type" data-ref-filename="__xray..XRayFileHeader..Type">Type</a> = <a class="type" href="../../include/xray/xray_records.h.html#__xray::FileTypes" title='__xray::FileTypes' data-ref="__xray::FileTypes" data-ref-filename="__xray..FileTypes">FileTypes</a>::<a class="enum" href="../../include/xray/xray_records.h.html#__xray::NAIVE_LOG" title='__xray::NAIVE_LOG' data-ref="__xray::NAIVE_LOG" data-ref-filename="__xray..NAIVE_LOG">NAIVE_LOG</a>;</td></tr>
<tr><th id="106">106</th><td>  <a class="local col2 ref" href="#82Header" title='Header' data-ref="82Header" data-ref-filename="82Header">Header</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayFileHeader::CycleFrequency" title='__xray::XRayFileHeader::CycleFrequency' data-ref="__xray::XRayFileHeader::CycleFrequency" data-ref-filename="__xray..XRayFileHeader..CycleFrequency">CycleFrequency</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu ref" href="#__xray::CycleFrequency" title='__xray::CycleFrequency' data-use='a' data-ref="__xray::CycleFrequency" data-ref-filename="__xray..CycleFrequency">CycleFrequency</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>);</td></tr>
<tr><th id="107">107</th><td></td></tr>
<tr><th id="108">108</th><td>  <i>// FIXME: Actually check whether we have 'constant_tsc' and 'nonstop_tsc'</i></td></tr>
<tr><th id="109">109</th><td><i>  // before setting the values in the header.</i></td></tr>
<tr><th id="110">110</th><td>  <a class="local col2 ref" href="#82Header" title='Header' data-ref="82Header" data-ref-filename="82Header">Header</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayFileHeader::ConstantTSC" title='__xray::XRayFileHeader::ConstantTSC' data-ref="__xray::XRayFileHeader::ConstantTSC" data-ref-filename="__xray..XRayFileHeader..ConstantTSC">ConstantTSC</a> = <var>1</var>;</td></tr>
<tr><th id="111">111</th><td>  <a class="local col2 ref" href="#82Header" title='Header' data-ref="82Header" data-ref-filename="82Header">Header</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayFileHeader::NonstopTSC" title='__xray::XRayFileHeader::NonstopTSC' data-ref="__xray::XRayFileHeader::NonstopTSC" data-ref-filename="__xray..XRayFileHeader..NonstopTSC">NonstopTSC</a> = <var>1</var>;</td></tr>
<tr><th id="112">112</th><td>  <a class="local col0 ref" href="#80LW" title='LW' data-ref="80LW" data-ref-filename="80LW">LW</a>-&gt;<a class="ref fn" href="xray_utils.h.html#__xray::LogWriter::WriteAll" title='__xray::LogWriter::WriteAll' data-ref="__xray::LogWriter::WriteAll" data-ref-filename="__xray..LogWriter..WriteAll">WriteAll</a>(<b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(&amp;<a class="local col2 ref" href="#82Header" title='Header' data-ref="82Header" data-ref-filename="82Header">Header</a>),</td></tr>
<tr><th id="113">113</th><td>               <b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(&amp;<a class="local col2 ref" href="#82Header" title='Header' data-ref="82Header" data-ref-filename="82Header">Header</a>) + <b>sizeof</b>(<a class="local col2 ref" href="#82Header" title='Header' data-ref="82Header" data-ref-filename="82Header">Header</a>));</td></tr>
<tr><th id="114">114</th><td>  <b>return</b> <a class="local col0 ref" href="#80LW" title='LW' data-ref="80LW" data-ref-filename="80LW">LW</a>;</td></tr>
<tr><th id="115">115</th><td>}</td></tr>
<tr><th id="116">116</th><td></td></tr>
<tr><th id="117">117</th><td><em>static</em> <a class="type" href="xray_utils.h.html#__xray::LogWriter" title='__xray::LogWriter' data-ref="__xray::LogWriter" data-ref-filename="__xray..LogWriter">LogWriter</a> *<dfn class="tu decl def fn" id="__xray::getGlobalLog" title='__xray::getGlobalLog' data-type='__xray::LogWriter * __xray::getGlobalLog()' data-ref="__xray::getGlobalLog" data-ref-filename="__xray..getGlobalLog">getGlobalLog</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="118">118</th><td>  <em>static</em> <a class="typedef" href="../../../../include/bits/pthreadtypes.h.html#pthread_once_t" title='pthread_once_t' data-type='int' data-ref="pthread_once_t" data-ref-filename="pthread_once_t">pthread_once_t</a> <dfn class="local col3 decl" id="83OnceInit" title='OnceInit' data-type='pthread_once_t' data-ref="83OnceInit" data-ref-filename="83OnceInit">OnceInit</dfn> = <a class="macro" href="../../../../include/pthread.h.html#182" title="0" data-ref="_M/PTHREAD_ONCE_INIT">PTHREAD_ONCE_INIT</a>;</td></tr>
<tr><th id="119">119</th><td>  <em>static</em> <a class="type" href="xray_utils.h.html#__xray::LogWriter" title='__xray::LogWriter' data-ref="__xray::LogWriter" data-ref-filename="__xray..LogWriter">LogWriter</a> *<dfn class="local col4 decl" id="84LW" title='LW' data-type='__xray::LogWriter *' data-ref="84LW" data-ref-filename="84LW">LW</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="120">120</th><td>  <a class="ref fn" href="../../../../include/pthread.h.html#pthread_once" title='pthread_once' data-ref="pthread_once" data-ref-filename="pthread_once">pthread_once</a>(&amp;<a class="local col3 ref" href="#83OnceInit" title='OnceInit' data-ref="83OnceInit" data-ref-filename="83OnceInit">OnceInit</a>, +<a class="tu ref fn fake" href="#120" title='__xray::getGlobalLog()::(anonymous class)::operator void (*)()' data-use='c' data-ref="__xray::getGlobalLog()::(anonymousclass)::operatorvoid(*)()" data-ref-filename="__xray..getGlobalLog()..(anonymousclass)..operatorvoid(*)()"></a>[] { <a class="local col4 ref" href="#84LW" title='LW' data-ref="84LW" data-ref-filename="84LW">LW</a> = <a class="tu ref fn" href="#__xray::getLog" title='__xray::getLog' data-use='c' data-ref="__xray::getLog" data-ref-filename="__xray..getLog">getLog</a>(); });</td></tr>
<tr><th id="121">121</th><td>  <b>return</b> <a class="local col4 ref" href="#84LW" title='LW' data-ref="84LW" data-ref-filename="84LW">LW</a>;</td></tr>
<tr><th id="122">122</th><td>}</td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td><em>static</em> <a class="tu type" href="#__xray::(anonymousnamespace)::ThreadLocalData" title='__xray::(anonymous namespace)::ThreadLocalData' data-ref="__xray::(anonymousnamespace)::ThreadLocalData" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData">ThreadLocalData</a> &amp;<dfn class="tu decl def fn" id="__xray::getThreadLocalData" title='__xray::getThreadLocalData' data-type='__xray::(anonymous namespace)::ThreadLocalData &amp; __xray::getThreadLocalData()' data-ref="__xray::getThreadLocalData" data-ref-filename="__xray..getThreadLocalData">getThreadLocalData</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="125">125</th><td>  <b>thread_local</b> <a class="tu type" href="#__xray::(anonymousnamespace)::ThreadLocalData" title='__xray::(anonymous namespace)::ThreadLocalData' data-ref="__xray::(anonymousnamespace)::ThreadLocalData" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData">ThreadLocalData</a> <a class="tu ref fn fake" href="#57" title='__xray::(anonymous namespace)::ThreadLocalData::ThreadLocalData' data-use='c' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::ThreadLocalData" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..ThreadLocalData"></a><dfn class="local col5 decl" id="85TLD" title='TLD' data-type='__xray::(anonymous namespace)::ThreadLocalData' data-ref="85TLD" data-ref-filename="85TLD">TLD</dfn>;</td></tr>
<tr><th id="126">126</th><td>  <b>thread_local</b> <em>bool</em> <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#240" title="__attribute__((unused))" data-ref="_M/UNUSED">UNUSED</a> <dfn class="local col6 decl" id="86TOnce" title='TOnce' data-type='bool' data-ref="86TOnce" data-ref-filename="86TOnce">TOnce</dfn> = [] {</td></tr>
<tr><th id="127">127</th><td>    <b>if</b> (<a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" title='__xray::(anonymous namespace)::BasicLoggingOptions::ThreadBufferSize' data-use='r' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..ThreadBufferSize">ThreadBufferSize</a> == <var>0</var>) {</td></tr>
<tr><th id="128">128</th><td>      <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="129">129</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"Not initializing TLD since ThreadBufferSize == 0.\n"</q>);</td></tr>
<tr><th id="130">130</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="131">131</th><td>    }</td></tr>
<tr><th id="132">132</th><td>    <a class="ref fn" href="../../../../include/pthread.h.html#pthread_setspecific" title='pthread_setspecific' data-ref="pthread_setspecific" data-ref-filename="pthread_setspecific">pthread_setspecific</a>(<a class="tu ref" href="#__xray::PThreadKey" title='__xray::PThreadKey' data-use='r' data-ref="__xray::PThreadKey" data-ref-filename="__xray..PThreadKey">PThreadKey</a>, &amp;<a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>);</td></tr>
<tr><th id="133">133</th><td>    <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" title='__xray::(anonymous namespace)::ThreadLocalData::LogWriter' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..LogWriter">LogWriter</a> = <a class="tu ref fn" href="#__xray::getGlobalLog" title='__xray::getGlobalLog' data-use='c' data-ref="__xray::getGlobalLog" data-ref-filename="__xray..getGlobalLog">getGlobalLog</a>();</td></tr>
<tr><th id="134">134</th><td>    <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" title='__xray::(anonymous namespace)::ThreadLocalData::InMemoryBuffer' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..InMemoryBuffer">InMemoryBuffer</a> = <b>reinterpret_cast</b>&lt;<a class="type" href="../../include/xray/xray_records.h.html#__xray::XRayRecord" title='__xray::XRayRecord' data-ref="__xray::XRayRecord" data-ref-filename="__xray..XRayRecord">XRayRecord</a> *&gt;(</td></tr>
<tr><th id="135">135</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_internal.h.html#__sanitizer::InternalAlloc" title='__sanitizer::InternalAlloc' data-ref="__sanitizer::InternalAlloc" data-ref-filename="__sanitizer..InternalAlloc">InternalAlloc</a>(<b>sizeof</b>(<a class="type" href="../../include/xray/xray_records.h.html#__xray::XRayRecord" title='__xray::XRayRecord' data-ref="__xray::XRayRecord" data-ref-filename="__xray..XRayRecord">XRayRecord</a>) * <a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" title='__xray::(anonymous namespace)::BasicLoggingOptions::ThreadBufferSize' data-use='r' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..ThreadBufferSize">ThreadBufferSize</a>,</td></tr>
<tr><th id="136">136</th><td>                      <b>nullptr</b>, <b>alignof</b>(<a class="type" href="../../include/xray/xray_records.h.html#__xray::XRayRecord" title='__xray::XRayRecord' data-ref="__xray::XRayRecord" data-ref-filename="__xray..XRayRecord">XRayRecord</a>)));</td></tr>
<tr><th id="137">137</th><td>    <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferSize" title='__xray::(anonymous namespace)::ThreadLocalData::BufferSize' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferSize" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferSize">BufferSize</a> = <a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" title='__xray::(anonymous namespace)::BasicLoggingOptions::ThreadBufferSize' data-use='r' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..ThreadBufferSize">ThreadBufferSize</a>;</td></tr>
<tr><th id="138">138</th><td>    <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a> = <var>0</var>;</td></tr>
<tr><th id="139">139</th><td>    <b>if</b> (<a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" title='__xray::(anonymous namespace)::BasicLoggingOptions::MaxStackDepth' data-use='r' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..MaxStackDepth">MaxStackDepth</a> == <var>0</var>) {</td></tr>
<tr><th id="140">140</th><td>      <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="141">141</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"Not initializing the ShadowStack since MaxStackDepth == 0.\n"</q>);</td></tr>
<tr><th id="142">142</th><td>      <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackSize" title='__xray::(anonymous namespace)::ThreadLocalData::StackSize' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackSize" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackSize">StackSize</a> = <var>0</var>;</td></tr>
<tr><th id="143">143</th><td>      <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a> = <var>0</var>;</td></tr>
<tr><th id="144">144</th><td>      <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" title='__xray::(anonymous namespace)::ThreadLocalData::ShadowStack' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..ShadowStack">ShadowStack</a> = <b>nullptr</b>;</td></tr>
<tr><th id="145">145</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="146">146</th><td>    }</td></tr>
<tr><th id="147">147</th><td>    <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" title='__xray::(anonymous namespace)::ThreadLocalData::ShadowStack' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..ShadowStack">ShadowStack</a> = <b>reinterpret_cast</b>&lt;<a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a> *&gt;(</td></tr>
<tr><th id="148">148</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_internal.h.html#__sanitizer::InternalAlloc" title='__sanitizer::InternalAlloc' data-ref="__sanitizer::InternalAlloc" data-ref-filename="__sanitizer..InternalAlloc">InternalAlloc</a>(<b>sizeof</b>(<a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a>) * <a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" title='__xray::(anonymous namespace)::BasicLoggingOptions::MaxStackDepth' data-use='r' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..MaxStackDepth">MaxStackDepth</a>, <b>nullptr</b>,</td></tr>
<tr><th id="149">149</th><td>                      <b>alignof</b>(<a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a>)));</td></tr>
<tr><th id="150">150</th><td>    <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackSize" title='__xray::(anonymous namespace)::ThreadLocalData::StackSize' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackSize" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackSize">StackSize</a> = <a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" title='__xray::(anonymous namespace)::BasicLoggingOptions::MaxStackDepth' data-use='r' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..MaxStackDepth">MaxStackDepth</a>;</td></tr>
<tr><th id="151">151</th><td>    <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a> = <var>0</var>;</td></tr>
<tr><th id="152">152</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="153">153</th><td>  }<a class="tu ref fn" href="#__xray::getThreadLocalData()::(anonymousclass)::operator()" title='__xray::getThreadLocalData()::(anonymous class)::operator()' data-use='c' data-ref="__xray::getThreadLocalData()::(anonymousclass)::operator()" data-ref-filename="__xray..getThreadLocalData()..(anonymousclass)..operator()">()</a>;</td></tr>
<tr><th id="154">154</th><td>  <b>return</b> <a class="local col5 ref" href="#85TLD" title='TLD' data-ref="85TLD" data-ref-filename="85TLD">TLD</a>;</td></tr>
<tr><th id="155">155</th><td>}</td></tr>
<tr><th id="156">156</th><td></td></tr>
<tr><th id="157">157</th><td><b>template</b> &lt;<b>class</b> RDTSC&gt;</td></tr>
<tr><th id="158">158</th><td><em>void</em> <dfn class="decl def fn" id="__xray::InMemoryRawLog" title='__xray::InMemoryRawLog' data-ref="__xray::InMemoryRawLog" data-ref-filename="__xray..InMemoryRawLog">InMemoryRawLog</dfn>(<a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col7 decl" id="87FuncId" title='FuncId' data-type='int32_t' data-ref="87FuncId" data-ref-filename="87FuncId">FuncId</dfn>, <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a> <dfn class="local col8 decl" id="88Type" title='Type' data-type='XRayEntryType' data-ref="88Type" data-ref-filename="88Type">Type</dfn>,</td></tr>
<tr><th id="159">159</th><td>                    RDTSC <dfn class="local col9 decl" id="89ReadTSC" title='ReadTSC' data-type='RDTSC' data-ref="89ReadTSC" data-ref-filename="89ReadTSC">ReadTSC</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="160">160</th><td>  <em>auto</em> &amp;<dfn class="local col0 decl" id="90TLD" title='TLD' data-type='__xray::(anonymous namespace)::ThreadLocalData &amp;' data-ref="90TLD" data-ref-filename="90TLD">TLD</dfn> = <a class="tu ref fn" href="#__xray::getThreadLocalData" title='__xray::getThreadLocalData' data-use='c' data-ref="__xray::getThreadLocalData" data-ref-filename="__xray..getThreadLocalData">getThreadLocalData</a>();</td></tr>
<tr><th id="161">161</th><td>  <a class="type" href="xray_utils.h.html#__xray::LogWriter" title='__xray::LogWriter' data-ref="__xray::LogWriter" data-ref-filename="__xray..LogWriter">LogWriter</a> *<dfn class="local col1 decl" id="91LW" title='LW' data-type='__xray::LogWriter *' data-ref="91LW" data-ref-filename="91LW">LW</dfn> = <a class="tu ref fn" href="#__xray::getGlobalLog" title='__xray::getGlobalLog' data-use='c' data-ref="__xray::getGlobalLog" data-ref-filename="__xray..getGlobalLog">getGlobalLog</a>();</td></tr>
<tr><th id="162">162</th><td>  <b>if</b> (<a class="local col1 ref" href="#91LW" title='LW' data-ref="91LW" data-ref-filename="91LW">LW</a> == <b>nullptr</b>)</td></tr>
<tr><th id="163">163</th><td>    <b>return</b>;</td></tr>
<tr><th id="164">164</th><td></td></tr>
<tr><th id="165">165</th><td>  <i>// Use a simple recursion guard, to handle cases where we're already logging</i></td></tr>
<tr><th id="166">166</th><td><i>  // and for one reason or another, this function gets called again in the same</i></td></tr>
<tr><th id="167">167</th><td><i>  // thread.</i></td></tr>
<tr><th id="168">168</th><td>  <a class="type" href="xray_recursion_guard.h.html#__xray::RecursionGuard" title='__xray::RecursionGuard' data-ref="__xray::RecursionGuard" data-ref-filename="__xray..RecursionGuard">RecursionGuard</a> <dfn class="local col2 decl" id="92G" title='G' data-type='__xray::RecursionGuard' data-ref="92G" data-ref-filename="92G">G</dfn><a class="ref fn" href="xray_recursion_guard.h.html#__xray::RecursionGuard::RecursionGuard" title='__xray::RecursionGuard::RecursionGuard' data-ref="__xray::RecursionGuard::RecursionGuard" data-ref-filename="__xray..RecursionGuard..RecursionGuard">(</a><a class="ref" href="#__xray::Guard" title='__xray::Guard' data-ref="__xray::Guard" data-ref-filename="__xray..Guard">Guard</a>);</td></tr>
<tr><th id="169">169</th><td>  <b>if</b> (!<a class="ref fn fake" href="xray_recursion_guard.h.html#__xray::RecursionGuard::operatorbool" title='__xray::RecursionGuard::operator bool' data-ref="__xray::RecursionGuard::operatorbool" data-ref-filename="__xray..RecursionGuard..operatorbool"></a><a class="local col2 ref" href="#92G" title='G' data-ref="92G" data-ref-filename="92G">G</a>)</td></tr>
<tr><th id="170">170</th><td>    <b>return</b>;</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="local col3 decl" id="93CPU" title='CPU' data-type='uint8_t' data-ref="93CPU" data-ref-filename="93CPU">CPU</dfn> = <var>0</var>;</td></tr>
<tr><th id="173">173</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="94TSC" title='TSC' data-type='uint64_t' data-ref="94TSC" data-ref-filename="94TSC">TSC</dfn> = <a class="local col9 ref" href="#89ReadTSC" title='ReadTSC' data-ref="89ReadTSC" data-ref-filename="89ReadTSC">ReadTSC</a>(<a class="local col3 ref" href="#93CPU" title='CPU' data-ref="93CPU" data-ref-filename="93CPU">CPU</a>);</td></tr>
<tr><th id="174">174</th><td></td></tr>
<tr><th id="175">175</th><td>  <b>switch</b> (<a class="local col8 ref" href="#88Type" title='Type' data-ref="88Type" data-ref-filename="88Type">Type</a>) {</td></tr>
<tr><th id="176">176</th><td>  <b>case</b> <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a>::<a class="enum" href="../../include/xray/xray_interface.h.html#ENTRY" title='ENTRY' data-ref="ENTRY" data-ref-filename="ENTRY">ENTRY</a>:</td></tr>
<tr><th id="177">177</th><td>  <b>case</b> <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a>::<a class="enum" href="../../include/xray/xray_interface.h.html#LOG_ARGS_ENTRY" title='LOG_ARGS_ENTRY' data-ref="LOG_ARGS_ENTRY" data-ref-filename="LOG_ARGS_ENTRY">LOG_ARGS_ENTRY</a>: {</td></tr>
<tr><th id="178">178</th><td>    <i>// Short circuit if we've reached the maximum depth of the stack.</i></td></tr>
<tr><th id="179">179</th><td>    <b>if</b> (<a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a>++ &gt;= <a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackSize" title='__xray::(anonymous namespace)::ThreadLocalData::StackSize' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackSize" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackSize">StackSize</a>)</td></tr>
<tr><th id="180">180</th><td>      <b>return</b>;</td></tr>
<tr><th id="181">181</th><td></td></tr>
<tr><th id="182">182</th><td>    <i>// When we encounter an entry event, we keep track of the TSC and the CPU,</i></td></tr>
<tr><th id="183">183</th><td><i>    // and put it in the stack.</i></td></tr>
<tr><th id="184">184</th><td>    <a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a> <a class="tu ref fn fake" href="#47" title='__xray::(anonymous namespace)::StackEntry::StackEntry' data-use='c' data-ref="__xray::(anonymousnamespace)::StackEntry::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..StackEntry"></a><dfn class="local col5 decl" id="95E" title='E' data-type='__xray::(anonymous namespace)::StackEntry' data-ref="95E" data-ref-filename="95E">E</dfn>;</td></tr>
<tr><th id="185">185</th><td>    <a class="local col5 ref" href="#95E" title='E' data-ref="95E" data-ref-filename="95E">E</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::StackEntry::FuncId" title='__xray::(anonymous namespace)::StackEntry::FuncId' data-use='w' data-ref="__xray::(anonymousnamespace)::StackEntry::FuncId" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..FuncId">FuncId</a> = <a class="local col7 ref" href="#87FuncId" title='FuncId' data-ref="87FuncId" data-ref-filename="87FuncId">FuncId</a>;</td></tr>
<tr><th id="186">186</th><td>    <a class="local col5 ref" href="#95E" title='E' data-ref="95E" data-ref-filename="95E">E</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::StackEntry::CPU" title='__xray::(anonymous namespace)::StackEntry::CPU' data-use='w' data-ref="__xray::(anonymousnamespace)::StackEntry::CPU" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..CPU">CPU</a> = <a class="local col3 ref" href="#93CPU" title='CPU' data-ref="93CPU" data-ref-filename="93CPU">CPU</a>;</td></tr>
<tr><th id="187">187</th><td>    <a class="local col5 ref" href="#95E" title='E' data-ref="95E" data-ref-filename="95E">E</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::StackEntry::Type" title='__xray::(anonymous namespace)::StackEntry::Type' data-use='w' data-ref="__xray::(anonymousnamespace)::StackEntry::Type" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..Type">Type</a> = <a class="local col8 ref" href="#88Type" title='Type' data-ref="88Type" data-ref-filename="88Type">Type</a>;</td></tr>
<tr><th id="188">188</th><td>    <a class="local col5 ref" href="#95E" title='E' data-ref="95E" data-ref-filename="95E">E</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::StackEntry::TSC" title='__xray::(anonymous namespace)::StackEntry::TSC' data-use='w' data-ref="__xray::(anonymousnamespace)::StackEntry::TSC" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..TSC">TSC</a> = <a class="local col4 ref" href="#94TSC" title='TSC' data-ref="94TSC" data-ref-filename="94TSC">TSC</a>;</td></tr>
<tr><th id="189">189</th><td>    <em>auto</em> <dfn class="local col6 decl" id="96StackEntryPtr" title='StackEntryPtr' data-type='char *' data-ref="96StackEntryPtr" data-ref-filename="96StackEntryPtr">StackEntryPtr</dfn> = <b>static_cast</b>&lt;<em>char</em> *&gt;(<a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" title='__xray::(anonymous namespace)::ThreadLocalData::ShadowStack' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..ShadowStack">ShadowStack</a>) +</td></tr>
<tr><th id="190">190</th><td>                         (<b>sizeof</b>(<a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a>) * (<a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a> - <var>1</var>));</td></tr>
<tr><th id="191">191</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_memcpy" title='__sanitizer::internal_memcpy' data-ref="__sanitizer::internal_memcpy" data-ref-filename="__sanitizer..internal_memcpy">internal_memcpy</a>(<a class="local col6 ref" href="#96StackEntryPtr" title='StackEntryPtr' data-ref="96StackEntryPtr" data-ref-filename="96StackEntryPtr">StackEntryPtr</a>, &amp;<a class="local col5 ref" href="#95E" title='E' data-ref="95E" data-ref-filename="95E">E</a>, <b>sizeof</b>(<a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a>));</td></tr>
<tr><th id="192">192</th><td>    <b>break</b>;</td></tr>
<tr><th id="193">193</th><td>  }</td></tr>
<tr><th id="194">194</th><td>  <b>case</b> <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a>::<a class="enum" href="../../include/xray/xray_interface.h.html#EXIT" title='EXIT' data-ref="EXIT" data-ref-filename="EXIT">EXIT</a>:</td></tr>
<tr><th id="195">195</th><td>  <b>case</b> <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a>::<a class="enum" href="../../include/xray/xray_interface.h.html#TAIL" title='TAIL' data-ref="TAIL" data-ref-filename="TAIL">TAIL</a>: {</td></tr>
<tr><th id="196">196</th><td>    <b>if</b> (<a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a> == <var>0</var>)</td></tr>
<tr><th id="197">197</th><td>      <b>break</b>;</td></tr>
<tr><th id="198">198</th><td></td></tr>
<tr><th id="199">199</th><td>    <b>if</b> (--<a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a> &gt;= <a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackSize" title='__xray::(anonymous namespace)::ThreadLocalData::StackSize' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackSize" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackSize">StackSize</a>)</td></tr>
<tr><th id="200">200</th><td>      <b>return</b>;</td></tr>
<tr><th id="201">201</th><td></td></tr>
<tr><th id="202">202</th><td>    <i>// When we encounter an exit event, we check whether all the following are</i></td></tr>
<tr><th id="203">203</th><td><i>    // true:</i></td></tr>
<tr><th id="204">204</th><td><i>    //</i></td></tr>
<tr><th id="205">205</th><td><i>    // - The Function ID is the same as the most recent entry in the stack.</i></td></tr>
<tr><th id="206">206</th><td><i>    // - The CPU is the same as the most recent entry in the stack.</i></td></tr>
<tr><th id="207">207</th><td><i>    // - The Delta of the TSCs is less than the threshold amount of time we're</i></td></tr>
<tr><th id="208">208</th><td><i>    //   looking to record.</i></td></tr>
<tr><th id="209">209</th><td><i>    //</i></td></tr>
<tr><th id="210">210</th><td><i>    // If all of these conditions are true, we pop the stack and don't write a</i></td></tr>
<tr><th id="211">211</th><td><i>    // record and move the record offset back.</i></td></tr>
<tr><th id="212">212</th><td>    <a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a> <a class="tu ref fn fake" href="#47" title='__xray::(anonymous namespace)::StackEntry::StackEntry' data-use='c' data-ref="__xray::(anonymousnamespace)::StackEntry::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..StackEntry"></a><dfn class="local col7 decl" id="97StackTop" title='StackTop' data-type='__xray::(anonymous namespace)::StackEntry' data-ref="97StackTop" data-ref-filename="97StackTop">StackTop</dfn>;</td></tr>
<tr><th id="213">213</th><td>    <em>auto</em> <dfn class="local col8 decl" id="98StackEntryPtr" title='StackEntryPtr' data-type='char *' data-ref="98StackEntryPtr" data-ref-filename="98StackEntryPtr">StackEntryPtr</dfn> = <b>static_cast</b>&lt;<em>char</em> *&gt;(<a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" title='__xray::(anonymous namespace)::ThreadLocalData::ShadowStack' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..ShadowStack">ShadowStack</a>) +</td></tr>
<tr><th id="214">214</th><td>                         (<b>sizeof</b>(<a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a>) * <a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a>);</td></tr>
<tr><th id="215">215</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_memcpy" title='__sanitizer::internal_memcpy' data-ref="__sanitizer::internal_memcpy" data-ref-filename="__sanitizer..internal_memcpy">internal_memcpy</a>(&amp;<a class="local col7 ref" href="#97StackTop" title='StackTop' data-ref="97StackTop" data-ref-filename="97StackTop">StackTop</a>, <a class="local col8 ref" href="#98StackEntryPtr" title='StackEntryPtr' data-ref="98StackEntryPtr" data-ref-filename="98StackEntryPtr">StackEntryPtr</a>, <b>sizeof</b>(<a class="tu type" href="#__xray::(anonymousnamespace)::StackEntry" title='__xray::(anonymous namespace)::StackEntry' data-ref="__xray::(anonymousnamespace)::StackEntry" data-ref-filename="__xray..(anonymousnamespace)..StackEntry">StackEntry</a>));</td></tr>
<tr><th id="216">216</th><td>    <b>if</b> (<a class="local col7 ref" href="#97StackTop" title='StackTop' data-ref="97StackTop" data-ref-filename="97StackTop">StackTop</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::StackEntry::FuncId" title='__xray::(anonymous namespace)::StackEntry::FuncId' data-use='r' data-ref="__xray::(anonymousnamespace)::StackEntry::FuncId" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..FuncId">FuncId</a> == <a class="local col7 ref" href="#87FuncId" title='FuncId' data-ref="87FuncId" data-ref-filename="87FuncId">FuncId</a> &amp;&amp; <a class="local col7 ref" href="#97StackTop" title='StackTop' data-ref="97StackTop" data-ref-filename="97StackTop">StackTop</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::StackEntry::CPU" title='__xray::(anonymous namespace)::StackEntry::CPU' data-use='r' data-ref="__xray::(anonymousnamespace)::StackEntry::CPU" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..CPU">CPU</a> == <a class="local col3 ref" href="#93CPU" title='CPU' data-ref="93CPU" data-ref-filename="93CPU">CPU</a> &amp;&amp;</td></tr>
<tr><th id="217">217</th><td>        <a class="local col7 ref" href="#97StackTop" title='StackTop' data-ref="97StackTop" data-ref-filename="97StackTop">StackTop</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::StackEntry::TSC" title='__xray::(anonymous namespace)::StackEntry::TSC' data-use='r' data-ref="__xray::(anonymousnamespace)::StackEntry::TSC" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..TSC">TSC</a> &lt; <a class="local col4 ref" href="#94TSC" title='TSC' data-ref="94TSC" data-ref-filename="94TSC">TSC</a>) {</td></tr>
<tr><th id="218">218</th><td>      <em>auto</em> <dfn class="local col9 decl" id="99Delta" title='Delta' data-type='unsigned long' data-ref="99Delta" data-ref-filename="99Delta">Delta</dfn> = <a class="local col4 ref" href="#94TSC" title='TSC' data-ref="94TSC" data-ref-filename="94TSC">TSC</a> - <a class="local col7 ref" href="#97StackTop" title='StackTop' data-ref="97StackTop" data-ref-filename="97StackTop">StackTop</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::StackEntry::TSC" title='__xray::(anonymous namespace)::StackEntry::TSC' data-use='r' data-ref="__xray::(anonymousnamespace)::StackEntry::TSC" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..TSC">TSC</a>;</td></tr>
<tr><th id="219">219</th><td>      <b>if</b> (<a class="local col9 ref" href="#99Delta" title='Delta' data-ref="99Delta" data-ref-filename="99Delta">Delta</a> &lt; <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu ref" href="#__xray::ThresholdTicks" title='__xray::ThresholdTicks' data-use='a' data-ref="__xray::ThresholdTicks" data-ref-filename="__xray..ThresholdTicks">ThresholdTicks</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>)) {</td></tr>
<tr><th id="220">220</th><td>        <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#316" title="" data-ref="_M/DCHECK">DCHECK</a>(TLD.BufferOffset &gt; <var>0</var>);</td></tr>
<tr><th id="221">221</th><td>        <a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a> -= <a class="local col7 ref" href="#97StackTop" title='StackTop' data-ref="97StackTop" data-ref-filename="97StackTop">StackTop</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::StackEntry::Type" title='__xray::(anonymous namespace)::StackEntry::Type' data-use='r' data-ref="__xray::(anonymousnamespace)::StackEntry::Type" data-ref-filename="__xray..(anonymousnamespace)..StackEntry..Type">Type</a> == <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a>::<a class="enum" href="../../include/xray/xray_interface.h.html#ENTRY" title='ENTRY' data-ref="ENTRY" data-ref-filename="ENTRY">ENTRY</a> ? <var>1</var> : <var>2</var>;</td></tr>
<tr><th id="222">222</th><td>        <b>return</b>;</td></tr>
<tr><th id="223">223</th><td>      }</td></tr>
<tr><th id="224">224</th><td>    }</td></tr>
<tr><th id="225">225</th><td>    <b>break</b>;</td></tr>
<tr><th id="226">226</th><td>  }</td></tr>
<tr><th id="227">227</th><td>  <b>default</b>:</td></tr>
<tr><th id="228">228</th><td>    <i>// Should be unreachable.</i></td></tr>
<tr><th id="229">229</th><td>    <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#316" title="" data-ref="_M/DCHECK">DCHECK</a>(<b>false</b> &amp;&amp; <q>"Unsupported XRayEntryType encountered."</q>);</td></tr>
<tr><th id="230">230</th><td>    <b>break</b>;</td></tr>
<tr><th id="231">231</th><td>  }</td></tr>
<tr><th id="232">232</th><td></td></tr>
<tr><th id="233">233</th><td>  <i>// First determine whether the delta between the function's enter record and</i></td></tr>
<tr><th id="234">234</th><td><i>  // the exit record is higher than the threshold.</i></td></tr>
<tr><th id="235">235</th><td>  <a class="type" href="../../include/xray/xray_records.h.html#__xray::XRayRecord" title='__xray::XRayRecord' data-ref="__xray::XRayRecord" data-ref-filename="__xray..XRayRecord">XRayRecord</a> <a class="ref fn fake" href="../../include/xray/xray_records.h.html#72" title='__xray::XRayRecord::XRayRecord' data-ref="__xray::XRayRecord::XRayRecord" data-ref-filename="__xray..XRayRecord..XRayRecord"></a><dfn class="local col0 decl" id="100R" title='R' data-type='__xray::XRayRecord' data-ref="100R" data-ref-filename="100R">R</dfn>;</td></tr>
<tr><th id="236">236</th><td>  <a class="local col0 ref" href="#100R" title='R' data-ref="100R" data-ref-filename="100R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayRecord::RecordType" title='__xray::XRayRecord::RecordType' data-ref="__xray::XRayRecord::RecordType" data-ref-filename="__xray..XRayRecord..RecordType">RecordType</a> = <a class="type" href="../../include/xray/xray_records.h.html#__xray::RecordTypes" title='__xray::RecordTypes' data-ref="__xray::RecordTypes" data-ref-filename="__xray..RecordTypes">RecordTypes</a>::<a class="enum" href="../../include/xray/xray_records.h.html#__xray::NORMAL" title='__xray::NORMAL' data-ref="__xray::NORMAL" data-ref-filename="__xray..NORMAL">NORMAL</a>;</td></tr>
<tr><th id="237">237</th><td>  <a class="local col0 ref" href="#100R" title='R' data-ref="100R" data-ref-filename="100R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayRecord::CPU" title='__xray::XRayRecord::CPU' data-ref="__xray::XRayRecord::CPU" data-ref-filename="__xray..XRayRecord..CPU">CPU</a> = <a class="local col3 ref" href="#93CPU" title='CPU' data-ref="93CPU" data-ref-filename="93CPU">CPU</a>;</td></tr>
<tr><th id="238">238</th><td>  <a class="local col0 ref" href="#100R" title='R' data-ref="100R" data-ref-filename="100R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayRecord::TSC" title='__xray::XRayRecord::TSC' data-ref="__xray::XRayRecord::TSC" data-ref-filename="__xray..XRayRecord..TSC">TSC</a> = <a class="local col4 ref" href="#94TSC" title='TSC' data-ref="94TSC" data-ref-filename="94TSC">TSC</a>;</td></tr>
<tr><th id="239">239</th><td>  <a class="local col0 ref" href="#100R" title='R' data-ref="100R" data-ref-filename="100R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayRecord::TId" title='__xray::XRayRecord::TId' data-ref="__xray::XRayRecord::TId" data-ref-filename="__xray..XRayRecord..TId">TId</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::GetTid" title='__sanitizer::GetTid' data-ref="__sanitizer::GetTid" data-ref-filename="__sanitizer..GetTid">GetTid</a>(); </td></tr>
<tr><th id="240">240</th><td>  <a class="local col0 ref" href="#100R" title='R' data-ref="100R" data-ref-filename="100R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayRecord::PId" title='__xray::XRayRecord::PId' data-ref="__xray::XRayRecord::PId" data-ref-filename="__xray..XRayRecord..PId">PId</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_getpid" title='__sanitizer::internal_getpid' data-ref="__sanitizer::internal_getpid" data-ref-filename="__sanitizer..internal_getpid">internal_getpid</a>(); </td></tr>
<tr><th id="241">241</th><td>  <a class="local col0 ref" href="#100R" title='R' data-ref="100R" data-ref-filename="100R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayRecord::Type" title='__xray::XRayRecord::Type' data-ref="__xray::XRayRecord::Type" data-ref-filename="__xray..XRayRecord..Type">Type</a> = <a class="local col8 ref" href="#88Type" title='Type' data-ref="88Type" data-ref-filename="88Type">Type</a>;</td></tr>
<tr><th id="242">242</th><td>  <a class="local col0 ref" href="#100R" title='R' data-ref="100R" data-ref-filename="100R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayRecord::FuncId" title='__xray::XRayRecord::FuncId' data-ref="__xray::XRayRecord::FuncId" data-ref-filename="__xray..XRayRecord..FuncId">FuncId</a> = <a class="local col7 ref" href="#87FuncId" title='FuncId' data-ref="87FuncId" data-ref-filename="87FuncId">FuncId</a>;</td></tr>
<tr><th id="243">243</th><td>  <em>auto</em> <dfn class="local col1 decl" id="101FirstEntry" title='FirstEntry' data-type='__xray::XRayRecord *' data-ref="101FirstEntry" data-ref-filename="101FirstEntry">FirstEntry</dfn> = <b>reinterpret_cast</b>&lt;<a class="type" href="../../include/xray/xray_records.h.html#__xray::XRayRecord" title='__xray::XRayRecord' data-ref="__xray::XRayRecord" data-ref-filename="__xray..XRayRecord">XRayRecord</a> *&gt;(<a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" title='__xray::(anonymous namespace)::ThreadLocalData::InMemoryBuffer' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..InMemoryBuffer">InMemoryBuffer</a>);</td></tr>
<tr><th id="244">244</th><td>  <a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_memcpy" title='__sanitizer::internal_memcpy' data-ref="__sanitizer::internal_memcpy" data-ref-filename="__sanitizer..internal_memcpy">internal_memcpy</a>(<a class="local col1 ref" href="#101FirstEntry" title='FirstEntry' data-ref="101FirstEntry" data-ref-filename="101FirstEntry">FirstEntry</a> + <a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a>, &amp;<a class="local col0 ref" href="#100R" title='R' data-ref="100R" data-ref-filename="100R">R</a>, <b>sizeof</b>(<a class="local col0 ref" href="#100R" title='R' data-ref="100R" data-ref-filename="100R">R</a>));</td></tr>
<tr><th id="245">245</th><td>  <b>if</b> (++<a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a> == <a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferSize" title='__xray::(anonymous namespace)::ThreadLocalData::BufferSize' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferSize" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferSize">BufferSize</a>) {</td></tr>
<tr><th id="246">246</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col2 decl" id="102Lock" title='Lock' data-type='__sanitizer::SpinMutexLock' data-ref="102Lock" data-ref-filename="102Lock">Lock</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::LogMutex" title='__xray::LogMutex' data-use='a' data-ref="__xray::LogMutex" data-ref-filename="__xray..LogMutex">LogMutex</a>);</td></tr>
<tr><th id="247">247</th><td>    <a class="local col1 ref" href="#91LW" title='LW' data-ref="91LW" data-ref-filename="91LW">LW</a>-&gt;<a class="ref fn" href="xray_utils.h.html#__xray::LogWriter::WriteAll" title='__xray::LogWriter::WriteAll' data-ref="__xray::LogWriter::WriteAll" data-ref-filename="__xray..LogWriter..WriteAll">WriteAll</a>(<b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(<a class="local col1 ref" href="#101FirstEntry" title='FirstEntry' data-ref="101FirstEntry" data-ref-filename="101FirstEntry">FirstEntry</a>),</td></tr>
<tr><th id="248">248</th><td>                 <b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(<a class="local col1 ref" href="#101FirstEntry" title='FirstEntry' data-ref="101FirstEntry" data-ref-filename="101FirstEntry">FirstEntry</a> + <a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a>));</td></tr>
<tr><th id="249">249</th><td>    <a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a> = <var>0</var>;</td></tr>
<tr><th id="250">250</th><td>    <a class="local col0 ref" href="#90TLD" title='TLD' data-ref="90TLD" data-ref-filename="90TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a> = <var>0</var>;</td></tr>
<tr><th id="251">251</th><td>  }</td></tr>
<tr><th id="252">252</th><td>}</td></tr>
<tr><th id="253">253</th><td></td></tr>
<tr><th id="254">254</th><td><b>template</b> &lt;<b>class</b> RDTSC&gt;</td></tr>
<tr><th id="255">255</th><td><em>void</em> <dfn class="decl def fn" id="__xray::InMemoryRawLogWithArg" title='__xray::InMemoryRawLogWithArg' data-ref="__xray::InMemoryRawLogWithArg" data-ref-filename="__xray..InMemoryRawLogWithArg">InMemoryRawLogWithArg</dfn>(<a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col3 decl" id="103FuncId" title='FuncId' data-type='int32_t' data-ref="103FuncId" data-ref-filename="103FuncId">FuncId</dfn>, <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a> <dfn class="local col4 decl" id="104Type" title='Type' data-type='XRayEntryType' data-ref="104Type" data-ref-filename="104Type">Type</dfn>, <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="105Arg1" title='Arg1' data-type='uint64_t' data-ref="105Arg1" data-ref-filename="105Arg1">Arg1</dfn>,</td></tr>
<tr><th id="256">256</th><td>                           RDTSC <dfn class="local col6 decl" id="106ReadTSC" title='ReadTSC' data-type='RDTSC' data-ref="106ReadTSC" data-ref-filename="106ReadTSC">ReadTSC</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="257">257</th><td>  <em>auto</em> &amp;<dfn class="local col7 decl" id="107TLD" title='TLD' data-type='__xray::(anonymous namespace)::ThreadLocalData &amp;' data-ref="107TLD" data-ref-filename="107TLD">TLD</dfn> = <a class="tu ref fn" href="#__xray::getThreadLocalData" title='__xray::getThreadLocalData' data-use='c' data-ref="__xray::getThreadLocalData" data-ref-filename="__xray..getThreadLocalData">getThreadLocalData</a>();</td></tr>
<tr><th id="258">258</th><td>  <em>auto</em> <dfn class="local col8 decl" id="108FirstEntry" title='FirstEntry' data-type='__xray::XRayArgPayload *' data-ref="108FirstEntry" data-ref-filename="108FirstEntry">FirstEntry</dfn> =</td></tr>
<tr><th id="259">259</th><td>      <b>reinterpret_cast</b>&lt;<a class="type" href="../../include/xray/xray_records.h.html#__xray::XRayArgPayload" title='__xray::XRayArgPayload' data-ref="__xray::XRayArgPayload" data-ref-filename="__xray..XRayArgPayload">XRayArgPayload</a> *&gt;(<a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" title='__xray::(anonymous namespace)::ThreadLocalData::InMemoryBuffer' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..InMemoryBuffer">InMemoryBuffer</a>);</td></tr>
<tr><th id="260">260</th><td>  <em>const</em> <em>auto</em> &amp;<dfn class="local col9 decl" id="109BuffLen" title='BuffLen' data-type='const unsigned long &amp;' data-ref="109BuffLen" data-ref-filename="109BuffLen">BuffLen</dfn> = <a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferSize" title='__xray::(anonymous namespace)::ThreadLocalData::BufferSize' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferSize" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferSize">BufferSize</a>;</td></tr>
<tr><th id="261">261</th><td>  <a class="type" href="xray_utils.h.html#__xray::LogWriter" title='__xray::LogWriter' data-ref="__xray::LogWriter" data-ref-filename="__xray..LogWriter">LogWriter</a> *<dfn class="local col0 decl" id="110LW" title='LW' data-type='__xray::LogWriter *' data-ref="110LW" data-ref-filename="110LW">LW</dfn> = <a class="tu ref fn" href="#__xray::getGlobalLog" title='__xray::getGlobalLog' data-use='c' data-ref="__xray::getGlobalLog" data-ref-filename="__xray..getGlobalLog">getGlobalLog</a>();</td></tr>
<tr><th id="262">262</th><td>  <b>if</b> (<a class="local col0 ref" href="#110LW" title='LW' data-ref="110LW" data-ref-filename="110LW">LW</a> == <b>nullptr</b>)</td></tr>
<tr><th id="263">263</th><td>    <b>return</b>;</td></tr>
<tr><th id="264">264</th><td></td></tr>
<tr><th id="265">265</th><td>  <i>// First we check whether there's enough space to write the data consecutively</i></td></tr>
<tr><th id="266">266</th><td><i>  // in the thread-local buffer. If not, we first flush the buffer before</i></td></tr>
<tr><th id="267">267</th><td><i>  // attempting to write the two records that must be consecutive.</i></td></tr>
<tr><th id="268">268</th><td>  <b>if</b> (<a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a> + <var>2</var> &gt; <a class="local col9 ref" href="#109BuffLen" title='BuffLen' data-ref="109BuffLen" data-ref-filename="109BuffLen">BuffLen</a>) {</td></tr>
<tr><th id="269">269</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col1 decl" id="111Lock" title='Lock' data-type='__sanitizer::SpinMutexLock' data-ref="111Lock" data-ref-filename="111Lock">Lock</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::LogMutex" title='__xray::LogMutex' data-use='a' data-ref="__xray::LogMutex" data-ref-filename="__xray..LogMutex">LogMutex</a>);</td></tr>
<tr><th id="270">270</th><td>    <a class="local col0 ref" href="#110LW" title='LW' data-ref="110LW" data-ref-filename="110LW">LW</a>-&gt;<a class="ref fn" href="xray_utils.h.html#__xray::LogWriter::WriteAll" title='__xray::LogWriter::WriteAll' data-ref="__xray::LogWriter::WriteAll" data-ref-filename="__xray..LogWriter..WriteAll">WriteAll</a>(<b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(<a class="local col8 ref" href="#108FirstEntry" title='FirstEntry' data-ref="108FirstEntry" data-ref-filename="108FirstEntry">FirstEntry</a>),</td></tr>
<tr><th id="271">271</th><td>                 <b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(<a class="local col8 ref" href="#108FirstEntry" title='FirstEntry' data-ref="108FirstEntry" data-ref-filename="108FirstEntry">FirstEntry</a> + <a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a>));</td></tr>
<tr><th id="272">272</th><td>    <a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a> = <var>0</var>;</td></tr>
<tr><th id="273">273</th><td>    <a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a> = <var>0</var>;</td></tr>
<tr><th id="274">274</th><td>  }</td></tr>
<tr><th id="275">275</th><td></td></tr>
<tr><th id="276">276</th><td>  <i>// Then we write the "we have an argument" record.</i></td></tr>
<tr><th id="277">277</th><td>  InMemoryRawLog(<a class="local col3 ref" href="#103FuncId" title='FuncId' data-ref="103FuncId" data-ref-filename="103FuncId">FuncId</a>, <a class="local col4 ref" href="#104Type" title='Type' data-ref="104Type" data-ref-filename="104Type">Type</a>, <a class="local col6 ref" href="#106ReadTSC" title='ReadTSC' data-ref="106ReadTSC" data-ref-filename="106ReadTSC">ReadTSC</a>);</td></tr>
<tr><th id="278">278</th><td></td></tr>
<tr><th id="279">279</th><td>  <a class="type" href="xray_recursion_guard.h.html#__xray::RecursionGuard" title='__xray::RecursionGuard' data-ref="__xray::RecursionGuard" data-ref-filename="__xray..RecursionGuard">RecursionGuard</a> <dfn class="local col2 decl" id="112G" title='G' data-type='__xray::RecursionGuard' data-ref="112G" data-ref-filename="112G">G</dfn><a class="ref fn" href="xray_recursion_guard.h.html#__xray::RecursionGuard::RecursionGuard" title='__xray::RecursionGuard::RecursionGuard' data-ref="__xray::RecursionGuard::RecursionGuard" data-ref-filename="__xray..RecursionGuard..RecursionGuard">(</a><a class="ref" href="#__xray::Guard" title='__xray::Guard' data-ref="__xray::Guard" data-ref-filename="__xray..Guard">Guard</a>);</td></tr>
<tr><th id="280">280</th><td>  <b>if</b> (!<a class="ref fn fake" href="xray_recursion_guard.h.html#__xray::RecursionGuard::operatorbool" title='__xray::RecursionGuard::operator bool' data-ref="__xray::RecursionGuard::operatorbool" data-ref-filename="__xray..RecursionGuard..operatorbool"></a><a class="local col2 ref" href="#112G" title='G' data-ref="112G" data-ref-filename="112G">G</a>)</td></tr>
<tr><th id="281">281</th><td>    <b>return</b>;</td></tr>
<tr><th id="282">282</th><td></td></tr>
<tr><th id="283">283</th><td>  <i>// And, from here on write the arg payload.</i></td></tr>
<tr><th id="284">284</th><td>  <a class="type" href="../../include/xray/xray_records.h.html#__xray::XRayArgPayload" title='__xray::XRayArgPayload' data-ref="__xray::XRayArgPayload" data-ref-filename="__xray..XRayArgPayload">XRayArgPayload</a> <a class="ref fn fake" href="../../include/xray/xray_records.h.html#106" title='__xray::XRayArgPayload::XRayArgPayload' data-ref="__xray::XRayArgPayload::XRayArgPayload" data-ref-filename="__xray..XRayArgPayload..XRayArgPayload"></a><dfn class="local col3 decl" id="113R" title='R' data-type='__xray::XRayArgPayload' data-ref="113R" data-ref-filename="113R">R</dfn>;</td></tr>
<tr><th id="285">285</th><td>  <a class="local col3 ref" href="#113R" title='R' data-ref="113R" data-ref-filename="113R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayArgPayload::RecordType" title='__xray::XRayArgPayload::RecordType' data-ref="__xray::XRayArgPayload::RecordType" data-ref-filename="__xray..XRayArgPayload..RecordType">RecordType</a> = <a class="type" href="../../include/xray/xray_records.h.html#__xray::RecordTypes" title='__xray::RecordTypes' data-ref="__xray::RecordTypes" data-ref-filename="__xray..RecordTypes">RecordTypes</a>::<a class="enum" href="../../include/xray/xray_records.h.html#__xray::ARG_PAYLOAD" title='__xray::ARG_PAYLOAD' data-ref="__xray::ARG_PAYLOAD" data-ref-filename="__xray..ARG_PAYLOAD">ARG_PAYLOAD</a>;</td></tr>
<tr><th id="286">286</th><td>  <a class="local col3 ref" href="#113R" title='R' data-ref="113R" data-ref-filename="113R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayArgPayload::FuncId" title='__xray::XRayArgPayload::FuncId' data-ref="__xray::XRayArgPayload::FuncId" data-ref-filename="__xray..XRayArgPayload..FuncId">FuncId</a> = <a class="local col3 ref" href="#103FuncId" title='FuncId' data-ref="103FuncId" data-ref-filename="103FuncId">FuncId</a>;</td></tr>
<tr><th id="287">287</th><td>  <a class="local col3 ref" href="#113R" title='R' data-ref="113R" data-ref-filename="113R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayArgPayload::TId" title='__xray::XRayArgPayload::TId' data-ref="__xray::XRayArgPayload::TId" data-ref-filename="__xray..XRayArgPayload..TId">TId</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::GetTid" title='__sanitizer::GetTid' data-ref="__sanitizer::GetTid" data-ref-filename="__sanitizer..GetTid">GetTid</a>(); </td></tr>
<tr><th id="288">288</th><td>  <a class="local col3 ref" href="#113R" title='R' data-ref="113R" data-ref-filename="113R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayArgPayload::PId" title='__xray::XRayArgPayload::PId' data-ref="__xray::XRayArgPayload::PId" data-ref-filename="__xray..XRayArgPayload..PId">PId</a> = <a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_getpid" title='__sanitizer::internal_getpid' data-ref="__sanitizer::internal_getpid" data-ref-filename="__sanitizer..internal_getpid">internal_getpid</a>(); </td></tr>
<tr><th id="289">289</th><td>  <a class="local col3 ref" href="#113R" title='R' data-ref="113R" data-ref-filename="113R">R</a>.<a class="ref field" href="../../include/xray/xray_records.h.html#__xray::XRayArgPayload::Arg" title='__xray::XRayArgPayload::Arg' data-ref="__xray::XRayArgPayload::Arg" data-ref-filename="__xray..XRayArgPayload..Arg">Arg</a> = <a class="local col5 ref" href="#105Arg1" title='Arg1' data-ref="105Arg1" data-ref-filename="105Arg1">Arg1</a>;</td></tr>
<tr><th id="290">290</th><td>  <a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_memcpy" title='__sanitizer::internal_memcpy' data-ref="__sanitizer::internal_memcpy" data-ref-filename="__sanitizer..internal_memcpy">internal_memcpy</a>(<a class="local col8 ref" href="#108FirstEntry" title='FirstEntry' data-ref="108FirstEntry" data-ref-filename="108FirstEntry">FirstEntry</a> + <a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a>, &amp;<a class="local col3 ref" href="#113R" title='R' data-ref="113R" data-ref-filename="113R">R</a>, <b>sizeof</b>(<a class="local col3 ref" href="#113R" title='R' data-ref="113R" data-ref-filename="113R">R</a>));</td></tr>
<tr><th id="291">291</th><td>  <b>if</b> (++<a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a> == <a class="local col9 ref" href="#109BuffLen" title='BuffLen' data-ref="109BuffLen" data-ref-filename="109BuffLen">BuffLen</a>) {</td></tr>
<tr><th id="292">292</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col4 decl" id="114Lock" title='Lock' data-type='__sanitizer::SpinMutexLock' data-ref="114Lock" data-ref-filename="114Lock">Lock</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::LogMutex" title='__xray::LogMutex' data-use='a' data-ref="__xray::LogMutex" data-ref-filename="__xray..LogMutex">LogMutex</a>);</td></tr>
<tr><th id="293">293</th><td>    <a class="local col0 ref" href="#110LW" title='LW' data-ref="110LW" data-ref-filename="110LW">LW</a>-&gt;<a class="ref fn" href="xray_utils.h.html#__xray::LogWriter::WriteAll" title='__xray::LogWriter::WriteAll' data-ref="__xray::LogWriter::WriteAll" data-ref-filename="__xray..LogWriter..WriteAll">WriteAll</a>(<b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(<a class="local col8 ref" href="#108FirstEntry" title='FirstEntry' data-ref="108FirstEntry" data-ref-filename="108FirstEntry">FirstEntry</a>),</td></tr>
<tr><th id="294">294</th><td>                 <b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(<a class="local col8 ref" href="#108FirstEntry" title='FirstEntry' data-ref="108FirstEntry" data-ref-filename="108FirstEntry">FirstEntry</a> + <a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a>));</td></tr>
<tr><th id="295">295</th><td>    <a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a> = <var>0</var>;</td></tr>
<tr><th id="296">296</th><td>    <a class="local col7 ref" href="#107TLD" title='TLD' data-ref="107TLD" data-ref-filename="107TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" title='__xray::(anonymous namespace)::ThreadLocalData::StackEntries' data-use='w' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::StackEntries" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..StackEntries">StackEntries</a> = <var>0</var>;</td></tr>
<tr><th id="297">297</th><td>  }</td></tr>
<tr><th id="298">298</th><td>}</td></tr>
<tr><th id="299">299</th><td></td></tr>
<tr><th id="300">300</th><td><em>void</em> <dfn class="decl def fn" id="__xray::basicLoggingHandleArg0RealTSC" title='__xray::basicLoggingHandleArg0RealTSC' data-ref="__xray::basicLoggingHandleArg0RealTSC" data-ref-filename="__xray..basicLoggingHandleArg0RealTSC">basicLoggingHandleArg0RealTSC</dfn>(<a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col5 decl" id="115FuncId" title='FuncId' data-type='int32_t' data-ref="115FuncId" data-ref-filename="115FuncId">FuncId</dfn>,</td></tr>
<tr><th id="301">301</th><td>                                   <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a> <dfn class="local col6 decl" id="116Type" title='Type' data-type='XRayEntryType' data-ref="116Type" data-ref-filename="116Type">Type</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="302">302</th><td>  <a class="ref fn" href="#__xray::InMemoryRawLog" title='__xray::InMemoryRawLog' data-ref="__xray::InMemoryRawLog" data-ref-filename="__xray..InMemoryRawLog">InMemoryRawLog</a>(<a class="local col5 ref" href="#115FuncId" title='FuncId' data-ref="115FuncId" data-ref-filename="115FuncId">FuncId</a>, <a class="local col6 ref" href="#116Type" title='Type' data-ref="116Type" data-ref-filename="116Type">Type</a>, <a class="ref fn" href="xray_x86_64.inc.html#__xray::readTSC" title='__xray::readTSC' data-ref="__xray::readTSC" data-ref-filename="__xray..readTSC">readTSC</a>);</td></tr>
<tr><th id="303">303</th><td>}</td></tr>
<tr><th id="304">304</th><td></td></tr>
<tr><th id="305">305</th><td><em>void</em> <dfn class="decl def fn" id="__xray::basicLoggingHandleArg0EmulateTSC" title='__xray::basicLoggingHandleArg0EmulateTSC' data-ref="__xray::basicLoggingHandleArg0EmulateTSC" data-ref-filename="__xray..basicLoggingHandleArg0EmulateTSC">basicLoggingHandleArg0EmulateTSC</dfn>(<a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col7 decl" id="117FuncId" title='FuncId' data-type='int32_t' data-ref="117FuncId" data-ref-filename="117FuncId">FuncId</dfn>, <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a> <dfn class="local col8 decl" id="118Type" title='Type' data-type='XRayEntryType' data-ref="118Type" data-ref-filename="118Type">Type</dfn>)</td></tr>
<tr><th id="306">306</th><td>    <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="307">307</th><td>  <a class="tu ref fn" href="#__xray::InMemoryRawLog" title='__xray::InMemoryRawLog' data-use='c' data-ref="__xray::InMemoryRawLog" data-ref-filename="__xray..InMemoryRawLog">InMemoryRawLog</a>(<a class="local col7 ref" href="#117FuncId" title='FuncId' data-ref="117FuncId" data-ref-filename="117FuncId">FuncId</a>, <a class="local col8 ref" href="#118Type" title='Type' data-ref="118Type" data-ref-filename="118Type">Type</a>, [](<a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> &amp;<dfn class="local col9 decl" id="119CPU" title='CPU' data-type='uint8_t &amp;' data-ref="119CPU" data-ref-filename="119CPU">CPU</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="308">308</th><td>    <a class="type" href="../../../../include/bits/types/struct_timespec.h.html#timespec" title='timespec' data-ref="timespec" data-ref-filename="timespec">timespec</a> <a class="ref fn fake" href="../../../../include/bits/types/struct_timespec.h.html#10" title='timespec::timespec' data-ref="_ZN8timespecC1Ev" data-ref-filename="_ZN8timespecC1Ev"></a><dfn class="local col0 decl" id="120TS" title='TS' data-type='timespec' data-ref="120TS" data-ref-filename="120TS">TS</dfn>;</td></tr>
<tr><th id="309">309</th><td>    <em>int</em> <dfn class="local col1 decl" id="121result" title='result' data-type='int' data-ref="121result" data-ref-filename="121result">result</dfn> = <a class="ref fn" href="../../../../include/time.h.html#clock_gettime" title='clock_gettime' data-ref="clock_gettime" data-ref-filename="clock_gettime">clock_gettime</a>(<a class="macro" href="../../../../include/bits/time.h.html#46" title="0" data-ref="_M/CLOCK_REALTIME">CLOCK_REALTIME</a>, &amp;<a class="local col0 ref" href="#120TS" title='TS' data-ref="120TS" data-ref-filename="120TS">TS</a>);</td></tr>
<tr><th id="310">310</th><td>    <b>if</b> (<a class="local col1 ref" href="#121result" title='result' data-ref="121result" data-ref-filename="121result">result</a> != <var>0</var>) {</td></tr>
<tr><th id="311">311</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"clock_gettimg(2) return %d, errno=%d."</q>, <a class="local col1 ref" href="#121result" title='result' data-ref="121result" data-ref-filename="121result">result</a>, <em>int</em>(<a class="macro" href="../../../../include/errno.h.html#38" title="(*__errno_location ())" data-ref="_M/errno">errno</a>));</td></tr>
<tr><th id="312">312</th><td>      <a class="local col0 ref" href="#120TS" title='TS' data-ref="120TS" data-ref-filename="120TS">TS</a> <a class="ref fn" href="../../../../include/bits/types/struct_timespec.h.html#10" title='timespec::operator=' data-ref="_ZN8timespecaSEOS_" data-ref-filename="_ZN8timespecaSEOS_">=</a> {<var>0</var>, <var>0</var>};</td></tr>
<tr><th id="313">313</th><td>    }</td></tr>
<tr><th id="314">314</th><td>    <a class="local col9 ref" href="#119CPU" title='CPU' data-ref="119CPU" data-ref-filename="119CPU">CPU</a> = <var>0</var>;</td></tr>
<tr><th id="315">315</th><td>    <b>return</b> <a class="local col0 ref" href="#120TS" title='TS' data-ref="120TS" data-ref-filename="120TS">TS</a>.<a class="ref field" href="../../../../include/bits/types/struct_timespec.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec" data-ref-filename="timespec..tv_sec">tv_sec</a> * <a class="ref" href="xray_tsc.h.html#__xray::NanosecondsPerSecond" title='__xray::NanosecondsPerSecond' data-ref="__xray::NanosecondsPerSecond" data-ref-filename="__xray..NanosecondsPerSecond">NanosecondsPerSecond</a> + <a class="local col0 ref" href="#120TS" title='TS' data-ref="120TS" data-ref-filename="120TS">TS</a>.<a class="ref field" href="../../../../include/bits/types/struct_timespec.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec" data-ref-filename="timespec..tv_nsec">tv_nsec</a>;</td></tr>
<tr><th id="316">316</th><td>  });</td></tr>
<tr><th id="317">317</th><td>}</td></tr>
<tr><th id="318">318</th><td></td></tr>
<tr><th id="319">319</th><td><em>void</em> <dfn class="decl def fn" id="__xray::basicLoggingHandleArg1RealTSC" title='__xray::basicLoggingHandleArg1RealTSC' data-ref="__xray::basicLoggingHandleArg1RealTSC" data-ref-filename="__xray..basicLoggingHandleArg1RealTSC">basicLoggingHandleArg1RealTSC</dfn>(<a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col2 decl" id="122FuncId" title='FuncId' data-type='int32_t' data-ref="122FuncId" data-ref-filename="122FuncId">FuncId</dfn>, <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a> <dfn class="local col3 decl" id="123Type" title='Type' data-type='XRayEntryType' data-ref="123Type" data-ref-filename="123Type">Type</dfn>,</td></tr>
<tr><th id="320">320</th><td>                                   <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="124Arg1" title='Arg1' data-type='uint64_t' data-ref="124Arg1" data-ref-filename="124Arg1">Arg1</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="321">321</th><td>  <a class="ref fn" href="#__xray::InMemoryRawLogWithArg" title='__xray::InMemoryRawLogWithArg' data-ref="__xray::InMemoryRawLogWithArg" data-ref-filename="__xray..InMemoryRawLogWithArg">InMemoryRawLogWithArg</a>(<a class="local col2 ref" href="#122FuncId" title='FuncId' data-ref="122FuncId" data-ref-filename="122FuncId">FuncId</a>, <a class="local col3 ref" href="#123Type" title='Type' data-ref="123Type" data-ref-filename="123Type">Type</a>, <a class="local col4 ref" href="#124Arg1" title='Arg1' data-ref="124Arg1" data-ref-filename="124Arg1">Arg1</a>, <a class="ref fn" href="xray_x86_64.inc.html#__xray::readTSC" title='__xray::readTSC' data-ref="__xray::readTSC" data-ref-filename="__xray..readTSC">readTSC</a>);</td></tr>
<tr><th id="322">322</th><td>}</td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td><em>void</em> <dfn class="decl def fn" id="__xray::basicLoggingHandleArg1EmulateTSC" title='__xray::basicLoggingHandleArg1EmulateTSC' data-ref="__xray::basicLoggingHandleArg1EmulateTSC" data-ref-filename="__xray..basicLoggingHandleArg1EmulateTSC">basicLoggingHandleArg1EmulateTSC</dfn>(<a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col5 decl" id="125FuncId" title='FuncId' data-type='int32_t' data-ref="125FuncId" data-ref-filename="125FuncId">FuncId</dfn>, <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a> <dfn class="local col6 decl" id="126Type" title='Type' data-type='XRayEntryType' data-ref="126Type" data-ref-filename="126Type">Type</dfn>,</td></tr>
<tr><th id="325">325</th><td>                                      <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col7 decl" id="127Arg1" title='Arg1' data-type='uint64_t' data-ref="127Arg1" data-ref-filename="127Arg1">Arg1</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="326">326</th><td>  <a class="tu ref fn" href="#__xray::InMemoryRawLogWithArg" title='__xray::InMemoryRawLogWithArg' data-use='c' data-ref="__xray::InMemoryRawLogWithArg" data-ref-filename="__xray..InMemoryRawLogWithArg">InMemoryRawLogWithArg</a>(</td></tr>
<tr><th id="327">327</th><td>      <a class="local col5 ref" href="#125FuncId" title='FuncId' data-ref="125FuncId" data-ref-filename="125FuncId">FuncId</a>, <a class="local col6 ref" href="#126Type" title='Type' data-ref="126Type" data-ref-filename="126Type">Type</a>, <a class="local col7 ref" href="#127Arg1" title='Arg1' data-ref="127Arg1" data-ref-filename="127Arg1">Arg1</a>, [](<a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> &amp;<dfn class="local col8 decl" id="128CPU" title='CPU' data-type='uint8_t &amp;' data-ref="128CPU" data-ref-filename="128CPU">CPU</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="328">328</th><td>        <a class="type" href="../../../../include/bits/types/struct_timespec.h.html#timespec" title='timespec' data-ref="timespec" data-ref-filename="timespec">timespec</a> <a class="ref fn fake" href="../../../../include/bits/types/struct_timespec.h.html#10" title='timespec::timespec' data-ref="_ZN8timespecC1Ev" data-ref-filename="_ZN8timespecC1Ev"></a><dfn class="local col9 decl" id="129TS" title='TS' data-type='timespec' data-ref="129TS" data-ref-filename="129TS">TS</dfn>;</td></tr>
<tr><th id="329">329</th><td>        <em>int</em> <dfn class="local col0 decl" id="130result" title='result' data-type='int' data-ref="130result" data-ref-filename="130result">result</dfn> = <a class="ref fn" href="../../../../include/time.h.html#clock_gettime" title='clock_gettime' data-ref="clock_gettime" data-ref-filename="clock_gettime">clock_gettime</a>(<a class="macro" href="../../../../include/bits/time.h.html#46" title="0" data-ref="_M/CLOCK_REALTIME">CLOCK_REALTIME</a>, &amp;<a class="local col9 ref" href="#129TS" title='TS' data-ref="129TS" data-ref-filename="129TS">TS</a>);</td></tr>
<tr><th id="330">330</th><td>        <b>if</b> (<a class="local col0 ref" href="#130result" title='result' data-ref="130result" data-ref-filename="130result">result</a> != <var>0</var>) {</td></tr>
<tr><th id="331">331</th><td>          <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"clock_gettimg(2) return %d, errno=%d."</q>, <a class="local col0 ref" href="#130result" title='result' data-ref="130result" data-ref-filename="130result">result</a>, <em>int</em>(<a class="macro" href="../../../../include/errno.h.html#38" title="(*__errno_location ())" data-ref="_M/errno">errno</a>));</td></tr>
<tr><th id="332">332</th><td>          <a class="local col9 ref" href="#129TS" title='TS' data-ref="129TS" data-ref-filename="129TS">TS</a> <a class="ref fn" href="../../../../include/bits/types/struct_timespec.h.html#10" title='timespec::operator=' data-ref="_ZN8timespecaSEOS_" data-ref-filename="_ZN8timespecaSEOS_">=</a> {<var>0</var>, <var>0</var>};</td></tr>
<tr><th id="333">333</th><td>        }</td></tr>
<tr><th id="334">334</th><td>        <a class="local col8 ref" href="#128CPU" title='CPU' data-ref="128CPU" data-ref-filename="128CPU">CPU</a> = <var>0</var>;</td></tr>
<tr><th id="335">335</th><td>        <b>return</b> <a class="local col9 ref" href="#129TS" title='TS' data-ref="129TS" data-ref-filename="129TS">TS</a>.<a class="ref field" href="../../../../include/bits/types/struct_timespec.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec" data-ref-filename="timespec..tv_sec">tv_sec</a> * <a class="ref" href="xray_tsc.h.html#__xray::NanosecondsPerSecond" title='__xray::NanosecondsPerSecond' data-ref="__xray::NanosecondsPerSecond" data-ref-filename="__xray..NanosecondsPerSecond">NanosecondsPerSecond</a> + <a class="local col9 ref" href="#129TS" title='TS' data-ref="129TS" data-ref-filename="129TS">TS</a>.<a class="ref field" href="../../../../include/bits/types/struct_timespec.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec" data-ref-filename="timespec..tv_nsec">tv_nsec</a>;</td></tr>
<tr><th id="336">336</th><td>      });</td></tr>
<tr><th id="337">337</th><td>}</td></tr>
<tr><th id="338">338</th><td></td></tr>
<tr><th id="339">339</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="__xray::TLDDestructor" title='__xray::TLDDestructor' data-type='void __xray::TLDDestructor(void * P)' data-ref="__xray::TLDDestructor" data-ref-filename="__xray..TLDDestructor">TLDDestructor</dfn>(<em>void</em> *<dfn class="local col1 decl" id="131P" title='P' data-type='void *' data-ref="131P" data-ref-filename="131P">P</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="340">340</th><td>  <a class="tu type" href="#__xray::(anonymousnamespace)::ThreadLocalData" title='__xray::(anonymous namespace)::ThreadLocalData' data-ref="__xray::(anonymousnamespace)::ThreadLocalData" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData">ThreadLocalData</a> &amp;<dfn class="local col2 decl" id="132TLD" title='TLD' data-type='__xray::(anonymous namespace)::ThreadLocalData &amp;' data-ref="132TLD" data-ref-filename="132TLD">TLD</dfn> = *<b>reinterpret_cast</b>&lt;<a class="tu type" href="#__xray::(anonymousnamespace)::ThreadLocalData" title='__xray::(anonymous namespace)::ThreadLocalData' data-ref="__xray::(anonymousnamespace)::ThreadLocalData" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData">ThreadLocalData</a> *&gt;(<a class="local col1 ref" href="#131P" title='P' data-ref="131P" data-ref-filename="131P">P</a>);</td></tr>
<tr><th id="341">341</th><td>  <em>auto</em> <dfn class="local col3 decl" id="133ExitGuard" title='ExitGuard' data-type='__sanitizer::RunOnDestruction&lt;(lambda at /fast/tmp/llvm-proj-12/compiler-rt/lib/xray/xray_basic_logging.cpp:341:34)&gt;' data-ref="133ExitGuard" data-ref-filename="133ExitGuard">ExitGuard</dfn> = <a class="tu ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::at_scope_exit" title='__sanitizer::at_scope_exit' data-use='c' data-ref="__sanitizer::at_scope_exit" data-ref-filename="__sanitizer..at_scope_exit">at_scope_exit</a>([&amp;<a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>] {</td></tr>
<tr><th id="342">342</th><td>    <i>// Clean up dynamic resources.</i></td></tr>
<tr><th id="343">343</th><td>    <b>if</b> (<a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" title='__xray::(anonymous namespace)::ThreadLocalData::InMemoryBuffer' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..InMemoryBuffer">InMemoryBuffer</a>)</td></tr>
<tr><th id="344">344</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_internal.h.html#__sanitizer::InternalFree" title='__sanitizer::InternalFree' data-ref="__sanitizer::InternalFree" data-ref-filename="__sanitizer..InternalFree">InternalFree</a>(<a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" title='__xray::(anonymous namespace)::ThreadLocalData::InMemoryBuffer' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..InMemoryBuffer">InMemoryBuffer</a>);</td></tr>
<tr><th id="345">345</th><td>    <b>if</b> (<a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" title='__xray::(anonymous namespace)::ThreadLocalData::ShadowStack' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..ShadowStack">ShadowStack</a>)</td></tr>
<tr><th id="346">346</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_allocator_internal.h.html#__sanitizer::InternalFree" title='__sanitizer::InternalFree' data-ref="__sanitizer::InternalFree" data-ref-filename="__sanitizer..InternalFree">InternalFree</a>(<a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" title='__xray::(anonymous namespace)::ThreadLocalData::ShadowStack' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::ShadowStack" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..ShadowStack">ShadowStack</a>);</td></tr>
<tr><th id="347">347</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="348">348</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"Cleaned up log for TID: %d\n"</q>, <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::GetTid" title='__sanitizer::GetTid' data-ref="__sanitizer::GetTid" data-ref-filename="__sanitizer..GetTid">GetTid</a>());</td></tr>
<tr><th id="349">349</th><td>  });</td></tr>
<tr><th id="350">350</th><td></td></tr>
<tr><th id="351">351</th><td>  <b>if</b> (<a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" title='__xray::(anonymous namespace)::ThreadLocalData::LogWriter' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..LogWriter">LogWriter</a> == <b>nullptr</b> || <a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a> == <var>0</var>) {</td></tr>
<tr><th id="352">352</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="353">353</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"Skipping buffer for TID: %d; Offset = %llu\n"</q>, <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::GetTid" title='__sanitizer::GetTid' data-ref="__sanitizer::GetTid" data-ref-filename="__sanitizer..GetTid">GetTid</a>(),</td></tr>
<tr><th id="354">354</th><td>             <a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a>);</td></tr>
<tr><th id="355">355</th><td>    <b>return</b>;</td></tr>
<tr><th id="356">356</th><td>  }</td></tr>
<tr><th id="357">357</th><td></td></tr>
<tr><th id="358">358</th><td>  {</td></tr>
<tr><th id="359">359</th><td>    <a class="typedef" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::SpinMutexLock" title='__sanitizer::SpinMutexLock' data-type='GenericScopedLock&lt;__sanitizer::StaticSpinMutex&gt;' data-ref="__sanitizer::SpinMutexLock" data-ref-filename="__sanitizer..SpinMutexLock">SpinMutexLock</a> <dfn class="local col4 decl" id="134L" title='L' data-type='__sanitizer::SpinMutexLock' data-ref="134L" data-ref-filename="134L">L</dfn><a class="ref fn" href="../sanitizer_common/sanitizer_mutex.h.html#__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" title='__sanitizer::GenericScopedLock::GenericScopedLock&lt;MutexType&gt;' data-ref="__sanitizer::GenericScopedLock::GenericScopedLock{MutexType}" data-ref-filename="__sanitizer..GenericScopedLock..GenericScopedLock{MutexType}">(</a>&amp;<a class="tu ref" href="#__xray::LogMutex" title='__xray::LogMutex' data-use='a' data-ref="__xray::LogMutex" data-ref-filename="__xray..LogMutex">LogMutex</a>);</td></tr>
<tr><th id="360">360</th><td>    <a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" title='__xray::(anonymous namespace)::ThreadLocalData::LogWriter' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..LogWriter">LogWriter</a>-&gt;<a class="ref fn" href="xray_utils.h.html#__xray::LogWriter::WriteAll" title='__xray::LogWriter::WriteAll' data-ref="__xray::LogWriter::WriteAll" data-ref-filename="__xray..LogWriter..WriteAll">WriteAll</a>(<b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(<a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" title='__xray::(anonymous namespace)::ThreadLocalData::InMemoryBuffer' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..InMemoryBuffer">InMemoryBuffer</a>),</td></tr>
<tr><th id="361">361</th><td>                            <b>reinterpret_cast</b>&lt;<em>char</em> *&gt;(<a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" title='__xray::(anonymous namespace)::ThreadLocalData::InMemoryBuffer' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::InMemoryBuffer" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..InMemoryBuffer">InMemoryBuffer</a>) +</td></tr>
<tr><th id="362">362</th><td>                            (<b>sizeof</b>(<a class="type" href="../../include/xray/xray_records.h.html#__xray::XRayRecord" title='__xray::XRayRecord' data-ref="__xray::XRayRecord" data-ref-filename="__xray..XRayRecord">XRayRecord</a>) * <a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" title='__xray::(anonymous namespace)::ThreadLocalData::BufferOffset' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::BufferOffset" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..BufferOffset">BufferOffset</a>));</td></tr>
<tr><th id="363">363</th><td>  }</td></tr>
<tr><th id="364">364</th><td></td></tr>
<tr><th id="365">365</th><td>  <i>// Because this thread's exit could be the last one trying to write to</i></td></tr>
<tr><th id="366">366</th><td><i>  // the file and that we're not able to close out the file properly, we</i></td></tr>
<tr><th id="367">367</th><td><i>  // sync instead and hope that the pending writes are flushed as the</i></td></tr>
<tr><th id="368">368</th><td><i>  // thread exits.</i></td></tr>
<tr><th id="369">369</th><td>  <a class="local col2 ref" href="#132TLD" title='TLD' data-ref="132TLD" data-ref-filename="132TLD">TLD</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" title='__xray::(anonymous namespace)::ThreadLocalData::LogWriter' data-use='r' data-ref="__xray::(anonymousnamespace)::ThreadLocalData::LogWriter" data-ref-filename="__xray..(anonymousnamespace)..ThreadLocalData..LogWriter">LogWriter</a>-&gt;<a class="ref fn" href="xray_utils.h.html#__xray::LogWriter::Flush" title='__xray::LogWriter::Flush' data-ref="__xray::LogWriter::Flush" data-ref-filename="__xray..LogWriter..Flush">Flush</a>();</td></tr>
<tr><th id="370">370</th><td>}</td></tr>
<tr><th id="371">371</th><td></td></tr>
<tr><th id="372">372</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a> <dfn class="decl def fn" id="__xray::basicLoggingInit" title='__xray::basicLoggingInit' data-ref="__xray::basicLoggingInit" data-ref-filename="__xray..basicLoggingInit">basicLoggingInit</dfn>(<a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#240" title="__attribute__((unused))" data-ref="_M/UNUSED">UNUSED</a> <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="135BufferSize" title='BufferSize' data-type='size_t' data-ref="135BufferSize" data-ref-filename="135BufferSize">BufferSize</dfn>,</td></tr>
<tr><th id="373">373</th><td>                                   <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#240" title="__attribute__((unused))" data-ref="_M/UNUSED">UNUSED</a> <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col6 decl" id="136BufferMax" title='BufferMax' data-type='size_t' data-ref="136BufferMax" data-ref-filename="136BufferMax">BufferMax</dfn>, <em>void</em> *<dfn class="local col7 decl" id="137Options" title='Options' data-type='void *' data-ref="137Options" data-ref-filename="137Options">Options</dfn>,</td></tr>
<tr><th id="374">374</th><td>                                   <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="138OptionsSize" title='OptionsSize' data-type='size_t' data-ref="138OptionsSize" data-ref-filename="138OptionsSize">OptionsSize</dfn>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="375">375</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="local col9 decl" id="139Expected" title='Expected' data-type='uint8_t' data-ref="139Expected" data-ref-filename="139Expected">Expected</dfn> = <var>0</var>;</td></tr>
<tr><th id="376">376</th><td>  <b>if</b> (!<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang.h.html#__sanitizer::atomic_compare_exchange_strong" title='__sanitizer::atomic_compare_exchange_strong' data-ref="__sanitizer::atomic_compare_exchange_strong" data-ref-filename="__sanitizer..atomic_compare_exchange_strong">atomic_compare_exchange_strong</a>(&amp;<a class="tu ref" href="#__xray::BasicInitialized" title='__xray::BasicInitialized' data-use='a' data-ref="__xray::BasicInitialized" data-ref-filename="__xray..BasicInitialized">BasicInitialized</a>, &amp;<a class="local col9 ref" href="#139Expected" title='Expected' data-ref="139Expected" data-ref-filename="139Expected">Expected</a>, <var>1</var>,</td></tr>
<tr><th id="377">377</th><td>                                      <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acq_rel" title='__sanitizer::memory_order_acq_rel' data-ref="__sanitizer::memory_order_acq_rel" data-ref-filename="__sanitizer..memory_order_acq_rel">memory_order_acq_rel</a>)) {</td></tr>
<tr><th id="378">378</th><td>    <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="379">379</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"Basic logging already initialized.\n"</q>);</td></tr>
<tr><th id="380">380</th><td>    <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_INITIALIZED" title='XRAY_LOG_INITIALIZED' data-ref="XRAY_LOG_INITIALIZED" data-ref-filename="XRAY_LOG_INITIALIZED">XRAY_LOG_INITIALIZED</a>;</td></tr>
<tr><th id="381">381</th><td>  }</td></tr>
<tr><th id="382">382</th><td></td></tr>
<tr><th id="383">383</th><td>  <em>static</em> <a class="typedef" href="../../../../include/bits/pthreadtypes.h.html#pthread_once_t" title='pthread_once_t' data-type='int' data-ref="pthread_once_t" data-ref-filename="pthread_once_t">pthread_once_t</a> <dfn class="local col0 decl" id="140OnceInit" title='OnceInit' data-type='pthread_once_t' data-ref="140OnceInit" data-ref-filename="140OnceInit">OnceInit</dfn> = <a class="macro" href="../../../../include/pthread.h.html#182" title="0" data-ref="_M/PTHREAD_ONCE_INIT">PTHREAD_ONCE_INIT</a>;</td></tr>
<tr><th id="384">384</th><td>  <a class="ref fn" href="../../../../include/pthread.h.html#pthread_once" title='pthread_once' data-ref="pthread_once" data-ref-filename="pthread_once">pthread_once</a>(&amp;<a class="local col0 ref" href="#140OnceInit" title='OnceInit' data-ref="140OnceInit" data-ref-filename="140OnceInit">OnceInit</a>, +<a class="tu ref fn fake" href="#384" title='__xray::basicLoggingInit(size_t, size_t, void *, size_t)::(anonymous class)::operator void (*)()' data-use='c' data-ref="__xray::basicLoggingInit(size_t,size_t,void*,size_t)::(anonymousclass)::operatorvoid(*)()" data-ref-filename="__xray..basicLoggingInit(size_t,size_t,void*,size_t)..(anonymousclass)..operatorvoid(*)()"></a>[] {</td></tr>
<tr><th id="385">385</th><td>    <a class="ref fn" href="../../../../include/pthread.h.html#pthread_key_create" title='pthread_key_create' data-ref="pthread_key_create" data-ref-filename="pthread_key_create">pthread_key_create</a>(&amp;<a class="tu ref" href="#__xray::PThreadKey" title='__xray::PThreadKey' data-use='a' data-ref="__xray::PThreadKey" data-ref-filename="__xray..PThreadKey">PThreadKey</a>, <a class="tu ref fn" href="#__xray::TLDDestructor" title='__xray::TLDDestructor' data-use='r' data-ref="__xray::TLDDestructor" data-ref-filename="__xray..TLDDestructor">TLDDestructor</a>);</td></tr>
<tr><th id="386">386</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="tu ref" href="#__xray::UseRealTSC" title='__xray::UseRealTSC' data-use='a' data-ref="__xray::UseRealTSC" data-ref-filename="__xray..UseRealTSC">UseRealTSC</a>, <a class="ref fn" href="xray_x86_64.inc.html#__xray::probeRequiredCPUFeatures" title='__xray::probeRequiredCPUFeatures' data-ref="__xray::probeRequiredCPUFeatures" data-ref-filename="__xray..probeRequiredCPUFeatures">probeRequiredCPUFeatures</a>(), <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="387">387</th><td>    <i>// Initialize the global TicksPerSec value.</i></td></tr>
<tr><th id="388">388</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="tu ref" href="#__xray::TicksPerSec" title='__xray::TicksPerSec' data-use='a' data-ref="__xray::TicksPerSec" data-ref-filename="__xray..TicksPerSec">TicksPerSec</a>,</td></tr>
<tr><th id="389">389</th><td>                 <a class="ref fn" href="xray_x86_64.inc.html#__xray::probeRequiredCPUFeatures" title='__xray::probeRequiredCPUFeatures' data-ref="__xray::probeRequiredCPUFeatures" data-ref-filename="__xray..probeRequiredCPUFeatures">probeRequiredCPUFeatures</a>() ? <a class="ref fn" href="xray_x86_64.inc.html#__xray::getTSCFrequency" title='__xray::getTSCFrequency' data-ref="__xray::getTSCFrequency" data-ref-filename="__xray..getTSCFrequency">getTSCFrequency</a>()</td></tr>
<tr><th id="390">390</th><td>                                            : <a class="ref" href="xray_tsc.h.html#__xray::NanosecondsPerSecond" title='__xray::NanosecondsPerSecond' data-ref="__xray::NanosecondsPerSecond" data-ref-filename="__xray..NanosecondsPerSecond">NanosecondsPerSecond</a>,</td></tr>
<tr><th id="391">391</th><td>                 <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="392">392</th><td>    <b>if</b> (!<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu ref" href="#__xray::UseRealTSC" title='__xray::UseRealTSC' data-use='a' data-ref="__xray::UseRealTSC" data-ref-filename="__xray..UseRealTSC">UseRealTSC</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_relaxed" title='__sanitizer::memory_order_relaxed' data-ref="__sanitizer::memory_order_relaxed" data-ref-filename="__sanitizer..memory_order_relaxed">memory_order_relaxed</a>) &amp;&amp; <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="393">393</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"WARNING: Required CPU features missing for XRay instrumentation, "</q></td></tr>
<tr><th id="394">394</th><td>             <q>"using emulation instead.\n"</q>);</td></tr>
<tr><th id="395">395</th><td>  });</td></tr>
<tr><th id="396">396</th><td></td></tr>
<tr><th id="397">397</th><td>  <a class="type" href="../sanitizer_common/sanitizer_flag_parser.h.html#__sanitizer::FlagParser" title='__sanitizer::FlagParser' data-ref="__sanitizer::FlagParser" data-ref-filename="__sanitizer..FlagParser">FlagParser</a> <a class="ref fn fake" href="../sanitizer_common/sanitizer_flag_parser.h.html#__sanitizer::FlagParser::FlagParser" title='__sanitizer::FlagParser::FlagParser' data-ref="__sanitizer::FlagParser::FlagParser" data-ref-filename="__sanitizer..FlagParser..FlagParser"></a><dfn class="local col1 decl" id="141P" title='P' data-type='__sanitizer::FlagParser' data-ref="141P" data-ref-filename="141P">P</dfn>;</td></tr>
<tr><th id="398">398</th><td>  <a class="type" href="xray_basic_flags.h.html#__xray::BasicFlags" title='__xray::BasicFlags' data-ref="__xray::BasicFlags" data-ref-filename="__xray..BasicFlags">BasicFlags</a> <a class="ref fn fake" href="xray_basic_flags.h.html#22" title='__xray::BasicFlags::BasicFlags' data-ref="__xray::BasicFlags::BasicFlags" data-ref-filename="__xray..BasicFlags..BasicFlags"></a><dfn class="local col2 decl" id="142F" title='F' data-type='__xray::BasicFlags' data-ref="142F" data-ref-filename="142F">F</dfn>;</td></tr>
<tr><th id="399">399</th><td>  <a class="local col2 ref" href="#142F" title='F' data-ref="142F" data-ref-filename="142F">F</a>.<a class="ref fn" href="xray_basic_flags.h.html#__xray::BasicFlags::setDefaults" title='__xray::BasicFlags::setDefaults' data-ref="__xray::BasicFlags::setDefaults" data-ref-filename="__xray..BasicFlags..setDefaults">setDefaults</a>();</td></tr>
<tr><th id="400">400</th><td>  <a class="ref fn" href="xray_basic_flags.h.html#__xray::registerXRayBasicFlags" title='__xray::registerXRayBasicFlags' data-ref="__xray::registerXRayBasicFlags" data-ref-filename="__xray..registerXRayBasicFlags">registerXRayBasicFlags</a>(&amp;<a class="local col1 ref" href="#141P" title='P' data-ref="141P" data-ref-filename="141P">P</a>, &amp;<a class="local col2 ref" href="#142F" title='F' data-ref="142F" data-ref-filename="142F">F</a>);</td></tr>
<tr><th id="401">401</th><td>  <a class="local col1 ref" href="#141P" title='P' data-ref="141P" data-ref-filename="141P">P</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_flag_parser.h.html#__sanitizer::FlagParser::ParseString" title='__sanitizer::FlagParser::ParseString' data-ref="__sanitizer::FlagParser::ParseString" data-ref-filename="__sanitizer..FlagParser..ParseString">ParseString</a>(<a class="ref fn" href="xray_basic_flags.h.html#__xray::useCompilerDefinedBasicFlags" title='__xray::useCompilerDefinedBasicFlags' data-ref="__xray::useCompilerDefinedBasicFlags" data-ref-filename="__xray..useCompilerDefinedBasicFlags">useCompilerDefinedBasicFlags</a>());</td></tr>
<tr><th id="402">402</th><td>  <em>auto</em> *<dfn class="local col3 decl" id="143EnvOpts" title='EnvOpts' data-type='const char *' data-ref="143EnvOpts" data-ref-filename="143EnvOpts">EnvOpts</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::GetEnv" title='__sanitizer::GetEnv' data-ref="__sanitizer::GetEnv" data-ref-filename="__sanitizer..GetEnv">GetEnv</a>(<q>"XRAY_BASIC_OPTIONS"</q>);</td></tr>
<tr><th id="403">403</th><td>  <b>if</b> (<a class="local col3 ref" href="#143EnvOpts" title='EnvOpts' data-ref="143EnvOpts" data-ref-filename="143EnvOpts">EnvOpts</a> == <b>nullptr</b>)</td></tr>
<tr><th id="404">404</th><td>    <a class="local col3 ref" href="#143EnvOpts" title='EnvOpts' data-ref="143EnvOpts" data-ref-filename="143EnvOpts">EnvOpts</a> = <q>""</q>;</td></tr>
<tr><th id="405">405</th><td></td></tr>
<tr><th id="406">406</th><td>  <a class="local col1 ref" href="#141P" title='P' data-ref="141P" data-ref-filename="141P">P</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_flag_parser.h.html#__sanitizer::FlagParser::ParseString" title='__sanitizer::FlagParser::ParseString' data-ref="__sanitizer::FlagParser::ParseString" data-ref-filename="__sanitizer..FlagParser..ParseString">ParseString</a>(<a class="local col3 ref" href="#143EnvOpts" title='EnvOpts' data-ref="143EnvOpts" data-ref-filename="143EnvOpts">EnvOpts</a>);</td></tr>
<tr><th id="407">407</th><td></td></tr>
<tr><th id="408">408</th><td>  <i>// If XRAY_BASIC_OPTIONS was not defined, then we use the deprecated options</i></td></tr>
<tr><th id="409">409</th><td><i>  // set through XRAY_OPTIONS instead.</i></td></tr>
<tr><th id="410">410</th><td>  <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_strlen" title='__sanitizer::internal_strlen' data-ref="__sanitizer::internal_strlen" data-ref-filename="__sanitizer..internal_strlen">internal_strlen</a>(<a class="local col3 ref" href="#143EnvOpts" title='EnvOpts' data-ref="143EnvOpts" data-ref-filename="143EnvOpts">EnvOpts</a>) == <var>0</var>) {</td></tr>
<tr><th id="411">411</th><td>    <a class="local col2 ref" href="#142F" title='F' data-ref="142F" data-ref-filename="142F">F</a>.<a class="ref field" href="xray_basic_flags.inc.html#16" title='__xray::BasicFlags::func_duration_threshold_us' data-ref="__xray::BasicFlags::func_duration_threshold_us" data-ref-filename="__xray..BasicFlags..func_duration_threshold_us">func_duration_threshold_us</a> =</td></tr>
<tr><th id="412">412</th><td>        <a class="ref fn" href="xray_flags.h.html#__xray::flags" title='__xray::flags' data-ref="__xray::flags" data-ref-filename="__xray..flags">flags</a>()-&gt;<a class="ref field" href="xray_flags.inc.html#28" title='__xray::Flags::xray_naive_log_func_duration_threshold_us' data-ref="__xray::Flags::xray_naive_log_func_duration_threshold_us" data-ref-filename="__xray..Flags..xray_naive_log_func_duration_threshold_us">xray_naive_log_func_duration_threshold_us</a>;</td></tr>
<tr><th id="413">413</th><td>    <a class="local col2 ref" href="#142F" title='F' data-ref="142F" data-ref-filename="142F">F</a>.<a class="ref field" href="xray_basic_flags.inc.html#19" title='__xray::BasicFlags::max_stack_depth' data-ref="__xray::BasicFlags::max_stack_depth" data-ref-filename="__xray..BasicFlags..max_stack_depth">max_stack_depth</a> = <a class="ref fn" href="xray_flags.h.html#__xray::flags" title='__xray::flags' data-ref="__xray::flags" data-ref-filename="__xray..flags">flags</a>()-&gt;<a class="ref field" href="xray_flags.inc.html#31" title='__xray::Flags::xray_naive_log_max_stack_depth' data-ref="__xray::Flags::xray_naive_log_max_stack_depth" data-ref-filename="__xray..Flags..xray_naive_log_max_stack_depth">xray_naive_log_max_stack_depth</a>;</td></tr>
<tr><th id="414">414</th><td>    <a class="local col2 ref" href="#142F" title='F' data-ref="142F" data-ref-filename="142F">F</a>.<a class="ref field" href="xray_basic_flags.inc.html#22" title='__xray::BasicFlags::thread_buffer_size' data-ref="__xray::BasicFlags::thread_buffer_size" data-ref-filename="__xray..BasicFlags..thread_buffer_size">thread_buffer_size</a> = <a class="ref fn" href="xray_flags.h.html#__xray::flags" title='__xray::flags' data-ref="__xray::flags" data-ref-filename="__xray..flags">flags</a>()-&gt;<a class="ref field" href="xray_flags.inc.html#34" title='__xray::Flags::xray_naive_log_thread_buffer_size' data-ref="__xray::Flags::xray_naive_log_thread_buffer_size" data-ref-filename="__xray..Flags..xray_naive_log_thread_buffer_size">xray_naive_log_thread_buffer_size</a>;</td></tr>
<tr><th id="415">415</th><td>  }</td></tr>
<tr><th id="416">416</th><td></td></tr>
<tr><th id="417">417</th><td>  <a class="local col1 ref" href="#141P" title='P' data-ref="141P" data-ref-filename="141P">P</a>.<a class="ref fn" href="../sanitizer_common/sanitizer_flag_parser.h.html#__sanitizer::FlagParser::ParseString" title='__sanitizer::FlagParser::ParseString' data-ref="__sanitizer::FlagParser::ParseString" data-ref-filename="__sanitizer..FlagParser..ParseString">ParseString</a>(<b>static_cast</b>&lt;<em>const</em> <em>char</em> *&gt;(<a class="local col7 ref" href="#137Options" title='Options' data-ref="137Options" data-ref-filename="137Options">Options</a>));</td></tr>
<tr><th id="418">418</th><td>  <a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" title='__xray::(anonymous namespace)::BasicLoggingOptions::ThreadBufferSize' data-use='w' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::ThreadBufferSize" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..ThreadBufferSize">ThreadBufferSize</a> = <a class="local col2 ref" href="#142F" title='F' data-ref="142F" data-ref-filename="142F">F</a>.<a class="ref field" href="xray_basic_flags.inc.html#22" title='__xray::BasicFlags::thread_buffer_size' data-ref="__xray::BasicFlags::thread_buffer_size" data-ref-filename="__xray..BasicFlags..thread_buffer_size">thread_buffer_size</a>;</td></tr>
<tr><th id="419">419</th><td>  <a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::DurationFilterMicros" title='__xray::(anonymous namespace)::BasicLoggingOptions::DurationFilterMicros' data-use='w' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::DurationFilterMicros" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..DurationFilterMicros">DurationFilterMicros</a> = <a class="local col2 ref" href="#142F" title='F' data-ref="142F" data-ref-filename="142F">F</a>.<a class="ref field" href="xray_basic_flags.inc.html#16" title='__xray::BasicFlags::func_duration_threshold_us' data-ref="__xray::BasicFlags::func_duration_threshold_us" data-ref-filename="__xray..BasicFlags..func_duration_threshold_us">func_duration_threshold_us</a>;</td></tr>
<tr><th id="420">420</th><td>  <a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" title='__xray::(anonymous namespace)::BasicLoggingOptions::MaxStackDepth' data-use='w' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::MaxStackDepth" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..MaxStackDepth">MaxStackDepth</a> = <a class="local col2 ref" href="#142F" title='F' data-ref="142F" data-ref-filename="142F">F</a>.<a class="ref field" href="xray_basic_flags.inc.html#19" title='__xray::BasicFlags::max_stack_depth' data-ref="__xray::BasicFlags::max_stack_depth" data-ref-filename="__xray..BasicFlags..max_stack_depth">max_stack_depth</a>;</td></tr>
<tr><th id="421">421</th><td>  *<a class="ref fn" href="xray_basic_flags.h.html#__xray::basicFlags" title='__xray::basicFlags' data-ref="__xray::basicFlags" data-ref-filename="__xray..basicFlags">basicFlags</a>() <a class="ref fn" href="xray_basic_flags.h.html#22" title='__xray::BasicFlags::operator=' data-ref="__xray::BasicFlags::operator=" data-ref-filename="__xray..BasicFlags..operator=">=</a> <a class="local col2 ref" href="#142F" title='F' data-ref="142F" data-ref-filename="142F">F</a>;</td></tr>
<tr><th id="422">422</th><td></td></tr>
<tr><th id="423">423</th><td>  <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_store" title='__sanitizer::atomic_store' data-ref="__sanitizer::atomic_store" data-ref-filename="__sanitizer..atomic_store">atomic_store</a>(&amp;<a class="tu ref" href="#__xray::ThresholdTicks" title='__xray::ThresholdTicks' data-use='a' data-ref="__xray::ThresholdTicks" data-ref-filename="__xray..ThresholdTicks">ThresholdTicks</a>,</td></tr>
<tr><th id="424">424</th><td>               <a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu ref" href="#__xray::TicksPerSec" title='__xray::TicksPerSec' data-use='a' data-ref="__xray::TicksPerSec" data-ref-filename="__xray..TicksPerSec">TicksPerSec</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>) *</td></tr>
<tr><th id="425">425</th><td>                   <a class="tu ref" href="#__xray::GlobalOptions" title='__xray::GlobalOptions' data-use='m' data-ref="__xray::GlobalOptions" data-ref-filename="__xray..GlobalOptions">GlobalOptions</a>.<a class="tu ref field" href="#__xray::(anonymousnamespace)::BasicLoggingOptions::DurationFilterMicros" title='__xray::(anonymous namespace)::BasicLoggingOptions::DurationFilterMicros' data-use='r' data-ref="__xray::(anonymousnamespace)::BasicLoggingOptions::DurationFilterMicros" data-ref-filename="__xray..(anonymousnamespace)..BasicLoggingOptions..DurationFilterMicros">DurationFilterMicros</a> / <var>1000000</var>,</td></tr>
<tr><th id="426">426</th><td>               <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_release" title='__sanitizer::memory_order_release' data-ref="__sanitizer::memory_order_release" data-ref-filename="__sanitizer..memory_order_release">memory_order_release</a>);</td></tr>
<tr><th id="427">427</th><td>  <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_set_handler_arg1" title='__xray_set_handler_arg1' data-ref="__xray_set_handler_arg1" data-ref-filename="__xray_set_handler_arg1">__xray_set_handler_arg1</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu ref" href="#__xray::UseRealTSC" title='__xray::UseRealTSC' data-use='a' data-ref="__xray::UseRealTSC" data-ref-filename="__xray..UseRealTSC">UseRealTSC</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>)</td></tr>
<tr><th id="428">428</th><td>                              ? <a class="ref fn" href="#__xray::basicLoggingHandleArg1RealTSC" title='__xray::basicLoggingHandleArg1RealTSC' data-ref="__xray::basicLoggingHandleArg1RealTSC" data-ref-filename="__xray..basicLoggingHandleArg1RealTSC">basicLoggingHandleArg1RealTSC</a></td></tr>
<tr><th id="429">429</th><td>                              : <a class="ref fn" href="#__xray::basicLoggingHandleArg1EmulateTSC" title='__xray::basicLoggingHandleArg1EmulateTSC' data-ref="__xray::basicLoggingHandleArg1EmulateTSC" data-ref-filename="__xray..basicLoggingHandleArg1EmulateTSC">basicLoggingHandleArg1EmulateTSC</a>);</td></tr>
<tr><th id="430">430</th><td>  <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_set_handler" title='__xray_set_handler' data-ref="__xray_set_handler" data-ref-filename="__xray_set_handler">__xray_set_handler</a>(<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang_x86.h.html#__sanitizer::atomic_load" title='__sanitizer::atomic_load' data-ref="__sanitizer::atomic_load" data-ref-filename="__sanitizer..atomic_load">atomic_load</a>(&amp;<a class="tu ref" href="#__xray::UseRealTSC" title='__xray::UseRealTSC' data-use='a' data-ref="__xray::UseRealTSC" data-ref-filename="__xray..UseRealTSC">UseRealTSC</a>, <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acquire" title='__sanitizer::memory_order_acquire' data-ref="__sanitizer::memory_order_acquire" data-ref-filename="__sanitizer..memory_order_acquire">memory_order_acquire</a>)</td></tr>
<tr><th id="431">431</th><td>                         ? <a class="ref fn" href="#__xray::basicLoggingHandleArg0RealTSC" title='__xray::basicLoggingHandleArg0RealTSC' data-ref="__xray::basicLoggingHandleArg0RealTSC" data-ref-filename="__xray..basicLoggingHandleArg0RealTSC">basicLoggingHandleArg0RealTSC</a></td></tr>
<tr><th id="432">432</th><td>                         : <a class="ref fn" href="#__xray::basicLoggingHandleArg0EmulateTSC" title='__xray::basicLoggingHandleArg0EmulateTSC' data-ref="__xray::basicLoggingHandleArg0EmulateTSC" data-ref-filename="__xray..basicLoggingHandleArg0EmulateTSC">basicLoggingHandleArg0EmulateTSC</a>);</td></tr>
<tr><th id="433">433</th><td></td></tr>
<tr><th id="434">434</th><td>  <i>// TODO: Implement custom event and typed event handling support in Basic</i></td></tr>
<tr><th id="435">435</th><td><i>  // Mode.</i></td></tr>
<tr><th id="436">436</th><td>  <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_remove_customevent_handler" title='__xray_remove_customevent_handler' data-ref="__xray_remove_customevent_handler" data-ref-filename="__xray_remove_customevent_handler">__xray_remove_customevent_handler</a>();</td></tr>
<tr><th id="437">437</th><td>  <a class="ref fn" href="../../include/xray/xray_interface.h.html#__xray_remove_typedevent_handler" title='__xray_remove_typedevent_handler' data-ref="__xray_remove_typedevent_handler" data-ref-filename="__xray_remove_typedevent_handler">__xray_remove_typedevent_handler</a>();</td></tr>
<tr><th id="438">438</th><td></td></tr>
<tr><th id="439">439</th><td>  <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_INITIALIZED" title='XRAY_LOG_INITIALIZED' data-ref="XRAY_LOG_INITIALIZED" data-ref-filename="XRAY_LOG_INITIALIZED">XRAY_LOG_INITIALIZED</a>;</td></tr>
<tr><th id="440">440</th><td>}</td></tr>
<tr><th id="441">441</th><td></td></tr>
<tr><th id="442">442</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a> <dfn class="decl def fn" id="__xray::basicLoggingFinalize" title='__xray::basicLoggingFinalize' data-ref="__xray::basicLoggingFinalize" data-ref-filename="__xray..basicLoggingFinalize">basicLoggingFinalize</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="443">443</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="local col4 decl" id="144Expected" title='Expected' data-type='uint8_t' data-ref="144Expected" data-ref-filename="144Expected">Expected</dfn> = <var>0</var>;</td></tr>
<tr><th id="444">444</th><td>  <b>if</b> (!<a class="ref fn" href="../sanitizer_common/sanitizer_atomic_clang.h.html#__sanitizer::atomic_compare_exchange_strong" title='__sanitizer::atomic_compare_exchange_strong' data-ref="__sanitizer::atomic_compare_exchange_strong" data-ref-filename="__sanitizer..atomic_compare_exchange_strong">atomic_compare_exchange_strong</a>(&amp;<a class="tu ref" href="#__xray::BasicInitialized" title='__xray::BasicInitialized' data-use='a' data-ref="__xray::BasicInitialized" data-ref-filename="__xray..BasicInitialized">BasicInitialized</a>, &amp;<a class="local col4 ref" href="#144Expected" title='Expected' data-ref="144Expected" data-ref-filename="144Expected">Expected</a>, <var>0</var>,</td></tr>
<tr><th id="445">445</th><td>                                      <a class="enum" href="../sanitizer_common/sanitizer_atomic.h.html#__sanitizer::memory_order_acq_rel" title='__sanitizer::memory_order_acq_rel' data-ref="__sanitizer::memory_order_acq_rel" data-ref-filename="__sanitizer..memory_order_acq_rel">memory_order_acq_rel</a>) &amp;&amp;</td></tr>
<tr><th id="446">446</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="447">447</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"Basic logging already finalized.\n"</q>);</td></tr>
<tr><th id="448">448</th><td></td></tr>
<tr><th id="449">449</th><td>  <i>// Nothing really to do aside from marking state of the global to be</i></td></tr>
<tr><th id="450">450</th><td><i>  // uninitialized.</i></td></tr>
<tr><th id="451">451</th><td></td></tr>
<tr><th id="452">452</th><td>  <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_FINALIZED" title='XRAY_LOG_FINALIZED' data-ref="XRAY_LOG_FINALIZED" data-ref-filename="XRAY_LOG_FINALIZED">XRAY_LOG_FINALIZED</a>;</td></tr>
<tr><th id="453">453</th><td>}</td></tr>
<tr><th id="454">454</th><td></td></tr>
<tr><th id="455">455</th><td><a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogFlushStatus" title='XRayLogFlushStatus' data-ref="XRayLogFlushStatus" data-ref-filename="XRayLogFlushStatus">XRayLogFlushStatus</a> <dfn class="decl def fn" id="__xray::basicLoggingFlush" title='__xray::basicLoggingFlush' data-ref="__xray::basicLoggingFlush" data-ref-filename="__xray..basicLoggingFlush">basicLoggingFlush</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="456">456</th><td>  <i>// This really does nothing, since flushing the logs happen at the end of a</i></td></tr>
<tr><th id="457">457</th><td><i>  // thread's lifetime, or when the buffers are full.</i></td></tr>
<tr><th id="458">458</th><td>  <b>return</b> <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogFlushStatus" title='XRayLogFlushStatus' data-ref="XRayLogFlushStatus" data-ref-filename="XRayLogFlushStatus">XRayLogFlushStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_FLUSHED" title='XRAY_LOG_FLUSHED' data-ref="XRAY_LOG_FLUSHED" data-ref-filename="XRAY_LOG_FLUSHED">XRAY_LOG_FLUSHED</a>;</td></tr>
<tr><th id="459">459</th><td>}</td></tr>
<tr><th id="460">460</th><td></td></tr>
<tr><th id="461">461</th><td><i>// This is a handler that, effectively, does nothing.</i></td></tr>
<tr><th id="462">462</th><td><em>void</em> <dfn class="decl def fn" id="__xray::basicLoggingHandleArg0Empty" title='__xray::basicLoggingHandleArg0Empty' data-ref="__xray::basicLoggingHandleArg0Empty" data-ref-filename="__xray..basicLoggingHandleArg0Empty">basicLoggingHandleArg0Empty</dfn>(<a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>, <a class="type" href="../../include/xray/xray_interface.h.html#XRayEntryType" title='XRayEntryType' data-ref="XRayEntryType" data-ref-filename="XRayEntryType">XRayEntryType</a>) <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="463">463</th><td>}</td></tr>
<tr><th id="464">464</th><td></td></tr>
<tr><th id="465">465</th><td><em>bool</em> <dfn class="decl def fn" id="__xray::basicLogDynamicInitializer" title='__xray::basicLogDynamicInitializer' data-ref="__xray::basicLogDynamicInitializer" data-ref-filename="__xray..basicLogDynamicInitializer">basicLogDynamicInitializer</dfn>() <a class="macro" href="xray_defs.h.html#18" title="" data-ref="_M/XRAY_NEVER_INSTRUMENT">XRAY_NEVER_INSTRUMENT</a> {</td></tr>
<tr><th id="466">466</th><td>  <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogImpl" title='XRayLogImpl' data-ref="XRayLogImpl" data-ref-filename="XRayLogImpl">XRayLogImpl</a> <dfn class="local col5 decl" id="145Impl" title='Impl' data-type='XRayLogImpl' data-ref="145Impl" data-ref-filename="145Impl">Impl</dfn>{</td></tr>
<tr><th id="467">467</th><td>      <a class="ref fn" href="#__xray::basicLoggingInit" title='__xray::basicLoggingInit' data-ref="__xray::basicLoggingInit" data-ref-filename="__xray..basicLoggingInit">basicLoggingInit</a>,</td></tr>
<tr><th id="468">468</th><td>      <a class="ref fn" href="#__xray::basicLoggingFinalize" title='__xray::basicLoggingFinalize' data-ref="__xray::basicLoggingFinalize" data-ref-filename="__xray..basicLoggingFinalize">basicLoggingFinalize</a>,</td></tr>
<tr><th id="469">469</th><td>      <a class="ref fn" href="#__xray::basicLoggingHandleArg0Empty" title='__xray::basicLoggingHandleArg0Empty' data-ref="__xray::basicLoggingHandleArg0Empty" data-ref-filename="__xray..basicLoggingHandleArg0Empty">basicLoggingHandleArg0Empty</a>,</td></tr>
<tr><th id="470">470</th><td>      <a class="ref fn" href="#__xray::basicLoggingFlush" title='__xray::basicLoggingFlush' data-ref="__xray::basicLoggingFlush" data-ref-filename="__xray..basicLoggingFlush">basicLoggingFlush</a>,</td></tr>
<tr><th id="471">471</th><td>  };</td></tr>
<tr><th id="472">472</th><td>  <em>auto</em> <dfn class="local col6 decl" id="146RegistrationResult" title='RegistrationResult' data-type='XRayLogRegisterStatus' data-ref="146RegistrationResult" data-ref-filename="146RegistrationResult">RegistrationResult</dfn> = <a class="ref fn" href="../../include/xray/xray_log_interface.h.html#__xray_log_register_mode" title='__xray_log_register_mode' data-ref="__xray_log_register_mode" data-ref-filename="__xray_log_register_mode">__xray_log_register_mode</a>(<q>"xray-basic"</q>, <a class="ref fn fake" href="../../include/xray/xray_log_interface.h.html#156" title='XRayLogImpl::XRayLogImpl' data-ref="_ZN11XRayLogImplC1ERKS_" data-ref-filename="_ZN11XRayLogImplC1ERKS_"></a><a class="local col5 ref" href="#145Impl" title='Impl' data-ref="145Impl" data-ref-filename="145Impl">Impl</a>);</td></tr>
<tr><th id="473">473</th><td>  <b>if</b> (<a class="local col6 ref" href="#146RegistrationResult" title='RegistrationResult' data-ref="146RegistrationResult" data-ref-filename="146RegistrationResult">RegistrationResult</a> != <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogRegisterStatus" title='XRayLogRegisterStatus' data-ref="XRayLogRegisterStatus" data-ref-filename="XRayLogRegisterStatus">XRayLogRegisterStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_REGISTRATION_OK" title='XRAY_REGISTRATION_OK' data-ref="XRAY_REGISTRATION_OK" data-ref-filename="XRAY_REGISTRATION_OK">XRAY_REGISTRATION_OK</a> &amp;&amp;</td></tr>
<tr><th id="474">474</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="475">475</th><td>    <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"Cannot register XRay Basic Mode to 'xray-basic'; error = %d\n"</q>,</td></tr>
<tr><th id="476">476</th><td>           <a class="local col6 ref" href="#146RegistrationResult" title='RegistrationResult' data-ref="146RegistrationResult" data-ref-filename="146RegistrationResult">RegistrationResult</a>);</td></tr>
<tr><th id="477">477</th><td>  <b>if</b> (<a class="ref fn" href="xray_flags.h.html#__xray::flags" title='__xray::flags' data-ref="__xray::flags" data-ref-filename="__xray..flags">flags</a>()-&gt;<a class="ref field" href="xray_flags.inc.html#26" title='__xray::Flags::xray_naive_log' data-ref="__xray::Flags::xray_naive_log" data-ref-filename="__xray..Flags..xray_naive_log">xray_naive_log</a> ||</td></tr>
<tr><th id="478">478</th><td>      !<a class="ref fn" href="../sanitizer_common/sanitizer_libc.h.html#__sanitizer::internal_strcmp" title='__sanitizer::internal_strcmp' data-ref="__sanitizer::internal_strcmp" data-ref-filename="__sanitizer..internal_strcmp">internal_strcmp</a>(<a class="ref fn" href="xray_flags.h.html#__xray::flags" title='__xray::flags' data-ref="__xray::flags" data-ref-filename="__xray..flags">flags</a>()-&gt;<a class="ref field" href="xray_flags.inc.html#20" title='__xray::Flags::xray_mode' data-ref="__xray::Flags::xray_mode" data-ref-filename="__xray..Flags..xray_mode">xray_mode</a>, <q>"xray-basic"</q>)) {</td></tr>
<tr><th id="479">479</th><td>    <em>auto</em> <dfn class="local col7 decl" id="147SelectResult" title='SelectResult' data-type='XRayLogRegisterStatus' data-ref="147SelectResult" data-ref-filename="147SelectResult">SelectResult</dfn> = <a class="ref fn" href="../../include/xray/xray_log_interface.h.html#__xray_log_select_mode" title='__xray_log_select_mode' data-ref="__xray_log_select_mode" data-ref-filename="__xray_log_select_mode">__xray_log_select_mode</a>(<q>"xray-basic"</q>);</td></tr>
<tr><th id="480">480</th><td>    <b>if</b> (<a class="local col7 ref" href="#147SelectResult" title='SelectResult' data-ref="147SelectResult" data-ref-filename="147SelectResult">SelectResult</a> != <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogRegisterStatus" title='XRayLogRegisterStatus' data-ref="XRayLogRegisterStatus" data-ref-filename="XRayLogRegisterStatus">XRayLogRegisterStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_REGISTRATION_OK" title='XRAY_REGISTRATION_OK' data-ref="XRAY_REGISTRATION_OK" data-ref-filename="XRAY_REGISTRATION_OK">XRAY_REGISTRATION_OK</a>) {</td></tr>
<tr><th id="481">481</th><td>      <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="482">482</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"Failed selecting XRay Basic Mode; error = %d\n"</q>, <a class="local col7 ref" href="#147SelectResult" title='SelectResult' data-ref="147SelectResult" data-ref-filename="147SelectResult">SelectResult</a>);</td></tr>
<tr><th id="483">483</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="484">484</th><td>    }</td></tr>
<tr><th id="485">485</th><td></td></tr>
<tr><th id="486">486</th><td>    <i>// We initialize the implementation using the data we get from the</i></td></tr>
<tr><th id="487">487</th><td><i>    // XRAY_BASIC_OPTIONS environment variable, at this point of the</i></td></tr>
<tr><th id="488">488</th><td><i>    // implementation.</i></td></tr>
<tr><th id="489">489</th><td>    <em>auto</em> *<dfn class="local col8 decl" id="148Env" title='Env' data-type='const char *' data-ref="148Env" data-ref-filename="148Env">Env</dfn> = <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::GetEnv" title='__sanitizer::GetEnv' data-ref="__sanitizer::GetEnv" data-ref-filename="__sanitizer..GetEnv">GetEnv</a>(<q>"XRAY_BASIC_OPTIONS"</q>);</td></tr>
<tr><th id="490">490</th><td>    <em>auto</em> <dfn class="local col9 decl" id="149InitResult" title='InitResult' data-type='XRayLogInitStatus' data-ref="149InitResult" data-ref-filename="149InitResult">InitResult</dfn> =</td></tr>
<tr><th id="491">491</th><td>        <a class="ref fn" href="../../include/xray/xray_log_interface.h.html#__xray_log_init_mode" title='__xray_log_init_mode' data-ref="__xray_log_init_mode" data-ref-filename="__xray_log_init_mode">__xray_log_init_mode</a>(<q>"xray-basic"</q>, <a class="local col8 ref" href="#148Env" title='Env' data-ref="148Env" data-ref-filename="148Env">Env</a> == <b>nullptr</b> ? <q>""</q> : <a class="local col8 ref" href="#148Env" title='Env' data-ref="148Env" data-ref-filename="148Env">Env</a>);</td></tr>
<tr><th id="492">492</th><td>    <b>if</b> (<a class="local col9 ref" href="#149InitResult" title='InitResult' data-ref="149InitResult" data-ref-filename="149InitResult">InitResult</a> != <a class="type" href="../../include/xray/xray_log_interface.h.html#XRayLogInitStatus" title='XRayLogInitStatus' data-ref="XRayLogInitStatus" data-ref-filename="XRayLogInitStatus">XRayLogInitStatus</a>::<a class="enum" href="../../include/xray/xray_log_interface.h.html#XRAY_LOG_INITIALIZED" title='XRAY_LOG_INITIALIZED' data-ref="XRAY_LOG_INITIALIZED" data-ref-filename="XRAY_LOG_INITIALIZED">XRAY_LOG_INITIALIZED</a>) {</td></tr>
<tr><th id="493">493</th><td>      <b>if</b> (<a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Verbosity" title='__sanitizer::Verbosity' data-ref="__sanitizer::Verbosity" data-ref-filename="__sanitizer..Verbosity">Verbosity</a>())</td></tr>
<tr><th id="494">494</th><td>        <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"Failed initializing XRay Basic Mode; error = %d\n"</q>, <a class="local col9 ref" href="#149InitResult" title='InitResult' data-ref="149InitResult" data-ref-filename="149InitResult">InitResult</a>);</td></tr>
<tr><th id="495">495</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="496">496</th><td>    }</td></tr>
<tr><th id="497">497</th><td></td></tr>
<tr><th id="498">498</th><td>    <i>// At this point we know that we've successfully initialized Basic mode</i></td></tr>
<tr><th id="499">499</th><td><i>    // tracing, and the only chance we're going to get for the current thread to</i></td></tr>
<tr><th id="500">500</th><td><i>    // clean-up may be at thread/program exit. To ensure that we're going to get</i></td></tr>
<tr><th id="501">501</th><td><i>    // the cleanup even without calling the finalization routines, we're</i></td></tr>
<tr><th id="502">502</th><td><i>    // registering a program exit function that will do the cleanup.</i></td></tr>
<tr><th id="503">503</th><td>    <em>static</em> <a class="typedef" href="../../../../include/bits/pthreadtypes.h.html#pthread_once_t" title='pthread_once_t' data-type='int' data-ref="pthread_once_t" data-ref-filename="pthread_once_t">pthread_once_t</a> <dfn class="local col0 decl" id="150DynamicOnce" title='DynamicOnce' data-type='pthread_once_t' data-ref="150DynamicOnce" data-ref-filename="150DynamicOnce">DynamicOnce</dfn> = <a class="macro" href="../../../../include/pthread.h.html#182" title="0" data-ref="_M/PTHREAD_ONCE_INIT">PTHREAD_ONCE_INIT</a>;</td></tr>
<tr><th id="504">504</th><td>    <a class="ref fn" href="../../../../include/pthread.h.html#pthread_once" title='pthread_once' data-ref="pthread_once" data-ref-filename="pthread_once">pthread_once</a>(&amp;<a class="local col0 ref" href="#150DynamicOnce" title='DynamicOnce' data-ref="150DynamicOnce" data-ref-filename="150DynamicOnce">DynamicOnce</a>, +<a class="tu ref fn fake" href="#504" title='__xray::basicLogDynamicInitializer()::(anonymous class)::operator void (*)()' data-use='c' data-ref="__xray::basicLogDynamicInitializer()::(anonymousclass)::operatorvoid(*)()" data-ref-filename="__xray..basicLogDynamicInitializer()..(anonymousclass)..operatorvoid(*)()"></a>[] {</td></tr>
<tr><th id="505">505</th><td>      <em>static</em> <em>void</em> *<dfn class="local col1 decl" id="151FakeTLD" title='FakeTLD' data-type='void *' data-ref="151FakeTLD" data-ref-filename="151FakeTLD">FakeTLD</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="506">506</th><td>      <a class="local col1 ref" href="#151FakeTLD" title='FakeTLD' data-ref="151FakeTLD" data-ref-filename="151FakeTLD">FakeTLD</a> = &amp;<a class="tu ref fn" href="#__xray::getThreadLocalData" title='__xray::getThreadLocalData' data-use='c' data-ref="__xray::getThreadLocalData" data-ref-filename="__xray..getThreadLocalData">getThreadLocalData</a>();</td></tr>
<tr><th id="507">507</th><td>      <a class="ref fn" href="../sanitizer_common/sanitizer_common.h.html#__sanitizer::Atexit" title='__sanitizer::Atexit' data-ref="__sanitizer::Atexit" data-ref-filename="__sanitizer..Atexit">Atexit</a>(+<a class="tu ref fn fake" href="#507" title='__xray::basicLogDynamicInitializer()::(anonymous class)::operator()()::(anonymous class)::operator void (*)()' data-use='c' data-ref="__xray::basicLogDynamicInitializer()::(anonymousclass)::operator()()::(anonymousclass)::operatorvoid(*)()" data-ref-filename="__xray..basicLogDynamicInitializer()..(anonymousclass)..operator()()..(anonymousclass)..operatorvoid(*)()"></a>[] { <a class="tu ref fn" href="#__xray::TLDDestructor" title='__xray::TLDDestructor' data-use='c' data-ref="__xray::TLDDestructor" data-ref-filename="__xray..TLDDestructor">TLDDestructor</a>(<a class="local col1 ref" href="#151FakeTLD" title='FakeTLD' data-ref="151FakeTLD" data-ref-filename="151FakeTLD">FakeTLD</a>); });</td></tr>
<tr><th id="508">508</th><td>    });</td></tr>
<tr><th id="509">509</th><td>  }</td></tr>
<tr><th id="510">510</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="511">511</th><td>}</td></tr>
<tr><th id="512">512</th><td></td></tr>
<tr><th id="513">513</th><td>} <i>// namespace __xray</i></td></tr>
<tr><th id="514">514</th><td></td></tr>
<tr><th id="515">515</th><td><em>static</em> <em>auto</em> <a class="macro" href="../sanitizer_common/sanitizer_internal_defs.h.html#240" title="__attribute__((unused))" data-ref="_M/UNUSED">UNUSED</a> <dfn class="tu decl def" id="Unused" title='Unused' data-type='bool' data-ref="Unused" data-ref-filename="Unused">Unused</dfn> = <span class="namespace">__xray::</span><a class="ref fn" href="#__xray::basicLogDynamicInitializer" title='__xray::basicLogDynamicInitializer' data-ref="__xray::basicLogDynamicInitializer" data-ref-filename="__xray..basicLogDynamicInitializer">basicLogDynamicInitializer</a>();</td></tr>
<tr><th id="516">516</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-01</em> from project llvm revision <em>12</em>