<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>sanitizer_posix_libcdep.cpp source code [llvm/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp'; var root_path = '../../../..'; var data_path = '../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>llvm</a>/<a href='../..'>compiler-rt</a>/<a href='..'>lib</a>/<a href='./'>sanitizer_common</a>/<a href='sanitizer_posix_libcdep.cpp.html'>sanitizer_posix_libcdep.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===-- sanitizer_posix_libcdep.cpp ---------------------------------------===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td><i>//</i></td></tr>
<tr><th id="9">9</th><td><i>// This file is shared between AddressSanitizer and ThreadSanitizer</i></td></tr>
<tr><th id="10">10</th><td><i>// run-time libraries and implements libc-dependent POSIX-specific functions</i></td></tr>
<tr><th id="11">11</th><td><i>// from sanitizer_libc.h.</i></td></tr>
<tr><th id="12">12</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="13">13</th><td></td></tr>
<tr><th id="14">14</th><td><u>#include <a href="sanitizer_platform.h.html">"sanitizer_platform.h"</a></u></td></tr>
<tr><th id="15">15</th><td></td></tr>
<tr><th id="16">16</th><td><u>#<span data-ppcond="16">if</span> <a class="macro" href="sanitizer_platform.h.html#120" title="(0 || 1 || 0 || 0 || 0)" data-ref="_M/SANITIZER_POSIX">SANITIZER_POSIX</a></u></td></tr>
<tr><th id="17">17</th><td></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="sanitizer_common.h.html">"sanitizer_common.h"</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="sanitizer_flags.h.html">"sanitizer_flags.h"</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="sanitizer_platform_limits_netbsd.h.html">"sanitizer_platform_limits_netbsd.h"</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="sanitizer_platform_limits_posix.h.html">"sanitizer_platform_limits_posix.h"</a></u></td></tr>
<tr><th id="22">22</th><td><u>#include <a href="sanitizer_platform_limits_solaris.h.html">"sanitizer_platform_limits_solaris.h"</a></u></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="sanitizer_posix.h.html">"sanitizer_posix.h"</a></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="sanitizer_procmaps.h.html">"sanitizer_procmaps.h"</a></u></td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="../../../../include/errno.h.html">&lt;errno.h&gt;</a></u></td></tr>
<tr><th id="27">27</th><td><u>#include <a href="../../../../include/fcntl.h.html">&lt;fcntl.h&gt;</a></u></td></tr>
<tr><th id="28">28</th><td><u>#include <a href="../../../../include/pthread.h.html">&lt;pthread.h&gt;</a></u></td></tr>
<tr><th id="29">29</th><td><u>#include <a href="../../../../include/signal.h.html">&lt;signal.h&gt;</a></u></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="../../../../include/stdlib.h.html">&lt;stdlib.h&gt;</a></u></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="../../../../include/sys/mman.h.html">&lt;sys/mman.h&gt;</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="../../../../include/sys/resource.h.html">&lt;sys/resource.h&gt;</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="../../../../include/sys/stat.h.html">&lt;sys/stat.h&gt;</a></u></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="../../../../include/sys/time.h.html">&lt;sys/time.h&gt;</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../../../include/sys/types.h.html">&lt;sys/types.h&gt;</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../../../../include/sys/wait.h.html">&lt;sys/wait.h&gt;</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../../../include/unistd.h.html">&lt;unistd.h&gt;</a></u></td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td><u>#<span data-ppcond="39">if</span> <a class="macro" href="sanitizer_platform.h.html#44" title="0" data-ref="_M/SANITIZER_FREEBSD">SANITIZER_FREEBSD</a></u></td></tr>
<tr><th id="40">40</th><td><i>// The MAP_NORESERVE define has been removed in FreeBSD 11.x, and even before</i></td></tr>
<tr><th id="41">41</th><td><i>// that, it was never implemented.  So just define it to zero.</i></td></tr>
<tr><th id="42">42</th><td><u>#undef MAP_NORESERVE</u></td></tr>
<tr><th id="43">43</th><td><u>#define MAP_NORESERVE 0</u></td></tr>
<tr><th id="44">44</th><td><u>#<span data-ppcond="39">endif</span></u></td></tr>
<tr><th id="45">45</th><td></td></tr>
<tr><th id="46">46</th><td><b>typedef</b> <em>void</em> (*<dfn class="typedef" id="sa_sigaction_t" title='sa_sigaction_t' data-type='void (*)(int, siginfo_t *, void *)' data-ref="sa_sigaction_t" data-ref-filename="sa_sigaction_t">sa_sigaction_t</dfn>)(<em>int</em>, <a class="typedef" href="../../../../include/bits/types/siginfo_t.h.html#siginfo_t" title='siginfo_t' data-type='struct siginfo_t' data-ref="siginfo_t" data-ref-filename="siginfo_t">siginfo_t</a> *, <em>void</em> *);</td></tr>
<tr><th id="47">47</th><td></td></tr>
<tr><th id="48">48</th><td><b>namespace</b> <span class="namespace">__sanitizer</span> {</td></tr>
<tr><th id="49">49</th><td></td></tr>
<tr><th id="50">50</th><td><a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::u32" title='__sanitizer::u32' data-type='unsigned int' data-ref="__sanitizer::u32" data-ref-filename="__sanitizer..u32">u32</a> <dfn class="decl def fn" id="__sanitizer::GetUid" title='__sanitizer::GetUid' data-ref="__sanitizer::GetUid" data-ref-filename="__sanitizer..GetUid">GetUid</dfn>() {</td></tr>
<tr><th id="51">51</th><td>  <b>return</b> <a class="ref fn" href="../../../../include/unistd.h.html#getuid" title='getuid' data-ref="getuid" data-ref-filename="getuid">getuid</a>();</td></tr>
<tr><th id="52">52</th><td>}</td></tr>
<tr><th id="53">53</th><td></td></tr>
<tr><th id="54">54</th><td><a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="decl def fn" id="__sanitizer::GetThreadSelf" title='__sanitizer::GetThreadSelf' data-ref="__sanitizer::GetThreadSelf" data-ref-filename="__sanitizer..GetThreadSelf">GetThreadSelf</dfn>() {</td></tr>
<tr><th id="55">55</th><td>  <b>return</b> (<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>)<a class="ref fn" href="../../../../include/pthread.h.html#pthread_self" title='pthread_self' data-ref="pthread_self" data-ref-filename="pthread_self">pthread_self</a>();</td></tr>
<tr><th id="56">56</th><td>}</td></tr>
<tr><th id="57">57</th><td></td></tr>
<tr><th id="58">58</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::ReleaseMemoryPagesToOS" title='__sanitizer::ReleaseMemoryPagesToOS' data-ref="__sanitizer::ReleaseMemoryPagesToOS" data-ref-filename="__sanitizer..ReleaseMemoryPagesToOS">ReleaseMemoryPagesToOS</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="1beg" title='beg' data-type='__sanitizer::uptr' data-ref="1beg" data-ref-filename="1beg">beg</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="2end" title='end' data-type='__sanitizer::uptr' data-ref="2end" data-ref-filename="2end">end</dfn>) {</td></tr>
<tr><th id="59">59</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="3page_size" title='page_size' data-type='__sanitizer::uptr' data-ref="3page_size" data-ref-filename="3page_size">page_size</dfn> = <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::GetPageSizeCached" title='__sanitizer::GetPageSizeCached' data-ref="__sanitizer::GetPageSizeCached" data-ref-filename="__sanitizer..GetPageSizeCached">GetPageSizeCached</a>();</td></tr>
<tr><th id="60">60</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="4beg_aligned" title='beg_aligned' data-type='__sanitizer::uptr' data-ref="4beg_aligned" data-ref-filename="4beg_aligned">beg_aligned</dfn> = <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::RoundUpTo" title='__sanitizer::RoundUpTo' data-ref="__sanitizer::RoundUpTo" data-ref-filename="__sanitizer..RoundUpTo">RoundUpTo</a>(<a class="local col1 ref" href="#1beg" title='beg' data-ref="1beg" data-ref-filename="1beg">beg</a>, <a class="local col3 ref" href="#3page_size" title='page_size' data-ref="3page_size" data-ref-filename="3page_size">page_size</a>);</td></tr>
<tr><th id="61">61</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="5end_aligned" title='end_aligned' data-type='__sanitizer::uptr' data-ref="5end_aligned" data-ref-filename="5end_aligned">end_aligned</dfn> = <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::RoundDownTo" title='__sanitizer::RoundDownTo' data-ref="__sanitizer::RoundDownTo" data-ref-filename="__sanitizer..RoundDownTo">RoundDownTo</a>(<a class="local col2 ref" href="#2end" title='end' data-ref="2end" data-ref-filename="2end">end</a>, <a class="local col3 ref" href="#3page_size" title='page_size' data-ref="3page_size" data-ref-filename="3page_size">page_size</a>);</td></tr>
<tr><th id="62">62</th><td>  <b>if</b> (<a class="local col4 ref" href="#4beg_aligned" title='beg_aligned' data-ref="4beg_aligned" data-ref-filename="4beg_aligned">beg_aligned</a> &lt; <a class="local col5 ref" href="#5end_aligned" title='end_aligned' data-ref="5end_aligned" data-ref-filename="5end_aligned">end_aligned</a>)</td></tr>
<tr><th id="63">63</th><td>    <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_madvise" title='__sanitizer::internal_madvise' data-ref="__sanitizer::internal_madvise" data-ref-filename="__sanitizer..internal_madvise">internal_madvise</a>(<a class="local col4 ref" href="#4beg_aligned" title='beg_aligned' data-ref="4beg_aligned" data-ref-filename="4beg_aligned">beg_aligned</a>, <a class="local col5 ref" href="#5end_aligned" title='end_aligned' data-ref="5end_aligned" data-ref-filename="5end_aligned">end_aligned</a> - <a class="local col4 ref" href="#4beg_aligned" title='beg_aligned' data-ref="4beg_aligned" data-ref-filename="4beg_aligned">beg_aligned</a>,</td></tr>
<tr><th id="64">64</th><td>                     <a class="macro" href="sanitizer_platform.h.html#356" title="4" data-ref="_M/SANITIZER_MADVISE_DONTNEED">SANITIZER_MADVISE_DONTNEED</a>);</td></tr>
<tr><th id="65">65</th><td>}</td></tr>
<tr><th id="66">66</th><td></td></tr>
<tr><th id="67">67</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::SetShadowRegionHugePageMode" title='__sanitizer::SetShadowRegionHugePageMode' data-ref="__sanitizer::SetShadowRegionHugePageMode" data-ref-filename="__sanitizer..SetShadowRegionHugePageMode">SetShadowRegionHugePageMode</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="6addr" title='addr' data-type='__sanitizer::uptr' data-ref="6addr" data-ref-filename="6addr">addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="7size" title='size' data-type='__sanitizer::uptr' data-ref="7size" data-ref-filename="7size">size</dfn>) {</td></tr>
<tr><th id="68">68</th><td><u>#<span data-ppcond="68">ifdef</span> <a class="macro" href="../../../../include/bits/mman-linux.h.html#84" data-ref="_M/MADV_NOHUGEPAGE">MADV_NOHUGEPAGE</a>  // May not be defined on old systems.</u></td></tr>
<tr><th id="69">69</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_flags.h.html#__sanitizer::common_flags" title='__sanitizer::common_flags' data-ref="__sanitizer::common_flags" data-ref-filename="__sanitizer..common_flags">common_flags</a>()-&gt;<a class="ref field" href="sanitizer_flags.inc.html#188" title='__sanitizer::CommonFlags::no_huge_pages_for_shadow' data-ref="__sanitizer::CommonFlags::no_huge_pages_for_shadow" data-ref-filename="__sanitizer..CommonFlags..no_huge_pages_for_shadow">no_huge_pages_for_shadow</a>)</td></tr>
<tr><th id="70">70</th><td>    <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_madvise" title='__sanitizer::internal_madvise' data-ref="__sanitizer::internal_madvise" data-ref-filename="__sanitizer..internal_madvise">internal_madvise</a>(<a class="local col6 ref" href="#6addr" title='addr' data-ref="6addr" data-ref-filename="6addr">addr</a>, <a class="local col7 ref" href="#7size" title='size' data-ref="7size" data-ref-filename="7size">size</a>, <a class="macro" href="../../../../include/bits/mman-linux.h.html#84" title="15" data-ref="_M/MADV_NOHUGEPAGE">MADV_NOHUGEPAGE</a>);</td></tr>
<tr><th id="71">71</th><td>  <b>else</b></td></tr>
<tr><th id="72">72</th><td>    <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_madvise" title='__sanitizer::internal_madvise' data-ref="__sanitizer::internal_madvise" data-ref-filename="__sanitizer..internal_madvise">internal_madvise</a>(<a class="local col6 ref" href="#6addr" title='addr' data-ref="6addr" data-ref-filename="6addr">addr</a>, <a class="local col7 ref" href="#7size" title='size' data-ref="7size" data-ref-filename="7size">size</a>, <a class="macro" href="../../../../include/bits/mman-linux.h.html#83" title="14" data-ref="_M/MADV_HUGEPAGE">MADV_HUGEPAGE</a>);</td></tr>
<tr><th id="73">73</th><td><u>#<span data-ppcond="68">endif</span>  // MADV_NOHUGEPAGE</u></td></tr>
<tr><th id="74">74</th><td>}</td></tr>
<tr><th id="75">75</th><td></td></tr>
<tr><th id="76">76</th><td><em>bool</em> <dfn class="decl def fn" id="__sanitizer::DontDumpShadowMemory" title='__sanitizer::DontDumpShadowMemory' data-ref="__sanitizer::DontDumpShadowMemory" data-ref-filename="__sanitizer..DontDumpShadowMemory">DontDumpShadowMemory</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="8addr" title='addr' data-type='__sanitizer::uptr' data-ref="8addr" data-ref-filename="8addr">addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="9length" title='length' data-type='__sanitizer::uptr' data-ref="9length" data-ref-filename="9length">length</dfn>) {</td></tr>
<tr><th id="77">77</th><td><u>#<span data-ppcond="77">if</span> defined(<a class="macro" href="../../../../include/bits/mman-linux.h.html#85" data-ref="_M/MADV_DONTDUMP">MADV_DONTDUMP</a>)</u></td></tr>
<tr><th id="78">78</th><td>  <b>return</b> <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_madvise" title='__sanitizer::internal_madvise' data-ref="__sanitizer::internal_madvise" data-ref-filename="__sanitizer..internal_madvise">internal_madvise</a>(<a class="local col8 ref" href="#8addr" title='addr' data-ref="8addr" data-ref-filename="8addr">addr</a>, <a class="local col9 ref" href="#9length" title='length' data-ref="9length" data-ref-filename="9length">length</a>, <a class="macro" href="../../../../include/bits/mman-linux.h.html#85" title="16" data-ref="_M/MADV_DONTDUMP">MADV_DONTDUMP</a>) == <var>0</var>;</td></tr>
<tr><th id="79">79</th><td><u>#<span data-ppcond="77">elif</span> defined(MADV_NOCORE)</u></td></tr>
<tr><th id="80">80</th><td>  <b>return</b> internal_madvise(addr, length, MADV_NOCORE) == <var>0</var>;</td></tr>
<tr><th id="81">81</th><td><u>#else</u></td></tr>
<tr><th id="82">82</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="83">83</th><td><u>#<span data-ppcond="77">endif</span>  // MADV_DONTDUMP</u></td></tr>
<tr><th id="84">84</th><td>}</td></tr>
<tr><th id="85">85</th><td></td></tr>
<tr><th id="86">86</th><td><em>static</em> <a class="typedef" href="../../../../include/bits/resource.h.html#rlim_t" title='rlim_t' data-type='__rlim_t' data-ref="rlim_t" data-ref-filename="rlim_t">rlim_t</a> <dfn class="tu decl def fn" id="__sanitizer::getlim" title='__sanitizer::getlim' data-type='rlim_t __sanitizer::getlim(int res)' data-ref="__sanitizer::getlim" data-ref-filename="__sanitizer..getlim">getlim</dfn>(<em>int</em> <dfn class="local col0 decl" id="10res" title='res' data-type='int' data-ref="10res" data-ref-filename="10res">res</dfn>) {</td></tr>
<tr><th id="87">87</th><td>  <a class="type" href="../../../../include/bits/resource.h.html#rlimit" title='rlimit' data-ref="rlimit" data-ref-filename="rlimit">rlimit</a> <a class="ref fn fake" href="../../../../include/bits/resource.h.html#139" title='rlimit::rlimit' data-ref="_ZN6rlimitC1Ev" data-ref-filename="_ZN6rlimitC1Ev"></a><dfn class="local col1 decl" id="11rlim" title='rlim' data-type='rlimit' data-ref="11rlim" data-ref-filename="11rlim">rlim</dfn>;</td></tr>
<tr><th id="88">88</th><td>  <a class="macro" href="sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((0)); __sanitizer::u64 v2 = (__sanitizer::u64)((getrlimit(res, &amp;rlim))); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 88, &quot;(&quot; &quot;(0)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(getrlimit(res, &amp;rlim))&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<var>0</var>, <a class="ref fn" href="../../../../include/sys/resource.h.html#getrlimit" title='getrlimit' data-ref="getrlimit" data-ref-filename="getrlimit">getrlimit</a>(<a class="local col0 ref" href="#10res" title='res' data-ref="10res" data-ref-filename="10res">res</a>, &amp;<a class="local col1 ref" href="#11rlim" title='rlim' data-ref="11rlim" data-ref-filename="11rlim">rlim</a>));</td></tr>
<tr><th id="89">89</th><td>  <b>return</b> <a class="local col1 ref" href="#11rlim" title='rlim' data-ref="11rlim" data-ref-filename="11rlim">rlim</a>.<a class="ref field" href="../../../../include/bits/resource.h.html#rlimit::rlim_cur" title='rlimit::rlim_cur' data-ref="rlimit::rlim_cur" data-ref-filename="rlimit..rlim_cur">rlim_cur</a>;</td></tr>
<tr><th id="90">90</th><td>}</td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="__sanitizer::setlim" title='__sanitizer::setlim' data-type='void __sanitizer::setlim(int res, rlim_t lim)' data-ref="__sanitizer::setlim" data-ref-filename="__sanitizer..setlim">setlim</dfn>(<em>int</em> <dfn class="local col2 decl" id="12res" title='res' data-type='int' data-ref="12res" data-ref-filename="12res">res</dfn>, <a class="typedef" href="../../../../include/bits/resource.h.html#rlim_t" title='rlim_t' data-type='__rlim_t' data-ref="rlim_t" data-ref-filename="rlim_t">rlim_t</a> <dfn class="local col3 decl" id="13lim" title='lim' data-type='rlim_t' data-ref="13lim" data-ref-filename="13lim">lim</dfn>) {</td></tr>
<tr><th id="93">93</th><td>  <b>struct</b> <a class="type" href="../../../../include/bits/resource.h.html#rlimit" title='rlimit' data-ref="rlimit" data-ref-filename="rlimit">rlimit</a> <a class="ref fn fake" href="../../../../include/bits/resource.h.html#139" title='rlimit::rlimit' data-ref="_ZN6rlimitC1Ev" data-ref-filename="_ZN6rlimitC1Ev"></a><dfn class="local col4 decl" id="14rlim" title='rlim' data-type='struct rlimit' data-ref="14rlim" data-ref-filename="14rlim">rlim</dfn>;</td></tr>
<tr><th id="94">94</th><td>  <b>if</b> (<a class="ref fn" href="../../../../include/sys/resource.h.html#getrlimit" title='getrlimit' data-ref="getrlimit" data-ref-filename="getrlimit">getrlimit</a>(<a class="local col2 ref" href="#12res" title='res' data-ref="12res" data-ref-filename="12res">res</a>, <b>const_cast</b>&lt;<b>struct</b> <a class="type" href="../../../../include/bits/resource.h.html#rlimit" title='rlimit' data-ref="rlimit" data-ref-filename="rlimit">rlimit</a> *&gt;(&amp;<a class="local col4 ref" href="#14rlim" title='rlim' data-ref="14rlim" data-ref-filename="14rlim">rlim</a>))) {</td></tr>
<tr><th id="95">95</th><td>    <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"ERROR: %s getrlimit() failed %d\n"</q>, <a class="ref" href="sanitizer_common.h.html#__sanitizer::SanitizerToolName" title='__sanitizer::SanitizerToolName' data-ref="__sanitizer::SanitizerToolName" data-ref-filename="__sanitizer..SanitizerToolName">SanitizerToolName</a>, <a class="macro" href="../../../../include/errno.h.html#38" title="(*__errno_location ())" data-ref="_M/errno">errno</a>);</td></tr>
<tr><th id="96">96</th><td>    <a class="ref fn" href="sanitizer_internal_defs.h.html#__sanitizer::Die" title='__sanitizer::Die' data-ref="__sanitizer::Die" data-ref-filename="__sanitizer..Die">Die</a>();</td></tr>
<tr><th id="97">97</th><td>  }</td></tr>
<tr><th id="98">98</th><td>  <a class="local col4 ref" href="#14rlim" title='rlim' data-ref="14rlim" data-ref-filename="14rlim">rlim</a>.<a class="ref field" href="../../../../include/bits/resource.h.html#rlimit::rlim_cur" title='rlimit::rlim_cur' data-ref="rlimit::rlim_cur" data-ref-filename="rlimit..rlim_cur">rlim_cur</a> = <a class="local col3 ref" href="#13lim" title='lim' data-ref="13lim" data-ref-filename="13lim">lim</a>;</td></tr>
<tr><th id="99">99</th><td>  <b>if</b> (<a class="ref fn" href="../../../../include/sys/resource.h.html#setrlimit" title='setrlimit' data-ref="setrlimit" data-ref-filename="setrlimit">setrlimit</a>(<a class="local col2 ref" href="#12res" title='res' data-ref="12res" data-ref-filename="12res">res</a>, <b>const_cast</b>&lt;<b>struct</b> <a class="type" href="../../../../include/bits/resource.h.html#rlimit" title='rlimit' data-ref="rlimit" data-ref-filename="rlimit">rlimit</a> *&gt;(&amp;<a class="local col4 ref" href="#14rlim" title='rlim' data-ref="14rlim" data-ref-filename="14rlim">rlim</a>))) {</td></tr>
<tr><th id="100">100</th><td>    <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"ERROR: %s setrlimit() failed %d\n"</q>, <a class="ref" href="sanitizer_common.h.html#__sanitizer::SanitizerToolName" title='__sanitizer::SanitizerToolName' data-ref="__sanitizer::SanitizerToolName" data-ref-filename="__sanitizer..SanitizerToolName">SanitizerToolName</a>, <a class="macro" href="../../../../include/errno.h.html#38" title="(*__errno_location ())" data-ref="_M/errno">errno</a>);</td></tr>
<tr><th id="101">101</th><td>    <a class="ref fn" href="sanitizer_internal_defs.h.html#__sanitizer::Die" title='__sanitizer::Die' data-ref="__sanitizer::Die" data-ref-filename="__sanitizer..Die">Die</a>();</td></tr>
<tr><th id="102">102</th><td>  }</td></tr>
<tr><th id="103">103</th><td>}</td></tr>
<tr><th id="104">104</th><td></td></tr>
<tr><th id="105">105</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::DisableCoreDumperIfNecessary" title='__sanitizer::DisableCoreDumperIfNecessary' data-ref="__sanitizer::DisableCoreDumperIfNecessary" data-ref-filename="__sanitizer..DisableCoreDumperIfNecessary">DisableCoreDumperIfNecessary</dfn>() {</td></tr>
<tr><th id="106">106</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_flags.h.html#__sanitizer::common_flags" title='__sanitizer::common_flags' data-ref="__sanitizer::common_flags" data-ref-filename="__sanitizer..common_flags">common_flags</a>()-&gt;<a class="ref field" href="sanitizer_flags.inc.html#166" title='__sanitizer::CommonFlags::disable_coredump' data-ref="__sanitizer::CommonFlags::disable_coredump" data-ref-filename="__sanitizer..CommonFlags..disable_coredump">disable_coredump</a>) {</td></tr>
<tr><th id="107">107</th><td>    <a class="tu ref fn" href="#__sanitizer::setlim" title='__sanitizer::setlim' data-use='c' data-ref="__sanitizer::setlim" data-ref-filename="__sanitizer..setlim">setlim</a>(<a class="macro" href="../../../../include/bits/resource.h.html#51" title="RLIMIT_CORE" data-ref="_M/RLIMIT_CORE">RLIMIT_CORE</a>, <var>0</var>);</td></tr>
<tr><th id="108">108</th><td>  }</td></tr>
<tr><th id="109">109</th><td>}</td></tr>
<tr><th id="110">110</th><td></td></tr>
<tr><th id="111">111</th><td><em>bool</em> <dfn class="decl def fn" id="__sanitizer::StackSizeIsUnlimited" title='__sanitizer::StackSizeIsUnlimited' data-ref="__sanitizer::StackSizeIsUnlimited" data-ref-filename="__sanitizer..StackSizeIsUnlimited">StackSizeIsUnlimited</dfn>() {</td></tr>
<tr><th id="112">112</th><td>  <a class="typedef" href="../../../../include/bits/resource.h.html#rlim_t" title='rlim_t' data-type='__rlim_t' data-ref="rlim_t" data-ref-filename="rlim_t">rlim_t</a> <dfn class="local col5 decl" id="15stack_size" title='stack_size' data-type='rlim_t' data-ref="15stack_size" data-ref-filename="15stack_size">stack_size</dfn> = <a class="tu ref fn" href="#__sanitizer::getlim" title='__sanitizer::getlim' data-use='c' data-ref="__sanitizer::getlim" data-ref-filename="__sanitizer..getlim">getlim</a>(<a class="macro" href="../../../../include/bits/resource.h.html#47" title="RLIMIT_STACK" data-ref="_M/RLIMIT_STACK">RLIMIT_STACK</a>);</td></tr>
<tr><th id="113">113</th><td>  <b>return</b> (<a class="local col5 ref" href="#15stack_size" title='stack_size' data-ref="15stack_size" data-ref-filename="15stack_size">stack_size</a> == <a class="macro" href="../../../../include/bits/resource.h.html#115" title="((__rlim_t) -1)" data-ref="_M/RLIM_INFINITY">RLIM_INFINITY</a>);</td></tr>
<tr><th id="114">114</th><td>}</td></tr>
<tr><th id="115">115</th><td></td></tr>
<tr><th id="116">116</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::SetStackSizeLimitInBytes" title='__sanitizer::SetStackSizeLimitInBytes' data-ref="__sanitizer::SetStackSizeLimitInBytes" data-ref-filename="__sanitizer..SetStackSizeLimitInBytes">SetStackSizeLimitInBytes</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="16limit" title='limit' data-type='__sanitizer::uptr' data-ref="16limit" data-ref-filename="16limit">limit</dfn>) {</td></tr>
<tr><th id="117">117</th><td>  <a class="tu ref fn" href="#__sanitizer::setlim" title='__sanitizer::setlim' data-use='c' data-ref="__sanitizer::setlim" data-ref-filename="__sanitizer..setlim">setlim</a>(<a class="macro" href="../../../../include/bits/resource.h.html#47" title="RLIMIT_STACK" data-ref="_M/RLIMIT_STACK">RLIMIT_STACK</a>, (<a class="typedef" href="../../../../include/bits/resource.h.html#rlim_t" title='rlim_t' data-type='__rlim_t' data-ref="rlim_t" data-ref-filename="rlim_t">rlim_t</a>)<a class="local col6 ref" href="#16limit" title='limit' data-ref="16limit" data-ref-filename="16limit">limit</a>);</td></tr>
<tr><th id="118">118</th><td>  <a class="macro" href="sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((!StackSizeIsUnlimited())); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 118, &quot;(&quot; &quot;(!StackSizeIsUnlimited())&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(!<a class="ref fn" href="#__sanitizer::StackSizeIsUnlimited" title='__sanitizer::StackSizeIsUnlimited' data-ref="__sanitizer::StackSizeIsUnlimited" data-ref-filename="__sanitizer..StackSizeIsUnlimited">StackSizeIsUnlimited</a>());</td></tr>
<tr><th id="119">119</th><td>}</td></tr>
<tr><th id="120">120</th><td></td></tr>
<tr><th id="121">121</th><td><em>bool</em> <dfn class="decl def fn" id="__sanitizer::AddressSpaceIsUnlimited" title='__sanitizer::AddressSpaceIsUnlimited' data-ref="__sanitizer::AddressSpaceIsUnlimited" data-ref-filename="__sanitizer..AddressSpaceIsUnlimited">AddressSpaceIsUnlimited</dfn>() {</td></tr>
<tr><th id="122">122</th><td>  <a class="typedef" href="../../../../include/bits/resource.h.html#rlim_t" title='rlim_t' data-type='__rlim_t' data-ref="rlim_t" data-ref-filename="rlim_t">rlim_t</a> <dfn class="local col7 decl" id="17as_size" title='as_size' data-type='rlim_t' data-ref="17as_size" data-ref-filename="17as_size">as_size</dfn> = <a class="tu ref fn" href="#__sanitizer::getlim" title='__sanitizer::getlim' data-use='c' data-ref="__sanitizer::getlim" data-ref-filename="__sanitizer..getlim">getlim</a>(<a class="macro" href="../../../../include/bits/resource.h.html#68" title="RLIMIT_AS" data-ref="_M/RLIMIT_AS">RLIMIT_AS</a>);</td></tr>
<tr><th id="123">123</th><td>  <b>return</b> (<a class="local col7 ref" href="#17as_size" title='as_size' data-ref="17as_size" data-ref-filename="17as_size">as_size</a> == <a class="macro" href="../../../../include/bits/resource.h.html#115" title="((__rlim_t) -1)" data-ref="_M/RLIM_INFINITY">RLIM_INFINITY</a>);</td></tr>
<tr><th id="124">124</th><td>}</td></tr>
<tr><th id="125">125</th><td></td></tr>
<tr><th id="126">126</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::SetAddressSpaceUnlimited" title='__sanitizer::SetAddressSpaceUnlimited' data-ref="__sanitizer::SetAddressSpaceUnlimited" data-ref-filename="__sanitizer..SetAddressSpaceUnlimited">SetAddressSpaceUnlimited</dfn>() {</td></tr>
<tr><th id="127">127</th><td>  <a class="tu ref fn" href="#__sanitizer::setlim" title='__sanitizer::setlim' data-use='c' data-ref="__sanitizer::setlim" data-ref-filename="__sanitizer..setlim">setlim</a>(<a class="macro" href="../../../../include/bits/resource.h.html#68" title="RLIMIT_AS" data-ref="_M/RLIMIT_AS">RLIMIT_AS</a>, <a class="macro" href="../../../../include/bits/resource.h.html#115" title="((__rlim_t) -1)" data-ref="_M/RLIM_INFINITY">RLIM_INFINITY</a>);</td></tr>
<tr><th id="128">128</th><td>  <a class="macro" href="sanitizer_internal_defs.h.html#299" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((AddressSpaceIsUnlimited())); __sanitizer::u64 v2 = (__sanitizer::u64)(0); if (__builtin_expect(!!(!(v1 != v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 128, &quot;(&quot; &quot;(AddressSpaceIsUnlimited())&quot; &quot;) &quot; &quot;!=&quot; &quot; (&quot; &quot;0&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK">CHECK</a>(<a class="ref fn" href="#__sanitizer::AddressSpaceIsUnlimited" title='__sanitizer::AddressSpaceIsUnlimited' data-ref="__sanitizer::AddressSpaceIsUnlimited" data-ref-filename="__sanitizer..AddressSpaceIsUnlimited">AddressSpaceIsUnlimited</a>());</td></tr>
<tr><th id="129">129</th><td>}</td></tr>
<tr><th id="130">130</th><td></td></tr>
<tr><th id="131">131</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::SleepForSeconds" title='__sanitizer::SleepForSeconds' data-ref="__sanitizer::SleepForSeconds" data-ref-filename="__sanitizer..SleepForSeconds">SleepForSeconds</dfn>(<em>int</em> <dfn class="local col8 decl" id="18seconds" title='seconds' data-type='int' data-ref="18seconds" data-ref-filename="18seconds">seconds</dfn>) {</td></tr>
<tr><th id="132">132</th><td>  <a class="ref fn" href="../../../../include/unistd.h.html#sleep" title='sleep' data-ref="sleep" data-ref-filename="sleep">sleep</a>(<a class="local col8 ref" href="#18seconds" title='seconds' data-ref="18seconds" data-ref-filename="18seconds">seconds</a>);</td></tr>
<tr><th id="133">133</th><td>}</td></tr>
<tr><th id="134">134</th><td></td></tr>
<tr><th id="135">135</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::SleepForMillis" title='__sanitizer::SleepForMillis' data-ref="__sanitizer::SleepForMillis" data-ref-filename="__sanitizer..SleepForMillis">SleepForMillis</dfn>(<em>int</em> <dfn class="local col9 decl" id="19millis" title='millis' data-type='int' data-ref="19millis" data-ref-filename="19millis">millis</dfn>) {</td></tr>
<tr><th id="136">136</th><td>  <a class="ref fn" href="../../../../include/unistd.h.html#usleep" title='usleep' data-ref="usleep" data-ref-filename="usleep">usleep</a>(<a class="local col9 ref" href="#19millis" title='millis' data-ref="19millis" data-ref-filename="19millis">millis</a> * <var>1000</var>);</td></tr>
<tr><th id="137">137</th><td>}</td></tr>
<tr><th id="138">138</th><td></td></tr>
<tr><th id="139">139</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::Abort" title='__sanitizer::Abort' data-ref="__sanitizer::Abort" data-ref-filename="__sanitizer..Abort">Abort</dfn>() {</td></tr>
<tr><th id="140">140</th><td><u>#<span data-ppcond="140">if</span> !<a class="macro" href="sanitizer_platform.h.html#339" title="0" data-ref="_M/SANITIZER_GO">SANITIZER_GO</a></u></td></tr>
<tr><th id="141">141</th><td>  <i>// If we are handling SIGABRT, unhandle it first.</i></td></tr>
<tr><th id="142">142</th><td><i>  // TODO(vitalybuka): Check if handler belongs to sanitizer.</i></td></tr>
<tr><th id="143">143</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_common.h.html#__sanitizer::GetHandleSignalMode" title='__sanitizer::GetHandleSignalMode' data-ref="__sanitizer::GetHandleSignalMode" data-ref-filename="__sanitizer..GetHandleSignalMode">GetHandleSignalMode</a>(<a class="macro" href="../../../../include/bits/signum-generic.h.html#50" title="6" data-ref="_M/SIGABRT">SIGABRT</a>) != <a class="enum" href="sanitizer_flags.h.html#__sanitizer::kHandleSignalNo" title='__sanitizer::kHandleSignalNo' data-ref="__sanitizer::kHandleSignalNo" data-ref-filename="__sanitizer..kHandleSignalNo">kHandleSignalNo</a>) {</td></tr>
<tr><th id="144">144</th><td>    <b>struct</b> <a class="type" href="../../../../include/bits/sigaction.h.html#sigaction" title='sigaction' data-ref="sigaction" data-ref-filename="sigaction">sigaction</a> <a class="ref fn fake" href="../../../../include/bits/sigaction.h.html#27" title='sigaction::sigaction' data-ref="_ZN9sigactionC1Ev" data-ref-filename="_ZN9sigactionC1Ev"></a><dfn class="local col0 decl" id="20sigact" title='sigact' data-type='struct sigaction' data-ref="20sigact" data-ref-filename="20sigact">sigact</dfn>;</td></tr>
<tr><th id="145">145</th><td>    <a class="ref fn" href="sanitizer_libc.h.html#__sanitizer::internal_memset" title='__sanitizer::internal_memset' data-ref="__sanitizer::internal_memset" data-ref-filename="__sanitizer..internal_memset">internal_memset</a>(&amp;<a class="local col0 ref" href="#20sigact" title='sigact' data-ref="20sigact" data-ref-filename="20sigact">sigact</a>, <var>0</var>, <b>sizeof</b>(<a class="local col0 ref" href="#20sigact" title='sigact' data-ref="20sigact" data-ref-filename="20sigact">sigact</a>));</td></tr>
<tr><th id="146">146</th><td>    <a class="local col0 ref" href="#20sigact" title='sigact' data-ref="20sigact" data-ref-filename="20sigact">sigact</a>.<a class="macro" href="../../../../include/bits/sigaction.h.html#40" title="__sigaction_handler.sa_sigaction" data-ref="_M/sa_sigaction">sa_sigaction</a> = (<a class="typedef" href="#sa_sigaction_t" title='sa_sigaction_t' data-type='void (*)(int, siginfo_t *, void *)' data-ref="sa_sigaction_t" data-ref-filename="sa_sigaction_t">sa_sigaction_t</a>)<a class="macro" href="../../../../include/bits/signum-generic.h.html#29" title="((__sighandler_t) 0)" data-ref="_M/SIG_DFL">SIG_DFL</a>;</td></tr>
<tr><th id="147">147</th><td>    <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_sigaction" title='__sanitizer::internal_sigaction' data-ref="__sanitizer::internal_sigaction" data-ref-filename="__sanitizer..internal_sigaction">internal_sigaction</a>(<a class="macro" href="../../../../include/bits/signum-generic.h.html#50" title="6" data-ref="_M/SIGABRT">SIGABRT</a>, &amp;<a class="local col0 ref" href="#20sigact" title='sigact' data-ref="20sigact" data-ref-filename="20sigact">sigact</a>, <b>nullptr</b>);</td></tr>
<tr><th id="148">148</th><td>  }</td></tr>
<tr><th id="149">149</th><td><u>#<span data-ppcond="140">endif</span></u></td></tr>
<tr><th id="150">150</th><td></td></tr>
<tr><th id="151">151</th><td>  <a class="ref fn" href="../../../../include/stdlib.h.html#abort" title='abort' data-ref="abort" data-ref-filename="abort">abort</a>();</td></tr>
<tr><th id="152">152</th><td>}</td></tr>
<tr><th id="153">153</th><td></td></tr>
<tr><th id="154">154</th><td><em>int</em> <dfn class="decl def fn" id="__sanitizer::Atexit" title='__sanitizer::Atexit' data-ref="__sanitizer::Atexit" data-ref-filename="__sanitizer..Atexit">Atexit</dfn>(<em>void</em> (*<dfn class="local col1 decl" id="21function" title='function' data-type='void (*)()' data-ref="21function" data-ref-filename="21function">function</dfn>)(<em>void</em>)) {</td></tr>
<tr><th id="155">155</th><td><u>#<span data-ppcond="155">if</span> !<a class="macro" href="sanitizer_platform.h.html#339" title="0" data-ref="_M/SANITIZER_GO">SANITIZER_GO</a></u></td></tr>
<tr><th id="156">156</th><td>  <b>return</b> <a class="ref fn" href="../../../../include/stdlib.h.html#atexit" title='atexit' data-ref="atexit" data-ref-filename="atexit">atexit</a>(<a class="local col1 ref" href="#21function" title='function' data-ref="21function" data-ref-filename="21function">function</a>);</td></tr>
<tr><th id="157">157</th><td><u>#<span data-ppcond="155">else</span></u></td></tr>
<tr><th id="158">158</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="159">159</th><td><u>#<span data-ppcond="155">endif</span></u></td></tr>
<tr><th id="160">160</th><td>}</td></tr>
<tr><th id="161">161</th><td></td></tr>
<tr><th id="162">162</th><td><em>bool</em> <dfn class="decl def fn" id="__sanitizer::SupportsColoredOutput" title='__sanitizer::SupportsColoredOutput' data-ref="__sanitizer::SupportsColoredOutput" data-ref-filename="__sanitizer..SupportsColoredOutput">SupportsColoredOutput</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::fd_t" title='__sanitizer::fd_t' data-type='int' data-ref="__sanitizer::fd_t" data-ref-filename="__sanitizer..fd_t">fd_t</a> <dfn class="local col2 decl" id="22fd" title='fd' data-type='__sanitizer::fd_t' data-ref="22fd" data-ref-filename="22fd">fd</dfn>) {</td></tr>
<tr><th id="163">163</th><td>  <b>return</b> <a class="ref fn" href="../../../../include/unistd.h.html#isatty" title='isatty' data-ref="isatty" data-ref-filename="isatty">isatty</a>(<a class="local col2 ref" href="#22fd" title='fd' data-ref="22fd" data-ref-filename="22fd">fd</a>) != <var>0</var>;</td></tr>
<tr><th id="164">164</th><td>}</td></tr>
<tr><th id="165">165</th><td></td></tr>
<tr><th id="166">166</th><td><u>#<span data-ppcond="166">if</span> !<a class="macro" href="sanitizer_platform.h.html#339" title="0" data-ref="_M/SANITIZER_GO">SANITIZER_GO</a></u></td></tr>
<tr><th id="167">167</th><td><i  data-doc="__sanitizer::kAltStackSize">// TODO(glider): different tools may require different altstack size.</i></td></tr>
<tr><th id="168">168</th><td><em>static</em> <em>const</em> <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="tu decl def" id="__sanitizer::kAltStackSize" title='__sanitizer::kAltStackSize' data-type='const __sanitizer::uptr' data-ref="__sanitizer::kAltStackSize" data-ref-filename="__sanitizer..kAltStackSize">kAltStackSize</dfn> = <a class="macro" href="../../../../include/bits/sigstack.h.html#30" title="8192" data-ref="_M/SIGSTKSZ">SIGSTKSZ</a> * <var>4</var>;  <i  data-doc="__sanitizer::kAltStackSize">// SIGSTKSZ is not enough.</i></td></tr>
<tr><th id="169">169</th><td></td></tr>
<tr><th id="170">170</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::SetAlternateSignalStack" title='__sanitizer::SetAlternateSignalStack' data-ref="__sanitizer::SetAlternateSignalStack" data-ref-filename="__sanitizer..SetAlternateSignalStack">SetAlternateSignalStack</dfn>() {</td></tr>
<tr><th id="171">171</th><td>  <a class="typedef" href="../../../../include/bits/types/stack_t.h.html#stack_t" title='stack_t' data-type='struct stack_t' data-ref="stack_t" data-ref-filename="stack_t">stack_t</a> <a class="ref fn fake" href="../../../../include/bits/types/stack_t.h.html#26" title='(anonymous struct)::' data-ref="_ZN7stack_tC1Ev" data-ref-filename="_ZN7stack_tC1Ev"></a><dfn class="local col3 decl" id="23altstack" title='altstack' data-type='stack_t' data-ref="23altstack" data-ref-filename="23altstack">altstack</dfn>, <a class="ref fn fake" href="../../../../include/bits/types/stack_t.h.html#26" title='(anonymous struct)::' data-ref="_ZN7stack_tC1Ev" data-ref-filename="_ZN7stack_tC1Ev"></a><dfn class="local col4 decl" id="24oldstack" title='oldstack' data-type='stack_t' data-ref="24oldstack" data-ref-filename="24oldstack">oldstack</dfn>;</td></tr>
<tr><th id="172">172</th><td>  <a class="macro" href="sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((0)); __sanitizer::u64 v2 = (__sanitizer::u64)((sigaltstack(nullptr, &amp;oldstack))); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 172, &quot;(&quot; &quot;(0)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(sigaltstack(nullptr, &amp;oldstack))&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<var>0</var>, <a class="ref fn" href="../../../../include/signal.h.html#sigaltstack" title='sigaltstack' data-ref="sigaltstack" data-ref-filename="sigaltstack">sigaltstack</a>(<b>nullptr</b>, &amp;<a class="local col4 ref" href="#24oldstack" title='oldstack' data-ref="24oldstack" data-ref-filename="24oldstack">oldstack</a>));</td></tr>
<tr><th id="173">173</th><td>  <i>// If the alternate stack is already in place, do nothing.</i></td></tr>
<tr><th id="174">174</th><td><i>  // Android always sets an alternate stack, but it's too small for us.</i></td></tr>
<tr><th id="175">175</th><td>  <b>if</b> (!<a class="macro" href="sanitizer_platform.h.html#105" title="0" data-ref="_M/SANITIZER_ANDROID">SANITIZER_ANDROID</a> &amp;&amp; !(<a class="local col4 ref" href="#24oldstack" title='oldstack' data-ref="24oldstack" data-ref-filename="24oldstack">oldstack</a>.<a class="ref field" href="../../../../include/bits/types/stack_t.h.html#(anonymous)::ss_flags" title='(anonymous struct)::ss_flags' data-ref="(anonymous)::ss_flags" data-ref-filename="(anonymous)..ss_flags">ss_flags</a> &amp; <a class="macro" href="../../../../include/bits/ss_flags.h.html#32" title="SS_DISABLE" data-ref="_M/SS_DISABLE">SS_DISABLE</a>)) <b>return</b>;</td></tr>
<tr><th id="176">176</th><td>  <i>// TODO(glider): the mapped stack should have the MAP_STACK flag in the</i></td></tr>
<tr><th id="177">177</th><td><i>  // future. It is not required by man 2 sigaltstack now (they're using</i></td></tr>
<tr><th id="178">178</th><td><i>  // malloc()).</i></td></tr>
<tr><th id="179">179</th><td>  <em>void</em>* <dfn class="local col5 decl" id="25base" title='base' data-type='void *' data-ref="25base" data-ref-filename="25base">base</dfn> = <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::MmapOrDie" title='__sanitizer::MmapOrDie' data-ref="__sanitizer::MmapOrDie" data-ref-filename="__sanitizer..MmapOrDie">MmapOrDie</a>(<a class="tu ref" href="#__sanitizer::kAltStackSize" title='__sanitizer::kAltStackSize' data-use='r' data-ref="__sanitizer::kAltStackSize" data-ref-filename="__sanitizer..kAltStackSize">kAltStackSize</a>, <b>__func__</b>);</td></tr>
<tr><th id="180">180</th><td>  <a class="local col3 ref" href="#23altstack" title='altstack' data-ref="23altstack" data-ref-filename="23altstack">altstack</a>.<a class="ref field" href="../../../../include/bits/types/stack_t.h.html#(anonymous)::ss_sp" title='(anonymous struct)::ss_sp' data-ref="(anonymous)::ss_sp" data-ref-filename="(anonymous)..ss_sp">ss_sp</a> = (<em>char</em>*) <a class="local col5 ref" href="#25base" title='base' data-ref="25base" data-ref-filename="25base">base</a>;</td></tr>
<tr><th id="181">181</th><td>  <a class="local col3 ref" href="#23altstack" title='altstack' data-ref="23altstack" data-ref-filename="23altstack">altstack</a>.<a class="ref field" href="../../../../include/bits/types/stack_t.h.html#(anonymous)::ss_flags" title='(anonymous struct)::ss_flags' data-ref="(anonymous)::ss_flags" data-ref-filename="(anonymous)..ss_flags">ss_flags</a> = <var>0</var>;</td></tr>
<tr><th id="182">182</th><td>  <a class="local col3 ref" href="#23altstack" title='altstack' data-ref="23altstack" data-ref-filename="23altstack">altstack</a>.<a class="ref field" href="../../../../include/bits/types/stack_t.h.html#(anonymous)::ss_size" title='(anonymous struct)::ss_size' data-ref="(anonymous)::ss_size" data-ref-filename="(anonymous)..ss_size">ss_size</a> = <a class="tu ref" href="#__sanitizer::kAltStackSize" title='__sanitizer::kAltStackSize' data-use='r' data-ref="__sanitizer::kAltStackSize" data-ref-filename="__sanitizer..kAltStackSize">kAltStackSize</a>;</td></tr>
<tr><th id="183">183</th><td>  <a class="macro" href="sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((0)); __sanitizer::u64 v2 = (__sanitizer::u64)((sigaltstack(&amp;altstack, nullptr))); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 183, &quot;(&quot; &quot;(0)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(sigaltstack(&amp;altstack, nullptr))&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<var>0</var>, <a class="ref fn" href="../../../../include/signal.h.html#sigaltstack" title='sigaltstack' data-ref="sigaltstack" data-ref-filename="sigaltstack">sigaltstack</a>(&amp;<a class="local col3 ref" href="#23altstack" title='altstack' data-ref="23altstack" data-ref-filename="23altstack">altstack</a>, <b>nullptr</b>));</td></tr>
<tr><th id="184">184</th><td>}</td></tr>
<tr><th id="185">185</th><td></td></tr>
<tr><th id="186">186</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::UnsetAlternateSignalStack" title='__sanitizer::UnsetAlternateSignalStack' data-ref="__sanitizer::UnsetAlternateSignalStack" data-ref-filename="__sanitizer..UnsetAlternateSignalStack">UnsetAlternateSignalStack</dfn>() {</td></tr>
<tr><th id="187">187</th><td>  <a class="typedef" href="../../../../include/bits/types/stack_t.h.html#stack_t" title='stack_t' data-type='struct stack_t' data-ref="stack_t" data-ref-filename="stack_t">stack_t</a> <a class="ref fn fake" href="../../../../include/bits/types/stack_t.h.html#26" title='(anonymous struct)::' data-ref="_ZN7stack_tC1Ev" data-ref-filename="_ZN7stack_tC1Ev"></a><dfn class="local col6 decl" id="26altstack" title='altstack' data-type='stack_t' data-ref="26altstack" data-ref-filename="26altstack">altstack</dfn>, <a class="ref fn fake" href="../../../../include/bits/types/stack_t.h.html#26" title='(anonymous struct)::' data-ref="_ZN7stack_tC1Ev" data-ref-filename="_ZN7stack_tC1Ev"></a><dfn class="local col7 decl" id="27oldstack" title='oldstack' data-type='stack_t' data-ref="27oldstack" data-ref-filename="27oldstack">oldstack</dfn>;</td></tr>
<tr><th id="188">188</th><td>  <a class="local col6 ref" href="#26altstack" title='altstack' data-ref="26altstack" data-ref-filename="26altstack">altstack</a>.<a class="ref field" href="../../../../include/bits/types/stack_t.h.html#(anonymous)::ss_sp" title='(anonymous struct)::ss_sp' data-ref="(anonymous)::ss_sp" data-ref-filename="(anonymous)..ss_sp">ss_sp</a> = <b>nullptr</b>;</td></tr>
<tr><th id="189">189</th><td>  <a class="local col6 ref" href="#26altstack" title='altstack' data-ref="26altstack" data-ref-filename="26altstack">altstack</a>.<a class="ref field" href="../../../../include/bits/types/stack_t.h.html#(anonymous)::ss_flags" title='(anonymous struct)::ss_flags' data-ref="(anonymous)::ss_flags" data-ref-filename="(anonymous)..ss_flags">ss_flags</a> = <a class="macro" href="../../../../include/bits/ss_flags.h.html#32" title="SS_DISABLE" data-ref="_M/SS_DISABLE">SS_DISABLE</a>;</td></tr>
<tr><th id="190">190</th><td>  <a class="local col6 ref" href="#26altstack" title='altstack' data-ref="26altstack" data-ref-filename="26altstack">altstack</a>.<a class="ref field" href="../../../../include/bits/types/stack_t.h.html#(anonymous)::ss_size" title='(anonymous struct)::ss_size' data-ref="(anonymous)::ss_size" data-ref-filename="(anonymous)..ss_size">ss_size</a> = <a class="tu ref" href="#__sanitizer::kAltStackSize" title='__sanitizer::kAltStackSize' data-use='r' data-ref="__sanitizer::kAltStackSize" data-ref-filename="__sanitizer..kAltStackSize">kAltStackSize</a>;  <i>// Some sane value required on Darwin.</i></td></tr>
<tr><th id="191">191</th><td>  <a class="macro" href="sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((0)); __sanitizer::u64 v2 = (__sanitizer::u64)((sigaltstack(&amp;altstack, &amp;oldstack))); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 191, &quot;(&quot; &quot;(0)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(sigaltstack(&amp;altstack, &amp;oldstack))&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<var>0</var>, <a class="ref fn" href="../../../../include/signal.h.html#sigaltstack" title='sigaltstack' data-ref="sigaltstack" data-ref-filename="sigaltstack">sigaltstack</a>(&amp;<a class="local col6 ref" href="#26altstack" title='altstack' data-ref="26altstack" data-ref-filename="26altstack">altstack</a>, &amp;<a class="local col7 ref" href="#27oldstack" title='oldstack' data-ref="27oldstack" data-ref-filename="27oldstack">oldstack</a>));</td></tr>
<tr><th id="192">192</th><td>  <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::UnmapOrDie" title='__sanitizer::UnmapOrDie' data-ref="__sanitizer::UnmapOrDie" data-ref-filename="__sanitizer..UnmapOrDie">UnmapOrDie</a>(<a class="local col7 ref" href="#27oldstack" title='oldstack' data-ref="27oldstack" data-ref-filename="27oldstack">oldstack</a>.<a class="ref field" href="../../../../include/bits/types/stack_t.h.html#(anonymous)::ss_sp" title='(anonymous struct)::ss_sp' data-ref="(anonymous)::ss_sp" data-ref-filename="(anonymous)..ss_sp">ss_sp</a>, <a class="local col7 ref" href="#27oldstack" title='oldstack' data-ref="27oldstack" data-ref-filename="27oldstack">oldstack</a>.<a class="ref field" href="../../../../include/bits/types/stack_t.h.html#(anonymous)::ss_size" title='(anonymous struct)::ss_size' data-ref="(anonymous)::ss_size" data-ref-filename="(anonymous)..ss_size">ss_size</a>);</td></tr>
<tr><th id="193">193</th><td>}</td></tr>
<tr><th id="194">194</th><td></td></tr>
<tr><th id="195">195</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="__sanitizer::MaybeInstallSigaction" title='__sanitizer::MaybeInstallSigaction' data-type='void __sanitizer::MaybeInstallSigaction(int signum, __sanitizer::SignalHandlerType handler)' data-ref="__sanitizer::MaybeInstallSigaction" data-ref-filename="__sanitizer..MaybeInstallSigaction">MaybeInstallSigaction</dfn>(<em>int</em> <dfn class="local col8 decl" id="28signum" title='signum' data-type='int' data-ref="28signum" data-ref-filename="28signum">signum</dfn>,</td></tr>
<tr><th id="196">196</th><td>                                  <a class="typedef" href="sanitizer_common.h.html#__sanitizer::SignalHandlerType" title='__sanitizer::SignalHandlerType' data-type='void (*)(int, void *, void *)' data-ref="__sanitizer::SignalHandlerType" data-ref-filename="__sanitizer..SignalHandlerType">SignalHandlerType</a> <dfn class="local col9 decl" id="29handler" title='handler' data-type='__sanitizer::SignalHandlerType' data-ref="29handler" data-ref-filename="29handler">handler</dfn>) {</td></tr>
<tr><th id="197">197</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_common.h.html#__sanitizer::GetHandleSignalMode" title='__sanitizer::GetHandleSignalMode' data-ref="__sanitizer::GetHandleSignalMode" data-ref-filename="__sanitizer..GetHandleSignalMode">GetHandleSignalMode</a>(<a class="local col8 ref" href="#28signum" title='signum' data-ref="28signum" data-ref-filename="28signum">signum</a>) == <a class="enum" href="sanitizer_flags.h.html#__sanitizer::kHandleSignalNo" title='__sanitizer::kHandleSignalNo' data-ref="__sanitizer::kHandleSignalNo" data-ref-filename="__sanitizer..kHandleSignalNo">kHandleSignalNo</a>) <b>return</b>;</td></tr>
<tr><th id="198">198</th><td></td></tr>
<tr><th id="199">199</th><td>  <b>struct</b> <a class="type" href="../../../../include/bits/sigaction.h.html#sigaction" title='sigaction' data-ref="sigaction" data-ref-filename="sigaction">sigaction</a> <a class="ref fn fake" href="../../../../include/bits/sigaction.h.html#27" title='sigaction::sigaction' data-ref="_ZN9sigactionC1Ev" data-ref-filename="_ZN9sigactionC1Ev"></a><dfn class="local col0 decl" id="30sigact" title='sigact' data-type='struct sigaction' data-ref="30sigact" data-ref-filename="30sigact">sigact</dfn>;</td></tr>
<tr><th id="200">200</th><td>  <a class="ref fn" href="sanitizer_libc.h.html#__sanitizer::internal_memset" title='__sanitizer::internal_memset' data-ref="__sanitizer::internal_memset" data-ref-filename="__sanitizer..internal_memset">internal_memset</a>(&amp;<a class="local col0 ref" href="#30sigact" title='sigact' data-ref="30sigact" data-ref-filename="30sigact">sigact</a>, <var>0</var>, <b>sizeof</b>(<a class="local col0 ref" href="#30sigact" title='sigact' data-ref="30sigact" data-ref-filename="30sigact">sigact</a>));</td></tr>
<tr><th id="201">201</th><td>  <a class="local col0 ref" href="#30sigact" title='sigact' data-ref="30sigact" data-ref-filename="30sigact">sigact</a>.<a class="macro" href="../../../../include/bits/sigaction.h.html#40" title="__sigaction_handler.sa_sigaction" data-ref="_M/sa_sigaction">sa_sigaction</a> = (<a class="typedef" href="#sa_sigaction_t" title='sa_sigaction_t' data-type='void (*)(int, siginfo_t *, void *)' data-ref="sa_sigaction_t" data-ref-filename="sa_sigaction_t">sa_sigaction_t</a>)<a class="local col9 ref" href="#29handler" title='handler' data-ref="29handler" data-ref-filename="29handler">handler</a>;</td></tr>
<tr><th id="202">202</th><td>  <i>// Do not block the signal from being received in that signal's handler.</i></td></tr>
<tr><th id="203">203</th><td><i>  // Clients are responsible for handling this correctly.</i></td></tr>
<tr><th id="204">204</th><td>  <a class="local col0 ref" href="#30sigact" title='sigact' data-ref="30sigact" data-ref-filename="30sigact">sigact</a>.<a class="ref field" href="../../../../include/bits/sigaction.h.html#sigaction::sa_flags" title='sigaction::sa_flags' data-ref="sigaction::sa_flags" data-ref-filename="sigaction..sa_flags">sa_flags</a> = <a class="macro" href="../../../../include/bits/sigaction.h.html#58" title="4" data-ref="_M/SA_SIGINFO">SA_SIGINFO</a> | <a class="macro" href="../../../../include/bits/sigaction.h.html#65" title="0x40000000" data-ref="_M/SA_NODEFER">SA_NODEFER</a>;</td></tr>
<tr><th id="205">205</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_flags.h.html#__sanitizer::common_flags" title='__sanitizer::common_flags' data-ref="__sanitizer::common_flags" data-ref-filename="__sanitizer..common_flags">common_flags</a>()-&gt;<a class="ref field" href="sanitizer_flags.inc.html#109" title='__sanitizer::CommonFlags::use_sigaltstack' data-ref="__sanitizer::CommonFlags::use_sigaltstack" data-ref-filename="__sanitizer..CommonFlags..use_sigaltstack">use_sigaltstack</a>) <a class="local col0 ref" href="#30sigact" title='sigact' data-ref="30sigact" data-ref-filename="30sigact">sigact</a>.<a class="ref field" href="../../../../include/bits/sigaction.h.html#sigaction::sa_flags" title='sigaction::sa_flags' data-ref="sigaction::sa_flags" data-ref-filename="sigaction..sa_flags">sa_flags</a> |= <a class="macro" href="../../../../include/bits/sigaction.h.html#61" title="0x08000000" data-ref="_M/SA_ONSTACK">SA_ONSTACK</a>;</td></tr>
<tr><th id="206">206</th><td>  <a class="macro" href="sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((0)); __sanitizer::u64 v2 = (__sanitizer::u64)((internal_sigaction(signum, &amp;sigact, nullptr))); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 206, &quot;(&quot; &quot;(0)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(internal_sigaction(signum, &amp;sigact, nullptr))&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<var>0</var>, <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_sigaction" title='__sanitizer::internal_sigaction' data-ref="__sanitizer::internal_sigaction" data-ref-filename="__sanitizer..internal_sigaction">internal_sigaction</a>(<a class="local col8 ref" href="#28signum" title='signum' data-ref="28signum" data-ref-filename="28signum">signum</a>, &amp;<a class="local col0 ref" href="#30sigact" title='sigact' data-ref="30sigact" data-ref-filename="30sigact">sigact</a>, <b>nullptr</b>));</td></tr>
<tr><th id="207">207</th><td>  <a class="macro" href="sanitizer_common.h.html#219" title="do { if ((uptr)Verbosity() &gt;= (1)) Report(&quot;Installed the sigaction for signal %d\n&quot;, signum); } while (0)" data-ref="_M/VReport">VReport</a>(<var>1</var>, <q>"Installed the sigaction for signal %d\n"</q>, <a class="local col8 ref" href="#28signum" title='signum' data-ref="28signum" data-ref-filename="28signum">signum</a>);</td></tr>
<tr><th id="208">208</th><td>}</td></tr>
<tr><th id="209">209</th><td></td></tr>
<tr><th id="210">210</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::InstallDeadlySignalHandlers" title='__sanitizer::InstallDeadlySignalHandlers' data-ref="__sanitizer::InstallDeadlySignalHandlers" data-ref-filename="__sanitizer..InstallDeadlySignalHandlers">InstallDeadlySignalHandlers</dfn>(<a class="typedef" href="sanitizer_common.h.html#__sanitizer::SignalHandlerType" title='__sanitizer::SignalHandlerType' data-type='void (*)(int, void *, void *)' data-ref="__sanitizer::SignalHandlerType" data-ref-filename="__sanitizer..SignalHandlerType">SignalHandlerType</a> <dfn class="local col1 decl" id="31handler" title='handler' data-type='__sanitizer::SignalHandlerType' data-ref="31handler" data-ref-filename="31handler">handler</dfn>) {</td></tr>
<tr><th id="211">211</th><td>  <i>// Set the alternate signal stack for the main thread.</i></td></tr>
<tr><th id="212">212</th><td><i>  // This will cause SetAlternateSignalStack to be called twice, but the stack</i></td></tr>
<tr><th id="213">213</th><td><i>  // will be actually set only once.</i></td></tr>
<tr><th id="214">214</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_flags.h.html#__sanitizer::common_flags" title='__sanitizer::common_flags' data-ref="__sanitizer::common_flags" data-ref-filename="__sanitizer..common_flags">common_flags</a>()-&gt;<a class="ref field" href="sanitizer_flags.inc.html#109" title='__sanitizer::CommonFlags::use_sigaltstack' data-ref="__sanitizer::CommonFlags::use_sigaltstack" data-ref-filename="__sanitizer..CommonFlags..use_sigaltstack">use_sigaltstack</a>) <a class="ref fn" href="#__sanitizer::SetAlternateSignalStack" title='__sanitizer::SetAlternateSignalStack' data-ref="__sanitizer::SetAlternateSignalStack" data-ref-filename="__sanitizer..SetAlternateSignalStack">SetAlternateSignalStack</a>();</td></tr>
<tr><th id="215">215</th><td>  <a class="tu ref fn" href="#__sanitizer::MaybeInstallSigaction" title='__sanitizer::MaybeInstallSigaction' data-use='c' data-ref="__sanitizer::MaybeInstallSigaction" data-ref-filename="__sanitizer..MaybeInstallSigaction">MaybeInstallSigaction</a>(<a class="macro" href="../../../../include/bits/signum-generic.h.html#52" title="11" data-ref="_M/SIGSEGV">SIGSEGV</a>, <a class="local col1 ref" href="#31handler" title='handler' data-ref="31handler" data-ref-filename="31handler">handler</a>);</td></tr>
<tr><th id="216">216</th><td>  <a class="tu ref fn" href="#__sanitizer::MaybeInstallSigaction" title='__sanitizer::MaybeInstallSigaction' data-use='c' data-ref="__sanitizer::MaybeInstallSigaction" data-ref-filename="__sanitizer..MaybeInstallSigaction">MaybeInstallSigaction</a>(<a class="macro" href="../../../../include/bits/signum.h.html#35" title="7" data-ref="_M/SIGBUS">SIGBUS</a>, <a class="local col1 ref" href="#31handler" title='handler' data-ref="31handler" data-ref-filename="31handler">handler</a>);</td></tr>
<tr><th id="217">217</th><td>  <a class="tu ref fn" href="#__sanitizer::MaybeInstallSigaction" title='__sanitizer::MaybeInstallSigaction' data-use='c' data-ref="__sanitizer::MaybeInstallSigaction" data-ref-filename="__sanitizer..MaybeInstallSigaction">MaybeInstallSigaction</a>(<a class="macro" href="../../../../include/bits/signum-generic.h.html#50" title="6" data-ref="_M/SIGABRT">SIGABRT</a>, <a class="local col1 ref" href="#31handler" title='handler' data-ref="31handler" data-ref-filename="31handler">handler</a>);</td></tr>
<tr><th id="218">218</th><td>  <a class="tu ref fn" href="#__sanitizer::MaybeInstallSigaction" title='__sanitizer::MaybeInstallSigaction' data-use='c' data-ref="__sanitizer::MaybeInstallSigaction" data-ref-filename="__sanitizer..MaybeInstallSigaction">MaybeInstallSigaction</a>(<a class="macro" href="../../../../include/bits/signum-generic.h.html#51" title="8" data-ref="_M/SIGFPE">SIGFPE</a>, <a class="local col1 ref" href="#31handler" title='handler' data-ref="31handler" data-ref-filename="31handler">handler</a>);</td></tr>
<tr><th id="219">219</th><td>  <a class="tu ref fn" href="#__sanitizer::MaybeInstallSigaction" title='__sanitizer::MaybeInstallSigaction' data-use='c' data-ref="__sanitizer::MaybeInstallSigaction" data-ref-filename="__sanitizer..MaybeInstallSigaction">MaybeInstallSigaction</a>(<a class="macro" href="../../../../include/bits/signum-generic.h.html#49" title="4" data-ref="_M/SIGILL">SIGILL</a>, <a class="local col1 ref" href="#31handler" title='handler' data-ref="31handler" data-ref-filename="31handler">handler</a>);</td></tr>
<tr><th id="220">220</th><td>  <a class="tu ref fn" href="#__sanitizer::MaybeInstallSigaction" title='__sanitizer::MaybeInstallSigaction' data-use='c' data-ref="__sanitizer::MaybeInstallSigaction" data-ref-filename="__sanitizer..MaybeInstallSigaction">MaybeInstallSigaction</a>(<a class="macro" href="../../../../include/bits/signum-generic.h.html#58" title="5" data-ref="_M/SIGTRAP">SIGTRAP</a>, <a class="local col1 ref" href="#31handler" title='handler' data-ref="31handler" data-ref-filename="31handler">handler</a>);</td></tr>
<tr><th id="221">221</th><td>}</td></tr>
<tr><th id="222">222</th><td></td></tr>
<tr><th id="223">223</th><td><em>bool</em> <a class="type" href="sanitizer_common.h.html#__sanitizer::SignalContext" title='__sanitizer::SignalContext' data-ref="__sanitizer::SignalContext" data-ref-filename="__sanitizer..SignalContext">SignalContext</a>::<dfn class="decl def fn" id="__sanitizer::SignalContext::IsStackOverflow" title='__sanitizer::SignalContext::IsStackOverflow' data-ref="__sanitizer::SignalContext::IsStackOverflow" data-ref-filename="__sanitizer..SignalContext..IsStackOverflow">IsStackOverflow</dfn>() <em>const</em> {</td></tr>
<tr><th id="224">224</th><td>  <i>// Access at a reasonable offset above SP, or slightly below it (to account</i></td></tr>
<tr><th id="225">225</th><td><i>  // for x86_64 or PowerPC redzone, ARM push of multiple registers, etc) is</i></td></tr>
<tr><th id="226">226</th><td><i>  // probably a stack overflow.</i></td></tr>
<tr><th id="227">227</th><td><u>#<span data-ppcond="227">ifdef</span> <span class="macro" data-ref="_M/__s390__">__s390__</span></u></td></tr>
<tr><th id="228">228</th><td>  <i>// On s390, the fault address in siginfo points to start of the page, not</i></td></tr>
<tr><th id="229">229</th><td><i>  // to the precise word that was accessed.  Mask off the low bits of sp to</i></td></tr>
<tr><th id="230">230</th><td><i>  // take it into account.</i></td></tr>
<tr><th id="231">231</th><td>  <em>bool</em> IsStackAccess = addr &gt;= (sp &amp; ~<var>0xFFF</var>) &amp;&amp; addr &lt; sp + <var>0xFFFF</var>;</td></tr>
<tr><th id="232">232</th><td><u>#<span data-ppcond="227">else</span></u></td></tr>
<tr><th id="233">233</th><td>  <i>// Let's accept up to a page size away from top of stack. Things like stack</i></td></tr>
<tr><th id="234">234</th><td><i>  // probing can trigger accesses with such large offsets.</i></td></tr>
<tr><th id="235">235</th><td>  <em>bool</em> <dfn class="local col2 decl" id="32IsStackAccess" title='IsStackAccess' data-type='bool' data-ref="32IsStackAccess" data-ref-filename="32IsStackAccess">IsStackAccess</dfn> = <a class="member field" href="sanitizer_common.h.html#__sanitizer::SignalContext::addr" title='__sanitizer::SignalContext::addr' data-ref="__sanitizer::SignalContext::addr" data-ref-filename="__sanitizer..SignalContext..addr">addr</a> + <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::GetPageSizeCached" title='__sanitizer::GetPageSizeCached' data-ref="__sanitizer::GetPageSizeCached" data-ref-filename="__sanitizer..GetPageSizeCached">GetPageSizeCached</a>() &gt; <a class="member field" href="sanitizer_common.h.html#__sanitizer::SignalContext::sp" title='__sanitizer::SignalContext::sp' data-ref="__sanitizer::SignalContext::sp" data-ref-filename="__sanitizer..SignalContext..sp">sp</a> &amp;&amp; <a class="member field" href="sanitizer_common.h.html#__sanitizer::SignalContext::addr" title='__sanitizer::SignalContext::addr' data-ref="__sanitizer::SignalContext::addr" data-ref-filename="__sanitizer..SignalContext..addr">addr</a> &lt; <a class="member field" href="sanitizer_common.h.html#__sanitizer::SignalContext::sp" title='__sanitizer::SignalContext::sp' data-ref="__sanitizer::SignalContext::sp" data-ref-filename="__sanitizer..SignalContext..sp">sp</a> + <var>0xFFFF</var>;</td></tr>
<tr><th id="236">236</th><td><u>#<span data-ppcond="227">endif</span></u></td></tr>
<tr><th id="237">237</th><td></td></tr>
<tr><th id="238">238</th><td><u>#<span data-ppcond="238">if</span> __powerpc__</u></td></tr>
<tr><th id="239">239</th><td>  <i>// Large stack frames can be allocated with e.g.</i></td></tr>
<tr><th id="240">240</th><td><i>  //   lis r0,-10000</i></td></tr>
<tr><th id="241">241</th><td><i>  //   stdux r1,r1,r0 # store sp to [sp-10000] and update sp by -10000</i></td></tr>
<tr><th id="242">242</th><td><i>  // If the store faults then sp will not have been updated, so test above</i></td></tr>
<tr><th id="243">243</th><td><i>  // will not work, because the fault address will be more than just "slightly"</i></td></tr>
<tr><th id="244">244</th><td><i>  // below sp.</i></td></tr>
<tr><th id="245">245</th><td>  <b>if</b> (!IsStackAccess &amp;&amp; IsAccessibleMemoryRange(pc, <var>4</var>)) {</td></tr>
<tr><th id="246">246</th><td>    u32 inst = *(<em>unsigned</em> *)pc;</td></tr>
<tr><th id="247">247</th><td>    u32 ra = (inst &gt;&gt; <var>16</var>) &amp; <var>0x1F</var>;</td></tr>
<tr><th id="248">248</th><td>    u32 opcd = inst &gt;&gt; <var>26</var>;</td></tr>
<tr><th id="249">249</th><td>    u32 xo = (inst &gt;&gt; <var>1</var>) &amp; <var>0x3FF</var>;</td></tr>
<tr><th id="250">250</th><td>    <i>// Check for store-with-update to sp. The instructions we accept are:</i></td></tr>
<tr><th id="251">251</th><td><i>    //   stbu rs,d(ra)          stbux rs,ra,rb</i></td></tr>
<tr><th id="252">252</th><td><i>    //   sthu rs,d(ra)          sthux rs,ra,rb</i></td></tr>
<tr><th id="253">253</th><td><i>    //   stwu rs,d(ra)          stwux rs,ra,rb</i></td></tr>
<tr><th id="254">254</th><td><i>    //   stdu rs,ds(ra)         stdux rs,ra,rb</i></td></tr>
<tr><th id="255">255</th><td><i>    // where ra is r1 (the stack pointer).</i></td></tr>
<tr><th id="256">256</th><td>    <b>if</b> (ra == <var>1</var> &amp;&amp;</td></tr>
<tr><th id="257">257</th><td>        (opcd == <var>39</var> || opcd == <var>45</var> || opcd == <var>37</var> || opcd == <var>62</var> ||</td></tr>
<tr><th id="258">258</th><td>         (opcd == <var>31</var> &amp;&amp; (xo == <var>247</var> || xo == <var>439</var> || xo == <var>183</var> || xo == <var>181</var>))))</td></tr>
<tr><th id="259">259</th><td>      IsStackAccess = <b>true</b>;</td></tr>
<tr><th id="260">260</th><td>  }</td></tr>
<tr><th id="261">261</th><td><u>#<span data-ppcond="238">endif</span>  // __powerpc__</u></td></tr>
<tr><th id="262">262</th><td></td></tr>
<tr><th id="263">263</th><td>  <i>// We also check si_code to filter out SEGV caused by something else other</i></td></tr>
<tr><th id="264">264</th><td><i>  // then hitting the guard page or unmapped memory, like, for example,</i></td></tr>
<tr><th id="265">265</th><td><i>  // unaligned memory access.</i></td></tr>
<tr><th id="266">266</th><td>  <em>auto</em> <dfn class="local col3 decl" id="33si" title='si' data-type='const siginfo_t *' data-ref="33si" data-ref-filename="33si">si</dfn> = <b>static_cast</b>&lt;<em>const</em> <a class="typedef" href="../../../../include/bits/types/siginfo_t.h.html#siginfo_t" title='siginfo_t' data-type='struct siginfo_t' data-ref="siginfo_t" data-ref-filename="siginfo_t">siginfo_t</a> *&gt;(<a class="member field" href="sanitizer_common.h.html#__sanitizer::SignalContext::siginfo" title='__sanitizer::SignalContext::siginfo' data-ref="__sanitizer::SignalContext::siginfo" data-ref-filename="__sanitizer..SignalContext..siginfo">siginfo</a>);</td></tr>
<tr><th id="267">267</th><td>  <b>return</b> <a class="local col2 ref" href="#32IsStackAccess" title='IsStackAccess' data-ref="32IsStackAccess" data-ref-filename="32IsStackAccess">IsStackAccess</a> &amp;&amp;</td></tr>
<tr><th id="268">268</th><td>         (<a class="local col3 ref" href="#33si" title='si' data-ref="33si" data-ref-filename="33si">si</a>-&gt;<a class="ref field" href="../../../../include/bits/types/siginfo_t.h.html#(anonymous)::si_code" title='(anonymous struct)::si_code' data-ref="(anonymous)::si_code" data-ref-filename="(anonymous)..si_code">si_code</a> == <a class="ref" href="sanitizer_platform_limits_posix.h.html#__sanitizer::si_SEGV_MAPERR" title='__sanitizer::si_SEGV_MAPERR' data-ref="__sanitizer::si_SEGV_MAPERR" data-ref-filename="__sanitizer..si_SEGV_MAPERR">si_SEGV_MAPERR</a> || <a class="local col3 ref" href="#33si" title='si' data-ref="33si" data-ref-filename="33si">si</a>-&gt;<a class="ref field" href="../../../../include/bits/types/siginfo_t.h.html#(anonymous)::si_code" title='(anonymous struct)::si_code' data-ref="(anonymous)::si_code" data-ref-filename="(anonymous)..si_code">si_code</a> == <a class="ref" href="sanitizer_platform_limits_posix.h.html#__sanitizer::si_SEGV_ACCERR" title='__sanitizer::si_SEGV_ACCERR' data-ref="__sanitizer::si_SEGV_ACCERR" data-ref-filename="__sanitizer..si_SEGV_ACCERR">si_SEGV_ACCERR</a>);</td></tr>
<tr><th id="269">269</th><td>}</td></tr>
<tr><th id="270">270</th><td></td></tr>
<tr><th id="271">271</th><td><u>#<span data-ppcond="166">endif</span>  // SANITIZER_GO</u></td></tr>
<tr><th id="272">272</th><td></td></tr>
<tr><th id="273">273</th><td><em>bool</em> <dfn class="decl def fn" id="__sanitizer::IsAccessibleMemoryRange" title='__sanitizer::IsAccessibleMemoryRange' data-ref="__sanitizer::IsAccessibleMemoryRange" data-ref-filename="__sanitizer..IsAccessibleMemoryRange">IsAccessibleMemoryRange</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="34beg" title='beg' data-type='__sanitizer::uptr' data-ref="34beg" data-ref-filename="34beg">beg</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="35size" title='size' data-type='__sanitizer::uptr' data-ref="35size" data-ref-filename="35size">size</dfn>) {</td></tr>
<tr><th id="274">274</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="36page_size" title='page_size' data-type='__sanitizer::uptr' data-ref="36page_size" data-ref-filename="36page_size">page_size</dfn> = <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::GetPageSizeCached" title='__sanitizer::GetPageSizeCached' data-ref="__sanitizer::GetPageSizeCached" data-ref-filename="__sanitizer..GetPageSizeCached">GetPageSizeCached</a>();</td></tr>
<tr><th id="275">275</th><td>  <i>// Checking too large memory ranges is slow.</i></td></tr>
<tr><th id="276">276</th><td>  <a class="macro" href="sanitizer_internal_defs.h.html#302" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((size)); __sanitizer::u64 v2 = (__sanitizer::u64)((page_size * 10)); if (__builtin_expect(!!(!(v1 &lt; v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 276, &quot;(&quot; &quot;(size)&quot; &quot;) &quot; &quot;&lt;&quot; &quot; (&quot; &quot;(page_size * 10)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_LT">CHECK_LT</a>(<a class="local col5 ref" href="#35size" title='size' data-ref="35size" data-ref-filename="35size">size</a>, <a class="local col6 ref" href="#36page_size" title='page_size' data-ref="36page_size" data-ref-filename="36page_size">page_size</a> * <var>10</var>);</td></tr>
<tr><th id="277">277</th><td>  <em>int</em> <dfn class="local col7 decl" id="37sock_pair" title='sock_pair' data-type='int [2]' data-ref="37sock_pair" data-ref-filename="37sock_pair">sock_pair</dfn>[<var>2</var>];</td></tr>
<tr><th id="278">278</th><td>  <b>if</b> (<a class="ref fn" href="../../../../include/unistd.h.html#pipe" title='pipe' data-ref="pipe" data-ref-filename="pipe">pipe</a>(<a class="local col7 ref" href="#37sock_pair" title='sock_pair' data-ref="37sock_pair" data-ref-filename="37sock_pair">sock_pair</a>))</td></tr>
<tr><th id="279">279</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="280">280</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="38bytes_written" title='bytes_written' data-type='__sanitizer::uptr' data-ref="38bytes_written" data-ref-filename="38bytes_written">bytes_written</dfn> =</td></tr>
<tr><th id="281">281</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_write" title='__sanitizer::internal_write' data-ref="__sanitizer::internal_write" data-ref-filename="__sanitizer..internal_write">internal_write</a>(<a class="local col7 ref" href="#37sock_pair" title='sock_pair' data-ref="37sock_pair" data-ref-filename="37sock_pair">sock_pair</a>[<var>1</var>], <b>reinterpret_cast</b>&lt;<em>void</em> *&gt;(<a class="local col4 ref" href="#34beg" title='beg' data-ref="34beg" data-ref-filename="34beg">beg</a>), <a class="local col5 ref" href="#35size" title='size' data-ref="35size" data-ref-filename="35size">size</a>);</td></tr>
<tr><th id="282">282</th><td>  <em>int</em> <dfn class="local col9 decl" id="39write_errno" title='write_errno' data-type='int' data-ref="39write_errno" data-ref-filename="39write_errno">write_errno</dfn>;</td></tr>
<tr><th id="283">283</th><td>  <em>bool</em> <dfn class="local col0 decl" id="40result" title='result' data-type='bool' data-ref="40result" data-ref-filename="40result">result</dfn>;</td></tr>
<tr><th id="284">284</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_libc.h.html#__sanitizer::internal_iserror" title='__sanitizer::internal_iserror' data-ref="__sanitizer::internal_iserror" data-ref-filename="__sanitizer..internal_iserror">internal_iserror</a>(<a class="local col8 ref" href="#38bytes_written" title='bytes_written' data-ref="38bytes_written" data-ref-filename="38bytes_written">bytes_written</a>, &amp;<a class="local col9 ref" href="#39write_errno" title='write_errno' data-ref="39write_errno" data-ref-filename="39write_errno">write_errno</a>)) {</td></tr>
<tr><th id="285">285</th><td>    <a class="macro" href="sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((14)); __sanitizer::u64 v2 = (__sanitizer::u64)((write_errno)); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 285, &quot;(&quot; &quot;(14)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(write_errno)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="macro" href="../../../../include/asm-generic/errno-base.h.html#18" title="14" data-ref="_M/EFAULT">EFAULT</a>, <a class="local col9 ref" href="#39write_errno" title='write_errno' data-ref="39write_errno" data-ref-filename="39write_errno">write_errno</a>);</td></tr>
<tr><th id="286">286</th><td>    <a class="local col0 ref" href="#40result" title='result' data-ref="40result" data-ref-filename="40result">result</a> = <b>false</b>;</td></tr>
<tr><th id="287">287</th><td>  } <b>else</b> {</td></tr>
<tr><th id="288">288</th><td>    <a class="local col0 ref" href="#40result" title='result' data-ref="40result" data-ref-filename="40result">result</a> = (<a class="local col8 ref" href="#38bytes_written" title='bytes_written' data-ref="38bytes_written" data-ref-filename="38bytes_written">bytes_written</a> == <a class="local col5 ref" href="#35size" title='size' data-ref="35size" data-ref-filename="35size">size</a>);</td></tr>
<tr><th id="289">289</th><td>  }</td></tr>
<tr><th id="290">290</th><td>  <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="local col7 ref" href="#37sock_pair" title='sock_pair' data-ref="37sock_pair" data-ref-filename="37sock_pair">sock_pair</a>[<var>0</var>]);</td></tr>
<tr><th id="291">291</th><td>  <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="local col7 ref" href="#37sock_pair" title='sock_pair' data-ref="37sock_pair" data-ref-filename="37sock_pair">sock_pair</a>[<var>1</var>]);</td></tr>
<tr><th id="292">292</th><td>  <b>return</b> <a class="local col0 ref" href="#40result" title='result' data-ref="40result" data-ref-filename="40result">result</a>;</td></tr>
<tr><th id="293">293</th><td>}</td></tr>
<tr><th id="294">294</th><td></td></tr>
<tr><th id="295">295</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::PlatformPrepareForSandboxing" title='__sanitizer::PlatformPrepareForSandboxing' data-ref="__sanitizer::PlatformPrepareForSandboxing" data-ref-filename="__sanitizer..PlatformPrepareForSandboxing">PlatformPrepareForSandboxing</dfn>(<a class="typedef" href="sanitizer_interface_internal.h.html#__sanitizer_sandbox_arguments" title='__sanitizer_sandbox_arguments' data-type='struct __sanitizer_sandbox_arguments' data-ref="__sanitizer_sandbox_arguments" data-ref-filename="__sanitizer_sandbox_arguments">__sanitizer_sandbox_arguments</a> *<dfn class="local col1 decl" id="41args" title='args' data-type='__sanitizer_sandbox_arguments *' data-ref="41args" data-ref-filename="41args">args</dfn>) {</td></tr>
<tr><th id="296">296</th><td>  <i>// Some kinds of sandboxes may forbid filesystem access, so we won't be able</i></td></tr>
<tr><th id="297">297</th><td><i>  // to read the file mappings from /proc/self/maps. Luckily, neither the</i></td></tr>
<tr><th id="298">298</th><td><i>  // process will be able to load additional libraries, so it's fine to use the</i></td></tr>
<tr><th id="299">299</th><td><i>  // cached mappings.</i></td></tr>
<tr><th id="300">300</th><td>  <a class="type" href="sanitizer_procmaps.h.html#__sanitizer::MemoryMappingLayout" title='__sanitizer::MemoryMappingLayout' data-ref="__sanitizer::MemoryMappingLayout" data-ref-filename="__sanitizer..MemoryMappingLayout">MemoryMappingLayout</a>::<a class="ref fn" href="sanitizer_procmaps.h.html#__sanitizer::MemoryMappingLayout::CacheMemoryMappings" title='__sanitizer::MemoryMappingLayout::CacheMemoryMappings' data-ref="__sanitizer::MemoryMappingLayout::CacheMemoryMappings" data-ref-filename="__sanitizer..MemoryMappingLayout..CacheMemoryMappings">CacheMemoryMappings</a>();</td></tr>
<tr><th id="301">301</th><td>}</td></tr>
<tr><th id="302">302</th><td></td></tr>
<tr><th id="303">303</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def fn" id="__sanitizer::MmapFixed" title='__sanitizer::MmapFixed' data-type='bool __sanitizer::MmapFixed(__sanitizer::uptr fixed_addr, __sanitizer::uptr size, int additional_flags, const char * name)' data-ref="__sanitizer::MmapFixed" data-ref-filename="__sanitizer..MmapFixed">MmapFixed</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="42fixed_addr" title='fixed_addr' data-type='__sanitizer::uptr' data-ref="42fixed_addr" data-ref-filename="42fixed_addr">fixed_addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col3 decl" id="43size" title='size' data-type='__sanitizer::uptr' data-ref="43size" data-ref-filename="43size">size</dfn>, <em>int</em> <dfn class="local col4 decl" id="44additional_flags" title='additional_flags' data-type='int' data-ref="44additional_flags" data-ref-filename="44additional_flags">additional_flags</dfn>,</td></tr>
<tr><th id="304">304</th><td>                      <em>const</em> <em>char</em> *<dfn class="local col5 decl" id="45name" title='name' data-type='const char *' data-ref="45name" data-ref-filename="45name">name</dfn>) {</td></tr>
<tr><th id="305">305</th><td>  <a class="local col3 ref" href="#43size" title='size' data-ref="43size" data-ref-filename="43size">size</a> = <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::RoundUpTo" title='__sanitizer::RoundUpTo' data-ref="__sanitizer::RoundUpTo" data-ref-filename="__sanitizer..RoundUpTo">RoundUpTo</a>(<a class="local col3 ref" href="#43size" title='size' data-ref="43size" data-ref-filename="43size">size</a>, <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::GetPageSizeCached" title='__sanitizer::GetPageSizeCached' data-ref="__sanitizer::GetPageSizeCached" data-ref-filename="__sanitizer..GetPageSizeCached">GetPageSizeCached</a>());</td></tr>
<tr><th id="306">306</th><td>  <a class="local col2 ref" href="#42fixed_addr" title='fixed_addr' data-ref="42fixed_addr" data-ref-filename="42fixed_addr">fixed_addr</a> = <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::RoundDownTo" title='__sanitizer::RoundDownTo' data-ref="__sanitizer::RoundDownTo" data-ref-filename="__sanitizer..RoundDownTo">RoundDownTo</a>(<a class="local col2 ref" href="#42fixed_addr" title='fixed_addr' data-ref="42fixed_addr" data-ref-filename="42fixed_addr">fixed_addr</a>, <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::GetPageSizeCached" title='__sanitizer::GetPageSizeCached' data-ref="__sanitizer::GetPageSizeCached" data-ref-filename="__sanitizer..GetPageSizeCached">GetPageSizeCached</a>());</td></tr>
<tr><th id="307">307</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="46p" title='p' data-type='__sanitizer::uptr' data-ref="46p" data-ref-filename="46p">p</dfn> =</td></tr>
<tr><th id="308">308</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::MmapNamed" title='__sanitizer::MmapNamed' data-ref="__sanitizer::MmapNamed" data-ref-filename="__sanitizer..MmapNamed">MmapNamed</a>((<em>void</em> *)<a class="local col2 ref" href="#42fixed_addr" title='fixed_addr' data-ref="42fixed_addr" data-ref-filename="42fixed_addr">fixed_addr</a>, <a class="local col3 ref" href="#43size" title='size' data-ref="43size" data-ref-filename="43size">size</a>, <a class="macro" href="../../../../include/bits/mman-linux.h.html#32" title="0x1" data-ref="_M/PROT_READ">PROT_READ</a> | <a class="macro" href="../../../../include/bits/mman-linux.h.html#33" title="0x2" data-ref="_M/PROT_WRITE">PROT_WRITE</a>,</td></tr>
<tr><th id="309">309</th><td>                <a class="macro" href="../../../../include/bits/mman-linux.h.html#43" title="0x02" data-ref="_M/MAP_PRIVATE">MAP_PRIVATE</a> | <a class="macro" href="../../../../include/bits/mman-linux.h.html#51" title="0x10" data-ref="_M/MAP_FIXED">MAP_FIXED</a> | <a class="local col4 ref" href="#44additional_flags" title='additional_flags' data-ref="44additional_flags" data-ref-filename="44additional_flags">additional_flags</a> | <a class="macro" href="../../../../include/bits/mman-linux.h.html#59" title="0x20" data-ref="_M/MAP_ANON">MAP_ANON</a>, <a class="local col5 ref" href="#45name" title='name' data-ref="45name" data-ref-filename="45name">name</a>);</td></tr>
<tr><th id="310">310</th><td>  <em>int</em> <dfn class="local col7 decl" id="47reserrno" title='reserrno' data-type='int' data-ref="47reserrno" data-ref-filename="47reserrno">reserrno</dfn>;</td></tr>
<tr><th id="311">311</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_libc.h.html#__sanitizer::internal_iserror" title='__sanitizer::internal_iserror' data-ref="__sanitizer::internal_iserror" data-ref-filename="__sanitizer..internal_iserror">internal_iserror</a>(<a class="local col6 ref" href="#46p" title='p' data-ref="46p" data-ref-filename="46p">p</a>, &amp;<a class="local col7 ref" href="#47reserrno" title='reserrno' data-ref="47reserrno" data-ref-filename="47reserrno">reserrno</a>)) {</td></tr>
<tr><th id="312">312</th><td>    <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"ERROR: %s failed to "</q></td></tr>
<tr><th id="313">313</th><td>           <q>"allocate 0x%zx (%zd) bytes at address %zx (errno: %d)\n"</q>,</td></tr>
<tr><th id="314">314</th><td>           <a class="ref" href="sanitizer_common.h.html#__sanitizer::SanitizerToolName" title='__sanitizer::SanitizerToolName' data-ref="__sanitizer::SanitizerToolName" data-ref-filename="__sanitizer..SanitizerToolName">SanitizerToolName</a>, <a class="local col3 ref" href="#43size" title='size' data-ref="43size" data-ref-filename="43size">size</a>, <a class="local col3 ref" href="#43size" title='size' data-ref="43size" data-ref-filename="43size">size</a>, <a class="local col2 ref" href="#42fixed_addr" title='fixed_addr' data-ref="42fixed_addr" data-ref-filename="42fixed_addr">fixed_addr</a>, <a class="local col7 ref" href="#47reserrno" title='reserrno' data-ref="47reserrno" data-ref-filename="47reserrno">reserrno</a>);</td></tr>
<tr><th id="315">315</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="316">316</th><td>  }</td></tr>
<tr><th id="317">317</th><td>  <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::IncreaseTotalMmap" title='__sanitizer::IncreaseTotalMmap' data-ref="__sanitizer::IncreaseTotalMmap" data-ref-filename="__sanitizer..IncreaseTotalMmap">IncreaseTotalMmap</a>(<a class="local col3 ref" href="#43size" title='size' data-ref="43size" data-ref-filename="43size">size</a>);</td></tr>
<tr><th id="318">318</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="319">319</th><td>}</td></tr>
<tr><th id="320">320</th><td></td></tr>
<tr><th id="321">321</th><td><em>bool</em> <dfn class="decl def fn" id="__sanitizer::MmapFixedNoReserve" title='__sanitizer::MmapFixedNoReserve' data-ref="__sanitizer::MmapFixedNoReserve" data-ref-filename="__sanitizer..MmapFixedNoReserve">MmapFixedNoReserve</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="48fixed_addr" title='fixed_addr' data-type='__sanitizer::uptr' data-ref="48fixed_addr" data-ref-filename="48fixed_addr">fixed_addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="49size" title='size' data-type='__sanitizer::uptr' data-ref="49size" data-ref-filename="49size">size</dfn>, <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="50name" title='name' data-type='const char *' data-ref="50name" data-ref-filename="50name">name</dfn>) {</td></tr>
<tr><th id="322">322</th><td>  <b>return</b> <a class="tu ref fn" href="#__sanitizer::MmapFixed" title='__sanitizer::MmapFixed' data-use='c' data-ref="__sanitizer::MmapFixed" data-ref-filename="__sanitizer..MmapFixed">MmapFixed</a>(<a class="local col8 ref" href="#48fixed_addr" title='fixed_addr' data-ref="48fixed_addr" data-ref-filename="48fixed_addr">fixed_addr</a>, <a class="local col9 ref" href="#49size" title='size' data-ref="49size" data-ref-filename="49size">size</a>, <a class="macro" href="../../../../include/bits/mman-map-flags-generic.h.html#33" title="0x04000" data-ref="_M/MAP_NORESERVE">MAP_NORESERVE</a>, <a class="local col0 ref" href="#50name" title='name' data-ref="50name" data-ref-filename="50name">name</a>);</td></tr>
<tr><th id="323">323</th><td>}</td></tr>
<tr><th id="324">324</th><td></td></tr>
<tr><th id="325">325</th><td><em>bool</em> <dfn class="decl def fn" id="__sanitizer::MmapFixedSuperNoReserve" title='__sanitizer::MmapFixedSuperNoReserve' data-ref="__sanitizer::MmapFixedSuperNoReserve" data-ref-filename="__sanitizer..MmapFixedSuperNoReserve">MmapFixedSuperNoReserve</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="51fixed_addr" title='fixed_addr' data-type='__sanitizer::uptr' data-ref="51fixed_addr" data-ref-filename="51fixed_addr">fixed_addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="52size" title='size' data-type='__sanitizer::uptr' data-ref="52size" data-ref-filename="52size">size</dfn>, <em>const</em> <em>char</em> *<dfn class="local col3 decl" id="53name" title='name' data-type='const char *' data-ref="53name" data-ref-filename="53name">name</dfn>) {</td></tr>
<tr><th id="326">326</th><td><u>#<span data-ppcond="326">if</span> <a class="macro" href="sanitizer_platform.h.html#44" title="0" data-ref="_M/SANITIZER_FREEBSD">SANITIZER_FREEBSD</a></u></td></tr>
<tr><th id="327">327</th><td>  <b>if</b> (common_flags()-&gt;no_huge_pages_for_shadow)</td></tr>
<tr><th id="328">328</th><td>    <b>return</b> MmapFixedNoReserve(fixed_addr, size, name);</td></tr>
<tr><th id="329">329</th><td>  <i>// MAP_NORESERVE is implicit with FreeBSD</i></td></tr>
<tr><th id="330">330</th><td>  <b>return</b> MmapFixed(fixed_addr, size, MAP_ALIGNED_SUPER, name);</td></tr>
<tr><th id="331">331</th><td><u>#<span data-ppcond="326">else</span></u></td></tr>
<tr><th id="332">332</th><td>  <em>bool</em> <dfn class="local col4 decl" id="54r" title='r' data-type='bool' data-ref="54r" data-ref-filename="54r">r</dfn> = <a class="ref fn" href="#__sanitizer::MmapFixedNoReserve" title='__sanitizer::MmapFixedNoReserve' data-ref="__sanitizer::MmapFixedNoReserve" data-ref-filename="__sanitizer..MmapFixedNoReserve">MmapFixedNoReserve</a>(<a class="local col1 ref" href="#51fixed_addr" title='fixed_addr' data-ref="51fixed_addr" data-ref-filename="51fixed_addr">fixed_addr</a>, <a class="local col2 ref" href="#52size" title='size' data-ref="52size" data-ref-filename="52size">size</a>, <a class="local col3 ref" href="#53name" title='name' data-ref="53name" data-ref-filename="53name">name</a>);</td></tr>
<tr><th id="333">333</th><td>  <b>if</b> (<a class="local col4 ref" href="#54r" title='r' data-ref="54r" data-ref-filename="54r">r</a>)</td></tr>
<tr><th id="334">334</th><td>    <a class="ref fn" href="#__sanitizer::SetShadowRegionHugePageMode" title='__sanitizer::SetShadowRegionHugePageMode' data-ref="__sanitizer::SetShadowRegionHugePageMode" data-ref-filename="__sanitizer..SetShadowRegionHugePageMode">SetShadowRegionHugePageMode</a>(<a class="local col1 ref" href="#51fixed_addr" title='fixed_addr' data-ref="51fixed_addr" data-ref-filename="51fixed_addr">fixed_addr</a>, <a class="local col2 ref" href="#52size" title='size' data-ref="52size" data-ref-filename="52size">size</a>);</td></tr>
<tr><th id="335">335</th><td>  <b>return</b> <a class="local col4 ref" href="#54r" title='r' data-ref="54r" data-ref-filename="54r">r</a>;</td></tr>
<tr><th id="336">336</th><td><u>#<span data-ppcond="326">endif</span></u></td></tr>
<tr><th id="337">337</th><td>}</td></tr>
<tr><th id="338">338</th><td></td></tr>
<tr><th id="339">339</th><td><a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="type" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange" title='__sanitizer::ReservedAddressRange' data-ref="__sanitizer::ReservedAddressRange" data-ref-filename="__sanitizer..ReservedAddressRange">ReservedAddressRange</a>::<dfn class="decl def fn" id="__sanitizer::ReservedAddressRange::Init" title='__sanitizer::ReservedAddressRange::Init' data-ref="__sanitizer::ReservedAddressRange::Init" data-ref-filename="__sanitizer..ReservedAddressRange..Init">Init</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="55size" title='size' data-type='__sanitizer::uptr' data-ref="55size" data-ref-filename="55size">size</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="56name" title='name' data-type='const char *' data-ref="56name" data-ref-filename="56name">name</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="57fixed_addr" title='fixed_addr' data-type='__sanitizer::uptr' data-ref="57fixed_addr" data-ref-filename="57fixed_addr">fixed_addr</dfn>) {</td></tr>
<tr><th id="340">340</th><td>  <a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::base_" title='__sanitizer::ReservedAddressRange::base_' data-ref="__sanitizer::ReservedAddressRange::base_" data-ref-filename="__sanitizer..ReservedAddressRange..base_">base_</a> = <a class="local col7 ref" href="#57fixed_addr" title='fixed_addr' data-ref="57fixed_addr" data-ref-filename="57fixed_addr">fixed_addr</a> ? <a class="ref fn" href="#__sanitizer::MmapFixedNoAccess" title='__sanitizer::MmapFixedNoAccess' data-ref="__sanitizer::MmapFixedNoAccess" data-ref-filename="__sanitizer..MmapFixedNoAccess">MmapFixedNoAccess</a>(<a class="local col7 ref" href="#57fixed_addr" title='fixed_addr' data-ref="57fixed_addr" data-ref-filename="57fixed_addr">fixed_addr</a>, <a class="local col5 ref" href="#55size" title='size' data-ref="55size" data-ref-filename="55size">size</a>, <a class="local col6 ref" href="#56name" title='name' data-ref="56name" data-ref-filename="56name">name</a>)</td></tr>
<tr><th id="341">341</th><td>                     : <a class="ref fn" href="#__sanitizer::MmapNoAccess" title='__sanitizer::MmapNoAccess' data-ref="__sanitizer::MmapNoAccess" data-ref-filename="__sanitizer..MmapNoAccess">MmapNoAccess</a>(<a class="local col5 ref" href="#55size" title='size' data-ref="55size" data-ref-filename="55size">size</a>);</td></tr>
<tr><th id="342">342</th><td>  <a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::size_" title='__sanitizer::ReservedAddressRange::size_' data-ref="__sanitizer::ReservedAddressRange::size_" data-ref-filename="__sanitizer..ReservedAddressRange..size_">size_</a> = <a class="local col5 ref" href="#55size" title='size' data-ref="55size" data-ref-filename="55size">size</a>;</td></tr>
<tr><th id="343">343</th><td>  <a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::name_" title='__sanitizer::ReservedAddressRange::name_' data-ref="__sanitizer::ReservedAddressRange::name_" data-ref-filename="__sanitizer..ReservedAddressRange..name_">name_</a> = <a class="local col6 ref" href="#56name" title='name' data-ref="56name" data-ref-filename="56name">name</a>;</td></tr>
<tr><th id="344">344</th><td>  (<em>void</em>)<a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::os_handle_" title='__sanitizer::ReservedAddressRange::os_handle_' data-ref="__sanitizer::ReservedAddressRange::os_handle_" data-ref-filename="__sanitizer..ReservedAddressRange..os_handle_">os_handle_</a>;  <i>// unsupported</i></td></tr>
<tr><th id="345">345</th><td>  <b>return</b> <b>reinterpret_cast</b>&lt;<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::base_" title='__sanitizer::ReservedAddressRange::base_' data-ref="__sanitizer::ReservedAddressRange::base_" data-ref-filename="__sanitizer..ReservedAddressRange..base_">base_</a>);</td></tr>
<tr><th id="346">346</th><td>}</td></tr>
<tr><th id="347">347</th><td></td></tr>
<tr><th id="348">348</th><td><i>// Uses fixed_addr for now.</i></td></tr>
<tr><th id="349">349</th><td><i>// Will use offset instead once we've implemented this function for real.</i></td></tr>
<tr><th id="350">350</th><td><a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="type" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange" title='__sanitizer::ReservedAddressRange' data-ref="__sanitizer::ReservedAddressRange" data-ref-filename="__sanitizer..ReservedAddressRange">ReservedAddressRange</a>::<dfn class="decl def fn" id="__sanitizer::ReservedAddressRange::Map" title='__sanitizer::ReservedAddressRange::Map' data-ref="__sanitizer::ReservedAddressRange::Map" data-ref-filename="__sanitizer..ReservedAddressRange..Map">Map</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col8 decl" id="58fixed_addr" title='fixed_addr' data-type='__sanitizer::uptr' data-ref="58fixed_addr" data-ref-filename="58fixed_addr">fixed_addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="59size" title='size' data-type='__sanitizer::uptr' data-ref="59size" data-ref-filename="59size">size</dfn>, <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="60name" title='name' data-type='const char *' data-ref="60name" data-ref-filename="60name">name</dfn>) {</td></tr>
<tr><th id="351">351</th><td>  <b>return</b> <b>reinterpret_cast</b>&lt;<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(</td></tr>
<tr><th id="352">352</th><td>      <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::MmapFixedOrDieOnFatalError" title='__sanitizer::MmapFixedOrDieOnFatalError' data-ref="__sanitizer::MmapFixedOrDieOnFatalError" data-ref-filename="__sanitizer..MmapFixedOrDieOnFatalError">MmapFixedOrDieOnFatalError</a>(<a class="local col8 ref" href="#58fixed_addr" title='fixed_addr' data-ref="58fixed_addr" data-ref-filename="58fixed_addr">fixed_addr</a>, <a class="local col9 ref" href="#59size" title='size' data-ref="59size" data-ref-filename="59size">size</a>, <a class="local col0 ref" href="#60name" title='name' data-ref="60name" data-ref-filename="60name">name</a>));</td></tr>
<tr><th id="353">353</th><td>}</td></tr>
<tr><th id="354">354</th><td></td></tr>
<tr><th id="355">355</th><td><a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <a class="type" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange" title='__sanitizer::ReservedAddressRange' data-ref="__sanitizer::ReservedAddressRange" data-ref-filename="__sanitizer..ReservedAddressRange">ReservedAddressRange</a>::<dfn class="decl def fn" id="__sanitizer::ReservedAddressRange::MapOrDie" title='__sanitizer::ReservedAddressRange::MapOrDie' data-ref="__sanitizer::ReservedAddressRange::MapOrDie" data-ref-filename="__sanitizer..ReservedAddressRange..MapOrDie">MapOrDie</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col1 decl" id="61fixed_addr" title='fixed_addr' data-type='__sanitizer::uptr' data-ref="61fixed_addr" data-ref-filename="61fixed_addr">fixed_addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="62size" title='size' data-type='__sanitizer::uptr' data-ref="62size" data-ref-filename="62size">size</dfn>,</td></tr>
<tr><th id="356">356</th><td>                                    <em>const</em> <em>char</em> *<dfn class="local col3 decl" id="63name" title='name' data-type='const char *' data-ref="63name" data-ref-filename="63name">name</dfn>) {</td></tr>
<tr><th id="357">357</th><td>  <b>return</b> <b>reinterpret_cast</b>&lt;<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="ref fn" href="sanitizer_common.h.html#__sanitizer::MmapFixedOrDie" title='__sanitizer::MmapFixedOrDie' data-ref="__sanitizer::MmapFixedOrDie" data-ref-filename="__sanitizer..MmapFixedOrDie">MmapFixedOrDie</a>(<a class="local col1 ref" href="#61fixed_addr" title='fixed_addr' data-ref="61fixed_addr" data-ref-filename="61fixed_addr">fixed_addr</a>, <a class="local col2 ref" href="#62size" title='size' data-ref="62size" data-ref-filename="62size">size</a>, <a class="local col3 ref" href="#63name" title='name' data-ref="63name" data-ref-filename="63name">name</a>));</td></tr>
<tr><th id="358">358</th><td>}</td></tr>
<tr><th id="359">359</th><td></td></tr>
<tr><th id="360">360</th><td><em>void</em> <a class="type" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange" title='__sanitizer::ReservedAddressRange' data-ref="__sanitizer::ReservedAddressRange" data-ref-filename="__sanitizer..ReservedAddressRange">ReservedAddressRange</a>::<dfn class="decl def fn" id="__sanitizer::ReservedAddressRange::Unmap" title='__sanitizer::ReservedAddressRange::Unmap' data-ref="__sanitizer::ReservedAddressRange::Unmap" data-ref-filename="__sanitizer..ReservedAddressRange..Unmap">Unmap</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col4 decl" id="64addr" title='addr' data-type='__sanitizer::uptr' data-ref="64addr" data-ref-filename="64addr">addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="65size" title='size' data-type='__sanitizer::uptr' data-ref="65size" data-ref-filename="65size">size</dfn>) {</td></tr>
<tr><th id="361">361</th><td>  <a class="macro" href="sanitizer_internal_defs.h.html#303" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((size)); __sanitizer::u64 v2 = (__sanitizer::u64)((size_)); if (__builtin_expect(!!(!(v1 &lt;= v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 361, &quot;(&quot; &quot;(size)&quot; &quot;) &quot; &quot;&lt;=&quot; &quot; (&quot; &quot;(size_)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_LE">CHECK_LE</a>(<a class="local col5 ref" href="#65size" title='size' data-ref="65size" data-ref-filename="65size">size</a>, <a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::size_" title='__sanitizer::ReservedAddressRange::size_' data-ref="__sanitizer::ReservedAddressRange::size_" data-ref-filename="__sanitizer..ReservedAddressRange..size_">size_</a>);</td></tr>
<tr><th id="362">362</th><td>  <b>if</b> (<a class="local col4 ref" href="#64addr" title='addr' data-ref="64addr" data-ref-filename="64addr">addr</a> == <b>reinterpret_cast</b>&lt;<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::base_" title='__sanitizer::ReservedAddressRange::base_' data-ref="__sanitizer::ReservedAddressRange::base_" data-ref-filename="__sanitizer..ReservedAddressRange..base_">base_</a>))</td></tr>
<tr><th id="363">363</th><td>    <i>// If we unmap the whole range, just null out the base.</i></td></tr>
<tr><th id="364">364</th><td>    <a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::base_" title='__sanitizer::ReservedAddressRange::base_' data-ref="__sanitizer::ReservedAddressRange::base_" data-ref-filename="__sanitizer..ReservedAddressRange..base_">base_</a> = (<a class="local col5 ref" href="#65size" title='size' data-ref="65size" data-ref-filename="65size">size</a> == <a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::size_" title='__sanitizer::ReservedAddressRange::size_' data-ref="__sanitizer::ReservedAddressRange::size_" data-ref-filename="__sanitizer..ReservedAddressRange..size_">size_</a>) ? <b>nullptr</b> : <b>reinterpret_cast</b>&lt;<em>void</em>*&gt;(<a class="local col4 ref" href="#64addr" title='addr' data-ref="64addr" data-ref-filename="64addr">addr</a> + <a class="local col5 ref" href="#65size" title='size' data-ref="65size" data-ref-filename="65size">size</a>);</td></tr>
<tr><th id="365">365</th><td>  <b>else</b></td></tr>
<tr><th id="366">366</th><td>    <a class="macro" href="sanitizer_internal_defs.h.html#300" title="do { __sanitizer::u64 v1 = (__sanitizer::u64)((addr + size)); __sanitizer::u64 v2 = (__sanitizer::u64)((reinterpret_cast&lt;uptr&gt;(base_) + size_)); if (__builtin_expect(!!(!(v1 == v2)), 0)) __sanitizer::CheckFailed(&quot;/fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp&quot;, 366, &quot;(&quot; &quot;(addr + size)&quot; &quot;) &quot; &quot;==&quot; &quot; (&quot; &quot;(reinterpret_cast&lt;uptr&gt;(base_) + size_)&quot; &quot;)&quot;, v1, v2); } while (false)" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<a class="local col4 ref" href="#64addr" title='addr' data-ref="64addr" data-ref-filename="64addr">addr</a> + <a class="local col5 ref" href="#65size" title='size' data-ref="65size" data-ref-filename="65size">size</a>, <b>reinterpret_cast</b>&lt;<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a>&gt;(<a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::base_" title='__sanitizer::ReservedAddressRange::base_' data-ref="__sanitizer::ReservedAddressRange::base_" data-ref-filename="__sanitizer..ReservedAddressRange..base_">base_</a>) + <a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::size_" title='__sanitizer::ReservedAddressRange::size_' data-ref="__sanitizer::ReservedAddressRange::size_" data-ref-filename="__sanitizer..ReservedAddressRange..size_">size_</a>);</td></tr>
<tr><th id="367">367</th><td>  <a class="member field" href="sanitizer_common.h.html#__sanitizer::ReservedAddressRange::size_" title='__sanitizer::ReservedAddressRange::size_' data-ref="__sanitizer::ReservedAddressRange::size_" data-ref-filename="__sanitizer..ReservedAddressRange..size_">size_</a> -= <a class="local col5 ref" href="#65size" title='size' data-ref="65size" data-ref-filename="65size">size</a>;</td></tr>
<tr><th id="368">368</th><td>  <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::UnmapOrDie" title='__sanitizer::UnmapOrDie' data-ref="__sanitizer::UnmapOrDie" data-ref-filename="__sanitizer..UnmapOrDie">UnmapOrDie</a>(<b>reinterpret_cast</b>&lt;<em>void</em>*&gt;(<a class="local col4 ref" href="#64addr" title='addr' data-ref="64addr" data-ref-filename="64addr">addr</a>), <a class="local col5 ref" href="#65size" title='size' data-ref="65size" data-ref-filename="65size">size</a>);</td></tr>
<tr><th id="369">369</th><td>}</td></tr>
<tr><th id="370">370</th><td></td></tr>
<tr><th id="371">371</th><td><em>void</em> *<dfn class="decl def fn" id="__sanitizer::MmapFixedNoAccess" title='__sanitizer::MmapFixedNoAccess' data-ref="__sanitizer::MmapFixedNoAccess" data-ref-filename="__sanitizer..MmapFixedNoAccess">MmapFixedNoAccess</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col6 decl" id="66fixed_addr" title='fixed_addr' data-type='__sanitizer::uptr' data-ref="66fixed_addr" data-ref-filename="66fixed_addr">fixed_addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col7 decl" id="67size" title='size' data-type='__sanitizer::uptr' data-ref="67size" data-ref-filename="67size">size</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="68name" title='name' data-type='const char *' data-ref="68name" data-ref-filename="68name">name</dfn>) {</td></tr>
<tr><th id="372">372</th><td>  <b>return</b> (<em>void</em> *)<a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::MmapNamed" title='__sanitizer::MmapNamed' data-ref="__sanitizer::MmapNamed" data-ref-filename="__sanitizer..MmapNamed">MmapNamed</a>((<em>void</em> *)<a class="local col6 ref" href="#66fixed_addr" title='fixed_addr' data-ref="66fixed_addr" data-ref-filename="66fixed_addr">fixed_addr</a>, <a class="local col7 ref" href="#67size" title='size' data-ref="67size" data-ref-filename="67size">size</a>, <a class="macro" href="../../../../include/bits/mman-linux.h.html#35" title="0x0" data-ref="_M/PROT_NONE">PROT_NONE</a>,</td></tr>
<tr><th id="373">373</th><td>                           <a class="macro" href="../../../../include/bits/mman-linux.h.html#43" title="0x02" data-ref="_M/MAP_PRIVATE">MAP_PRIVATE</a> | <a class="macro" href="../../../../include/bits/mman-linux.h.html#51" title="0x10" data-ref="_M/MAP_FIXED">MAP_FIXED</a> | <a class="macro" href="../../../../include/bits/mman-map-flags-generic.h.html#33" title="0x04000" data-ref="_M/MAP_NORESERVE">MAP_NORESERVE</a> | <a class="macro" href="../../../../include/bits/mman-linux.h.html#59" title="0x20" data-ref="_M/MAP_ANON">MAP_ANON</a>,</td></tr>
<tr><th id="374">374</th><td>                           <a class="local col8 ref" href="#68name" title='name' data-ref="68name" data-ref-filename="68name">name</a>);</td></tr>
<tr><th id="375">375</th><td>}</td></tr>
<tr><th id="376">376</th><td></td></tr>
<tr><th id="377">377</th><td><em>void</em> *<dfn class="decl def fn" id="__sanitizer::MmapNoAccess" title='__sanitizer::MmapNoAccess' data-ref="__sanitizer::MmapNoAccess" data-ref-filename="__sanitizer..MmapNoAccess">MmapNoAccess</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="69size" title='size' data-type='__sanitizer::uptr' data-ref="69size" data-ref-filename="69size">size</dfn>) {</td></tr>
<tr><th id="378">378</th><td>  <em>unsigned</em> <dfn class="local col0 decl" id="70flags" title='flags' data-type='unsigned int' data-ref="70flags" data-ref-filename="70flags">flags</dfn> = <a class="macro" href="../../../../include/bits/mman-linux.h.html#43" title="0x02" data-ref="_M/MAP_PRIVATE">MAP_PRIVATE</a> | <a class="macro" href="../../../../include/bits/mman-linux.h.html#59" title="0x20" data-ref="_M/MAP_ANON">MAP_ANON</a> | <a class="macro" href="../../../../include/bits/mman-map-flags-generic.h.html#33" title="0x04000" data-ref="_M/MAP_NORESERVE">MAP_NORESERVE</a>;</td></tr>
<tr><th id="379">379</th><td>  <b>return</b> (<em>void</em> *)<a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_mmap" title='__sanitizer::internal_mmap' data-ref="__sanitizer::internal_mmap" data-ref-filename="__sanitizer..internal_mmap">internal_mmap</a>(<b>nullptr</b>, <a class="local col9 ref" href="#69size" title='size' data-ref="69size" data-ref-filename="69size">size</a>, <a class="macro" href="../../../../include/bits/mman-linux.h.html#35" title="0x0" data-ref="_M/PROT_NONE">PROT_NONE</a>, <a class="local col0 ref" href="#70flags" title='flags' data-ref="70flags" data-ref-filename="70flags">flags</a>, -<var>1</var>, <var>0</var>);</td></tr>
<tr><th id="380">380</th><td>}</td></tr>
<tr><th id="381">381</th><td></td></tr>
<tr><th id="382">382</th><td><i>// This function is defined elsewhere if we intercepted pthread_attr_getstack.</i></td></tr>
<tr><th id="383">383</th><td><b>extern</b> <q>"C"</q> {</td></tr>
<tr><th id="384">384</th><td><a class="macro" href="sanitizer_internal_defs.h.html#37" title="__attribute__((weak))" data-ref="_M/SANITIZER_WEAK_ATTRIBUTE">SANITIZER_WEAK_ATTRIBUTE</a> <em>int</em></td></tr>
<tr><th id="385">385</th><td><dfn class="decl fn" id="__sanitizer::real_pthread_attr_getstack" title='__sanitizer::real_pthread_attr_getstack' data-ref="__sanitizer::real_pthread_attr_getstack" data-ref-filename="__sanitizer..real_pthread_attr_getstack">real_pthread_attr_getstack</dfn>(<em>void</em> *<dfn class="local col1 decl" id="71attr" title='attr' data-type='void *' data-ref="71attr" data-ref-filename="71attr">attr</dfn>, <em>void</em> **<dfn class="local col2 decl" id="72addr" title='addr' data-type='void **' data-ref="72addr" data-ref-filename="72addr">addr</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> *<dfn class="local col3 decl" id="73size" title='size' data-type='size_t *' data-ref="73size" data-ref-filename="73size">size</dfn>);</td></tr>
<tr><th id="386">386</th><td>} <i>// extern "C"</i></td></tr>
<tr><th id="387">387</th><td></td></tr>
<tr><th id="388">388</th><td><em>int</em> <dfn class="decl def fn" id="__sanitizer::my_pthread_attr_getstack" title='__sanitizer::my_pthread_attr_getstack' data-ref="__sanitizer::my_pthread_attr_getstack" data-ref-filename="__sanitizer..my_pthread_attr_getstack">my_pthread_attr_getstack</dfn>(<em>void</em> *<dfn class="local col4 decl" id="74attr" title='attr' data-type='void *' data-ref="74attr" data-ref-filename="74attr">attr</dfn>, <em>void</em> **<dfn class="local col5 decl" id="75addr" title='addr' data-type='void **' data-ref="75addr" data-ref-filename="75addr">addr</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> *<dfn class="local col6 decl" id="76size" title='size' data-type='__sanitizer::uptr *' data-ref="76size" data-ref-filename="76size">size</dfn>) {</td></tr>
<tr><th id="389">389</th><td><u>#<span data-ppcond="389">if</span> !<a class="macro" href="sanitizer_platform.h.html#339" title="0" data-ref="_M/SANITIZER_GO">SANITIZER_GO</a> &amp;&amp; !<a class="macro" href="sanitizer_platform.h.html#73" title="0" data-ref="_M/SANITIZER_MAC">SANITIZER_MAC</a></u></td></tr>
<tr><th id="390">390</th><td>  <b>if</b> (&amp;<a class="ref fn" href="#__sanitizer::real_pthread_attr_getstack" title='__sanitizer::real_pthread_attr_getstack' data-ref="__sanitizer::real_pthread_attr_getstack" data-ref-filename="__sanitizer..real_pthread_attr_getstack">real_pthread_attr_getstack</a>)</td></tr>
<tr><th id="391">391</th><td>    <b>return</b> <a class="ref fn" href="#__sanitizer::real_pthread_attr_getstack" title='__sanitizer::real_pthread_attr_getstack' data-ref="__sanitizer::real_pthread_attr_getstack" data-ref-filename="__sanitizer..real_pthread_attr_getstack">real_pthread_attr_getstack</a>((<a class="typedef" href="../../../../include/bits/pthreadtypes.h.html#pthread_attr_t" title='pthread_attr_t' data-type='union pthread_attr_t' data-ref="pthread_attr_t" data-ref-filename="pthread_attr_t">pthread_attr_t</a> *)<a class="local col4 ref" href="#74attr" title='attr' data-ref="74attr" data-ref-filename="74attr">attr</a>, <a class="local col5 ref" href="#75addr" title='addr' data-ref="75addr" data-ref-filename="75addr">addr</a>,</td></tr>
<tr><th id="392">392</th><td>                                      (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> *)<a class="local col6 ref" href="#76size" title='size' data-ref="76size" data-ref-filename="76size">size</a>);</td></tr>
<tr><th id="393">393</th><td><u>#<span data-ppcond="389">endif</span></u></td></tr>
<tr><th id="394">394</th><td>  <b>return</b> <a class="ref fn" href="../../../../include/pthread.h.html#pthread_attr_getstack" title='pthread_attr_getstack' data-ref="pthread_attr_getstack" data-ref-filename="pthread_attr_getstack">pthread_attr_getstack</a>((<a class="typedef" href="../../../../include/bits/pthreadtypes.h.html#pthread_attr_t" title='pthread_attr_t' data-type='union pthread_attr_t' data-ref="pthread_attr_t" data-ref-filename="pthread_attr_t">pthread_attr_t</a> *)<a class="local col4 ref" href="#74attr" title='attr' data-ref="74attr" data-ref-filename="74attr">attr</a>, <a class="local col5 ref" href="#75addr" title='addr' data-ref="75addr" data-ref-filename="75addr">addr</a>, (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> *)<a class="local col6 ref" href="#76size" title='size' data-ref="76size" data-ref-filename="76size">size</a>);</td></tr>
<tr><th id="395">395</th><td>}</td></tr>
<tr><th id="396">396</th><td></td></tr>
<tr><th id="397">397</th><td><u>#<span data-ppcond="397">if</span> !<a class="macro" href="sanitizer_platform.h.html#339" title="0" data-ref="_M/SANITIZER_GO">SANITIZER_GO</a></u></td></tr>
<tr><th id="398">398</th><td><em>void</em> <dfn class="decl def fn" id="__sanitizer::AdjustStackSize" title='__sanitizer::AdjustStackSize' data-ref="__sanitizer::AdjustStackSize" data-ref-filename="__sanitizer..AdjustStackSize">AdjustStackSize</dfn>(<em>void</em> *<dfn class="local col7 decl" id="77attr_" title='attr_' data-type='void *' data-ref="77attr_" data-ref-filename="77attr_">attr_</dfn>) {</td></tr>
<tr><th id="399">399</th><td>  <a class="typedef" href="../../../../include/bits/pthreadtypes.h.html#pthread_attr_t" title='pthread_attr_t' data-type='union pthread_attr_t' data-ref="pthread_attr_t" data-ref-filename="pthread_attr_t">pthread_attr_t</a> *<dfn class="local col8 decl" id="78attr" title='attr' data-type='pthread_attr_t *' data-ref="78attr" data-ref-filename="78attr">attr</dfn> = (<a class="typedef" href="../../../../include/bits/pthreadtypes.h.html#pthread_attr_t" title='pthread_attr_t' data-type='union pthread_attr_t' data-ref="pthread_attr_t" data-ref-filename="pthread_attr_t">pthread_attr_t</a> *)<a class="local col7 ref" href="#77attr_" title='attr_' data-ref="77attr_" data-ref-filename="77attr_">attr_</a>;</td></tr>
<tr><th id="400">400</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="79stackaddr" title='stackaddr' data-type='__sanitizer::uptr' data-ref="79stackaddr" data-ref-filename="79stackaddr">stackaddr</dfn> = <var>0</var>;</td></tr>
<tr><th id="401">401</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col0 decl" id="80stacksize" title='stacksize' data-type='__sanitizer::uptr' data-ref="80stacksize" data-ref-filename="80stacksize">stacksize</dfn> = <var>0</var>;</td></tr>
<tr><th id="402">402</th><td>  <a class="ref fn" href="#__sanitizer::my_pthread_attr_getstack" title='__sanitizer::my_pthread_attr_getstack' data-ref="__sanitizer::my_pthread_attr_getstack" data-ref-filename="__sanitizer..my_pthread_attr_getstack">my_pthread_attr_getstack</a>(<a class="local col8 ref" href="#78attr" title='attr' data-ref="78attr" data-ref-filename="78attr">attr</a>, (<em>void</em>**)&amp;<a class="local col9 ref" href="#79stackaddr" title='stackaddr' data-ref="79stackaddr" data-ref-filename="79stackaddr">stackaddr</a>, &amp;<a class="local col0 ref" href="#80stacksize" title='stacksize' data-ref="80stacksize" data-ref-filename="80stacksize">stacksize</a>);</td></tr>
<tr><th id="403">403</th><td>  <i>// GLibC will return (0 - stacksize) as the stack address in the case when</i></td></tr>
<tr><th id="404">404</th><td><i>  // stacksize is set, but stackaddr is not.</i></td></tr>
<tr><th id="405">405</th><td>  <em>bool</em> <dfn class="local col1 decl" id="81stack_set" title='stack_set' data-type='bool' data-ref="81stack_set" data-ref-filename="81stack_set">stack_set</dfn> = (<a class="local col9 ref" href="#79stackaddr" title='stackaddr' data-ref="79stackaddr" data-ref-filename="79stackaddr">stackaddr</a> != <var>0</var>) &amp;&amp; (<a class="local col9 ref" href="#79stackaddr" title='stackaddr' data-ref="79stackaddr" data-ref-filename="79stackaddr">stackaddr</a> + <a class="local col0 ref" href="#80stacksize" title='stacksize' data-ref="80stacksize" data-ref-filename="80stacksize">stacksize</a> != <var>0</var>);</td></tr>
<tr><th id="406">406</th><td>  <i>// We place a lot of tool data into TLS, account for that.</i></td></tr>
<tr><th id="407">407</th><td>  <em>const</em> <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col2 decl" id="82minstacksize" title='minstacksize' data-type='const __sanitizer::uptr' data-ref="82minstacksize" data-ref-filename="82minstacksize">minstacksize</dfn> = <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::GetTlsSize" title='__sanitizer::GetTlsSize' data-ref="__sanitizer::GetTlsSize" data-ref-filename="__sanitizer..GetTlsSize">GetTlsSize</a>() + <var>128</var>*<var>1024</var>;</td></tr>
<tr><th id="408">408</th><td>  <b>if</b> (<a class="local col0 ref" href="#80stacksize" title='stacksize' data-ref="80stacksize" data-ref-filename="80stacksize">stacksize</a> &lt; <a class="local col2 ref" href="#82minstacksize" title='minstacksize' data-ref="82minstacksize" data-ref-filename="82minstacksize">minstacksize</a>) {</td></tr>
<tr><th id="409">409</th><td>    <b>if</b> (!<a class="local col1 ref" href="#81stack_set" title='stack_set' data-ref="81stack_set" data-ref-filename="81stack_set">stack_set</a>) {</td></tr>
<tr><th id="410">410</th><td>      <b>if</b> (<a class="local col0 ref" href="#80stacksize" title='stacksize' data-ref="80stacksize" data-ref-filename="80stacksize">stacksize</a> != <var>0</var>) {</td></tr>
<tr><th id="411">411</th><td>        <a class="macro" href="sanitizer_common.h.html#223" title="do { if ((uptr)Verbosity() &gt;= (1)) Printf(&quot;Sanitizer: increasing stacksize %zu-&gt;%zu\n&quot;, stacksize, minstacksize); } while (0)" data-ref="_M/VPrintf">VPrintf</a>(<var>1</var>, <q>"Sanitizer: increasing stacksize %zu-&gt;%zu\n"</q>, <a class="local col0 ref" href="#80stacksize" title='stacksize' data-ref="80stacksize" data-ref-filename="80stacksize">stacksize</a>,</td></tr>
<tr><th id="412">412</th><td>                <a class="local col2 ref" href="#82minstacksize" title='minstacksize' data-ref="82minstacksize" data-ref-filename="82minstacksize">minstacksize</a>);</td></tr>
<tr><th id="413">413</th><td>        <a class="ref fn" href="../../../../include/pthread.h.html#pthread_attr_setstacksize" title='pthread_attr_setstacksize' data-ref="pthread_attr_setstacksize" data-ref-filename="pthread_attr_setstacksize">pthread_attr_setstacksize</a>(<a class="local col8 ref" href="#78attr" title='attr' data-ref="78attr" data-ref-filename="78attr">attr</a>, <a class="local col2 ref" href="#82minstacksize" title='minstacksize' data-ref="82minstacksize" data-ref-filename="82minstacksize">minstacksize</a>);</td></tr>
<tr><th id="414">414</th><td>      }</td></tr>
<tr><th id="415">415</th><td>    } <b>else</b> {</td></tr>
<tr><th id="416">416</th><td>      <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::Printf" title='__sanitizer::Printf' data-ref="__sanitizer::Printf" data-ref-filename="__sanitizer..Printf">Printf</a>(<q>"Sanitizer: pre-allocated stack size is insufficient: "</q></td></tr>
<tr><th id="417">417</th><td>             <q>"%zu &lt; %zu\n"</q>, <a class="local col0 ref" href="#80stacksize" title='stacksize' data-ref="80stacksize" data-ref-filename="80stacksize">stacksize</a>, <a class="local col2 ref" href="#82minstacksize" title='minstacksize' data-ref="82minstacksize" data-ref-filename="82minstacksize">minstacksize</a>);</td></tr>
<tr><th id="418">418</th><td>      <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::Printf" title='__sanitizer::Printf' data-ref="__sanitizer::Printf" data-ref-filename="__sanitizer..Printf">Printf</a>(<q>"Sanitizer: pthread_create is likely to fail.\n"</q>);</td></tr>
<tr><th id="419">419</th><td>    }</td></tr>
<tr><th id="420">420</th><td>  }</td></tr>
<tr><th id="421">421</th><td>}</td></tr>
<tr><th id="422">422</th><td><u>#<span data-ppcond="397">endif</span> // !SANITIZER_GO</u></td></tr>
<tr><th id="423">423</th><td></td></tr>
<tr><th id="424">424</th><td><a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::pid_t" title='__sanitizer::pid_t' data-type='int' data-ref="__sanitizer::pid_t" data-ref-filename="__sanitizer..pid_t">pid_t</a> <dfn class="decl def fn" id="__sanitizer::StartSubprocess" title='__sanitizer::StartSubprocess' data-ref="__sanitizer::StartSubprocess" data-ref-filename="__sanitizer..StartSubprocess">StartSubprocess</dfn>(<em>const</em> <em>char</em> *<dfn class="local col3 decl" id="83program" title='program' data-type='const char *' data-ref="83program" data-ref-filename="83program">program</dfn>, <em>const</em> <em>char</em> *<em>const</em> <dfn class="local col4 decl" id="84argv" title='argv' data-type='const char *const *' data-ref="84argv" data-ref-filename="84argv">argv</dfn>[],</td></tr>
<tr><th id="425">425</th><td>                      <em>const</em> <em>char</em> *<em>const</em> <dfn class="local col5 decl" id="85envp" title='envp' data-type='const char *const *' data-ref="85envp" data-ref-filename="85envp">envp</dfn>[], <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::fd_t" title='__sanitizer::fd_t' data-type='int' data-ref="__sanitizer::fd_t" data-ref-filename="__sanitizer..fd_t">fd_t</a> <dfn class="local col6 decl" id="86stdin_fd" title='stdin_fd' data-type='__sanitizer::fd_t' data-ref="86stdin_fd" data-ref-filename="86stdin_fd">stdin_fd</dfn>, <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::fd_t" title='__sanitizer::fd_t' data-type='int' data-ref="__sanitizer::fd_t" data-ref-filename="__sanitizer..fd_t">fd_t</a> <dfn class="local col7 decl" id="87stdout_fd" title='stdout_fd' data-type='__sanitizer::fd_t' data-ref="87stdout_fd" data-ref-filename="87stdout_fd">stdout_fd</dfn>,</td></tr>
<tr><th id="426">426</th><td>                      <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::fd_t" title='__sanitizer::fd_t' data-type='int' data-ref="__sanitizer::fd_t" data-ref-filename="__sanitizer..fd_t">fd_t</a> <dfn class="local col8 decl" id="88stderr_fd" title='stderr_fd' data-type='__sanitizer::fd_t' data-ref="88stderr_fd" data-ref-filename="88stderr_fd">stderr_fd</dfn>) {</td></tr>
<tr><th id="427">427</th><td>  <em>auto</em> <dfn class="local col9 decl" id="89file_closer" title='file_closer' data-type='__sanitizer::RunOnDestruction&lt;(lambda at /fast/tmp/llvm-proj-12/compiler-rt/lib/sanitizer_common/sanitizer_posix_libcdep.cpp:427:36)&gt;' data-ref="89file_closer" data-ref-filename="89file_closer">file_closer</dfn> = <a class="tu ref fn" href="sanitizer_common.h.html#__sanitizer::at_scope_exit" title='__sanitizer::at_scope_exit' data-use='c' data-ref="__sanitizer::at_scope_exit" data-ref-filename="__sanitizer..at_scope_exit">at_scope_exit</a>([&amp;] {</td></tr>
<tr><th id="428">428</th><td>    <b>if</b> (<a class="local col6 ref" href="#86stdin_fd" title='stdin_fd' data-ref="86stdin_fd" data-ref-filename="86stdin_fd">stdin_fd</a> != <a class="macro" href="sanitizer_libc.h.html#61" title="((fd_t)-1)" data-ref="_M/kInvalidFd">kInvalidFd</a>) {</td></tr>
<tr><th id="429">429</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="local col6 ref" href="#86stdin_fd" title='stdin_fd' data-ref="86stdin_fd" data-ref-filename="86stdin_fd">stdin_fd</a>);</td></tr>
<tr><th id="430">430</th><td>    }</td></tr>
<tr><th id="431">431</th><td>    <b>if</b> (<a class="local col7 ref" href="#87stdout_fd" title='stdout_fd' data-ref="87stdout_fd" data-ref-filename="87stdout_fd">stdout_fd</a> != <a class="macro" href="sanitizer_libc.h.html#61" title="((fd_t)-1)" data-ref="_M/kInvalidFd">kInvalidFd</a>) {</td></tr>
<tr><th id="432">432</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="local col7 ref" href="#87stdout_fd" title='stdout_fd' data-ref="87stdout_fd" data-ref-filename="87stdout_fd">stdout_fd</a>);</td></tr>
<tr><th id="433">433</th><td>    }</td></tr>
<tr><th id="434">434</th><td>    <b>if</b> (<a class="local col8 ref" href="#88stderr_fd" title='stderr_fd' data-ref="88stderr_fd" data-ref-filename="88stderr_fd">stderr_fd</a> != <a class="macro" href="sanitizer_libc.h.html#61" title="((fd_t)-1)" data-ref="_M/kInvalidFd">kInvalidFd</a>) {</td></tr>
<tr><th id="435">435</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="local col8 ref" href="#88stderr_fd" title='stderr_fd' data-ref="88stderr_fd" data-ref-filename="88stderr_fd">stderr_fd</a>);</td></tr>
<tr><th id="436">436</th><td>    }</td></tr>
<tr><th id="437">437</th><td>  });</td></tr>
<tr><th id="438">438</th><td></td></tr>
<tr><th id="439">439</th><td>  <em>int</em> <dfn class="local col0 decl" id="90pid" title='pid' data-type='int' data-ref="90pid" data-ref-filename="90pid">pid</dfn> = <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_fork" title='__sanitizer::internal_fork' data-ref="__sanitizer::internal_fork" data-ref-filename="__sanitizer..internal_fork">internal_fork</a>();</td></tr>
<tr><th id="440">440</th><td></td></tr>
<tr><th id="441">441</th><td>  <b>if</b> (<a class="local col0 ref" href="#90pid" title='pid' data-ref="90pid" data-ref-filename="90pid">pid</a> &lt; <var>0</var>) {</td></tr>
<tr><th id="442">442</th><td>    <em>int</em> <dfn class="local col1 decl" id="91rverrno" title='rverrno' data-type='int' data-ref="91rverrno" data-ref-filename="91rverrno">rverrno</dfn>;</td></tr>
<tr><th id="443">443</th><td>    <b>if</b> (<a class="ref fn" href="sanitizer_libc.h.html#__sanitizer::internal_iserror" title='__sanitizer::internal_iserror' data-ref="__sanitizer::internal_iserror" data-ref-filename="__sanitizer..internal_iserror">internal_iserror</a>(<a class="local col0 ref" href="#90pid" title='pid' data-ref="90pid" data-ref-filename="90pid">pid</a>, &amp;<a class="local col1 ref" href="#91rverrno" title='rverrno' data-ref="91rverrno" data-ref-filename="91rverrno">rverrno</a>)) {</td></tr>
<tr><th id="444">444</th><td>      <a class="ref fn" href="sanitizer_common.h.html#__sanitizer::Report" title='__sanitizer::Report' data-ref="__sanitizer::Report" data-ref-filename="__sanitizer..Report">Report</a>(<q>"WARNING: failed to fork (errno %d)\n"</q>, <a class="local col1 ref" href="#91rverrno" title='rverrno' data-ref="91rverrno" data-ref-filename="91rverrno">rverrno</a>);</td></tr>
<tr><th id="445">445</th><td>    }</td></tr>
<tr><th id="446">446</th><td>    <b>return</b> <a class="local col0 ref" href="#90pid" title='pid' data-ref="90pid" data-ref-filename="90pid">pid</a>;</td></tr>
<tr><th id="447">447</th><td>  }</td></tr>
<tr><th id="448">448</th><td></td></tr>
<tr><th id="449">449</th><td>  <b>if</b> (<a class="local col0 ref" href="#90pid" title='pid' data-ref="90pid" data-ref-filename="90pid">pid</a> == <var>0</var>) {</td></tr>
<tr><th id="450">450</th><td>    <i>// Child subprocess</i></td></tr>
<tr><th id="451">451</th><td>    <b>if</b> (<a class="local col6 ref" href="#86stdin_fd" title='stdin_fd' data-ref="86stdin_fd" data-ref-filename="86stdin_fd">stdin_fd</a> != <a class="macro" href="sanitizer_libc.h.html#61" title="((fd_t)-1)" data-ref="_M/kInvalidFd">kInvalidFd</a>) {</td></tr>
<tr><th id="452">452</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="macro" href="../../../../include/unistd.h.html#210" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a>);</td></tr>
<tr><th id="453">453</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_dup2" title='__sanitizer::internal_dup2' data-ref="__sanitizer::internal_dup2" data-ref-filename="__sanitizer..internal_dup2">internal_dup2</a>(<a class="local col6 ref" href="#86stdin_fd" title='stdin_fd' data-ref="86stdin_fd" data-ref-filename="86stdin_fd">stdin_fd</a>, <a class="macro" href="../../../../include/unistd.h.html#210" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a>);</td></tr>
<tr><th id="454">454</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="local col6 ref" href="#86stdin_fd" title='stdin_fd' data-ref="86stdin_fd" data-ref-filename="86stdin_fd">stdin_fd</a>);</td></tr>
<tr><th id="455">455</th><td>    }</td></tr>
<tr><th id="456">456</th><td>    <b>if</b> (<a class="local col7 ref" href="#87stdout_fd" title='stdout_fd' data-ref="87stdout_fd" data-ref-filename="87stdout_fd">stdout_fd</a> != <a class="macro" href="sanitizer_libc.h.html#61" title="((fd_t)-1)" data-ref="_M/kInvalidFd">kInvalidFd</a>) {</td></tr>
<tr><th id="457">457</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="macro" href="../../../../include/unistd.h.html#211" title="1" data-ref="_M/STDOUT_FILENO">STDOUT_FILENO</a>);</td></tr>
<tr><th id="458">458</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_dup2" title='__sanitizer::internal_dup2' data-ref="__sanitizer::internal_dup2" data-ref-filename="__sanitizer..internal_dup2">internal_dup2</a>(<a class="local col7 ref" href="#87stdout_fd" title='stdout_fd' data-ref="87stdout_fd" data-ref-filename="87stdout_fd">stdout_fd</a>, <a class="macro" href="../../../../include/unistd.h.html#211" title="1" data-ref="_M/STDOUT_FILENO">STDOUT_FILENO</a>);</td></tr>
<tr><th id="459">459</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="local col7 ref" href="#87stdout_fd" title='stdout_fd' data-ref="87stdout_fd" data-ref-filename="87stdout_fd">stdout_fd</a>);</td></tr>
<tr><th id="460">460</th><td>    }</td></tr>
<tr><th id="461">461</th><td>    <b>if</b> (<a class="local col8 ref" href="#88stderr_fd" title='stderr_fd' data-ref="88stderr_fd" data-ref-filename="88stderr_fd">stderr_fd</a> != <a class="macro" href="sanitizer_libc.h.html#61" title="((fd_t)-1)" data-ref="_M/kInvalidFd">kInvalidFd</a>) {</td></tr>
<tr><th id="462">462</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="macro" href="../../../../include/unistd.h.html#212" title="2" data-ref="_M/STDERR_FILENO">STDERR_FILENO</a>);</td></tr>
<tr><th id="463">463</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_dup2" title='__sanitizer::internal_dup2' data-ref="__sanitizer::internal_dup2" data-ref-filename="__sanitizer..internal_dup2">internal_dup2</a>(<a class="local col8 ref" href="#88stderr_fd" title='stderr_fd' data-ref="88stderr_fd" data-ref-filename="88stderr_fd">stderr_fd</a>, <a class="macro" href="../../../../include/unistd.h.html#212" title="2" data-ref="_M/STDERR_FILENO">STDERR_FILENO</a>);</td></tr>
<tr><th id="464">464</th><td>      <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="local col8 ref" href="#88stderr_fd" title='stderr_fd' data-ref="88stderr_fd" data-ref-filename="88stderr_fd">stderr_fd</a>);</td></tr>
<tr><th id="465">465</th><td>    }</td></tr>
<tr><th id="466">466</th><td></td></tr>
<tr><th id="467">467</th><td>    <b>for</b> (<em>int</em> <dfn class="local col2 decl" id="92fd" title='fd' data-type='int' data-ref="92fd" data-ref-filename="92fd">fd</dfn> = <a class="ref fn" href="../../../../include/unistd.h.html#sysconf" title='sysconf' data-ref="sysconf" data-ref-filename="sysconf">sysconf</a>(<a class="macro" href="../../../../include/bits/confname.h.html#82" title="_SC_OPEN_MAX" data-ref="_M/_SC_OPEN_MAX">_SC_OPEN_MAX</a>); <a class="local col2 ref" href="#92fd" title='fd' data-ref="92fd" data-ref-filename="92fd">fd</a> &gt; <var>2</var>; <a class="local col2 ref" href="#92fd" title='fd' data-ref="92fd" data-ref-filename="92fd">fd</a>--) <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_close" title='__sanitizer::internal_close' data-ref="__sanitizer::internal_close" data-ref-filename="__sanitizer..internal_close">internal_close</a>(<a class="local col2 ref" href="#92fd" title='fd' data-ref="92fd" data-ref-filename="92fd">fd</a>);</td></tr>
<tr><th id="468">468</th><td></td></tr>
<tr><th id="469">469</th><td>    <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_execve" title='__sanitizer::internal_execve' data-ref="__sanitizer::internal_execve" data-ref-filename="__sanitizer..internal_execve">internal_execve</a>(<a class="local col3 ref" href="#83program" title='program' data-ref="83program" data-ref-filename="83program">program</a>, <b>const_cast</b>&lt;<em>char</em> **&gt;(&amp;<a class="local col4 ref" href="#84argv" title='argv' data-ref="84argv" data-ref-filename="84argv">argv</a>[<var>0</var>]),</td></tr>
<tr><th id="470">470</th><td>                    <b>const_cast</b>&lt;<em>char</em> *<em>const</em> *&gt;(<a class="local col5 ref" href="#85envp" title='envp' data-ref="85envp" data-ref-filename="85envp">envp</a>));</td></tr>
<tr><th id="471">471</th><td>    <a class="ref fn" href="sanitizer_libc.h.html#__sanitizer::internal__exit" title='__sanitizer::internal__exit' data-ref="__sanitizer::internal__exit" data-ref-filename="__sanitizer..internal__exit">internal__exit</a>(<var>1</var>);</td></tr>
<tr><th id="472">472</th><td>  }</td></tr>
<tr><th id="473">473</th><td></td></tr>
<tr><th id="474">474</th><td>  <b>return</b> <a class="local col0 ref" href="#90pid" title='pid' data-ref="90pid" data-ref-filename="90pid">pid</a>;</td></tr>
<tr><th id="475">475</th><td>}</td></tr>
<tr><th id="476">476</th><td></td></tr>
<tr><th id="477">477</th><td><em>bool</em> <dfn class="decl def fn" id="__sanitizer::IsProcessRunning" title='__sanitizer::IsProcessRunning' data-ref="__sanitizer::IsProcessRunning" data-ref-filename="__sanitizer..IsProcessRunning">IsProcessRunning</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::pid_t" title='__sanitizer::pid_t' data-type='int' data-ref="__sanitizer::pid_t" data-ref-filename="__sanitizer..pid_t">pid_t</a> <dfn class="local col3 decl" id="93pid" title='pid' data-type='__sanitizer::pid_t' data-ref="93pid" data-ref-filename="93pid">pid</dfn>) {</td></tr>
<tr><th id="478">478</th><td>  <em>int</em> <dfn class="local col4 decl" id="94process_status" title='process_status' data-type='int' data-ref="94process_status" data-ref-filename="94process_status">process_status</dfn>;</td></tr>
<tr><th id="479">479</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col5 decl" id="95waitpid_status" title='waitpid_status' data-type='__sanitizer::uptr' data-ref="95waitpid_status" data-ref-filename="95waitpid_status">waitpid_status</dfn> = <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_waitpid" title='__sanitizer::internal_waitpid' data-ref="__sanitizer::internal_waitpid" data-ref-filename="__sanitizer..internal_waitpid">internal_waitpid</a>(<a class="local col3 ref" href="#93pid" title='pid' data-ref="93pid" data-ref-filename="93pid">pid</a>, &amp;<a class="local col4 ref" href="#94process_status" title='process_status' data-ref="94process_status" data-ref-filename="94process_status">process_status</a>, <a class="macro" href="../../../../include/bits/waitflags.h.html#25" title="1" data-ref="_M/WNOHANG">WNOHANG</a>);</td></tr>
<tr><th id="480">480</th><td>  <em>int</em> <dfn class="local col6 decl" id="96local_errno" title='local_errno' data-type='int' data-ref="96local_errno" data-ref-filename="96local_errno">local_errno</dfn>;</td></tr>
<tr><th id="481">481</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_libc.h.html#__sanitizer::internal_iserror" title='__sanitizer::internal_iserror' data-ref="__sanitizer::internal_iserror" data-ref-filename="__sanitizer..internal_iserror">internal_iserror</a>(<a class="local col5 ref" href="#95waitpid_status" title='waitpid_status' data-ref="95waitpid_status" data-ref-filename="95waitpid_status">waitpid_status</a>, &amp;<a class="local col6 ref" href="#96local_errno" title='local_errno' data-ref="96local_errno" data-ref-filename="96local_errno">local_errno</a>)) {</td></tr>
<tr><th id="482">482</th><td>    <a class="macro" href="sanitizer_common.h.html#219" title="do { if ((uptr)Verbosity() &gt;= (1)) Report(&quot;Waiting on the process failed (errno %d).\n&quot;, local_errno); } while (0)" data-ref="_M/VReport">VReport</a>(<var>1</var>, <q>"Waiting on the process failed (errno %d).\n"</q>, <a class="local col6 ref" href="#96local_errno" title='local_errno' data-ref="96local_errno" data-ref-filename="96local_errno">local_errno</a>);</td></tr>
<tr><th id="483">483</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="484">484</th><td>  }</td></tr>
<tr><th id="485">485</th><td>  <b>return</b> <a class="local col5 ref" href="#95waitpid_status" title='waitpid_status' data-ref="95waitpid_status" data-ref-filename="95waitpid_status">waitpid_status</a> == <var>0</var>;</td></tr>
<tr><th id="486">486</th><td>}</td></tr>
<tr><th id="487">487</th><td></td></tr>
<tr><th id="488">488</th><td><em>int</em> <dfn class="decl def fn" id="__sanitizer::WaitForProcess" title='__sanitizer::WaitForProcess' data-ref="__sanitizer::WaitForProcess" data-ref-filename="__sanitizer..WaitForProcess">WaitForProcess</dfn>(<a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::pid_t" title='__sanitizer::pid_t' data-type='int' data-ref="__sanitizer::pid_t" data-ref-filename="__sanitizer..pid_t">pid_t</a> <dfn class="local col7 decl" id="97pid" title='pid' data-type='__sanitizer::pid_t' data-ref="97pid" data-ref-filename="97pid">pid</dfn>) {</td></tr>
<tr><th id="489">489</th><td>  <em>int</em> <dfn class="local col8 decl" id="98process_status" title='process_status' data-type='int' data-ref="98process_status" data-ref-filename="98process_status">process_status</dfn>;</td></tr>
<tr><th id="490">490</th><td>  <a class="typedef" href="sanitizer_internal_defs.h.html#__sanitizer::uptr" title='__sanitizer::uptr' data-type='unsigned long' data-ref="__sanitizer::uptr" data-ref-filename="__sanitizer..uptr">uptr</a> <dfn class="local col9 decl" id="99waitpid_status" title='waitpid_status' data-type='__sanitizer::uptr' data-ref="99waitpid_status" data-ref-filename="99waitpid_status">waitpid_status</dfn> = <a class="ref fn" href="sanitizer_posix.h.html#__sanitizer::internal_waitpid" title='__sanitizer::internal_waitpid' data-ref="__sanitizer::internal_waitpid" data-ref-filename="__sanitizer..internal_waitpid">internal_waitpid</a>(<a class="local col7 ref" href="#97pid" title='pid' data-ref="97pid" data-ref-filename="97pid">pid</a>, &amp;<a class="local col8 ref" href="#98process_status" title='process_status' data-ref="98process_status" data-ref-filename="98process_status">process_status</a>, <var>0</var>);</td></tr>
<tr><th id="491">491</th><td>  <em>int</em> <dfn class="local col0 decl" id="100local_errno" title='local_errno' data-type='int' data-ref="100local_errno" data-ref-filename="100local_errno">local_errno</dfn>;</td></tr>
<tr><th id="492">492</th><td>  <b>if</b> (<a class="ref fn" href="sanitizer_libc.h.html#__sanitizer::internal_iserror" title='__sanitizer::internal_iserror' data-ref="__sanitizer::internal_iserror" data-ref-filename="__sanitizer..internal_iserror">internal_iserror</a>(<a class="local col9 ref" href="#99waitpid_status" title='waitpid_status' data-ref="99waitpid_status" data-ref-filename="99waitpid_status">waitpid_status</a>, &amp;<a class="local col0 ref" href="#100local_errno" title='local_errno' data-ref="100local_errno" data-ref-filename="100local_errno">local_errno</a>)) {</td></tr>
<tr><th id="493">493</th><td>    <a class="macro" href="sanitizer_common.h.html#219" title="do { if ((uptr)Verbosity() &gt;= (1)) Report(&quot;Waiting on the process failed (errno %d).\n&quot;, local_errno); } while (0)" data-ref="_M/VReport">VReport</a>(<var>1</var>, <q>"Waiting on the process failed (errno %d).\n"</q>, <a class="local col0 ref" href="#100local_errno" title='local_errno' data-ref="100local_errno" data-ref-filename="100local_errno">local_errno</a>);</td></tr>
<tr><th id="494">494</th><td>    <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="495">495</th><td>  }</td></tr>
<tr><th id="496">496</th><td>  <b>return</b> <a class="local col8 ref" href="#98process_status" title='process_status' data-ref="98process_status" data-ref-filename="98process_status">process_status</a>;</td></tr>
<tr><th id="497">497</th><td>}</td></tr>
<tr><th id="498">498</th><td></td></tr>
<tr><th id="499">499</th><td><em>bool</em> <dfn class="decl def fn" id="__sanitizer::IsStateDetached" title='__sanitizer::IsStateDetached' data-ref="__sanitizer::IsStateDetached" data-ref-filename="__sanitizer..IsStateDetached">IsStateDetached</dfn>(<em>int</em> <dfn class="local col1 decl" id="101state" title='state' data-type='int' data-ref="101state" data-ref-filename="101state">state</dfn>) {</td></tr>
<tr><th id="500">500</th><td>  <b>return</b> <a class="local col1 ref" href="#101state" title='state' data-ref="101state" data-ref-filename="101state">state</a> == <a class="macro" href="../../../../include/pthread.h.html#38" title="PTHREAD_CREATE_DETACHED" data-ref="_M/PTHREAD_CREATE_DETACHED">PTHREAD_CREATE_DETACHED</a>;</td></tr>
<tr><th id="501">501</th><td>}</td></tr>
<tr><th id="502">502</th><td></td></tr>
<tr><th id="503">503</th><td>} <i>// namespace __sanitizer</i></td></tr>
<tr><th id="504">504</th><td></td></tr>
<tr><th id="505">505</th><td><u>#<span data-ppcond="16">endif</span> // SANITIZER_POSIX</u></td></tr>
<tr><th id="506">506</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-01</em> from project llvm revision <em>12</em>