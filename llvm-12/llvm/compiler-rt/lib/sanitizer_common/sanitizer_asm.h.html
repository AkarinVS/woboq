<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>sanitizer_asm.h source code [llvm/compiler-rt/lib/sanitizer_common/sanitizer_asm.h] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/compiler-rt/lib/sanitizer_common/sanitizer_asm.h'; var root_path = '../../../..'; var data_path = '../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>llvm</a>/<a href='../..'>compiler-rt</a>/<a href='..'>lib</a>/<a href='./'>sanitizer_common</a>/<a href='sanitizer_asm.h.html'>sanitizer_asm.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===-- sanitizer_asm.h -----------------------------------------*- C++ -*-===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td><i>//</i></td></tr>
<tr><th id="9">9</th><td><i>// Various support for assemebler.</i></td></tr>
<tr><th id="10">10</th><td><i>//</i></td></tr>
<tr><th id="11">11</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="12">12</th><td><i></i></td></tr>
<tr><th id="13">13</th><td><i>// Some toolchains do not support .cfi asm directives, so we have to hide</i></td></tr>
<tr><th id="14">14</th><td><i>// them inside macros.</i></td></tr>
<tr><th id="15">15</th><td><u>#<span data-ppcond="15">if</span> defined(<span class="macro" data-ref="_M/__clang__">__clang__</span>) ||                                                      \</u></td></tr>
<tr><th id="16">16</th><td><u>    (defined(<span class="macro" data-ref="_M/__GNUC__">__GNUC__</span>) &amp;&amp; defined(<span class="macro" data-ref="_M/__GCC_HAVE_DWARF2_CFI_ASM">__GCC_HAVE_DWARF2_CFI_ASM</span>))</u></td></tr>
<tr><th id="17">17</th><td>  <i>// GCC defined __GCC_HAVE_DWARF2_CFI_ASM if it supports CFI.</i></td></tr>
<tr><th id="18">18</th><td><i>  // Clang seems to support CFI by default (or not?).</i></td></tr>
<tr><th id="19">19</th><td><i>  // We need two versions of macros: for inline asm and standalone asm files.</i></td></tr>
<tr><th id="20">20</th><td><u># define <dfn class="macro" id="_M/CFI_INL_ADJUST_CFA_OFFSET" data-ref="_M/CFI_INL_ADJUST_CFA_OFFSET">CFI_INL_ADJUST_CFA_OFFSET</dfn>(n) ".cfi_adjust_cfa_offset " #n ";"</u></td></tr>
<tr><th id="21">21</th><td></td></tr>
<tr><th id="22">22</th><td><u># define <dfn class="macro" id="_M/CFI_STARTPROC" data-ref="_M/CFI_STARTPROC">CFI_STARTPROC</dfn> .cfi_startproc</u></td></tr>
<tr><th id="23">23</th><td><u># define <dfn class="macro" id="_M/CFI_ENDPROC" data-ref="_M/CFI_ENDPROC">CFI_ENDPROC</dfn> .cfi_endproc</u></td></tr>
<tr><th id="24">24</th><td><u># define <dfn class="macro" id="_M/CFI_ADJUST_CFA_OFFSET" data-ref="_M/CFI_ADJUST_CFA_OFFSET">CFI_ADJUST_CFA_OFFSET</dfn>(n) .cfi_adjust_cfa_offset n</u></td></tr>
<tr><th id="25">25</th><td><u># define <dfn class="macro" id="_M/CFI_DEF_CFA_OFFSET" data-ref="_M/CFI_DEF_CFA_OFFSET">CFI_DEF_CFA_OFFSET</dfn>(n) .cfi_def_cfa_offset n</u></td></tr>
<tr><th id="26">26</th><td><u># define <dfn class="macro" id="_M/CFI_REL_OFFSET" data-ref="_M/CFI_REL_OFFSET">CFI_REL_OFFSET</dfn>(reg, n) .cfi_rel_offset reg, n</u></td></tr>
<tr><th id="27">27</th><td><u># define <dfn class="macro" id="_M/CFI_OFFSET" data-ref="_M/CFI_OFFSET">CFI_OFFSET</dfn>(reg, n) .cfi_offset reg, n</u></td></tr>
<tr><th id="28">28</th><td><u># define <dfn class="macro" id="_M/CFI_DEF_CFA_REGISTER" data-ref="_M/CFI_DEF_CFA_REGISTER">CFI_DEF_CFA_REGISTER</dfn>(reg) .cfi_def_cfa_register reg</u></td></tr>
<tr><th id="29">29</th><td><u># define <dfn class="macro" id="_M/CFI_DEF_CFA" data-ref="_M/CFI_DEF_CFA">CFI_DEF_CFA</dfn>(reg, n) .cfi_def_cfa reg, n</u></td></tr>
<tr><th id="30">30</th><td><u># define <dfn class="macro" id="_M/CFI_RESTORE" data-ref="_M/CFI_RESTORE">CFI_RESTORE</dfn>(reg) .cfi_restore reg</u></td></tr>
<tr><th id="31">31</th><td></td></tr>
<tr><th id="32">32</th><td><u>#<span data-ppcond="15">else</span>  // No CFI</u></td></tr>
<tr><th id="33">33</th><td><u># define CFI_INL_ADJUST_CFA_OFFSET(n)</u></td></tr>
<tr><th id="34">34</th><td><u># define CFI_STARTPROC</u></td></tr>
<tr><th id="35">35</th><td><u># define CFI_ENDPROC</u></td></tr>
<tr><th id="36">36</th><td><u># define CFI_ADJUST_CFA_OFFSET(n)</u></td></tr>
<tr><th id="37">37</th><td><u># define CFI_DEF_CFA_OFFSET(n)</u></td></tr>
<tr><th id="38">38</th><td><u># define CFI_REL_OFFSET(reg, n)</u></td></tr>
<tr><th id="39">39</th><td><u># define CFI_OFFSET(reg, n)</u></td></tr>
<tr><th id="40">40</th><td><u># define CFI_DEF_CFA_REGISTER(reg)</u></td></tr>
<tr><th id="41">41</th><td><u># define CFI_DEF_CFA(reg, n)</u></td></tr>
<tr><th id="42">42</th><td><u># define CFI_RESTORE(reg)</u></td></tr>
<tr><th id="43">43</th><td><u>#<span data-ppcond="15">endif</span></u></td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><u>#<span data-ppcond="45">if</span> !defined(<span class="macro" data-ref="_M/__APPLE__">__APPLE__</span>)</u></td></tr>
<tr><th id="46">46</th><td><u># define <dfn class="macro" id="_M/ASM_HIDDEN" data-ref="_M/ASM_HIDDEN">ASM_HIDDEN</dfn>(symbol) .hidden symbol</u></td></tr>
<tr><th id="47">47</th><td><u># define <dfn class="macro" id="_M/ASM_TYPE_FUNCTION" data-ref="_M/ASM_TYPE_FUNCTION">ASM_TYPE_FUNCTION</dfn>(symbol) .type symbol, %function</u></td></tr>
<tr><th id="48">48</th><td><u># define <dfn class="macro" id="_M/ASM_SIZE" data-ref="_M/ASM_SIZE">ASM_SIZE</dfn>(symbol) .size symbol, .-symbol</u></td></tr>
<tr><th id="49">49</th><td><u># define <dfn class="macro" id="_M/ASM_SYMBOL" data-ref="_M/ASM_SYMBOL">ASM_SYMBOL</dfn>(symbol) symbol</u></td></tr>
<tr><th id="50">50</th><td><u># define <dfn class="macro" id="_M/ASM_SYMBOL_INTERCEPTOR" data-ref="_M/ASM_SYMBOL_INTERCEPTOR">ASM_SYMBOL_INTERCEPTOR</dfn>(symbol) symbol</u></td></tr>
<tr><th id="51">51</th><td><u># define <dfn class="macro" id="_M/ASM_WRAPPER_NAME" data-ref="_M/ASM_WRAPPER_NAME">ASM_WRAPPER_NAME</dfn>(symbol) __interceptor_##symbol</u></td></tr>
<tr><th id="52">52</th><td><u>#<span data-ppcond="45">else</span></u></td></tr>
<tr><th id="53">53</th><td><u># define ASM_HIDDEN(symbol)</u></td></tr>
<tr><th id="54">54</th><td><u># define ASM_TYPE_FUNCTION(symbol)</u></td></tr>
<tr><th id="55">55</th><td><u># define ASM_SIZE(symbol)</u></td></tr>
<tr><th id="56">56</th><td><u># define ASM_SYMBOL(symbol) _##symbol</u></td></tr>
<tr><th id="57">57</th><td><u># define ASM_SYMBOL_INTERCEPTOR(symbol) _wrap_##symbol</u></td></tr>
<tr><th id="58">58</th><td><u># define ASM_WRAPPER_NAME(symbol) __interceptor_##symbol</u></td></tr>
<tr><th id="59">59</th><td><u>#<span data-ppcond="45">endif</span></u></td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td><u>#<span data-ppcond="61">if</span> defined(<span class="macro" data-ref="_M/__ELF__">__ELF__</span>) &amp;&amp; (defined(<span class="macro" data-ref="_M/__GNU__">__GNU__</span>) || defined(<span class="macro" data-ref="_M/__FreeBSD__">__FreeBSD__</span>) || \</u></td></tr>
<tr><th id="62">62</th><td><u>                         defined(<span class="macro" data-ref="_M/__Fuchsia__">__Fuchsia__</span>) || defined(<span class="macro" data-ref="_M/__linux__">__linux__</span>))</u></td></tr>
<tr><th id="63">63</th><td><i>// clang-format off</i></td></tr>
<tr><th id="64">64</th><td><u>#define <dfn class="macro" id="_M/NO_EXEC_STACK_DIRECTIVE" data-ref="_M/NO_EXEC_STACK_DIRECTIVE">NO_EXEC_STACK_DIRECTIVE</dfn> .section .note.GNU-stack,"",%progbits  // NOLINT</u></td></tr>
<tr><th id="65">65</th><td><i>// clang-format on</i></td></tr>
<tr><th id="66">66</th><td><u>#<span data-ppcond="61">else</span></u></td></tr>
<tr><th id="67">67</th><td><u>#define NO_EXEC_STACK_DIRECTIVE</u></td></tr>
<tr><th id="68">68</th><td><u>#<span data-ppcond="61">endif</span></u></td></tr>
<tr><th id="69">69</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../asan/asan_interceptors_vfork.S.html'>llvm/compiler-rt/lib/asan/asan_interceptors_vfork.S</a><br/>Generated on <em>2021-Jul-01</em> from project llvm revision <em>12</em>