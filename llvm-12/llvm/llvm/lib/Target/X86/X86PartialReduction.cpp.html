<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>X86PartialReduction.cpp source code [llvm/llvm/lib/Target/X86/X86PartialReduction.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/llvm/lib/Target/X86/X86PartialReduction.cpp'; var root_path = '../../../../..'; var data_path = '../../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../..'>llvm</a>/<a href='../../..'>llvm</a>/<a href='../..'>lib</a>/<a href='..'>Target</a>/<a href='./'>X86</a>/<a href='X86PartialReduction.cpp.html'>X86PartialReduction.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===-- X86PartialReduction.cpp -------------------------------------------===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td><i>//</i></td></tr>
<tr><th id="9">9</th><td><i>// This pass looks for add instructions used by a horizontal reduction to see</i></td></tr>
<tr><th id="10">10</th><td><i>// if we might be able to use pmaddwd or psadbw. Some cases of this require</i></td></tr>
<tr><th id="11">11</th><td><i>// cross basic block knowledge and can't be done in SelectionDAG.</i></td></tr>
<tr><th id="12">12</th><td><i>//</i></td></tr>
<tr><th id="13">13</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="14">14</th><td></td></tr>
<tr><th id="15">15</th><td><u>#include <a href="X86.h.html">"X86.h"</a></u></td></tr>
<tr><th id="16">16</th><td><u>#include <a href="../../../include/llvm/Analysis/ValueTracking.h.html">"llvm/Analysis/ValueTracking.h"</a></u></td></tr>
<tr><th id="17">17</th><td><u>#include <a href="../../../include/llvm/CodeGen/TargetPassConfig.h.html">"llvm/CodeGen/TargetPassConfig.h"</a></u></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="../../../include/llvm/IR/Constants.h.html">"llvm/IR/Constants.h"</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="../../../include/llvm/IR/Instructions.h.html">"llvm/IR/Instructions.h"</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../../../build/include/llvm/IR/IntrinsicsX86.h.html">"llvm/IR/IntrinsicsX86.h"</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="../../../include/llvm/IR/IRBuilder.h.html">"llvm/IR/IRBuilder.h"</a></u></td></tr>
<tr><th id="22">22</th><td><u>#include <a href="../../../include/llvm/IR/Operator.h.html">"llvm/IR/Operator.h"</a></u></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="../../../include/llvm/Pass.h.html">"llvm/Pass.h"</a></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="X86TargetMachine.h.html">"X86TargetMachine.h"</a></u></td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><b>using</b> <b>namespace</b> <span class="namespace">llvm</span>;</td></tr>
<tr><th id="27">27</th><td></td></tr>
<tr><th id="28">28</th><td><u>#define <dfn class="macro" id="_M/DEBUG_TYPE" data-ref="_M/DEBUG_TYPE">DEBUG_TYPE</dfn> <a class="ref fn fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a>"x86-partial-reduction"</u></td></tr>
<tr><th id="29">29</th><td></td></tr>
<tr><th id="30">30</th><td><b>namespace</b> {</td></tr>
<tr><th id="31">31</th><td></td></tr>
<tr><th id="32">32</th><td><b>class</b> <dfn class="tu type def" id="(anonymousnamespace)::X86PartialReduction" title='(anonymous namespace)::X86PartialReduction' data-ref="(anonymousnamespace)::X86PartialReduction" data-ref-filename="(anonymousnamespace)..X86PartialReduction">X86PartialReduction</dfn> : <b>public</b> <a class="type" href="../../../include/llvm/Pass.h.html#llvm::FunctionPass" title='llvm::FunctionPass' data-ref="llvm::FunctionPass" data-ref-filename="llvm..FunctionPass">FunctionPass</a> {</td></tr>
<tr><th id="33">33</th><td>  <em>const</em> <a class="type" href="../../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout" data-ref-filename="llvm..DataLayout">DataLayout</a> *<dfn class="tu decl field" id="(anonymousnamespace)::X86PartialReduction::DL" title='(anonymous namespace)::X86PartialReduction::DL' data-type='const llvm::DataLayout *' data-ref="(anonymousnamespace)::X86PartialReduction::DL" data-ref-filename="(anonymousnamespace)..X86PartialReduction..DL">DL</dfn>;</td></tr>
<tr><th id="34">34</th><td>  <em>const</em> <a class="type" href="X86Subtarget.h.html#llvm::X86Subtarget" title='llvm::X86Subtarget' data-ref="llvm::X86Subtarget" data-ref-filename="llvm..X86Subtarget">X86Subtarget</a> *<dfn class="tu decl field" id="(anonymousnamespace)::X86PartialReduction::ST" title='(anonymous namespace)::X86PartialReduction::ST' data-type='const llvm::X86Subtarget *' data-ref="(anonymousnamespace)::X86PartialReduction::ST" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ST">ST</dfn>;</td></tr>
<tr><th id="35">35</th><td></td></tr>
<tr><th id="36">36</th><td><b>public</b>:</td></tr>
<tr><th id="37">37</th><td>  <em>static</em> <em>char</em> <dfn class="tu decl" id="(anonymousnamespace)::X86PartialReduction::ID" title='(anonymous namespace)::X86PartialReduction::ID' data-type='char' data-ref="(anonymousnamespace)::X86PartialReduction::ID" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ID">ID</dfn>; <i  data-doc="(anonymousnamespace)::X86PartialReduction::ID">// Pass identification, replacement for typeid.</i></td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td>  <dfn class="tu decl def fn" id="_ZN12_GLOBAL__N_119X86PartialReductionC1Ev" title='(anonymous namespace)::X86PartialReduction::X86PartialReduction' data-type='void (anonymous namespace)::X86PartialReduction::X86PartialReduction()' data-ref="_ZN12_GLOBAL__N_119X86PartialReductionC1Ev" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReductionC1Ev">X86PartialReduction</dfn>() : <a class="type" href="../../../include/llvm/Pass.h.html#llvm::FunctionPass" title='llvm::FunctionPass' data-ref="llvm::FunctionPass" data-ref-filename="llvm..FunctionPass">FunctionPass</a><a class="ref fn" href="../../../include/llvm/Pass.h.html#_ZN4llvm12FunctionPassC1ERc" title='llvm::FunctionPass::FunctionPass' data-ref="_ZN4llvm12FunctionPassC1ERc" data-ref-filename="_ZN4llvm12FunctionPassC1ERc">(</a><a class="tu member" href="#(anonymousnamespace)::X86PartialReduction::ID" title='(anonymous namespace)::X86PartialReduction::ID' data-use='a' data-ref="(anonymousnamespace)::X86PartialReduction::ID" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ID">ID</a>) { }</td></tr>
<tr><th id="40">40</th><td></td></tr>
<tr><th id="41">41</th><td>  <em>bool</em> <a class="virtual tu decl fn" href="#_ZN12_GLOBAL__N_119X86PartialReduction13runOnFunctionERN4llvm8FunctionE" title='(anonymous namespace)::X86PartialReduction::runOnFunction' data-type='bool (anonymous namespace)::X86PartialReduction::runOnFunction(llvm::Function &amp; Fn)' data-ref="_ZN12_GLOBAL__N_119X86PartialReduction13runOnFunctionERN4llvm8FunctionE" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReduction13runOnFunctionERN4llvm8FunctionE">runOnFunction</a>(<a class="type" href="../../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function" data-ref-filename="llvm..Function">Function</a> &amp;<dfn class="local col1 decl" id="1Fn" title='Fn' data-type='llvm::Function &amp;' data-ref="1Fn" data-ref-filename="1Fn">Fn</dfn>) override;</td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td>  <em>void</em> <dfn class="virtual tu decl def fn" id="_ZNK12_GLOBAL__N_119X86PartialReduction16getAnalysisUsageERN4llvm13AnalysisUsageE" title='(anonymous namespace)::X86PartialReduction::getAnalysisUsage' data-type='void (anonymous namespace)::X86PartialReduction::getAnalysisUsage(llvm::AnalysisUsage &amp; AU) const' data-ref="_ZNK12_GLOBAL__N_119X86PartialReduction16getAnalysisUsageERN4llvm13AnalysisUsageE" data-ref-filename="_ZNK12_GLOBAL__N_119X86PartialReduction16getAnalysisUsageERN4llvm13AnalysisUsageE">getAnalysisUsage</dfn>(<a class="type" href="../../../include/llvm/PassAnalysisSupport.h.html#llvm::AnalysisUsage" title='llvm::AnalysisUsage' data-ref="llvm::AnalysisUsage" data-ref-filename="llvm..AnalysisUsage">AnalysisUsage</a> &amp;<dfn class="local col2 decl" id="2AU" title='AU' data-type='llvm::AnalysisUsage &amp;' data-ref="2AU" data-ref-filename="2AU">AU</dfn>) <em>const</em> override {</td></tr>
<tr><th id="44">44</th><td>    <a class="local col2 ref" href="#2AU" title='AU' data-ref="2AU" data-ref-filename="2AU">AU</a>.<a class="ref fn" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage15setPreservesCFGEv" title='llvm::AnalysisUsage::setPreservesCFG' data-ref="_ZN4llvm13AnalysisUsage15setPreservesCFGEv" data-ref-filename="_ZN4llvm13AnalysisUsage15setPreservesCFGEv">setPreservesCFG</a>();</td></tr>
<tr><th id="45">45</th><td>  }</td></tr>
<tr><th id="46">46</th><td></td></tr>
<tr><th id="47">47</th><td>  <a class="type" href="../../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="virtual tu decl def fn" id="_ZNK12_GLOBAL__N_119X86PartialReduction11getPassNameEv" title='(anonymous namespace)::X86PartialReduction::getPassName' data-type='llvm::StringRef (anonymous namespace)::X86PartialReduction::getPassName() const' data-ref="_ZNK12_GLOBAL__N_119X86PartialReduction11getPassNameEv" data-ref-filename="_ZNK12_GLOBAL__N_119X86PartialReduction11getPassNameEv">getPassName</dfn>() <em>const</em> override {</td></tr>
<tr><th id="48">48</th><td>    <b>return</b> <a class="ref fn fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>"X86 Partial Reduction"</q>;</td></tr>
<tr><th id="49">49</th><td>  }</td></tr>
<tr><th id="50">50</th><td></td></tr>
<tr><th id="51">51</th><td><b>private</b>:</td></tr>
<tr><th id="52">52</th><td>  <em>bool</em> <a class="tu decl fn" href="#_ZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionE" title='(anonymous namespace)::X86PartialReduction::tryMAddReplacement' data-type='bool (anonymous namespace)::X86PartialReduction::tryMAddReplacement(llvm::Instruction * Op)' data-ref="_ZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionE" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionE">tryMAddReplacement</a>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a> *<dfn class="local col3 decl" id="3Op" title='Op' data-type='llvm::Instruction *' data-ref="3Op" data-ref-filename="3Op">Op</dfn>);</td></tr>
<tr><th id="53">53</th><td>  <em>bool</em> <a class="tu decl fn" href="#_ZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionE" title='(anonymous namespace)::X86PartialReduction::trySADReplacement' data-type='bool (anonymous namespace)::X86PartialReduction::trySADReplacement(llvm::Instruction * Op)' data-ref="_ZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionE" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionE">trySADReplacement</a>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a> *<dfn class="local col4 decl" id="4Op" title='Op' data-type='llvm::Instruction *' data-ref="4Op" data-ref-filename="4Op">Op</dfn>);</td></tr>
<tr><th id="54">54</th><td>};</td></tr>
<tr><th id="55">55</th><td>}</td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td><a class="type" href="../../../include/llvm/Pass.h.html#llvm::FunctionPass" title='llvm::FunctionPass' data-ref="llvm::FunctionPass" data-ref-filename="llvm..FunctionPass">FunctionPass</a> *<span class="namespace">llvm::</span><dfn class="decl def fn" id="_ZN4llvm29createX86PartialReductionPassEv" title='llvm::createX86PartialReductionPass' data-ref="_ZN4llvm29createX86PartialReductionPassEv" data-ref-filename="_ZN4llvm29createX86PartialReductionPassEv">createX86PartialReductionPass</dfn>() {</td></tr>
<tr><th id="58">58</th><td>  <b>return</b> <b>new</b> <a class="tu type" href="#(anonymousnamespace)::X86PartialReduction" title='(anonymous namespace)::X86PartialReduction' data-ref="(anonymousnamespace)::X86PartialReduction" data-ref-filename="(anonymousnamespace)..X86PartialReduction">X86PartialReduction</a><a class="tu ref fn" href="#_ZN12_GLOBAL__N_119X86PartialReductionC1Ev" title='(anonymous namespace)::X86PartialReduction::X86PartialReduction' data-use='c' data-ref="_ZN12_GLOBAL__N_119X86PartialReductionC1Ev" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReductionC1Ev">(</a>);</td></tr>
<tr><th id="59">59</th><td>}</td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td><em>char</em> <a class="tu type" href="#(anonymousnamespace)::X86PartialReduction" title='(anonymous namespace)::X86PartialReduction' data-ref="(anonymousnamespace)::X86PartialReduction" data-ref-filename="(anonymousnamespace)..X86PartialReduction">X86PartialReduction</a>::<dfn class="tu decl def" id="(anonymousnamespace)::X86PartialReduction::ID" title='(anonymous namespace)::X86PartialReduction::ID' data-type='char' data-ref="(anonymousnamespace)::X86PartialReduction::ID" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ID">ID</dfn> = <var>0</var>;</td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#37" title="static void *initializeX86PartialReductionPassOnce(PassRegistry &amp;Registry) { PassInfo *PI = new PassInfo( &quot;X86 Partial Reduction&quot;, &quot;x86-partial-reduction&quot;, &amp;X86PartialReduction::ID, PassInfo::NormalCtor_t(callDefaultCtor&lt;X86PartialReduction&gt;), false, false); Registry.registerPass(*PI, true); return PI; } static llvm::once_flag InitializeX86PartialReductionPassFlag; void llvm::initializeX86PartialReductionPass(PassRegistry &amp;Registry) { llvm::call_once(InitializeX86PartialReductionPassFlag, initializeX86PartialReductionPassOnce, std::ref(Registry)); }" data-ref="_M/INITIALIZE_PASS">INITIALIZE_PASS</a>(<a class="tu type" href="#(anonymousnamespace)::X86PartialReduction" title='(anonymous namespace)::X86PartialReduction' data-ref="(anonymousnamespace)::X86PartialReduction" data-ref-filename="(anonymousnamespace)..X86PartialReduction">X86PartialReduction</a>, <a class="macro" href="#28" title="&quot;x86-partial-reduction&quot;" data-ref="_M/DEBUG_TYPE">DEBUG_TYPE</a>,</td></tr>
<tr><th id="64">64</th><td>                <a class="ref fn fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>"X86 Partial Reduction"</q>, <b>false</b>, <b>false</b>)</td></tr>
<tr><th id="65">65</th><td></td></tr>
<tr><th id="66">66</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::X86PartialReduction" title='(anonymous namespace)::X86PartialReduction' data-ref="(anonymousnamespace)::X86PartialReduction" data-ref-filename="(anonymousnamespace)..X86PartialReduction">X86PartialReduction</a>::<dfn class="tu decl def fn" id="_ZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionE" title='(anonymous namespace)::X86PartialReduction::tryMAddReplacement' data-type='bool (anonymous namespace)::X86PartialReduction::tryMAddReplacement(llvm::Instruction * Op)' data-ref="_ZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionE" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionE">tryMAddReplacement</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a> *<dfn class="local col5 decl" id="5Op" title='Op' data-type='llvm::Instruction *' data-ref="5Op" data-ref-filename="5Op">Op</dfn>) {</td></tr>
<tr><th id="67">67</th><td>  <b>if</b> (!<a class="tu member field" href="#(anonymousnamespace)::X86PartialReduction::ST" title='(anonymous namespace)::X86PartialReduction::ST' data-use='r' data-ref="(anonymousnamespace)::X86PartialReduction::ST" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ST">ST</a>-&gt;<a class="ref fn" href="X86Subtarget.h.html#_ZNK4llvm12X86Subtarget7hasSSE2Ev" title='llvm::X86Subtarget::hasSSE2' data-ref="_ZNK4llvm12X86Subtarget7hasSSE2Ev" data-ref-filename="_ZNK4llvm12X86Subtarget7hasSSE2Ev">hasSSE2</a>())</td></tr>
<tr><th id="68">68</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td>  <i>// Need at least 8 elements.</i></td></tr>
<tr><th id="71">71</th><td>  <b>if</b> (<a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::FixedVectorType" title='llvm::FixedVectorType' data-ref="llvm::FixedVectorType" data-ref-filename="llvm..FixedVectorType">FixedVectorType</a>&gt;(<a class="local col5 ref" href="#5Op" title='Op' data-ref="5Op" data-ref-filename="5Op">Op</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm15FixedVectorType14getNumElementsEv" title='llvm::FixedVectorType::getNumElements' data-ref="_ZNK4llvm15FixedVectorType14getNumElementsEv" data-ref-filename="_ZNK4llvm15FixedVectorType14getNumElementsEv">getNumElements</a>() &lt; <var>8</var>)</td></tr>
<tr><th id="72">72</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="73">73</th><td></td></tr>
<tr><th id="74">74</th><td>  <i>// Element type should be i32.</i></td></tr>
<tr><th id="75">75</th><td>  <b>if</b> (!<a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType" data-ref-filename="llvm..VectorType">VectorType</a>&gt;(<a class="local col5 ref" href="#5Op" title='Op' data-ref="5Op" data-ref-filename="5Op">Op</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm10VectorType14getElementTypeEv" title='llvm::VectorType::getElementType' data-ref="_ZNK4llvm10VectorType14getElementTypeEv" data-ref-filename="_ZNK4llvm10VectorType14getElementTypeEv">getElementType</a>()-&gt;<a class="ref fn" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEj" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEj" data-ref-filename="_ZNK4llvm4Type11isIntegerTyEj">isIntegerTy</a>(<var>32</var>))</td></tr>
<tr><th id="76">76</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td>  <em>auto</em> *<dfn class="local col6 decl" id="6Mul" title='Mul' data-type='llvm::BinaryOperator *' data-ref="6Mul" data-ref-filename="6Mul">Mul</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator" data-ref-filename="llvm..BinaryOperator">BinaryOperator</a>&gt;(<a class="local col5 ref" href="#5Op" title='Op' data-ref="5Op" data-ref-filename="5Op">Op</a>);</td></tr>
<tr><th id="79">79</th><td>  <b>if</b> (!<a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a> || <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv" data-ref-filename="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() != <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#151" title='llvm::Instruction::Mul' data-ref="llvm::Instruction::Mul" data-ref-filename="llvm..Instruction..Mul">Mul</a>)</td></tr>
<tr><th id="80">80</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="81">81</th><td></td></tr>
<tr><th id="82">82</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col7 decl" id="7LHS" title='LHS' data-type='llvm::Value *' data-ref="7LHS" data-ref-filename="7LHS">LHS</dfn> = <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="83">83</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col8 decl" id="8RHS" title='RHS' data-type='llvm::Value *' data-ref="8RHS" data-ref-filename="8RHS">RHS</dfn> = <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="84">84</th><td></td></tr>
<tr><th id="85">85</th><td>  <i>// LHS and RHS should be only used once or if they are the same then only</i></td></tr>
<tr><th id="86">86</th><td><i>  // used twice. Only check this when SSE4.1 is enabled and we have zext/sext</i></td></tr>
<tr><th id="87">87</th><td><i>  // instructions, otherwise we use punpck to emulate zero extend in stages. The</i></td></tr>
<tr><th id="88">88</th><td><i>  // trunc/ we need to do likely won't introduce new instructions in that case.</i></td></tr>
<tr><th id="89">89</th><td>  <b>if</b> (<a class="tu member field" href="#(anonymousnamespace)::X86PartialReduction::ST" title='(anonymous namespace)::X86PartialReduction::ST' data-use='r' data-ref="(anonymousnamespace)::X86PartialReduction::ST" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ST">ST</a>-&gt;<a class="ref fn" href="X86Subtarget.h.html#_ZNK4llvm12X86Subtarget8hasSSE41Ev" title='llvm::X86Subtarget::hasSSE41' data-ref="_ZNK4llvm12X86Subtarget8hasSSE41Ev" data-ref-filename="_ZNK4llvm12X86Subtarget8hasSSE41Ev">hasSSE41</a>()) {</td></tr>
<tr><th id="90">90</th><td>    <b>if</b> (<a class="local col7 ref" href="#7LHS" title='LHS' data-ref="7LHS" data-ref-filename="7LHS">LHS</a> == <a class="local col8 ref" href="#8RHS" title='RHS' data-ref="8RHS" data-ref-filename="8RHS">RHS</a>) {</td></tr>
<tr><th id="91">91</th><td>      <b>if</b> (!<a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_" data-ref-filename="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant" data-ref-filename="llvm..Constant">Constant</a>&gt;(<a class="local col7 ref" href="#7LHS" title='LHS' data-ref="7LHS" data-ref-filename="7LHS">LHS</a>) &amp;&amp; !<a class="local col7 ref" href="#7LHS" title='LHS' data-ref="7LHS" data-ref-filename="7LHS">LHS</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value8hasNUsesEj" title='llvm::Value::hasNUses' data-ref="_ZNK4llvm5Value8hasNUsesEj" data-ref-filename="_ZNK4llvm5Value8hasNUsesEj">hasNUses</a>(<var>2</var>))</td></tr>
<tr><th id="92">92</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="93">93</th><td>    } <b>else</b> {</td></tr>
<tr><th id="94">94</th><td>      <b>if</b> (!<a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_" data-ref-filename="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant" data-ref-filename="llvm..Constant">Constant</a>&gt;(<a class="local col7 ref" href="#7LHS" title='LHS' data-ref="7LHS" data-ref-filename="7LHS">LHS</a>) &amp;&amp; !<a class="local col7 ref" href="#7LHS" title='LHS' data-ref="7LHS" data-ref-filename="7LHS">LHS</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv" data-ref-filename="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="95">95</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="96">96</th><td>      <b>if</b> (!<a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_" data-ref-filename="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant" data-ref-filename="llvm..Constant">Constant</a>&gt;(<a class="local col8 ref" href="#8RHS" title='RHS' data-ref="8RHS" data-ref-filename="8RHS">RHS</a>) &amp;&amp; !<a class="local col8 ref" href="#8RHS" title='RHS' data-ref="8RHS" data-ref-filename="8RHS">RHS</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv" data-ref-filename="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="97">97</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="98">98</th><td>    }</td></tr>
<tr><th id="99">99</th><td>  }</td></tr>
<tr><th id="100">100</th><td></td></tr>
<tr><th id="101">101</th><td>  <em>auto</em> <dfn class="local col9 decl" id="9CanShrinkOp" title='CanShrinkOp' data-type='(lambda at /fast/tmp/llvm-proj-12/llvm/lib/Target/X86/X86PartialReduction.cpp:101:22)' data-ref="9CanShrinkOp" data-ref-filename="9CanShrinkOp">CanShrinkOp</dfn> = [&amp;](<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col0 decl" id="10Op" title='Op' data-type='llvm::Value *' data-ref="10Op" data-ref-filename="10Op">Op</dfn>) {</td></tr>
<tr><th id="102">102</th><td>    <em>auto</em> <dfn class="local col1 decl" id="11IsFreeTruncation" title='IsFreeTruncation' data-type='(lambda at /fast/tmp/llvm-proj-12/llvm/lib/Target/X86/X86PartialReduction.cpp:102:29)' data-ref="11IsFreeTruncation" data-ref-filename="11IsFreeTruncation">IsFreeTruncation</dfn> = [&amp;](<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col2 decl" id="12Op" title='Op' data-type='llvm::Value *' data-ref="12Op" data-ref-filename="12Op">Op</dfn>) {</td></tr>
<tr><th id="103">103</th><td>      <b>if</b> (<em>auto</em> *<dfn class="local col3 decl" id="13Cast" title='Cast' data-type='llvm::CastInst *' data-ref="13Cast" data-ref-filename="13Cast"><a class="local col3 ref" href="#13Cast" title='Cast' data-ref="13Cast" data-ref-filename="13Cast">Cast</a></dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst" data-ref-filename="llvm..CastInst">CastInst</a>&gt;(<a class="local col2 ref" href="#12Op" title='Op' data-ref="12Op" data-ref-filename="12Op">Op</a>)) {</td></tr>
<tr><th id="104">104</th><td>        <b>if</b> (<a class="local col3 ref" href="#13Cast" title='Cast' data-ref="13Cast" data-ref-filename="13Cast">Cast</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv" data-ref-filename="_ZN4llvm11Instruction9getParentEv">getParent</a>() == <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv" data-ref-filename="_ZN4llvm11Instruction9getParentEv">getParent</a>() &amp;&amp;</td></tr>
<tr><th id="105">105</th><td>            (<a class="local col3 ref" href="#13Cast" title='Cast' data-ref="13Cast" data-ref-filename="13Cast">Cast</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst9getOpcodeEv" title='llvm::CastInst::getOpcode' data-ref="_ZNK4llvm8CastInst9getOpcodeEv" data-ref-filename="_ZNK4llvm8CastInst9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#186" title='llvm::Instruction::SExt' data-ref="llvm::Instruction::SExt" data-ref-filename="llvm..Instruction..SExt">SExt</a> ||</td></tr>
<tr><th id="106">106</th><td>             <a class="local col3 ref" href="#13Cast" title='Cast' data-ref="13Cast" data-ref-filename="13Cast">Cast</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst9getOpcodeEv" title='llvm::CastInst::getOpcode' data-ref="_ZNK4llvm8CastInst9getOpcodeEv" data-ref-filename="_ZNK4llvm8CastInst9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#185" title='llvm::Instruction::ZExt' data-ref="llvm::Instruction::ZExt" data-ref-filename="llvm..Instruction..ZExt">ZExt</a>) &amp;&amp;</td></tr>
<tr><th id="107">107</th><td>            <a class="local col3 ref" href="#13Cast" title='Cast' data-ref="13Cast" data-ref-filename="13Cast">Cast</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#76" title='llvm::UnaryInstruction::getOperand' data-ref="_ZNK4llvm16UnaryInstruction10getOperandEj" data-ref-filename="_ZNK4llvm16UnaryInstruction10getOperandEj">getOperand</a>(<var>0</var>)-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref fn" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type19getScalarSizeInBitsEv" title='llvm::Type::getScalarSizeInBits' data-ref="_ZNK4llvm4Type19getScalarSizeInBitsEv" data-ref-filename="_ZNK4llvm4Type19getScalarSizeInBitsEv">getScalarSizeInBits</a>() &lt;= <var>16</var>)</td></tr>
<tr><th id="108">108</th><td>          <b>return</b> <b>true</b>;</td></tr>
<tr><th id="109">109</th><td>      }</td></tr>
<tr><th id="110">110</th><td></td></tr>
<tr><th id="111">111</th><td>      <b>return</b> <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_" data-ref-filename="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant" data-ref-filename="llvm..Constant">Constant</a>&gt;(<a class="local col2 ref" href="#12Op" title='Op' data-ref="12Op" data-ref-filename="12Op">Op</a>);</td></tr>
<tr><th id="112">112</th><td>    };</td></tr>
<tr><th id="113">113</th><td></td></tr>
<tr><th id="114">114</th><td>    <i>// If the operation can be freely truncated and has enough sign bits we</i></td></tr>
<tr><th id="115">115</th><td><i>    // can shrink.</i></td></tr>
<tr><th id="116">116</th><td>    <b>if</b> (<a class="local col1 ref" href="#11IsFreeTruncation" title='IsFreeTruncation' data-ref="11IsFreeTruncation" data-ref-filename="11IsFreeTruncation">IsFreeTruncation</a><a class="tu ref fn" href="#_ZZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueEENKUlS6_E_clES6_" title='(anonymous namespace)::X86PartialReduction::tryMAddReplacement(llvm::Instruction *)::(anonymous class)::operator()(llvm::Value *)::(anonymous class)::operator()' data-use='c' data-ref="_ZZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueEENKUlS6_E_clES6_" data-ref-filename="_ZZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueEENKUlS6_E_clES6_">(<a class="local col0 ref" href="#10Op" title='Op' data-ref="10Op" data-ref-filename="10Op">Op</a>)</a> &amp;&amp;</td></tr>
<tr><th id="117">117</th><td>        <a class="ref fn" href="../../../include/llvm/Analysis/ValueTracking.h.html#_ZN4llvm18ComputeNumSignBitsEPKNS_5ValueERKNS_10DataLayoutEjPNS_15AssumptionCacheEPKNS_11InstructionEPKNS_13DominatorTreeEb" title='llvm::ComputeNumSignBits' data-ref="_ZN4llvm18ComputeNumSignBitsEPKNS_5ValueERKNS_10DataLayoutEjPNS_15AssumptionCacheEPKNS_11InstructionEPKNS_13DominatorTreeEb" data-ref-filename="_ZN4llvm18ComputeNumSignBitsEPKNS_5ValueERKNS_10DataLayoutEjPNS_15AssumptionCacheEPKNS_11InstructionEPKNS_13DominatorTreeEb">ComputeNumSignBits</a>(<a class="local col0 ref" href="#10Op" title='Op' data-ref="10Op" data-ref-filename="10Op">Op</a>, *<a class="tu member field" href="#(anonymousnamespace)::X86PartialReduction::DL" title='(anonymous namespace)::X86PartialReduction::DL' data-use='r' data-ref="(anonymousnamespace)::X86PartialReduction::DL" data-ref-filename="(anonymousnamespace)..X86PartialReduction..DL">DL</a>, <var>0</var>, <b>nullptr</b>, <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>) &gt; <var>16</var>)</td></tr>
<tr><th id="118">118</th><td>      <b>return</b> <b>true</b>;</td></tr>
<tr><th id="119">119</th><td></td></tr>
<tr><th id="120">120</th><td>    <i>// SelectionDAG has limited support for truncating through an add or sub if</i></td></tr>
<tr><th id="121">121</th><td><i>    // the inputs are freely truncatable.</i></td></tr>
<tr><th id="122">122</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col4 decl" id="14BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="14BO" data-ref-filename="14BO"><a class="local col4 ref" href="#14BO" title='BO' data-ref="14BO" data-ref-filename="14BO">BO</a></dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator" data-ref-filename="llvm..BinaryOperator">BinaryOperator</a>&gt;(<a class="local col0 ref" href="#10Op" title='Op' data-ref="10Op" data-ref-filename="10Op">Op</a>)) {</td></tr>
<tr><th id="123">123</th><td>      <b>if</b> (<a class="local col4 ref" href="#14BO" title='BO' data-ref="14BO" data-ref-filename="14BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv" data-ref-filename="_ZN4llvm11Instruction9getParentEv">getParent</a>() == <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv" data-ref-filename="_ZN4llvm11Instruction9getParentEv">getParent</a>() &amp;&amp;</td></tr>
<tr><th id="124">124</th><td>          <a class="local col1 ref" href="#11IsFreeTruncation" title='IsFreeTruncation' data-ref="11IsFreeTruncation" data-ref-filename="11IsFreeTruncation">IsFreeTruncation</a><a class="tu ref fn" href="#_ZZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueEENKUlS6_E_clES6_" title='(anonymous namespace)::X86PartialReduction::tryMAddReplacement(llvm::Instruction *)::(anonymous class)::operator()(llvm::Value *)::(anonymous class)::operator()' data-use='c' data-ref="_ZZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueEENKUlS6_E_clES6_" data-ref-filename="_ZZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueEENKUlS6_E_clES6_">(<a class="local col4 ref" href="#14BO" title='BO' data-ref="14BO" data-ref-filename="14BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>))</a> &amp;&amp;</td></tr>
<tr><th id="125">125</th><td>          <a class="local col1 ref" href="#11IsFreeTruncation" title='IsFreeTruncation' data-ref="11IsFreeTruncation" data-ref-filename="11IsFreeTruncation">IsFreeTruncation</a><a class="tu ref fn" href="#_ZZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueEENKUlS6_E_clES6_" title='(anonymous namespace)::X86PartialReduction::tryMAddReplacement(llvm::Instruction *)::(anonymous class)::operator()(llvm::Value *)::(anonymous class)::operator()' data-use='c' data-ref="_ZZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueEENKUlS6_E_clES6_" data-ref-filename="_ZZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueEENKUlS6_E_clES6_">(<a class="local col4 ref" href="#14BO" title='BO' data-ref="14BO" data-ref-filename="14BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>))</a> &amp;&amp;</td></tr>
<tr><th id="126">126</th><td>          <a class="ref fn" href="../../../include/llvm/Analysis/ValueTracking.h.html#_ZN4llvm18ComputeNumSignBitsEPKNS_5ValueERKNS_10DataLayoutEjPNS_15AssumptionCacheEPKNS_11InstructionEPKNS_13DominatorTreeEb" title='llvm::ComputeNumSignBits' data-ref="_ZN4llvm18ComputeNumSignBitsEPKNS_5ValueERKNS_10DataLayoutEjPNS_15AssumptionCacheEPKNS_11InstructionEPKNS_13DominatorTreeEb" data-ref-filename="_ZN4llvm18ComputeNumSignBitsEPKNS_5ValueERKNS_10DataLayoutEjPNS_15AssumptionCacheEPKNS_11InstructionEPKNS_13DominatorTreeEb">ComputeNumSignBits</a>(<a class="local col0 ref" href="#10Op" title='Op' data-ref="10Op" data-ref-filename="10Op">Op</a>, *<a class="tu member field" href="#(anonymousnamespace)::X86PartialReduction::DL" title='(anonymous namespace)::X86PartialReduction::DL' data-use='r' data-ref="(anonymousnamespace)::X86PartialReduction::DL" data-ref-filename="(anonymousnamespace)..X86PartialReduction..DL">DL</a>, <var>0</var>, <b>nullptr</b>, <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>) &gt; <var>16</var>)</td></tr>
<tr><th id="127">127</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="128">128</th><td>    }</td></tr>
<tr><th id="129">129</th><td></td></tr>
<tr><th id="130">130</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="131">131</th><td>  };</td></tr>
<tr><th id="132">132</th><td></td></tr>
<tr><th id="133">133</th><td>  <i>// Both Ops need to be shrinkable.</i></td></tr>
<tr><th id="134">134</th><td>  <b>if</b> (!<a class="local col9 ref" href="#9CanShrinkOp" title='CanShrinkOp' data-ref="9CanShrinkOp" data-ref-filename="9CanShrinkOp">CanShrinkOp</a><a class="tu ref fn" href="#_ZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueE" title='(anonymous namespace)::X86PartialReduction::tryMAddReplacement(llvm::Instruction *)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueE" data-ref-filename="_ZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueE">(<a class="local col7 ref" href="#7LHS" title='LHS' data-ref="7LHS" data-ref-filename="7LHS">LHS</a>)</a> &amp;&amp; !<a class="local col9 ref" href="#9CanShrinkOp" title='CanShrinkOp' data-ref="9CanShrinkOp" data-ref-filename="9CanShrinkOp">CanShrinkOp</a><a class="tu ref fn" href="#_ZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueE" title='(anonymous namespace)::X86PartialReduction::tryMAddReplacement(llvm::Instruction *)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueE" data-ref-filename="_ZZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionEENK3$_0clEPNS1_5ValueE">(<a class="local col8 ref" href="#8RHS" title='RHS' data-ref="8RHS" data-ref-filename="8RHS">RHS</a>)</a>)</td></tr>
<tr><th id="135">135</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="136">136</th><td></td></tr>
<tr><th id="137">137</th><td>  <a class="type" href="../../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder" data-ref-filename="llvm..IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col5 decl" id="15Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="15Builder" data-ref-filename="15Builder">Builder</dfn><a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;FolderTy, InserterTy&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" data-ref-filename="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>);</td></tr>
<tr><th id="138">138</th><td></td></tr>
<tr><th id="139">139</th><td>  <em>auto</em> *<dfn class="local col6 decl" id="16MulTy" title='MulTy' data-type='llvm::FixedVectorType *' data-ref="16MulTy" data-ref-filename="16MulTy">MulTy</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::FixedVectorType" title='llvm::FixedVectorType' data-ref="llvm::FixedVectorType" data-ref-filename="llvm..FixedVectorType">FixedVectorType</a>&gt;(<a class="local col5 ref" href="#5Op" title='Op' data-ref="5Op" data-ref-filename="5Op">Op</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="140">140</th><td>  <em>unsigned</em> <dfn class="local col7 decl" id="17NumElts" title='NumElts' data-type='unsigned int' data-ref="17NumElts" data-ref-filename="17NumElts">NumElts</dfn> = <a class="local col6 ref" href="#16MulTy" title='MulTy' data-ref="16MulTy" data-ref-filename="16MulTy">MulTy</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm15FixedVectorType14getNumElementsEv" title='llvm::FixedVectorType::getNumElements' data-ref="_ZNK4llvm15FixedVectorType14getNumElementsEv" data-ref-filename="_ZNK4llvm15FixedVectorType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="141">141</th><td></td></tr>
<tr><th id="142">142</th><td>  <i>// Extract even elements and odd elements and add them together. This will</i></td></tr>
<tr><th id="143">143</th><td><i>  // be pattern matched by SelectionDAG to pmaddwd. This instruction will be</i></td></tr>
<tr><th id="144">144</th><td><i>  // half the original width.</i></td></tr>
<tr><th id="145">145</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<em>int</em>, <var>16</var>&gt; <dfn class="local col8 decl" id="18EvenMask" title='EvenMask' data-type='SmallVector&lt;int, 16&gt;' data-ref="18EvenMask" data-ref-filename="18EvenMask">EvenMask</dfn><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1EmRKT_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1EmRKT_" data-ref-filename="_ZN4llvm11SmallVectorC1EmRKT_">(</a><a class="local col7 ref" href="#17NumElts" title='NumElts' data-ref="17NumElts" data-ref-filename="17NumElts">NumElts</a> / <var>2</var>);</td></tr>
<tr><th id="146">146</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<em>int</em>, <var>16</var>&gt; <dfn class="local col9 decl" id="19OddMask" title='OddMask' data-type='SmallVector&lt;int, 16&gt;' data-ref="19OddMask" data-ref-filename="19OddMask">OddMask</dfn><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1EmRKT_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1EmRKT_" data-ref-filename="_ZN4llvm11SmallVectorC1EmRKT_">(</a><a class="local col7 ref" href="#17NumElts" title='NumElts' data-ref="17NumElts" data-ref-filename="17NumElts">NumElts</a> / <var>2</var>);</td></tr>
<tr><th id="147">147</th><td>  <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="20i" title='i' data-type='int' data-ref="20i" data-ref-filename="20i">i</dfn> = <var>0</var>, <dfn class="local col1 decl" id="21e" title='e' data-type='int' data-ref="21e" data-ref-filename="21e">e</dfn> = <a class="local col7 ref" href="#17NumElts" title='NumElts' data-ref="17NumElts" data-ref-filename="17NumElts">NumElts</a> / <var>2</var>; <a class="local col0 ref" href="#20i" title='i' data-ref="20i" data-ref-filename="20i">i</a> != <a class="local col1 ref" href="#21e" title='e' data-ref="21e" data-ref-filename="21e">e</a>; ++<a class="local col0 ref" href="#20i" title='i' data-ref="20i" data-ref-filename="20i">i</a>) {</td></tr>
<tr><th id="148">148</th><td>    <a class="local col8 ref" href="#18EvenMask" title='EvenMask' data-ref="18EvenMask" data-ref-filename="18EvenMask">EvenMask</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col0 ref" href="#20i" title='i' data-ref="20i" data-ref-filename="20i">i</a>]</a> = <a class="local col0 ref" href="#20i" title='i' data-ref="20i" data-ref-filename="20i">i</a> * <var>2</var>;</td></tr>
<tr><th id="149">149</th><td>    <a class="local col9 ref" href="#19OddMask" title='OddMask' data-ref="19OddMask" data-ref-filename="19OddMask">OddMask</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col0 ref" href="#20i" title='i' data-ref="20i" data-ref-filename="20i">i</a>]</a> = <a class="local col0 ref" href="#20i" title='i' data-ref="20i" data-ref-filename="20i">i</a> * <var>2</var> + <var>1</var>;</td></tr>
<tr><th id="150">150</th><td>  }</td></tr>
<tr><th id="151">151</th><td>  <i>// Creating a new mul so the replaceAllUsesWith below doesn't replace the</i></td></tr>
<tr><th id="152">152</th><td><i>  // uses in the shuffles we're creating.</i></td></tr>
<tr><th id="153">153</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col2 decl" id="22NewMul" title='NewMul' data-type='llvm::Value *' data-ref="22NewMul" data-ref-filename="22NewMul">NewMul</dfn> = <a class="local col5 ref" href="#15Builder" title='Builder' data-ref="15Builder" data-ref-filename="15Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase9CreateMulEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilderBase::CreateMul' data-ref="_ZN4llvm13IRBuilderBase9CreateMulEPNS_5ValueES2_RKNS_5TwineEbb" data-ref-filename="_ZN4llvm13IRBuilderBase9CreateMulEPNS_5ValueES2_RKNS_5TwineEbb">CreateMul</a>(<a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>), <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>));</td></tr>
<tr><th id="154">154</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col3 decl" id="23EvenElts" title='EvenElts' data-type='llvm::Value *' data-ref="23EvenElts" data-ref-filename="23EvenElts">EvenElts</dfn> = <a class="local col5 ref" href="#15Builder" title='Builder' data-ref="15Builder" data-ref-filename="15Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col2 ref" href="#22NewMul" title='NewMul' data-ref="22NewMul" data-ref-filename="22NewMul">NewMul</a>, <a class="local col2 ref" href="#22NewMul" title='NewMul' data-ref="22NewMul" data-ref-filename="22NewMul">NewMul</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" data-ref-filename="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE"></a><a class="local col8 ref" href="#18EvenMask" title='EvenMask' data-ref="18EvenMask" data-ref-filename="18EvenMask">EvenMask</a>);</td></tr>
<tr><th id="155">155</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col4 decl" id="24OddElts" title='OddElts' data-type='llvm::Value *' data-ref="24OddElts" data-ref-filename="24OddElts">OddElts</dfn> = <a class="local col5 ref" href="#15Builder" title='Builder' data-ref="15Builder" data-ref-filename="15Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col2 ref" href="#22NewMul" title='NewMul' data-ref="22NewMul" data-ref-filename="22NewMul">NewMul</a>, <a class="local col2 ref" href="#22NewMul" title='NewMul' data-ref="22NewMul" data-ref-filename="22NewMul">NewMul</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" data-ref-filename="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE"></a><a class="local col9 ref" href="#19OddMask" title='OddMask' data-ref="19OddMask" data-ref-filename="19OddMask">OddMask</a>);</td></tr>
<tr><th id="156">156</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col5 decl" id="25MAdd" title='MAdd' data-type='llvm::Value *' data-ref="25MAdd" data-ref-filename="25MAdd">MAdd</dfn> = <a class="local col5 ref" href="#15Builder" title='Builder' data-ref="15Builder" data-ref-filename="15Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase9CreateAddEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilderBase::CreateAdd' data-ref="_ZN4llvm13IRBuilderBase9CreateAddEPNS_5ValueES2_RKNS_5TwineEbb" data-ref-filename="_ZN4llvm13IRBuilderBase9CreateAddEPNS_5ValueES2_RKNS_5TwineEbb">CreateAdd</a>(<a class="local col3 ref" href="#23EvenElts" title='EvenElts' data-ref="23EvenElts" data-ref-filename="23EvenElts">EvenElts</a>, <a class="local col4 ref" href="#24OddElts" title='OddElts' data-ref="24OddElts" data-ref-filename="24OddElts">OddElts</a>);</td></tr>
<tr><th id="157">157</th><td></td></tr>
<tr><th id="158">158</th><td>  <i>// Concatenate zeroes to extend back to the original type.</i></td></tr>
<tr><th id="159">159</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<em>int</em>, <var>32</var>&gt; <dfn class="local col6 decl" id="26ConcatMask" title='ConcatMask' data-type='SmallVector&lt;int, 32&gt;' data-ref="26ConcatMask" data-ref-filename="26ConcatMask">ConcatMask</dfn><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1EmRKT_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1EmRKT_" data-ref-filename="_ZN4llvm11SmallVectorC1EmRKT_">(</a><a class="local col7 ref" href="#17NumElts" title='NumElts' data-ref="17NumElts" data-ref-filename="17NumElts">NumElts</a>);</td></tr>
<tr><th id="160">160</th><td>  <span class="namespace">std::</span><span class='ref fn' title='std::iota' data-ref="_ZSt4iotaT_S_T0_" data-ref-filename="_ZSt4iotaT_S_T0_">iota</span>(<a class="local col6 ref" href="#26ConcatMask" title='ConcatMask' data-ref="26ConcatMask" data-ref-filename="26ConcatMask">ConcatMask</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon5beginEv" title='llvm::SmallVectorTemplateCommon::begin' data-ref="_ZN4llvm25SmallVectorTemplateCommon5beginEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon5beginEv">begin</a>(), <a class="local col6 ref" href="#26ConcatMask" title='ConcatMask' data-ref="26ConcatMask" data-ref-filename="26ConcatMask">ConcatMask</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon3endEv" title='llvm::SmallVectorTemplateCommon::end' data-ref="_ZN4llvm25SmallVectorTemplateCommon3endEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon3endEv">end</a>(), <var>0</var>);</td></tr>
<tr><th id="161">161</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col7 decl" id="27Zero" title='Zero' data-type='llvm::Value *' data-ref="27Zero" data-ref-filename="27Zero">Zero</dfn> = <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant" data-ref-filename="llvm..Constant">Constant</a>::<a class="ref fn" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant12getNullValueEPNS_4TypeE" title='llvm::Constant::getNullValue' data-ref="_ZN4llvm8Constant12getNullValueEPNS_4TypeE" data-ref-filename="_ZN4llvm8Constant12getNullValueEPNS_4TypeE">getNullValue</a>(<a class="local col5 ref" href="#25MAdd" title='MAdd' data-ref="25MAdd" data-ref-filename="25MAdd">MAdd</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="162">162</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col8 decl" id="28Concat" title='Concat' data-type='llvm::Value *' data-ref="28Concat" data-ref-filename="28Concat">Concat</dfn> = <a class="local col5 ref" href="#15Builder" title='Builder' data-ref="15Builder" data-ref-filename="15Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col5 ref" href="#25MAdd" title='MAdd' data-ref="25MAdd" data-ref-filename="25MAdd">MAdd</a>, <a class="local col7 ref" href="#27Zero" title='Zero' data-ref="27Zero" data-ref-filename="27Zero">Zero</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" data-ref-filename="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE"></a><a class="local col6 ref" href="#26ConcatMask" title='ConcatMask' data-ref="26ConcatMask" data-ref-filename="26ConcatMask">ConcatMask</a>);</td></tr>
<tr><th id="163">163</th><td></td></tr>
<tr><th id="164">164</th><td>  <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_" data-ref-filename="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col8 ref" href="#28Concat" title='Concat' data-ref="28Concat" data-ref-filename="28Concat">Concat</a>);</td></tr>
<tr><th id="165">165</th><td>  <a class="local col6 ref" href="#6Mul" title='Mul' data-ref="6Mul" data-ref-filename="6Mul">Mul</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv" data-ref-filename="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="166">166</th><td></td></tr>
<tr><th id="167">167</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="168">168</th><td>}</td></tr>
<tr><th id="169">169</th><td></td></tr>
<tr><th id="170">170</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::X86PartialReduction" title='(anonymous namespace)::X86PartialReduction' data-ref="(anonymousnamespace)::X86PartialReduction" data-ref-filename="(anonymousnamespace)..X86PartialReduction">X86PartialReduction</a>::<dfn class="tu decl def fn" id="_ZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionE" title='(anonymous namespace)::X86PartialReduction::trySADReplacement' data-type='bool (anonymous namespace)::X86PartialReduction::trySADReplacement(llvm::Instruction * Op)' data-ref="_ZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionE" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionE">trySADReplacement</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a> *<dfn class="local col9 decl" id="29Op" title='Op' data-type='llvm::Instruction *' data-ref="29Op" data-ref-filename="29Op">Op</dfn>) {</td></tr>
<tr><th id="171">171</th><td>  <b>if</b> (!<a class="tu member field" href="#(anonymousnamespace)::X86PartialReduction::ST" title='(anonymous namespace)::X86PartialReduction::ST' data-use='r' data-ref="(anonymousnamespace)::X86PartialReduction::ST" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ST">ST</a>-&gt;<a class="ref fn" href="X86Subtarget.h.html#_ZNK4llvm12X86Subtarget7hasSSE2Ev" title='llvm::X86Subtarget::hasSSE2' data-ref="_ZNK4llvm12X86Subtarget7hasSSE2Ev" data-ref-filename="_ZNK4llvm12X86Subtarget7hasSSE2Ev">hasSSE2</a>())</td></tr>
<tr><th id="172">172</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="173">173</th><td></td></tr>
<tr><th id="174">174</th><td>  <i>// TODO: There's nothing special about i32, any integer type above i16 should</i></td></tr>
<tr><th id="175">175</th><td><i>  // work just as well.</i></td></tr>
<tr><th id="176">176</th><td>  <b>if</b> (!<a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType" data-ref-filename="llvm..VectorType">VectorType</a>&gt;(<a class="local col9 ref" href="#29Op" title='Op' data-ref="29Op" data-ref-filename="29Op">Op</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm10VectorType14getElementTypeEv" title='llvm::VectorType::getElementType' data-ref="_ZNK4llvm10VectorType14getElementTypeEv" data-ref-filename="_ZNK4llvm10VectorType14getElementTypeEv">getElementType</a>()-&gt;<a class="ref fn" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEj" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEj" data-ref-filename="_ZNK4llvm4Type11isIntegerTyEj">isIntegerTy</a>(<var>32</var>))</td></tr>
<tr><th id="177">177</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="178">178</th><td></td></tr>
<tr><th id="179">179</th><td>  <i>// Operand should be a select.</i></td></tr>
<tr><th id="180">180</th><td>  <em>auto</em> *<dfn class="local col0 decl" id="30SI" title='SI' data-type='llvm::SelectInst *' data-ref="30SI" data-ref-filename="30SI">SI</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::SelectInst" title='llvm::SelectInst' data-ref="llvm::SelectInst" data-ref-filename="llvm..SelectInst">SelectInst</a>&gt;(<a class="local col9 ref" href="#29Op" title='Op' data-ref="29Op" data-ref-filename="29Op">Op</a>);</td></tr>
<tr><th id="181">181</th><td>  <b>if</b> (!<a class="local col0 ref" href="#30SI" title='SI' data-ref="30SI" data-ref-filename="30SI">SI</a>)</td></tr>
<tr><th id="182">182</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="183">183</th><td></td></tr>
<tr><th id="184">184</th><td>  <i>// Select needs to implement absolute value.</i></td></tr>
<tr><th id="185">185</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col1 decl" id="31LHS" title='LHS' data-type='llvm::Value *' data-ref="31LHS" data-ref-filename="31LHS">LHS</dfn>, *<dfn class="local col2 decl" id="32RHS" title='RHS' data-type='llvm::Value *' data-ref="32RHS" data-ref-filename="32RHS">RHS</dfn>;</td></tr>
<tr><th id="186">186</th><td>  <em>auto</em> <dfn class="local col3 decl" id="33SPR" title='SPR' data-type='llvm::SelectPatternResult' data-ref="33SPR" data-ref-filename="33SPR">SPR</dfn> = <a class="ref fn" href="../../../include/llvm/Analysis/ValueTracking.h.html#_ZN4llvm18matchSelectPatternEPNS_5ValueERS1_S2_PNS_11Instruction7CastOpsEj" title='llvm::matchSelectPattern' data-ref="_ZN4llvm18matchSelectPatternEPNS_5ValueERS1_S2_PNS_11Instruction7CastOpsEj" data-ref-filename="_ZN4llvm18matchSelectPatternEPNS_5ValueERS1_S2_PNS_11Instruction7CastOpsEj">matchSelectPattern</a>(<a class="local col0 ref" href="#30SI" title='SI' data-ref="30SI" data-ref-filename="30SI">SI</a>, <span class='refarg'><a class="local col1 ref" href="#31LHS" title='LHS' data-ref="31LHS" data-ref-filename="31LHS">LHS</a></span>, <span class='refarg'><a class="local col2 ref" href="#32RHS" title='RHS' data-ref="32RHS" data-ref-filename="32RHS">RHS</a></span>);</td></tr>
<tr><th id="187">187</th><td>  <b>if</b> (<a class="local col3 ref" href="#33SPR" title='SPR' data-ref="33SPR" data-ref-filename="33SPR">SPR</a>.<a class="ref field" href="../../../include/llvm/Analysis/ValueTracking.h.html#llvm::SelectPatternResult::Flavor" title='llvm::SelectPatternResult::Flavor' data-ref="llvm::SelectPatternResult::Flavor" data-ref-filename="llvm..SelectPatternResult..Flavor">Flavor</a> != <a class="enum" href="../../../include/llvm/Analysis/ValueTracking.h.html#llvm::SPF_ABS" title='llvm::SPF_ABS' data-ref="llvm::SPF_ABS" data-ref-filename="llvm..SPF_ABS">SPF_ABS</a>)</td></tr>
<tr><th id="188">188</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="189">189</th><td></td></tr>
<tr><th id="190">190</th><td>  <i>// Need a subtract of two values.</i></td></tr>
<tr><th id="191">191</th><td>  <em>auto</em> *<dfn class="local col4 decl" id="34Sub" title='Sub' data-type='llvm::BinaryOperator *' data-ref="34Sub" data-ref-filename="34Sub">Sub</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator" data-ref-filename="llvm..BinaryOperator">BinaryOperator</a>&gt;(<a class="local col1 ref" href="#31LHS" title='LHS' data-ref="31LHS" data-ref-filename="31LHS">LHS</a>);</td></tr>
<tr><th id="192">192</th><td>  <b>if</b> (!<a class="local col4 ref" href="#34Sub" title='Sub' data-ref="34Sub" data-ref-filename="34Sub">Sub</a> || <a class="local col4 ref" href="#34Sub" title='Sub' data-ref="34Sub" data-ref-filename="34Sub">Sub</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv" data-ref-filename="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() != <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#149" title='llvm::Instruction::Sub' data-ref="llvm::Instruction::Sub" data-ref-filename="llvm..Instruction..Sub">Sub</a>)</td></tr>
<tr><th id="193">193</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="194">194</th><td></td></tr>
<tr><th id="195">195</th><td>  <i>// Look for zero extend from i8.</i></td></tr>
<tr><th id="196">196</th><td>  <em>auto</em> <dfn class="local col5 decl" id="35getZeroExtendedVal" title='getZeroExtendedVal' data-type='(lambda at /fast/tmp/llvm-proj-12/llvm/lib/Target/X86/X86PartialReduction.cpp:196:29)' data-ref="35getZeroExtendedVal" data-ref-filename="35getZeroExtendedVal">getZeroExtendedVal</dfn> = [](<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col6 decl" id="36Op" title='Op' data-type='llvm::Value *' data-ref="36Op" data-ref-filename="36Op">Op</dfn>) -&gt; <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> * {</td></tr>
<tr><th id="197">197</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col7 decl" id="37ZExt" title='ZExt' data-type='llvm::ZExtInst *' data-ref="37ZExt" data-ref-filename="37ZExt"><a class="local col7 ref" href="#37ZExt" title='ZExt' data-ref="37ZExt" data-ref-filename="37ZExt">ZExt</a></dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ZExtInst" title='llvm::ZExtInst' data-ref="llvm::ZExtInst" data-ref-filename="llvm..ZExtInst">ZExtInst</a>&gt;(<a class="local col6 ref" href="#36Op" title='Op' data-ref="36Op" data-ref-filename="36Op">Op</a>))</td></tr>
<tr><th id="198">198</th><td>      <b>if</b> (<a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType" data-ref-filename="llvm..VectorType">VectorType</a>&gt;(<a class="local col7 ref" href="#37ZExt" title='ZExt' data-ref="37ZExt" data-ref-filename="37ZExt">ZExt</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#76" title='llvm::UnaryInstruction::getOperand' data-ref="_ZNK4llvm16UnaryInstruction10getOperandEj" data-ref-filename="_ZNK4llvm16UnaryInstruction10getOperandEj">getOperand</a>(<var>0</var>)-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>())</td></tr>
<tr><th id="199">199</th><td>              -&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm10VectorType14getElementTypeEv" title='llvm::VectorType::getElementType' data-ref="_ZNK4llvm10VectorType14getElementTypeEv" data-ref-filename="_ZNK4llvm10VectorType14getElementTypeEv">getElementType</a>()</td></tr>
<tr><th id="200">200</th><td>              -&gt;<a class="ref fn" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEj" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEj" data-ref-filename="_ZNK4llvm4Type11isIntegerTyEj">isIntegerTy</a>(<var>8</var>))</td></tr>
<tr><th id="201">201</th><td>        <b>return</b> <a class="local col7 ref" href="#37ZExt" title='ZExt' data-ref="37ZExt" data-ref-filename="37ZExt">ZExt</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#76" title='llvm::UnaryInstruction::getOperand' data-ref="_ZNK4llvm16UnaryInstruction10getOperandEj" data-ref-filename="_ZNK4llvm16UnaryInstruction10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="202">202</th><td></td></tr>
<tr><th id="203">203</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="204">204</th><td>  };</td></tr>
<tr><th id="205">205</th><td></td></tr>
<tr><th id="206">206</th><td>  <i>// Both operands of the subtract should be extends from vXi8.</i></td></tr>
<tr><th id="207">207</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col8 decl" id="38Op0" title='Op0' data-type='llvm::Value *' data-ref="38Op0" data-ref-filename="38Op0">Op0</dfn> = <a class="local col5 ref" href="#35getZeroExtendedVal" title='getZeroExtendedVal' data-ref="35getZeroExtendedVal" data-ref-filename="35getZeroExtendedVal">getZeroExtendedVal</a><a class="tu ref fn" href="#_ZZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionEENK3$_1clEPNS1_5ValueE" title='(anonymous namespace)::X86PartialReduction::trySADReplacement(llvm::Instruction *)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionEENK3$_1clEPNS1_5ValueE" data-ref-filename="_ZZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionEENK3$_1clEPNS1_5ValueE">(<a class="local col4 ref" href="#34Sub" title='Sub' data-ref="34Sub" data-ref-filename="34Sub">Sub</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>))</a>;</td></tr>
<tr><th id="208">208</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col9 decl" id="39Op1" title='Op1' data-type='llvm::Value *' data-ref="39Op1" data-ref-filename="39Op1">Op1</dfn> = <a class="local col5 ref" href="#35getZeroExtendedVal" title='getZeroExtendedVal' data-ref="35getZeroExtendedVal" data-ref-filename="35getZeroExtendedVal">getZeroExtendedVal</a><a class="tu ref fn" href="#_ZZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionEENK3$_1clEPNS1_5ValueE" title='(anonymous namespace)::X86PartialReduction::trySADReplacement(llvm::Instruction *)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionEENK3$_1clEPNS1_5ValueE" data-ref-filename="_ZZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionEENK3$_1clEPNS1_5ValueE">(<a class="local col4 ref" href="#34Sub" title='Sub' data-ref="34Sub" data-ref-filename="34Sub">Sub</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>))</a>;</td></tr>
<tr><th id="209">209</th><td>  <b>if</b> (!<a class="local col8 ref" href="#38Op0" title='Op0' data-ref="38Op0" data-ref-filename="38Op0">Op0</a> || !<a class="local col9 ref" href="#39Op1" title='Op1' data-ref="39Op1" data-ref-filename="39Op1">Op1</a>)</td></tr>
<tr><th id="210">210</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="211">211</th><td></td></tr>
<tr><th id="212">212</th><td>  <a class="type" href="../../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder" data-ref-filename="llvm..IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col0 decl" id="40Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="40Builder" data-ref-filename="40Builder">Builder</dfn><a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;FolderTy, InserterTy&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" data-ref-filename="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col0 ref" href="#30SI" title='SI' data-ref="30SI" data-ref-filename="30SI">SI</a>);</td></tr>
<tr><th id="213">213</th><td></td></tr>
<tr><th id="214">214</th><td>  <em>auto</em> *<dfn class="local col1 decl" id="41OpTy" title='OpTy' data-type='llvm::FixedVectorType *' data-ref="41OpTy" data-ref-filename="41OpTy">OpTy</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::FixedVectorType" title='llvm::FixedVectorType' data-ref="llvm::FixedVectorType" data-ref-filename="llvm..FixedVectorType">FixedVectorType</a>&gt;(<a class="local col9 ref" href="#29Op" title='Op' data-ref="29Op" data-ref-filename="29Op">Op</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="215">215</th><td>  <em>unsigned</em> <dfn class="local col2 decl" id="42NumElts" title='NumElts' data-type='unsigned int' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</dfn> = <a class="local col1 ref" href="#41OpTy" title='OpTy' data-ref="41OpTy" data-ref-filename="41OpTy">OpTy</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm15FixedVectorType14getNumElementsEv" title='llvm::FixedVectorType::getNumElements' data-ref="_ZNK4llvm15FixedVectorType14getNumElementsEv" data-ref-filename="_ZNK4llvm15FixedVectorType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="216">216</th><td></td></tr>
<tr><th id="217">217</th><td>  <em>unsigned</em> <dfn class="local col3 decl" id="43IntrinsicNumElts" title='IntrinsicNumElts' data-type='unsigned int' data-ref="43IntrinsicNumElts" data-ref-filename="43IntrinsicNumElts">IntrinsicNumElts</dfn>;</td></tr>
<tr><th id="218">218</th><td>  <span class="namespace">Intrinsic::</span><a class="typedef" href="../../../include/llvm/IR/GlobalValue.h.html#llvm::Intrinsic::ID" title='llvm::Intrinsic::ID' data-type='unsigned int' data-ref="llvm::Intrinsic::ID" data-ref-filename="llvm..Intrinsic..ID">ID</a> <dfn class="local col4 decl" id="44IID" title='IID' data-type='Intrinsic::ID' data-ref="44IID" data-ref-filename="44IID">IID</dfn>;</td></tr>
<tr><th id="219">219</th><td>  <b>if</b> (<a class="tu member field" href="#(anonymousnamespace)::X86PartialReduction::ST" title='(anonymous namespace)::X86PartialReduction::ST' data-use='r' data-ref="(anonymousnamespace)::X86PartialReduction::ST" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ST">ST</a>-&gt;<a class="ref fn" href="X86Subtarget.h.html#_ZNK4llvm12X86Subtarget6hasBWIEv" title='llvm::X86Subtarget::hasBWI' data-ref="_ZNK4llvm12X86Subtarget6hasBWIEv" data-ref-filename="_ZNK4llvm12X86Subtarget6hasBWIEv">hasBWI</a>() &amp;&amp; <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a> &gt;= <var>64</var>) {</td></tr>
<tr><th id="220">220</th><td>    <a class="local col4 ref" href="#44IID" title='IID' data-ref="44IID" data-ref-filename="44IID">IID</a> = <span class="namespace">Intrinsic::</span><a class="enum" href="../../../../build/include/llvm/IR/IntrinsicsX86.h.html#llvm::Intrinsic::x86_avx512_psad_bw_512" title='llvm::Intrinsic::x86_avx512_psad_bw_512' data-ref="llvm::Intrinsic::x86_avx512_psad_bw_512" data-ref-filename="llvm..Intrinsic..x86_avx512_psad_bw_512">x86_avx512_psad_bw_512</a>;</td></tr>
<tr><th id="221">221</th><td>    <a class="local col3 ref" href="#43IntrinsicNumElts" title='IntrinsicNumElts' data-ref="43IntrinsicNumElts" data-ref-filename="43IntrinsicNumElts">IntrinsicNumElts</a> = <var>64</var>;</td></tr>
<tr><th id="222">222</th><td>  } <b>else</b> <b>if</b> (<a class="tu member field" href="#(anonymousnamespace)::X86PartialReduction::ST" title='(anonymous namespace)::X86PartialReduction::ST' data-use='r' data-ref="(anonymousnamespace)::X86PartialReduction::ST" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ST">ST</a>-&gt;<a class="ref fn" href="X86Subtarget.h.html#_ZNK4llvm12X86Subtarget7hasAVX2Ev" title='llvm::X86Subtarget::hasAVX2' data-ref="_ZNK4llvm12X86Subtarget7hasAVX2Ev" data-ref-filename="_ZNK4llvm12X86Subtarget7hasAVX2Ev">hasAVX2</a>() &amp;&amp; <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a> &gt;= <var>32</var>) {</td></tr>
<tr><th id="223">223</th><td>    <a class="local col4 ref" href="#44IID" title='IID' data-ref="44IID" data-ref-filename="44IID">IID</a> = <span class="namespace">Intrinsic::</span><a class="enum" href="../../../../build/include/llvm/IR/IntrinsicsX86.h.html#llvm::Intrinsic::x86_avx2_psad_bw" title='llvm::Intrinsic::x86_avx2_psad_bw' data-ref="llvm::Intrinsic::x86_avx2_psad_bw" data-ref-filename="llvm..Intrinsic..x86_avx2_psad_bw">x86_avx2_psad_bw</a>;</td></tr>
<tr><th id="224">224</th><td>    <a class="local col3 ref" href="#43IntrinsicNumElts" title='IntrinsicNumElts' data-ref="43IntrinsicNumElts" data-ref-filename="43IntrinsicNumElts">IntrinsicNumElts</a> = <var>32</var>;</td></tr>
<tr><th id="225">225</th><td>  } <b>else</b> {</td></tr>
<tr><th id="226">226</th><td>    <a class="local col4 ref" href="#44IID" title='IID' data-ref="44IID" data-ref-filename="44IID">IID</a> = <span class="namespace">Intrinsic::</span><a class="enum" href="../../../../build/include/llvm/IR/IntrinsicsX86.h.html#llvm::Intrinsic::x86_sse2_psad_bw" title='llvm::Intrinsic::x86_sse2_psad_bw' data-ref="llvm::Intrinsic::x86_sse2_psad_bw" data-ref-filename="llvm..Intrinsic..x86_sse2_psad_bw">x86_sse2_psad_bw</a>;</td></tr>
<tr><th id="227">227</th><td>    <a class="local col3 ref" href="#43IntrinsicNumElts" title='IntrinsicNumElts' data-ref="43IntrinsicNumElts" data-ref-filename="43IntrinsicNumElts">IntrinsicNumElts</a> = <var>16</var>;</td></tr>
<tr><th id="228">228</th><td>  }</td></tr>
<tr><th id="229">229</th><td></td></tr>
<tr><th id="230">230</th><td>  <a class="type" href="../../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function" data-ref-filename="llvm..Function">Function</a> *<dfn class="local col5 decl" id="45PSADBWFn" title='PSADBWFn' data-type='llvm::Function *' data-ref="45PSADBWFn" data-ref-filename="45PSADBWFn">PSADBWFn</dfn> = <span class="namespace">Intrinsic::</span><a class="ref fn" href="../../../include/llvm/IR/Intrinsics.h.html#_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleEjNS_8ArrayRefIPNS_4TypeEEE" title='llvm::Intrinsic::getDeclaration' data-ref="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleEjNS_8ArrayRefIPNS_4TypeEEE" data-ref-filename="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleEjNS_8ArrayRefIPNS_4TypeEEE">getDeclaration</a>(<a class="local col0 ref" href="#30SI" title='SI' data-ref="30SI" data-ref-filename="30SI">SI</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv" data-ref-filename="_ZN4llvm11Instruction9getModuleEv">getModule</a>(), <a class="local col4 ref" href="#44IID" title='IID' data-ref="44IID" data-ref-filename="44IID">IID</a>);</td></tr>
<tr><th id="231">231</th><td></td></tr>
<tr><th id="232">232</th><td>  <b>if</b> (<a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a> &lt; <var>16</var>) {</td></tr>
<tr><th id="233">233</th><td>    <i>// Pad input with zeroes.</i></td></tr>
<tr><th id="234">234</th><td>    <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<em>int</em>, <var>32</var>&gt; <dfn class="local col6 decl" id="46ConcatMask" title='ConcatMask' data-type='SmallVector&lt;int, 32&gt;' data-ref="46ConcatMask" data-ref-filename="46ConcatMask">ConcatMask</dfn><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1EmRKT_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1EmRKT_" data-ref-filename="_ZN4llvm11SmallVectorC1EmRKT_">(</a><var>16</var>);</td></tr>
<tr><th id="235">235</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col7 decl" id="47i" title='i' data-type='unsigned int' data-ref="47i" data-ref-filename="47i">i</dfn> = <var>0</var>; <a class="local col7 ref" href="#47i" title='i' data-ref="47i" data-ref-filename="47i">i</a> != <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a>; ++<a class="local col7 ref" href="#47i" title='i' data-ref="47i" data-ref-filename="47i">i</a>)</td></tr>
<tr><th id="236">236</th><td>      <a class="local col6 ref" href="#46ConcatMask" title='ConcatMask' data-ref="46ConcatMask" data-ref-filename="46ConcatMask">ConcatMask</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col7 ref" href="#47i" title='i' data-ref="47i" data-ref-filename="47i">i</a>]</a> = <a class="local col7 ref" href="#47i" title='i' data-ref="47i" data-ref-filename="47i">i</a>;</td></tr>
<tr><th id="237">237</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col8 decl" id="48i" title='i' data-type='unsigned int' data-ref="48i" data-ref-filename="48i">i</dfn> = <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a>; <a class="local col8 ref" href="#48i" title='i' data-ref="48i" data-ref-filename="48i">i</a> != <var>16</var>; ++<a class="local col8 ref" href="#48i" title='i' data-ref="48i" data-ref-filename="48i">i</a>)</td></tr>
<tr><th id="238">238</th><td>      <a class="local col6 ref" href="#46ConcatMask" title='ConcatMask' data-ref="46ConcatMask" data-ref-filename="46ConcatMask">ConcatMask</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col8 ref" href="#48i" title='i' data-ref="48i" data-ref-filename="48i">i</a>]</a> = (<a class="local col8 ref" href="#48i" title='i' data-ref="48i" data-ref-filename="48i">i</a> % <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a>) + <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a>;</td></tr>
<tr><th id="239">239</th><td></td></tr>
<tr><th id="240">240</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col9 decl" id="49Zero" title='Zero' data-type='llvm::Value *' data-ref="49Zero" data-ref-filename="49Zero">Zero</dfn> = <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant" data-ref-filename="llvm..Constant">Constant</a>::<a class="ref fn" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant12getNullValueEPNS_4TypeE" title='llvm::Constant::getNullValue' data-ref="_ZN4llvm8Constant12getNullValueEPNS_4TypeE" data-ref-filename="_ZN4llvm8Constant12getNullValueEPNS_4TypeE">getNullValue</a>(<a class="local col8 ref" href="#38Op0" title='Op0' data-ref="38Op0" data-ref-filename="38Op0">Op0</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="241">241</th><td>    <a class="local col8 ref" href="#38Op0" title='Op0' data-ref="38Op0" data-ref-filename="38Op0">Op0</a> = <a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col8 ref" href="#38Op0" title='Op0' data-ref="38Op0" data-ref-filename="38Op0">Op0</a>, <a class="local col9 ref" href="#49Zero" title='Zero' data-ref="49Zero" data-ref-filename="49Zero">Zero</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" data-ref-filename="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE"></a><a class="local col6 ref" href="#46ConcatMask" title='ConcatMask' data-ref="46ConcatMask" data-ref-filename="46ConcatMask">ConcatMask</a>);</td></tr>
<tr><th id="242">242</th><td>    <a class="local col9 ref" href="#39Op1" title='Op1' data-ref="39Op1" data-ref-filename="39Op1">Op1</a> = <a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col9 ref" href="#39Op1" title='Op1' data-ref="39Op1" data-ref-filename="39Op1">Op1</a>, <a class="local col9 ref" href="#49Zero" title='Zero' data-ref="49Zero" data-ref-filename="49Zero">Zero</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" data-ref-filename="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE"></a><a class="local col6 ref" href="#46ConcatMask" title='ConcatMask' data-ref="46ConcatMask" data-ref-filename="46ConcatMask">ConcatMask</a>);</td></tr>
<tr><th id="243">243</th><td>    <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a> = <var>16</var>;</td></tr>
<tr><th id="244">244</th><td>  }</td></tr>
<tr><th id="245">245</th><td></td></tr>
<tr><th id="246">246</th><td>  <i>// Intrinsics produce vXi64 and need to be casted to vXi32.</i></td></tr>
<tr><th id="247">247</th><td>  <em>auto</em> *<dfn class="local col0 decl" id="50I32Ty" title='I32Ty' data-type='llvm::FixedVectorType *' data-ref="50I32Ty" data-ref-filename="50I32Ty">I32Ty</dfn> =</td></tr>
<tr><th id="248">248</th><td>      <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::FixedVectorType" title='llvm::FixedVectorType' data-ref="llvm::FixedVectorType" data-ref-filename="llvm..FixedVectorType">FixedVectorType</a>::<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm15FixedVectorType3getEPNS_4TypeEj" title='llvm::FixedVectorType::get' data-ref="_ZN4llvm15FixedVectorType3getEPNS_4TypeEj" data-ref-filename="_ZN4llvm15FixedVectorType3getEPNS_4TypeEj">get</a>(<a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase10getInt32TyEv" title='llvm::IRBuilderBase::getInt32Ty' data-ref="_ZN4llvm13IRBuilderBase10getInt32TyEv" data-ref-filename="_ZN4llvm13IRBuilderBase10getInt32TyEv">getInt32Ty</a>(), <a class="local col3 ref" href="#43IntrinsicNumElts" title='IntrinsicNumElts' data-ref="43IntrinsicNumElts" data-ref-filename="43IntrinsicNumElts">IntrinsicNumElts</a> / <var>4</var>);</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td>  <a class="macro" href="../../../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(NumElts % IntrinsicNumElts == <var>0</var> &amp;&amp; <q>"Unexpected number of elements!"</q>);</td></tr>
<tr><th id="251">251</th><td>  <em>unsigned</em> <dfn class="local col1 decl" id="51NumSplits" title='NumSplits' data-type='unsigned int' data-ref="51NumSplits" data-ref-filename="51NumSplits">NumSplits</dfn> = <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a> / <a class="local col3 ref" href="#43IntrinsicNumElts" title='IntrinsicNumElts' data-ref="43IntrinsicNumElts" data-ref-filename="43IntrinsicNumElts">IntrinsicNumElts</a>;</td></tr>
<tr><th id="252">252</th><td></td></tr>
<tr><th id="253">253</th><td>  <i>// First collect the pieces we need.</i></td></tr>
<tr><th id="254">254</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *, <var>4</var>&gt; <dfn class="local col2 decl" id="52Ops" title='Ops' data-type='SmallVector&lt;llvm::Value *, 4&gt;' data-ref="52Ops" data-ref-filename="52Ops">Ops</dfn><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1EmRKT_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1EmRKT_" data-ref-filename="_ZN4llvm11SmallVectorC1EmRKT_">(</a><a class="local col1 ref" href="#51NumSplits" title='NumSplits' data-ref="51NumSplits" data-ref-filename="51NumSplits">NumSplits</a>);</td></tr>
<tr><th id="255">255</th><td>  <b>for</b> (<em>unsigned</em> <dfn class="local col3 decl" id="53i" title='i' data-type='unsigned int' data-ref="53i" data-ref-filename="53i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a> != <a class="local col1 ref" href="#51NumSplits" title='NumSplits' data-ref="51NumSplits" data-ref-filename="51NumSplits">NumSplits</a>; ++<a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a>) {</td></tr>
<tr><th id="256">256</th><td>    <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<em>int</em>, <var>64</var>&gt; <dfn class="local col4 decl" id="54ExtractMask" title='ExtractMask' data-type='SmallVector&lt;int, 64&gt;' data-ref="54ExtractMask" data-ref-filename="54ExtractMask">ExtractMask</dfn><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1EmRKT_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1EmRKT_" data-ref-filename="_ZN4llvm11SmallVectorC1EmRKT_">(</a><a class="local col3 ref" href="#43IntrinsicNumElts" title='IntrinsicNumElts' data-ref="43IntrinsicNumElts" data-ref-filename="43IntrinsicNumElts">IntrinsicNumElts</a>);</td></tr>
<tr><th id="257">257</th><td>    <span class="namespace">std::</span><span class='ref fn' title='std::iota' data-ref="_ZSt4iotaT_S_T0_" data-ref-filename="_ZSt4iotaT_S_T0_">iota</span>(<a class="local col4 ref" href="#54ExtractMask" title='ExtractMask' data-ref="54ExtractMask" data-ref-filename="54ExtractMask">ExtractMask</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon5beginEv" title='llvm::SmallVectorTemplateCommon::begin' data-ref="_ZN4llvm25SmallVectorTemplateCommon5beginEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon5beginEv">begin</a>(), <a class="local col4 ref" href="#54ExtractMask" title='ExtractMask' data-ref="54ExtractMask" data-ref-filename="54ExtractMask">ExtractMask</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon3endEv" title='llvm::SmallVectorTemplateCommon::end' data-ref="_ZN4llvm25SmallVectorTemplateCommon3endEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon3endEv">end</a>(), <a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a> * <a class="local col3 ref" href="#43IntrinsicNumElts" title='IntrinsicNumElts' data-ref="43IntrinsicNumElts" data-ref-filename="43IntrinsicNumElts">IntrinsicNumElts</a>);</td></tr>
<tr><th id="258">258</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col5 decl" id="55ExtractOp0" title='ExtractOp0' data-type='llvm::Value *' data-ref="55ExtractOp0" data-ref-filename="55ExtractOp0">ExtractOp0</dfn> = <a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col8 ref" href="#38Op0" title='Op0' data-ref="38Op0" data-ref-filename="38Op0">Op0</a>, <a class="local col8 ref" href="#38Op0" title='Op0' data-ref="38Op0" data-ref-filename="38Op0">Op0</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" data-ref-filename="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE"></a><a class="local col4 ref" href="#54ExtractMask" title='ExtractMask' data-ref="54ExtractMask" data-ref-filename="54ExtractMask">ExtractMask</a>);</td></tr>
<tr><th id="259">259</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col6 decl" id="56ExtractOp1" title='ExtractOp1' data-type='llvm::Value *' data-ref="56ExtractOp1" data-ref-filename="56ExtractOp1">ExtractOp1</dfn> = <a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col9 ref" href="#39Op1" title='Op1' data-ref="39Op1" data-ref-filename="39Op1">Op1</a>, <a class="local col8 ref" href="#38Op0" title='Op0' data-ref="38Op0" data-ref-filename="38Op0">Op0</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" data-ref-filename="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE"></a><a class="local col4 ref" href="#54ExtractMask" title='ExtractMask' data-ref="54ExtractMask" data-ref-filename="54ExtractMask">ExtractMask</a>);</td></tr>
<tr><th id="260">260</th><td>    <a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a>]</a> = <a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilderBase::CreateCall' data-ref="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE" data-ref-filename="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</a>(<a class="ref fn fake" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm14FunctionCalleeC1EPT_" title='llvm::FunctionCallee::FunctionCallee' data-ref="_ZN4llvm14FunctionCalleeC1EPT_" data-ref-filename="_ZN4llvm14FunctionCalleeC1EPT_"></a><a class="local col5 ref" href="#45PSADBWFn" title='PSADBWFn' data-ref="45PSADBWFn" data-ref-filename="45PSADBWFn">PSADBWFn</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E" data-ref-filename="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></a>{<a class="local col5 ref" href="#55ExtractOp0" title='ExtractOp0' data-ref="55ExtractOp0" data-ref-filename="55ExtractOp0">ExtractOp0</a>, <a class="local col6 ref" href="#56ExtractOp1" title='ExtractOp1' data-ref="56ExtractOp1" data-ref-filename="56ExtractOp1">ExtractOp1</a>});</td></tr>
<tr><th id="261">261</th><td>    <a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a>]</a> = <a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilderBase::CreateBitCast' data-ref="_ZN4llvm13IRBuilderBase13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a>]</a>, <a class="local col0 ref" href="#50I32Ty" title='I32Ty' data-ref="50I32Ty" data-ref-filename="50I32Ty">I32Ty</a>);</td></tr>
<tr><th id="262">262</th><td>  }</td></tr>
<tr><th id="263">263</th><td></td></tr>
<tr><th id="264">264</th><td>  <a class="macro" href="../../../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(isPowerOf2_32(NumSplits) &amp;&amp; <q>"Expected power of 2 splits"</q>);</td></tr>
<tr><th id="265">265</th><td>  <em>unsigned</em> <dfn class="local col7 decl" id="57Stages" title='Stages' data-type='unsigned int' data-ref="57Stages" data-ref-filename="57Stages">Stages</dfn> = <a class="ref fn" href="../../../include/llvm/Support/MathExtras.h.html#_ZN4llvm7Log2_32Ej" title='llvm::Log2_32' data-ref="_ZN4llvm7Log2_32Ej" data-ref-filename="_ZN4llvm7Log2_32Ej">Log2_32</a>(<a class="local col1 ref" href="#51NumSplits" title='NumSplits' data-ref="51NumSplits" data-ref-filename="51NumSplits">NumSplits</a>);</td></tr>
<tr><th id="266">266</th><td>  <b>for</b> (<em>unsigned</em> <dfn class="local col8 decl" id="58s" title='s' data-type='unsigned int' data-ref="58s" data-ref-filename="58s">s</dfn> = <a class="local col7 ref" href="#57Stages" title='Stages' data-ref="57Stages" data-ref-filename="57Stages">Stages</a>; <a class="local col8 ref" href="#58s" title='s' data-ref="58s" data-ref-filename="58s">s</a> &gt; <var>0</var>; --<a class="local col8 ref" href="#58s" title='s' data-ref="58s" data-ref-filename="58s">s</a>) {</td></tr>
<tr><th id="267">267</th><td>    <em>unsigned</em> <dfn class="local col9 decl" id="59NumConcatElts" title='NumConcatElts' data-type='unsigned int' data-ref="59NumConcatElts" data-ref-filename="59NumConcatElts">NumConcatElts</dfn> =</td></tr>
<tr><th id="268">268</th><td>        <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::FixedVectorType" title='llvm::FixedVectorType' data-ref="llvm::FixedVectorType" data-ref-filename="llvm..FixedVectorType">FixedVectorType</a>&gt;(<a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm15FixedVectorType14getNumElementsEv" title='llvm::FixedVectorType::getNumElements' data-ref="_ZNK4llvm15FixedVectorType14getNumElementsEv" data-ref-filename="_ZNK4llvm15FixedVectorType14getNumElementsEv">getNumElements</a>() * <var>2</var>;</td></tr>
<tr><th id="269">269</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col0 decl" id="60i" title='i' data-type='unsigned int' data-ref="60i" data-ref-filename="60i">i</dfn> = <var>0</var>; <a class="local col0 ref" href="#60i" title='i' data-ref="60i" data-ref-filename="60i">i</a> != <var>1U</var> &lt;&lt; (<a class="local col8 ref" href="#58s" title='s' data-ref="58s" data-ref-filename="58s">s</a> - <var>1</var>); ++<a class="local col0 ref" href="#60i" title='i' data-ref="60i" data-ref-filename="60i">i</a>) {</td></tr>
<tr><th id="270">270</th><td>      <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<em>int</em>, <var>64</var>&gt; <dfn class="local col1 decl" id="61ConcatMask" title='ConcatMask' data-type='SmallVector&lt;int, 64&gt;' data-ref="61ConcatMask" data-ref-filename="61ConcatMask">ConcatMask</dfn><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1EmRKT_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1EmRKT_" data-ref-filename="_ZN4llvm11SmallVectorC1EmRKT_">(</a><a class="local col9 ref" href="#59NumConcatElts" title='NumConcatElts' data-ref="59NumConcatElts" data-ref-filename="59NumConcatElts">NumConcatElts</a>);</td></tr>
<tr><th id="271">271</th><td>      <span class="namespace">std::</span><span class='ref fn' title='std::iota' data-ref="_ZSt4iotaT_S_T0_" data-ref-filename="_ZSt4iotaT_S_T0_">iota</span>(<a class="local col1 ref" href="#61ConcatMask" title='ConcatMask' data-ref="61ConcatMask" data-ref-filename="61ConcatMask">ConcatMask</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon5beginEv" title='llvm::SmallVectorTemplateCommon::begin' data-ref="_ZN4llvm25SmallVectorTemplateCommon5beginEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon5beginEv">begin</a>(), <a class="local col1 ref" href="#61ConcatMask" title='ConcatMask' data-ref="61ConcatMask" data-ref-filename="61ConcatMask">ConcatMask</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon3endEv" title='llvm::SmallVectorTemplateCommon::end' data-ref="_ZN4llvm25SmallVectorTemplateCommon3endEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon3endEv">end</a>(), <var>0</var>);</td></tr>
<tr><th id="272">272</th><td>      <a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col0 ref" href="#60i" title='i' data-ref="60i" data-ref-filename="60i">i</a>]</a> = <a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col0 ref" href="#60i" title='i' data-ref="60i" data-ref-filename="60i">i</a>*<var>2</var>]</a>, <a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col0 ref" href="#60i" title='i' data-ref="60i" data-ref-filename="60i">i</a>*<var>2</var>+<var>1</var>]</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" data-ref-filename="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE"></a><a class="local col1 ref" href="#61ConcatMask" title='ConcatMask' data-ref="61ConcatMask" data-ref-filename="61ConcatMask">ConcatMask</a>);</td></tr>
<tr><th id="273">273</th><td>    }</td></tr>
<tr><th id="274">274</th><td>  }</td></tr>
<tr><th id="275">275</th><td></td></tr>
<tr><th id="276">276</th><td>  <i>// At this point the final value should be in Ops[0]. Now we need to adjust</i></td></tr>
<tr><th id="277">277</th><td><i>  // it to the final original type.</i></td></tr>
<tr><th id="278">278</th><td>  <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::FixedVectorType" title='llvm::FixedVectorType' data-ref="llvm::FixedVectorType" data-ref-filename="llvm..FixedVectorType">FixedVectorType</a>&gt;(<a class="local col1 ref" href="#41OpTy" title='OpTy' data-ref="41OpTy" data-ref-filename="41OpTy">OpTy</a>)-&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm15FixedVectorType14getNumElementsEv" title='llvm::FixedVectorType::getNumElements' data-ref="_ZNK4llvm15FixedVectorType14getNumElementsEv" data-ref-filename="_ZNK4llvm15FixedVectorType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="279">279</th><td>  <b>if</b> (<a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a> == <var>2</var>) {</td></tr>
<tr><th id="280">280</th><td>    <i>// Extract down to 2 elements.</i></td></tr>
<tr><th id="281">281</th><td>    <a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a> = <a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a>, <a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a>, <a class="type" href="../../../include/llvm/ADT/ArrayRef.h.html#llvm::ArrayRef" title='llvm::ArrayRef' data-ref="llvm::ArrayRef" data-ref-filename="llvm..ArrayRef">ArrayRef</a>&lt;<em>int</em>&gt;<a class="ref fn" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E" data-ref-filename="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E">{</a><var>0</var>, <var>1</var>});</td></tr>
<tr><th id="282">282</th><td>  } <b>else</b> <b>if</b> (<a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a> &gt;= <var>8</var>) {</td></tr>
<tr><th id="283">283</th><td>    <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<em>int</em>, <var>32</var>&gt; <dfn class="local col2 decl" id="62ConcatMask" title='ConcatMask' data-type='SmallVector&lt;int, 32&gt;' data-ref="62ConcatMask" data-ref-filename="62ConcatMask">ConcatMask</dfn><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1EmRKT_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1EmRKT_" data-ref-filename="_ZN4llvm11SmallVectorC1EmRKT_">(</a><a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a>);</td></tr>
<tr><th id="284">284</th><td>    <em>unsigned</em> <dfn class="local col3 decl" id="63SubElts" title='SubElts' data-type='unsigned int' data-ref="63SubElts" data-ref-filename="63SubElts">SubElts</dfn> =</td></tr>
<tr><th id="285">285</th><td>        <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::FixedVectorType" title='llvm::FixedVectorType' data-ref="llvm::FixedVectorType" data-ref-filename="llvm..FixedVectorType">FixedVectorType</a>&gt;(<a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm15FixedVectorType14getNumElementsEv" title='llvm::FixedVectorType::getNumElements' data-ref="_ZNK4llvm15FixedVectorType14getNumElementsEv" data-ref-filename="_ZNK4llvm15FixedVectorType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="286">286</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col4 decl" id="64i" title='i' data-type='unsigned int' data-ref="64i" data-ref-filename="64i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#64i" title='i' data-ref="64i" data-ref-filename="64i">i</a> != <a class="local col3 ref" href="#63SubElts" title='SubElts' data-ref="63SubElts" data-ref-filename="63SubElts">SubElts</a>; ++<a class="local col4 ref" href="#64i" title='i' data-ref="64i" data-ref-filename="64i">i</a>)</td></tr>
<tr><th id="287">287</th><td>      <a class="local col2 ref" href="#62ConcatMask" title='ConcatMask' data-ref="62ConcatMask" data-ref-filename="62ConcatMask">ConcatMask</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col4 ref" href="#64i" title='i' data-ref="64i" data-ref-filename="64i">i</a>]</a> = <a class="local col4 ref" href="#64i" title='i' data-ref="64i" data-ref-filename="64i">i</a>;</td></tr>
<tr><th id="288">288</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col5 decl" id="65i" title='i' data-type='unsigned int' data-ref="65i" data-ref-filename="65i">i</dfn> = <a class="local col3 ref" href="#63SubElts" title='SubElts' data-ref="63SubElts" data-ref-filename="63SubElts">SubElts</a>; <a class="local col5 ref" href="#65i" title='i' data-ref="65i" data-ref-filename="65i">i</a> != <a class="local col2 ref" href="#42NumElts" title='NumElts' data-ref="42NumElts" data-ref-filename="42NumElts">NumElts</a>; ++<a class="local col5 ref" href="#65i" title='i' data-ref="65i" data-ref-filename="65i">i</a>)</td></tr>
<tr><th id="289">289</th><td>      <a class="local col2 ref" href="#62ConcatMask" title='ConcatMask' data-ref="62ConcatMask" data-ref-filename="62ConcatMask">ConcatMask</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col5 ref" href="#65i" title='i' data-ref="65i" data-ref-filename="65i">i</a>]</a> = (<a class="local col5 ref" href="#65i" title='i' data-ref="65i" data-ref-filename="65i">i</a> % <a class="local col3 ref" href="#63SubElts" title='SubElts' data-ref="63SubElts" data-ref-filename="63SubElts">SubElts</a>) + <a class="local col3 ref" href="#63SubElts" title='SubElts' data-ref="63SubElts" data-ref-filename="63SubElts">SubElts</a>;</td></tr>
<tr><th id="290">290</th><td></td></tr>
<tr><th id="291">291</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col6 decl" id="66Zero" title='Zero' data-type='llvm::Value *' data-ref="66Zero" data-ref-filename="66Zero">Zero</dfn> = <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant" data-ref-filename="llvm..Constant">Constant</a>::<a class="ref fn" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant12getNullValueEPNS_4TypeE" title='llvm::Constant::getNullValue' data-ref="_ZN4llvm8Constant12getNullValueEPNS_4TypeE" data-ref-filename="_ZN4llvm8Constant12getNullValueEPNS_4TypeE">getNullValue</a>(<a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="292">292</th><td>    <a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a> = <a class="local col0 ref" href="#40Builder" title='Builder' data-ref="40Builder" data-ref-filename="40Builder">Builder</a>.<a class="ref fn" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" title='llvm::IRBuilderBase::CreateShuffleVector' data-ref="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase19CreateShuffleVectorEPNS_5ValueES2_NS_8ArrayRefIiEERKNS_5TwineE">CreateShuffleVector</a>(<a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a>, <a class="local col6 ref" href="#66Zero" title='Zero' data-ref="66Zero" data-ref-filename="66Zero">Zero</a>, <a class="ref fn fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE" data-ref-filename="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_TL0__EE"></a><a class="local col2 ref" href="#62ConcatMask" title='ConcatMask' data-ref="62ConcatMask" data-ref-filename="62ConcatMask">ConcatMask</a>);</td></tr>
<tr><th id="293">293</th><td>  }</td></tr>
<tr><th id="294">294</th><td></td></tr>
<tr><th id="295">295</th><td>  <a class="local col0 ref" href="#30SI" title='SI' data-ref="30SI" data-ref-filename="30SI">SI</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_" data-ref-filename="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col2 ref" href="#52Ops" title='Ops' data-ref="52Ops" data-ref-filename="52Ops">Ops</a><a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a>);</td></tr>
<tr><th id="296">296</th><td>  <a class="local col0 ref" href="#30SI" title='SI' data-ref="30SI" data-ref-filename="30SI">SI</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv" data-ref-filename="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="297">297</th><td></td></tr>
<tr><th id="298">298</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="299">299</th><td>}</td></tr>
<tr><th id="300">300</th><td></td></tr>
<tr><th id="301">301</th><td><i  data-doc="_ZL17matchAddReductionRKN4llvm18ExtractElementInstE">// Walk backwards from the ExtractElementInst and determine if it is the end of</i></td></tr>
<tr><th id="302">302</th><td><i  data-doc="_ZL17matchAddReductionRKN4llvm18ExtractElementInstE">// a horizontal reduction. Return the input to the reduction if we find one.</i></td></tr>
<tr><th id="303">303</th><td><em>static</em> <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="tu decl def fn" id="_ZL17matchAddReductionRKN4llvm18ExtractElementInstE" title='matchAddReduction' data-type='llvm::Value * matchAddReduction(const llvm::ExtractElementInst &amp; EE)' data-ref="_ZL17matchAddReductionRKN4llvm18ExtractElementInstE" data-ref-filename="_ZL17matchAddReductionRKN4llvm18ExtractElementInstE">matchAddReduction</dfn>(<em>const</em> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ExtractElementInst" title='llvm::ExtractElementInst' data-ref="llvm::ExtractElementInst" data-ref-filename="llvm..ExtractElementInst">ExtractElementInst</a> &amp;<dfn class="local col7 decl" id="67EE" title='EE' data-type='const llvm::ExtractElementInst &amp;' data-ref="67EE" data-ref-filename="67EE">EE</dfn>) {</td></tr>
<tr><th id="304">304</th><td>  <i>// Make sure we're extracting index 0.</i></td></tr>
<tr><th id="305">305</th><td>  <em>auto</em> *<dfn class="local col8 decl" id="68Index" title='Index' data-type='const llvm::ConstantInt *' data-ref="68Index" data-ref-filename="68Index">Index</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt" data-ref-filename="llvm..ConstantInt">ConstantInt</a>&gt;(<a class="local col7 ref" href="#67EE" title='EE' data-ref="67EE" data-ref-filename="67EE">EE</a>.<a class="ref fn" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm18ExtractElementInst15getIndexOperandEv" title='llvm::ExtractElementInst::getIndexOperand' data-ref="_ZNK4llvm18ExtractElementInst15getIndexOperandEv" data-ref-filename="_ZNK4llvm18ExtractElementInst15getIndexOperandEv">getIndexOperand</a>());</td></tr>
<tr><th id="306">306</th><td>  <b>if</b> (!<a class="local col8 ref" href="#68Index" title='Index' data-ref="68Index" data-ref-filename="68Index">Index</a> || !<a class="local col8 ref" href="#68Index" title='Index' data-ref="68Index" data-ref-filename="68Index">Index</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant11isNullValueEv" title='llvm::Constant::isNullValue' data-ref="_ZNK4llvm8Constant11isNullValueEv" data-ref-filename="_ZNK4llvm8Constant11isNullValueEv">isNullValue</a>())</td></tr>
<tr><th id="307">307</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="308">308</th><td></td></tr>
<tr><th id="309">309</th><td>  <em>const</em> <em>auto</em> *<dfn class="local col9 decl" id="69BO" title='BO' data-type='const llvm::BinaryOperator *' data-ref="69BO" data-ref-filename="69BO">BO</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator" data-ref-filename="llvm..BinaryOperator">BinaryOperator</a>&gt;(<a class="local col7 ref" href="#67EE" title='EE' data-ref="67EE" data-ref-filename="67EE">EE</a>.<a class="ref fn" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm18ExtractElementInst16getVectorOperandEv" title='llvm::ExtractElementInst::getVectorOperand' data-ref="_ZNK4llvm18ExtractElementInst16getVectorOperandEv" data-ref-filename="_ZNK4llvm18ExtractElementInst16getVectorOperandEv">getVectorOperand</a>());</td></tr>
<tr><th id="310">310</th><td>  <b>if</b> (!<a class="local col9 ref" href="#69BO" title='BO' data-ref="69BO" data-ref-filename="69BO">BO</a> || <a class="local col9 ref" href="#69BO" title='BO' data-ref="69BO" data-ref-filename="69BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv" data-ref-filename="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() != <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#147" title='llvm::Instruction::Add' data-ref="llvm::Instruction::Add" data-ref-filename="llvm..Instruction..Add">Add</a> || !<a class="local col9 ref" href="#69BO" title='BO' data-ref="69BO" data-ref-filename="69BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv" data-ref-filename="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="311">311</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="312">312</th><td></td></tr>
<tr><th id="313">313</th><td>  <em>unsigned</em> <dfn class="local col0 decl" id="70NumElems" title='NumElems' data-type='unsigned int' data-ref="70NumElems" data-ref-filename="70NumElems">NumElems</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::FixedVectorType" title='llvm::FixedVectorType' data-ref="llvm::FixedVectorType" data-ref-filename="llvm..FixedVectorType">FixedVectorType</a>&gt;(<a class="local col9 ref" href="#69BO" title='BO' data-ref="69BO" data-ref-filename="69BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref fn" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm15FixedVectorType14getNumElementsEv" title='llvm::FixedVectorType::getNumElements' data-ref="_ZNK4llvm15FixedVectorType14getNumElementsEv" data-ref-filename="_ZNK4llvm15FixedVectorType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="314">314</th><td>  <i>// Ensure the reduction size is a power of 2.</i></td></tr>
<tr><th id="315">315</th><td>  <b>if</b> (!<a class="ref fn" href="../../../include/llvm/Support/MathExtras.h.html#_ZN4llvm13isPowerOf2_32Ej" title='llvm::isPowerOf2_32' data-ref="_ZN4llvm13isPowerOf2_32Ej" data-ref-filename="_ZN4llvm13isPowerOf2_32Ej">isPowerOf2_32</a>(<a class="local col0 ref" href="#70NumElems" title='NumElems' data-ref="70NumElems" data-ref-filename="70NumElems">NumElems</a>))</td></tr>
<tr><th id="316">316</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="317">317</th><td></td></tr>
<tr><th id="318">318</th><td>  <em>const</em> <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col1 decl" id="71Op" title='Op' data-type='const llvm::Value *' data-ref="71Op" data-ref-filename="71Op">Op</dfn> = <a class="local col9 ref" href="#69BO" title='BO' data-ref="69BO" data-ref-filename="69BO">BO</a>;</td></tr>
<tr><th id="319">319</th><td>  <em>unsigned</em> <dfn class="local col2 decl" id="72Stages" title='Stages' data-type='unsigned int' data-ref="72Stages" data-ref-filename="72Stages">Stages</dfn> = <a class="ref fn" href="../../../include/llvm/Support/MathExtras.h.html#_ZN4llvm7Log2_32Ej" title='llvm::Log2_32' data-ref="_ZN4llvm7Log2_32Ej" data-ref-filename="_ZN4llvm7Log2_32Ej">Log2_32</a>(<a class="local col0 ref" href="#70NumElems" title='NumElems' data-ref="70NumElems" data-ref-filename="70NumElems">NumElems</a>);</td></tr>
<tr><th id="320">320</th><td>  <b>for</b> (<em>unsigned</em> <dfn class="local col3 decl" id="73i" title='i' data-type='unsigned int' data-ref="73i" data-ref-filename="73i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#73i" title='i' data-ref="73i" data-ref-filename="73i">i</a> != <a class="local col2 ref" href="#72Stages" title='Stages' data-ref="72Stages" data-ref-filename="72Stages">Stages</a>; ++<a class="local col3 ref" href="#73i" title='i' data-ref="73i" data-ref-filename="73i">i</a>) {</td></tr>
<tr><th id="321">321</th><td>    <em>const</em> <em>auto</em> *<dfn class="local col4 decl" id="74BO" title='BO' data-type='const llvm::BinaryOperator *' data-ref="74BO" data-ref-filename="74BO">BO</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator" data-ref-filename="llvm..BinaryOperator">BinaryOperator</a>&gt;(<a class="local col1 ref" href="#71Op" title='Op' data-ref="71Op" data-ref-filename="71Op">Op</a>);</td></tr>
<tr><th id="322">322</th><td>    <b>if</b> (!<a class="local col4 ref" href="#74BO" title='BO' data-ref="74BO" data-ref-filename="74BO">BO</a> || <a class="local col4 ref" href="#74BO" title='BO' data-ref="74BO" data-ref-filename="74BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv" data-ref-filename="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() != <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#147" title='llvm::Instruction::Add' data-ref="llvm::Instruction::Add" data-ref-filename="llvm..Instruction..Add">Add</a>)</td></tr>
<tr><th id="323">323</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="324">324</th><td></td></tr>
<tr><th id="325">325</th><td>    <i>// If this isn't the first add, then it should only have 2 users, the</i></td></tr>
<tr><th id="326">326</th><td><i>    // shuffle and another add which we checked in the previous iteration.</i></td></tr>
<tr><th id="327">327</th><td>    <b>if</b> (<a class="local col3 ref" href="#73i" title='i' data-ref="73i" data-ref-filename="73i">i</a> != <var>0</var> &amp;&amp; !<a class="local col4 ref" href="#74BO" title='BO' data-ref="74BO" data-ref-filename="74BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value8hasNUsesEj" title='llvm::Value::hasNUses' data-ref="_ZNK4llvm5Value8hasNUsesEj" data-ref-filename="_ZNK4llvm5Value8hasNUsesEj">hasNUses</a>(<var>2</var>))</td></tr>
<tr><th id="328">328</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="329">329</th><td></td></tr>
<tr><th id="330">330</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col5 decl" id="75LHS" title='LHS' data-type='llvm::Value *' data-ref="75LHS" data-ref-filename="75LHS">LHS</dfn> = <a class="local col4 ref" href="#74BO" title='BO' data-ref="74BO" data-ref-filename="74BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="331">331</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col6 decl" id="76RHS" title='RHS' data-type='llvm::Value *' data-ref="76RHS" data-ref-filename="76RHS">RHS</dfn> = <a class="local col4 ref" href="#74BO" title='BO' data-ref="74BO" data-ref-filename="74BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#211" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj" data-ref-filename="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="332">332</th><td></td></tr>
<tr><th id="333">333</th><td>    <em>auto</em> *<dfn class="local col7 decl" id="77Shuffle" title='Shuffle' data-type='llvm::ShuffleVectorInst *' data-ref="77Shuffle" data-ref-filename="77Shuffle">Shuffle</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ShuffleVectorInst" title='llvm::ShuffleVectorInst' data-ref="llvm::ShuffleVectorInst" data-ref-filename="llvm..ShuffleVectorInst">ShuffleVectorInst</a>&gt;(<a class="local col5 ref" href="#75LHS" title='LHS' data-ref="75LHS" data-ref-filename="75LHS">LHS</a>);</td></tr>
<tr><th id="334">334</th><td>    <b>if</b> (<a class="local col7 ref" href="#77Shuffle" title='Shuffle' data-ref="77Shuffle" data-ref-filename="77Shuffle">Shuffle</a>) {</td></tr>
<tr><th id="335">335</th><td>      <a class="local col1 ref" href="#71Op" title='Op' data-ref="71Op" data-ref-filename="71Op">Op</a> = <a class="local col6 ref" href="#76RHS" title='RHS' data-ref="76RHS" data-ref-filename="76RHS">RHS</a>;</td></tr>
<tr><th id="336">336</th><td>    } <b>else</b> {</td></tr>
<tr><th id="337">337</th><td>      <a class="local col7 ref" href="#77Shuffle" title='Shuffle' data-ref="77Shuffle" data-ref-filename="77Shuffle">Shuffle</a> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ShuffleVectorInst" title='llvm::ShuffleVectorInst' data-ref="llvm::ShuffleVectorInst" data-ref-filename="llvm..ShuffleVectorInst">ShuffleVectorInst</a>&gt;(<a class="local col6 ref" href="#76RHS" title='RHS' data-ref="76RHS" data-ref-filename="76RHS">RHS</a>);</td></tr>
<tr><th id="338">338</th><td>      <a class="local col1 ref" href="#71Op" title='Op' data-ref="71Op" data-ref-filename="71Op">Op</a> = <a class="local col5 ref" href="#75LHS" title='LHS' data-ref="75LHS" data-ref-filename="75LHS">LHS</a>;</td></tr>
<tr><th id="339">339</th><td>    }</td></tr>
<tr><th id="340">340</th><td></td></tr>
<tr><th id="341">341</th><td>    <i>// The first operand of the shuffle should be the same as the other operand</i></td></tr>
<tr><th id="342">342</th><td><i>    // of the bin op.</i></td></tr>
<tr><th id="343">343</th><td>    <b>if</b> (!<a class="local col7 ref" href="#77Shuffle" title='Shuffle' data-ref="77Shuffle" data-ref-filename="77Shuffle">Shuffle</a> || <a class="local col7 ref" href="#77Shuffle" title='Shuffle' data-ref="77Shuffle" data-ref-filename="77Shuffle">Shuffle</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instructions.h.html#2038" title='llvm::ShuffleVectorInst::getOperand' data-ref="_ZNK4llvm17ShuffleVectorInst10getOperandEj" data-ref-filename="_ZNK4llvm17ShuffleVectorInst10getOperandEj">getOperand</a>(<var>0</var>) != <a class="local col1 ref" href="#71Op" title='Op' data-ref="71Op" data-ref-filename="71Op">Op</a>)</td></tr>
<tr><th id="344">344</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="345">345</th><td></td></tr>
<tr><th id="346">346</th><td>    <i>// Verify the shuffle has the expected (at this stage of the pyramid) mask.</i></td></tr>
<tr><th id="347">347</th><td>    <em>unsigned</em> <dfn class="local col8 decl" id="78MaskEnd" title='MaskEnd' data-type='unsigned int' data-ref="78MaskEnd" data-ref-filename="78MaskEnd">MaskEnd</dfn> = <var>1</var> &lt;&lt; <a class="local col3 ref" href="#73i" title='i' data-ref="73i" data-ref-filename="73i">i</a>;</td></tr>
<tr><th id="348">348</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col9 decl" id="79Index" title='Index' data-type='unsigned int' data-ref="79Index" data-ref-filename="79Index">Index</dfn> = <var>0</var>; <a class="local col9 ref" href="#79Index" title='Index' data-ref="79Index" data-ref-filename="79Index">Index</a> &lt; <a class="local col8 ref" href="#78MaskEnd" title='MaskEnd' data-ref="78MaskEnd" data-ref-filename="78MaskEnd">MaskEnd</a>; ++<a class="local col9 ref" href="#79Index" title='Index' data-ref="79Index" data-ref-filename="79Index">Index</a>)</td></tr>
<tr><th id="349">349</th><td>      <b>if</b> (<a class="local col7 ref" href="#77Shuffle" title='Shuffle' data-ref="77Shuffle" data-ref-filename="77Shuffle">Shuffle</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17ShuffleVectorInst12getMaskValueEj" title='llvm::ShuffleVectorInst::getMaskValue' data-ref="_ZNK4llvm17ShuffleVectorInst12getMaskValueEj" data-ref-filename="_ZNK4llvm17ShuffleVectorInst12getMaskValueEj">getMaskValue</a>(<a class="local col9 ref" href="#79Index" title='Index' data-ref="79Index" data-ref-filename="79Index">Index</a>) != (<em>int</em>)(<a class="local col8 ref" href="#78MaskEnd" title='MaskEnd' data-ref="78MaskEnd" data-ref-filename="78MaskEnd">MaskEnd</a> + <a class="local col9 ref" href="#79Index" title='Index' data-ref="79Index" data-ref-filename="79Index">Index</a>))</td></tr>
<tr><th id="350">350</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="351">351</th><td>  }</td></tr>
<tr><th id="352">352</th><td></td></tr>
<tr><th id="353">353</th><td>  <b>return</b> <b>const_cast</b>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *&gt;(<a class="local col1 ref" href="#71Op" title='Op' data-ref="71Op" data-ref-filename="71Op">Op</a>);</td></tr>
<tr><th id="354">354</th><td>}</td></tr>
<tr><th id="355">355</th><td></td></tr>
<tr><th id="356">356</th><td><i  data-doc="_ZL18isReachableFromPHIPN4llvm7PHINodeEPNS_14BinaryOperatorE">// See if this BO is reachable from this Phi by walking forward through single</i></td></tr>
<tr><th id="357">357</th><td><i  data-doc="_ZL18isReachableFromPHIPN4llvm7PHINodeEPNS_14BinaryOperatorE">// use BinaryOperators with the same opcode. If we get back then we know we've</i></td></tr>
<tr><th id="358">358</th><td><i  data-doc="_ZL18isReachableFromPHIPN4llvm7PHINodeEPNS_14BinaryOperatorE">// found a loop and it is safe to step through this Add to find more leaves.</i></td></tr>
<tr><th id="359">359</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def fn" id="_ZL18isReachableFromPHIPN4llvm7PHINodeEPNS_14BinaryOperatorE" title='isReachableFromPHI' data-type='bool isReachableFromPHI(llvm::PHINode * Phi, llvm::BinaryOperator * BO)' data-ref="_ZL18isReachableFromPHIPN4llvm7PHINodeEPNS_14BinaryOperatorE" data-ref-filename="_ZL18isReachableFromPHIPN4llvm7PHINodeEPNS_14BinaryOperatorE">isReachableFromPHI</dfn>(<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode" data-ref-filename="llvm..PHINode">PHINode</a> *<dfn class="local col0 decl" id="80Phi" title='Phi' data-type='llvm::PHINode *' data-ref="80Phi" data-ref-filename="80Phi">Phi</dfn>, <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator" data-ref-filename="llvm..BinaryOperator">BinaryOperator</a> *<dfn class="local col1 decl" id="81BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="81BO" data-ref-filename="81BO">BO</dfn>) {</td></tr>
<tr><th id="360">360</th><td>  <i>// The PHI itself should only have one use.</i></td></tr>
<tr><th id="361">361</th><td>  <b>if</b> (!<a class="local col0 ref" href="#80Phi" title='Phi' data-ref="80Phi" data-ref-filename="80Phi">Phi</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv" data-ref-filename="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="362">362</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="363">363</th><td></td></tr>
<tr><th id="364">364</th><td>  <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a> *<dfn class="local col2 decl" id="82U" title='U' data-type='llvm::Instruction *' data-ref="82U" data-ref-filename="82U">U</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>&gt;(<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value18user_iterator_impldeEv" title='llvm::Value::user_iterator_impl::operator*' data-ref="_ZNK4llvm5Value18user_iterator_impldeEv" data-ref-filename="_ZNK4llvm5Value18user_iterator_impldeEv">*</a><a class="local col0 ref" href="#80Phi" title='Phi' data-ref="80Phi" data-ref-filename="80Phi">Phi</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value10user_beginEv" title='llvm::Value::user_begin' data-ref="_ZN4llvm5Value10user_beginEv" data-ref-filename="_ZN4llvm5Value10user_beginEv">user_begin</a>());</td></tr>
<tr><th id="365">365</th><td>  <b>if</b> (<a class="local col2 ref" href="#82U" title='U' data-ref="82U" data-ref-filename="82U">U</a> == <a class="local col1 ref" href="#81BO" title='BO' data-ref="81BO" data-ref-filename="81BO">BO</a>)</td></tr>
<tr><th id="366">366</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="367">367</th><td></td></tr>
<tr><th id="368">368</th><td>  <b>while</b> (<a class="local col2 ref" href="#82U" title='U' data-ref="82U" data-ref-filename="82U">U</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv" data-ref-filename="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() &amp;&amp; <a class="local col2 ref" href="#82U" title='U' data-ref="82U" data-ref-filename="82U">U</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction9getOpcodeEv" title='llvm::Instruction::getOpcode' data-ref="_ZNK4llvm11Instruction9getOpcodeEv" data-ref-filename="_ZNK4llvm11Instruction9getOpcodeEv">getOpcode</a>() == <a class="local col1 ref" href="#81BO" title='BO' data-ref="81BO" data-ref-filename="81BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv" data-ref-filename="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>())</td></tr>
<tr><th id="369">369</th><td>    <a class="local col2 ref" href="#82U" title='U' data-ref="82U" data-ref-filename="82U">U</a> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_" data-ref-filename="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>&gt;(<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value18user_iterator_impldeEv" title='llvm::Value::user_iterator_impl::operator*' data-ref="_ZNK4llvm5Value18user_iterator_impldeEv" data-ref-filename="_ZNK4llvm5Value18user_iterator_impldeEv">*</a><a class="local col2 ref" href="#82U" title='U' data-ref="82U" data-ref-filename="82U">U</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value10user_beginEv" title='llvm::Value::user_begin' data-ref="_ZN4llvm5Value10user_beginEv" data-ref-filename="_ZN4llvm5Value10user_beginEv">user_begin</a>());</td></tr>
<tr><th id="370">370</th><td></td></tr>
<tr><th id="371">371</th><td>  <b>return</b> <a class="local col2 ref" href="#82U" title='U' data-ref="82U" data-ref-filename="82U">U</a> == <a class="local col1 ref" href="#81BO" title='BO' data-ref="81BO" data-ref-filename="81BO">BO</a>;</td></tr>
<tr><th id="372">372</th><td>}</td></tr>
<tr><th id="373">373</th><td></td></tr>
<tr><th id="374">374</th><td><i  data-doc="_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE">// Collect all the leaves of the tree of adds that feeds into the horizontal</i></td></tr>
<tr><th id="375">375</th><td><i  data-doc="_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE">// reduction. Root is the Value that is used by the horizontal reduction.</i></td></tr>
<tr><th id="376">376</th><td><i  data-doc="_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE">// We look through single use phis, single use adds, or adds that are used by</i></td></tr>
<tr><th id="377">377</th><td><i  data-doc="_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE">// a phi that forms a loop with the add.</i></td></tr>
<tr><th id="378">378</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE" title='collectLeaves' data-type='void collectLeaves(llvm::Value * Root, SmallVectorImpl&lt;llvm::Instruction *&gt; &amp; Leaves)' data-ref="_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE" data-ref-filename="_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE">collectLeaves</dfn>(<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col3 decl" id="83Root" title='Root' data-type='llvm::Value *' data-ref="83Root" data-ref-filename="83Root">Root</dfn>, <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl" data-ref-filename="llvm..SmallVectorImpl">SmallVectorImpl</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a> *&gt; &amp;<dfn class="local col4 decl" id="84Leaves" title='Leaves' data-type='SmallVectorImpl&lt;llvm::Instruction *&gt; &amp;' data-ref="84Leaves" data-ref-filename="84Leaves">Leaves</dfn>) {</td></tr>
<tr><th id="379">379</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallPtrSet.h.html#llvm::SmallPtrSet" title='llvm::SmallPtrSet' data-ref="llvm::SmallPtrSet" data-ref-filename="llvm..SmallPtrSet">SmallPtrSet</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *, <var>8</var>&gt; <a class="ref fn fake" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZN4llvm11SmallPtrSetC1Ev" title='llvm::SmallPtrSet::SmallPtrSet&lt;PtrType, SmallSize&gt;' data-ref="_ZN4llvm11SmallPtrSetC1Ev" data-ref-filename="_ZN4llvm11SmallPtrSetC1Ev"></a><dfn class="local col5 decl" id="85Visited" title='Visited' data-type='SmallPtrSet&lt;llvm::Value *, 8&gt;' data-ref="85Visited" data-ref-filename="85Visited">Visited</dfn>;</td></tr>
<tr><th id="380">380</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *, <var>8</var>&gt; <a class="ref fn fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev" data-ref-filename="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col6 decl" id="86Worklist" title='Worklist' data-type='SmallVector&lt;llvm::Value *, 8&gt;' data-ref="86Worklist" data-ref-filename="86Worklist">Worklist</dfn>;</td></tr>
<tr><th id="381">381</th><td>  <a class="local col6 ref" href="#86Worklist" title='Worklist' data-ref="86Worklist" data-ref-filename="86Worklist">Worklist</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backENSt11conditionalIL_ZNS2_17TakesParamByValueEES1_RKS1_E4typeE" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backENSt11conditionalIL_ZNS2_17TakesParamByValueEES1_RKS1_E4typeE" data-ref-filename="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backENSt11conditionalIL_ZNS2_17TakesParamByValueEES1_RKS1_E4typeE">push_back</a>(<a class="local col3 ref" href="#83Root" title='Root' data-ref="83Root" data-ref-filename="83Root">Root</a>);</td></tr>
<tr><th id="382">382</th><td></td></tr>
<tr><th id="383">383</th><td>  <b>while</b> (!<a class="local col6 ref" href="#86Worklist" title='Worklist' data-ref="86Worklist" data-ref-filename="86Worklist">Worklist</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase5emptyEv" title='llvm::SmallVectorBase::empty' data-ref="_ZNK4llvm15SmallVectorBase5emptyEv" data-ref-filename="_ZNK4llvm15SmallVectorBase5emptyEv">empty</a>()) {</td></tr>
<tr><th id="384">384</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col7 decl" id="87V" title='V' data-type='llvm::Value *' data-ref="87V" data-ref-filename="87V">V</dfn> = <a class="local col6 ref" href="#86Worklist" title='Worklist' data-ref="86Worklist" data-ref-filename="86Worklist">Worklist</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl12pop_back_valEv" title='llvm::SmallVectorImpl::pop_back_val' data-ref="_ZN4llvm15SmallVectorImpl12pop_back_valEv" data-ref-filename="_ZN4llvm15SmallVectorImpl12pop_back_valEv">pop_back_val</a>();</td></tr>
<tr><th id="385">385</th><td>     <b>if</b> (!<a class="local col5 ref" href="#85Visited" title='Visited' data-ref="85Visited" data-ref-filename="85Visited">Visited</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZN4llvm15SmallPtrSetImpl6insertET_" title='llvm::SmallPtrSetImpl::insert' data-ref="_ZN4llvm15SmallPtrSetImpl6insertET_" data-ref-filename="_ZN4llvm15SmallPtrSetImpl6insertET_">insert</a>(<a class="local col7 ref" href="#87V" title='V' data-ref="87V" data-ref-filename="87V">V</a>).<span class='ref field' title='std::pair&lt;llvm::SmallPtrSetIterator&lt;llvm::Value *&gt;, bool&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>)</td></tr>
<tr><th id="386">386</th><td>       <b>continue</b>;</td></tr>
<tr><th id="387">387</th><td></td></tr>
<tr><th id="388">388</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col8 decl" id="88PN" title='PN' data-type='llvm::PHINode *' data-ref="88PN" data-ref-filename="88PN"><a class="local col8 ref" href="#88PN" title='PN' data-ref="88PN" data-ref-filename="88PN">PN</a></dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode" data-ref-filename="llvm..PHINode">PHINode</a>&gt;(<a class="local col7 ref" href="#87V" title='V' data-ref="87V" data-ref-filename="87V">V</a>)) {</td></tr>
<tr><th id="389">389</th><td>      <i>// PHI node should have single use unless it is the root node, then it</i></td></tr>
<tr><th id="390">390</th><td><i>      // has 2 uses.</i></td></tr>
<tr><th id="391">391</th><td>      <b>if</b> (!<a class="local col8 ref" href="#88PN" title='PN' data-ref="88PN" data-ref-filename="88PN">PN</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value8hasNUsesEj" title='llvm::Value::hasNUses' data-ref="_ZNK4llvm5Value8hasNUsesEj" data-ref-filename="_ZNK4llvm5Value8hasNUsesEj">hasNUses</a>(<a class="local col8 ref" href="#88PN" title='PN' data-ref="88PN" data-ref-filename="88PN">PN</a> == <a class="local col3 ref" href="#83Root" title='Root' data-ref="83Root" data-ref-filename="83Root">Root</a> ? <var>2</var> : <var>1</var>))</td></tr>
<tr><th id="392">392</th><td>        <b>break</b>;</td></tr>
<tr><th id="393">393</th><td></td></tr>
<tr><th id="394">394</th><td>      <i>// Push incoming values to the worklist.</i></td></tr>
<tr><th id="395">395</th><td>      <a class="ref fn" href="../../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12append_rangeERT_OT0_" title='llvm::append_range' data-ref="_ZN4llvm12append_rangeERT_OT0_" data-ref-filename="_ZN4llvm12append_rangeERT_OT0_">append_range</a>(<span class='refarg'><a class="local col6 ref" href="#86Worklist" title='Worklist' data-ref="86Worklist" data-ref-filename="86Worklist">Worklist</a></span>, <a class="local col8 ref" href="#88PN" title='PN' data-ref="88PN" data-ref-filename="88PN">PN</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode15incoming_valuesEv" title='llvm::PHINode::incoming_values' data-ref="_ZN4llvm7PHINode15incoming_valuesEv" data-ref-filename="_ZN4llvm7PHINode15incoming_valuesEv">incoming_values</a>());</td></tr>
<tr><th id="396">396</th><td></td></tr>
<tr><th id="397">397</th><td>      <b>continue</b>;</td></tr>
<tr><th id="398">398</th><td>    }</td></tr>
<tr><th id="399">399</th><td></td></tr>
<tr><th id="400">400</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col9 decl" id="89BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="89BO" data-ref-filename="89BO"><a class="local col9 ref" href="#89BO" title='BO' data-ref="89BO" data-ref-filename="89BO">BO</a></dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator" data-ref-filename="llvm..BinaryOperator">BinaryOperator</a>&gt;(<a class="local col7 ref" href="#87V" title='V' data-ref="87V" data-ref-filename="87V">V</a>)) {</td></tr>
<tr><th id="401">401</th><td>      <b>if</b> (<a class="local col9 ref" href="#89BO" title='BO' data-ref="89BO" data-ref-filename="89BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv" data-ref-filename="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#147" title='llvm::Instruction::Add' data-ref="llvm::Instruction::Add" data-ref-filename="llvm..Instruction..Add">Add</a>) {</td></tr>
<tr><th id="402">402</th><td>        <i>// Simple case. Single use, just push its operands to the worklist.</i></td></tr>
<tr><th id="403">403</th><td>        <b>if</b> (<a class="local col9 ref" href="#89BO" title='BO' data-ref="89BO" data-ref-filename="89BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value8hasNUsesEj" title='llvm::Value::hasNUses' data-ref="_ZNK4llvm5Value8hasNUsesEj" data-ref-filename="_ZNK4llvm5Value8hasNUsesEj">hasNUses</a>(<a class="local col9 ref" href="#89BO" title='BO' data-ref="89BO" data-ref-filename="89BO">BO</a> == <a class="local col3 ref" href="#83Root" title='Root' data-ref="83Root" data-ref-filename="83Root">Root</a> ? <var>2</var> : <var>1</var>)) {</td></tr>
<tr><th id="404">404</th><td>          <a class="ref fn" href="../../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12append_rangeERT_OT0_" title='llvm::append_range' data-ref="_ZN4llvm12append_rangeERT_OT0_" data-ref-filename="_ZN4llvm12append_rangeERT_OT0_">append_range</a>(<span class='refarg'><a class="local col6 ref" href="#86Worklist" title='Worklist' data-ref="86Worklist" data-ref-filename="86Worklist">Worklist</a></span>, <a class="local col9 ref" href="#89BO" title='BO' data-ref="89BO" data-ref-filename="89BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User8operandsEv" title='llvm::User::operands' data-ref="_ZN4llvm4User8operandsEv" data-ref-filename="_ZN4llvm4User8operandsEv">operands</a>());</td></tr>
<tr><th id="405">405</th><td>          <b>continue</b>;</td></tr>
<tr><th id="406">406</th><td>        }</td></tr>
<tr><th id="407">407</th><td></td></tr>
<tr><th id="408">408</th><td>        <i>// If there is additional use, make sure it is an unvisited phi that</i></td></tr>
<tr><th id="409">409</th><td><i>        // gets us back to this node.</i></td></tr>
<tr><th id="410">410</th><td>        <b>if</b> (<a class="local col9 ref" href="#89BO" title='BO' data-ref="89BO" data-ref-filename="89BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value8hasNUsesEj" title='llvm::Value::hasNUses' data-ref="_ZNK4llvm5Value8hasNUsesEj" data-ref-filename="_ZNK4llvm5Value8hasNUsesEj">hasNUses</a>(<a class="local col9 ref" href="#89BO" title='BO' data-ref="89BO" data-ref-filename="89BO">BO</a> == <a class="local col3 ref" href="#83Root" title='Root' data-ref="83Root" data-ref-filename="83Root">Root</a> ? <var>3</var> : <var>2</var>)) {</td></tr>
<tr><th id="411">411</th><td>          <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode" data-ref-filename="llvm..PHINode">PHINode</a> *<dfn class="local col0 decl" id="90PN" title='PN' data-type='llvm::PHINode *' data-ref="90PN" data-ref-filename="90PN">PN</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="412">412</th><td>          <b>for</b> (<em>auto</em> *<dfn class="local col1 decl" id="91U" title='U' data-type='llvm::User *' data-ref="91U" data-ref-filename="91U">U</dfn> : <a class="local col3 ref" href="#83Root" title='Root' data-ref="83Root" data-ref-filename="83Root">Root</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value5usersEv" title='llvm::Value::users' data-ref="_ZN4llvm5Value5usersEv" data-ref-filename="_ZN4llvm5Value5usersEv">users</a>())</td></tr>
<tr><th id="413">413</th><td>            <b>if</b> (<em>auto</em> *<dfn class="local col2 decl" id="92P" title='P' data-type='llvm::PHINode *' data-ref="92P" data-ref-filename="92P"><a class="local col2 ref" href="#92P" title='P' data-ref="92P" data-ref-filename="92P">P</a></dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode" data-ref-filename="llvm..PHINode">PHINode</a>&gt;(<a class="local col1 ref" href="#91U" title='U' data-ref="91U" data-ref-filename="91U">U</a>))</td></tr>
<tr><th id="414">414</th><td>              <b>if</b> (!<a class="local col5 ref" href="#85Visited" title='Visited' data-ref="85Visited" data-ref-filename="85Visited">Visited</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZNK4llvm15SmallPtrSetImpl5countENS_22add_const_past_pointerIT_vE4typeE" title='llvm::SmallPtrSetImpl::count' data-ref="_ZNK4llvm15SmallPtrSetImpl5countENS_22add_const_past_pointerIT_vE4typeE" data-ref-filename="_ZNK4llvm15SmallPtrSetImpl5countENS_22add_const_past_pointerIT_vE4typeE">count</a>(<a class="local col2 ref" href="#92P" title='P' data-ref="92P" data-ref-filename="92P">P</a>))</td></tr>
<tr><th id="415">415</th><td>                <a class="local col0 ref" href="#90PN" title='PN' data-ref="90PN" data-ref-filename="90PN">PN</a> = <a class="local col2 ref" href="#92P" title='P' data-ref="92P" data-ref-filename="92P">P</a>;</td></tr>
<tr><th id="416">416</th><td></td></tr>
<tr><th id="417">417</th><td>          <i>// If we didn't find a 2-input PHI then this isn't a case we can</i></td></tr>
<tr><th id="418">418</th><td><i>          // handle.</i></td></tr>
<tr><th id="419">419</th><td>          <b>if</b> (!<a class="local col0 ref" href="#90PN" title='PN' data-ref="90PN" data-ref-filename="90PN">PN</a> || <a class="local col0 ref" href="#90PN" title='PN' data-ref="90PN" data-ref-filename="90PN">PN</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode20getNumIncomingValuesEv" title='llvm::PHINode::getNumIncomingValues' data-ref="_ZNK4llvm7PHINode20getNumIncomingValuesEv" data-ref-filename="_ZNK4llvm7PHINode20getNumIncomingValuesEv">getNumIncomingValues</a>() != <var>2</var>)</td></tr>
<tr><th id="420">420</th><td>            <b>continue</b>;</td></tr>
<tr><th id="421">421</th><td></td></tr>
<tr><th id="422">422</th><td>          <i>// Walk forward from this phi to see if it reaches back to this add.</i></td></tr>
<tr><th id="423">423</th><td>          <b>if</b> (!<a class="tu ref fn" href="#_ZL18isReachableFromPHIPN4llvm7PHINodeEPNS_14BinaryOperatorE" title='isReachableFromPHI' data-use='c' data-ref="_ZL18isReachableFromPHIPN4llvm7PHINodeEPNS_14BinaryOperatorE" data-ref-filename="_ZL18isReachableFromPHIPN4llvm7PHINodeEPNS_14BinaryOperatorE">isReachableFromPHI</a>(<a class="local col0 ref" href="#90PN" title='PN' data-ref="90PN" data-ref-filename="90PN">PN</a>, <a class="local col9 ref" href="#89BO" title='BO' data-ref="89BO" data-ref-filename="89BO">BO</a>))</td></tr>
<tr><th id="424">424</th><td>            <b>continue</b>;</td></tr>
<tr><th id="425">425</th><td></td></tr>
<tr><th id="426">426</th><td>          <i>// The phi forms a loop with this Add, push its operands.</i></td></tr>
<tr><th id="427">427</th><td>          <a class="ref fn" href="../../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12append_rangeERT_OT0_" title='llvm::append_range' data-ref="_ZN4llvm12append_rangeERT_OT0_" data-ref-filename="_ZN4llvm12append_rangeERT_OT0_">append_range</a>(<span class='refarg'><a class="local col6 ref" href="#86Worklist" title='Worklist' data-ref="86Worklist" data-ref-filename="86Worklist">Worklist</a></span>, <a class="local col9 ref" href="#89BO" title='BO' data-ref="89BO" data-ref-filename="89BO">BO</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User8operandsEv" title='llvm::User::operands' data-ref="_ZN4llvm4User8operandsEv" data-ref-filename="_ZN4llvm4User8operandsEv">operands</a>());</td></tr>
<tr><th id="428">428</th><td>        }</td></tr>
<tr><th id="429">429</th><td>      }</td></tr>
<tr><th id="430">430</th><td>    }</td></tr>
<tr><th id="431">431</th><td></td></tr>
<tr><th id="432">432</th><td>    <i>// Not an add or phi, make it a leaf.</i></td></tr>
<tr><th id="433">433</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col3 decl" id="93I" title='I' data-type='llvm::Instruction *' data-ref="93I" data-ref-filename="93I"><a class="local col3 ref" href="#93I" title='I' data-ref="93I" data-ref-filename="93I">I</a></dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a>&gt;(<a class="local col7 ref" href="#87V" title='V' data-ref="87V" data-ref-filename="87V">V</a>)) {</td></tr>
<tr><th id="434">434</th><td>      <b>if</b> (!<a class="local col7 ref" href="#87V" title='V' data-ref="87V" data-ref-filename="87V">V</a>-&gt;<a class="ref fn" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value8hasNUsesEj" title='llvm::Value::hasNUses' data-ref="_ZNK4llvm5Value8hasNUsesEj" data-ref-filename="_ZNK4llvm5Value8hasNUsesEj">hasNUses</a>(<a class="local col3 ref" href="#93I" title='I' data-ref="93I" data-ref-filename="93I">I</a> == <a class="local col3 ref" href="#83Root" title='Root' data-ref="83Root" data-ref-filename="83Root">Root</a> ? <var>2</var> : <var>1</var>))</td></tr>
<tr><th id="435">435</th><td>        <b>continue</b>;</td></tr>
<tr><th id="436">436</th><td></td></tr>
<tr><th id="437">437</th><td>      <i>// Add this as a leaf.</i></td></tr>
<tr><th id="438">438</th><td>      <a class="local col4 ref" href="#84Leaves" title='Leaves' data-ref="84Leaves" data-ref-filename="84Leaves">Leaves</a>.<a class="ref fn" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backENSt11conditionalIL_ZNS2_17TakesParamByValueEES1_RKS1_E4typeE" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backENSt11conditionalIL_ZNS2_17TakesParamByValueEES1_RKS1_E4typeE" data-ref-filename="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backENSt11conditionalIL_ZNS2_17TakesParamByValueEES1_RKS1_E4typeE">push_back</a>(<a class="local col3 ref" href="#93I" title='I' data-ref="93I" data-ref-filename="93I">I</a>);</td></tr>
<tr><th id="439">439</th><td>    }</td></tr>
<tr><th id="440">440</th><td>  }</td></tr>
<tr><th id="441">441</th><td>}</td></tr>
<tr><th id="442">442</th><td></td></tr>
<tr><th id="443">443</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::X86PartialReduction" title='(anonymous namespace)::X86PartialReduction' data-ref="(anonymousnamespace)::X86PartialReduction" data-ref-filename="(anonymousnamespace)..X86PartialReduction">X86PartialReduction</a>::<dfn class="virtual tu decl def fn" id="_ZN12_GLOBAL__N_119X86PartialReduction13runOnFunctionERN4llvm8FunctionE" title='(anonymous namespace)::X86PartialReduction::runOnFunction' data-type='bool (anonymous namespace)::X86PartialReduction::runOnFunction(llvm::Function &amp; F)' data-ref="_ZN12_GLOBAL__N_119X86PartialReduction13runOnFunctionERN4llvm8FunctionE" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReduction13runOnFunctionERN4llvm8FunctionE">runOnFunction</dfn>(<a class="type" href="../../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function" data-ref-filename="llvm..Function">Function</a> &amp;<dfn class="local col4 decl" id="94F" title='F' data-type='llvm::Function &amp;' data-ref="94F" data-ref-filename="94F">F</dfn>) {</td></tr>
<tr><th id="444">444</th><td>  <b>if</b> (<a class="member fn" href="../../../include/llvm/Pass.h.html#_ZNK4llvm12FunctionPass12skipFunctionERKNS_8FunctionE" title='llvm::FunctionPass::skipFunction' data-ref="_ZNK4llvm12FunctionPass12skipFunctionERKNS_8FunctionE" data-ref-filename="_ZNK4llvm12FunctionPass12skipFunctionERKNS_8FunctionE">skipFunction</a>(<a class="local col4 ref" href="#94F" title='F' data-ref="94F" data-ref-filename="94F">F</a>))</td></tr>
<tr><th id="445">445</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="446">446</th><td></td></tr>
<tr><th id="447">447</th><td>  <em>auto</em> *<dfn class="local col5 decl" id="95TPC" title='TPC' data-type='llvm::TargetPassConfig *' data-ref="95TPC" data-ref-filename="95TPC">TPC</dfn> = <a class="member fn" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass22getAnalysisIfAvailableEv" title='llvm::Pass::getAnalysisIfAvailable' data-ref="_ZNK4llvm4Pass22getAnalysisIfAvailableEv" data-ref-filename="_ZNK4llvm4Pass22getAnalysisIfAvailableEv">getAnalysisIfAvailable</a>&lt;<a class="type" href="../../../include/llvm/CodeGen/TargetPassConfig.h.html#llvm::TargetPassConfig" title='llvm::TargetPassConfig' data-ref="llvm::TargetPassConfig" data-ref-filename="llvm..TargetPassConfig">TargetPassConfig</a>&gt;();</td></tr>
<tr><th id="448">448</th><td>  <b>if</b> (!<a class="local col5 ref" href="#95TPC" title='TPC' data-ref="95TPC" data-ref-filename="95TPC">TPC</a>)</td></tr>
<tr><th id="449">449</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="450">450</th><td></td></tr>
<tr><th id="451">451</th><td>  <em>auto</em> &amp;<dfn class="local col6 decl" id="96TM" title='TM' data-type='llvm::X86TargetMachine &amp;' data-ref="96TM" data-ref-filename="96TM">TM</dfn> = <a class="local col5 ref" href="#95TPC" title='TPC' data-ref="95TPC" data-ref-filename="95TPC">TPC</a>-&gt;<a class="ref fn" href="../../../include/llvm/CodeGen/TargetPassConfig.h.html#_ZNK4llvm16TargetPassConfig5getTMEv" title='llvm::TargetPassConfig::getTM' data-ref="_ZNK4llvm16TargetPassConfig5getTMEv" data-ref-filename="_ZNK4llvm16TargetPassConfig5getTMEv">getTM</a>&lt;<a class="type" href="X86TargetMachine.h.html#llvm::X86TargetMachine" title='llvm::X86TargetMachine' data-ref="llvm::X86TargetMachine" data-ref-filename="llvm..X86TargetMachine">X86TargetMachine</a>&gt;();</td></tr>
<tr><th id="452">452</th><td>  <a class="tu member field" href="#(anonymousnamespace)::X86PartialReduction::ST" title='(anonymous namespace)::X86PartialReduction::ST' data-use='w' data-ref="(anonymousnamespace)::X86PartialReduction::ST" data-ref-filename="(anonymousnamespace)..X86PartialReduction..ST">ST</a> = <a class="local col6 ref" href="#96TM" title='TM' data-ref="96TM" data-ref-filename="96TM">TM</a>.<a class="virtual ref fn" href="X86TargetMachine.h.html#_ZNK4llvm16X86TargetMachine16getSubtargetImplERKNS_8FunctionE" title='llvm::X86TargetMachine::getSubtargetImpl' data-ref="_ZNK4llvm16X86TargetMachine16getSubtargetImplERKNS_8FunctionE" data-ref-filename="_ZNK4llvm16X86TargetMachine16getSubtargetImplERKNS_8FunctionE">getSubtargetImpl</a>(<a class="local col4 ref" href="#94F" title='F' data-ref="94F" data-ref-filename="94F">F</a>);</td></tr>
<tr><th id="453">453</th><td></td></tr>
<tr><th id="454">454</th><td>  <a class="tu member field" href="#(anonymousnamespace)::X86PartialReduction::DL" title='(anonymous namespace)::X86PartialReduction::DL' data-use='w' data-ref="(anonymousnamespace)::X86PartialReduction::DL" data-ref-filename="(anonymousnamespace)..X86PartialReduction..DL">DL</a> = &amp;<a class="local col4 ref" href="#94F" title='F' data-ref="94F" data-ref-filename="94F">F</a>.<a class="ref fn" href="../../../include/llvm/IR/GlobalValue.h.html#_ZN4llvm11GlobalValue9getParentEv" title='llvm::GlobalValue::getParent' data-ref="_ZN4llvm11GlobalValue9getParentEv" data-ref-filename="_ZN4llvm11GlobalValue9getParentEv">getParent</a>()-&gt;<a class="ref fn" href="../../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv" data-ref-filename="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="455">455</th><td></td></tr>
<tr><th id="456">456</th><td>  <em>bool</em> <dfn class="local col7 decl" id="97MadeChange" title='MadeChange' data-type='bool' data-ref="97MadeChange" data-ref-filename="97MadeChange">MadeChange</dfn> = <b>false</b>;</td></tr>
<tr><th id="457">457</th><td>  <b>for</b> (<em>auto</em> &amp;<dfn class="local col8 decl" id="98BB" title='BB' data-type='llvm::BasicBlock &amp;' data-ref="98BB" data-ref-filename="98BB">BB</dfn> : <a class="local col4 ref" href="#94F" title='F' data-ref="94F" data-ref-filename="94F">F</a>) {</td></tr>
<tr><th id="458">458</th><td>    <b>for</b> (<em>auto</em> &amp;<dfn class="local col9 decl" id="99I" title='I' data-type='llvm::Instruction &amp;' data-ref="99I" data-ref-filename="99I">I</dfn> : <a class="local col8 ref" href="#98BB" title='BB' data-ref="98BB" data-ref-filename="98BB">BB</a>) {</td></tr>
<tr><th id="459">459</th><td>      <em>auto</em> *<dfn class="local col0 decl" id="100EE" title='EE' data-type='llvm::ExtractElementInst *' data-ref="100EE" data-ref-filename="100EE">EE</dfn> = <a class="ref fn" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ExtractElementInst" title='llvm::ExtractElementInst' data-ref="llvm::ExtractElementInst" data-ref-filename="llvm..ExtractElementInst">ExtractElementInst</a>&gt;(&amp;<a class="local col9 ref" href="#99I" title='I' data-ref="99I" data-ref-filename="99I">I</a>);</td></tr>
<tr><th id="460">460</th><td>      <b>if</b> (!<a class="local col0 ref" href="#100EE" title='EE' data-ref="100EE" data-ref-filename="100EE">EE</a>)</td></tr>
<tr><th id="461">461</th><td>        <b>continue</b>;</td></tr>
<tr><th id="462">462</th><td></td></tr>
<tr><th id="463">463</th><td>      <i>// First find a reduction tree.</i></td></tr>
<tr><th id="464">464</th><td><i>      // FIXME: Do we need to handle other opcodes than Add?</i></td></tr>
<tr><th id="465">465</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</a> *<dfn class="local col1 decl" id="101Root" title='Root' data-type='llvm::Value *' data-ref="101Root" data-ref-filename="101Root">Root</dfn> = <a class="tu ref fn" href="#_ZL17matchAddReductionRKN4llvm18ExtractElementInstE" title='matchAddReduction' data-use='c' data-ref="_ZL17matchAddReductionRKN4llvm18ExtractElementInstE" data-ref-filename="_ZL17matchAddReductionRKN4llvm18ExtractElementInstE">matchAddReduction</a>(*<a class="local col0 ref" href="#100EE" title='EE' data-ref="100EE" data-ref-filename="100EE">EE</a>);</td></tr>
<tr><th id="466">466</th><td>      <b>if</b> (!<a class="local col1 ref" href="#101Root" title='Root' data-ref="101Root" data-ref-filename="101Root">Root</a>)</td></tr>
<tr><th id="467">467</th><td>        <b>continue</b>;</td></tr>
<tr><th id="468">468</th><td></td></tr>
<tr><th id="469">469</th><td>      <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a> *, <var>8</var>&gt; <a class="ref fn fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev" data-ref-filename="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col2 decl" id="102Leaves" title='Leaves' data-type='SmallVector&lt;llvm::Instruction *, 8&gt;' data-ref="102Leaves" data-ref-filename="102Leaves">Leaves</dfn>;</td></tr>
<tr><th id="470">470</th><td>      <a class="tu ref fn" href="#_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE" title='collectLeaves' data-use='c' data-ref="_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE" data-ref-filename="_ZL13collectLeavesPN4llvm5ValueERNS_15SmallVectorImplIPNS_11InstructionEEE">collectLeaves</a>(<a class="local col1 ref" href="#101Root" title='Root' data-ref="101Root" data-ref-filename="101Root">Root</a>, <span class='refarg'><a class="local col2 ref" href="#102Leaves" title='Leaves' data-ref="102Leaves" data-ref-filename="102Leaves">Leaves</a></span>);</td></tr>
<tr><th id="471">471</th><td></td></tr>
<tr><th id="472">472</th><td>      <b>for</b> (<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction" data-ref-filename="llvm..Instruction">Instruction</a> *<dfn class="local col3 decl" id="103I" title='I' data-type='llvm::Instruction *' data-ref="103I" data-ref-filename="103I">I</dfn> : <a class="local col2 ref" href="#102Leaves" title='Leaves' data-ref="102Leaves" data-ref-filename="102Leaves">Leaves</a>) {</td></tr>
<tr><th id="473">473</th><td>        <b>if</b> (<a class="tu member fn" href="#_ZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionE" title='(anonymous namespace)::X86PartialReduction::tryMAddReplacement' data-use='c' data-ref="_ZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionE" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReduction18tryMAddReplacementEPN4llvm11InstructionE">tryMAddReplacement</a>(<a class="local col3 ref" href="#103I" title='I' data-ref="103I" data-ref-filename="103I">I</a>)) {</td></tr>
<tr><th id="474">474</th><td>          <a class="local col7 ref" href="#97MadeChange" title='MadeChange' data-ref="97MadeChange" data-ref-filename="97MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="475">475</th><td>          <b>continue</b>;</td></tr>
<tr><th id="476">476</th><td>        }</td></tr>
<tr><th id="477">477</th><td></td></tr>
<tr><th id="478">478</th><td>        <i>// Don't do SAD matching on the root node. SelectionDAG already</i></td></tr>
<tr><th id="479">479</th><td><i>        // has support for that and currently generates better code.</i></td></tr>
<tr><th id="480">480</th><td>        <b>if</b> (<a class="local col3 ref" href="#103I" title='I' data-ref="103I" data-ref-filename="103I">I</a> != <a class="local col1 ref" href="#101Root" title='Root' data-ref="101Root" data-ref-filename="101Root">Root</a> &amp;&amp; <a class="tu member fn" href="#_ZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionE" title='(anonymous namespace)::X86PartialReduction::trySADReplacement' data-use='c' data-ref="_ZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionE" data-ref-filename="_ZN12_GLOBAL__N_119X86PartialReduction17trySADReplacementEPN4llvm11InstructionE">trySADReplacement</a>(<a class="local col3 ref" href="#103I" title='I' data-ref="103I" data-ref-filename="103I">I</a>))</td></tr>
<tr><th id="481">481</th><td>          <a class="local col7 ref" href="#97MadeChange" title='MadeChange' data-ref="97MadeChange" data-ref-filename="97MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="482">482</th><td>      }</td></tr>
<tr><th id="483">483</th><td>    }</td></tr>
<tr><th id="484">484</th><td>  }</td></tr>
<tr><th id="485">485</th><td></td></tr>
<tr><th id="486">486</th><td>  <b>return</b> <a class="local col7 ref" href="#97MadeChange" title='MadeChange' data-ref="97MadeChange" data-ref-filename="97MadeChange">MadeChange</a>;</td></tr>
<tr><th id="487">487</th><td>}</td></tr>
<tr><th id="488">488</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-01</em> from project llvm revision <em>12</em>