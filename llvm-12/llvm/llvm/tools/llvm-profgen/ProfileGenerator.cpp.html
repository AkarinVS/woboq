<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ProfileGenerator.cpp source code [llvm/llvm/tools/llvm-profgen/ProfileGenerator.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/llvm/tools/llvm-profgen/ProfileGenerator.cpp'; var root_path = '../../../..'; var data_path = '../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>llvm</a>/<a href='../..'>llvm</a>/<a href='..'>tools</a>/<a href='./'>llvm-profgen</a>/<a href='ProfileGenerator.cpp.html'>ProfileGenerator.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===-- ProfileGenerator.cpp - Profile Generator  ---------------*- C++ -*-===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td></td></tr>
<tr><th id="9">9</th><td><u>#include <a href="ProfileGenerator.h.html">"ProfileGenerator.h"</a></u></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::opt" title='llvm::cl::opt' data-ref="llvm::cl::opt" data-ref-filename="llvm..cl..opt">opt</a>&lt;<span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span>&gt; <dfn class="tu decl def" id="OutputFilename" title='OutputFilename' data-type='cl::opt&lt;std::string&gt;' data-ref="OutputFilename" data-ref-filename="OutputFilename">OutputFilename</dfn><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl3optC1EDpRKTL0__" title='llvm::cl::opt::opt&lt;DataType, ExternalStorage, ParserClass&gt;' data-ref="_ZN4llvm2cl3optC1EDpRKTL0__" data-ref-filename="_ZN4llvm2cl3optC1EDpRKTL0__">(</a><q>"output"</q>, <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::value_desc" title='llvm::cl::value_desc' data-ref="llvm::cl::value_desc" data-ref-filename="llvm..cl..value_desc">value_desc</a><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl10value_descC1ENS_9StringRefE" title='llvm::cl::value_desc::value_desc' data-ref="_ZN4llvm2cl10value_descC1ENS_9StringRefE" data-ref-filename="_ZN4llvm2cl10value_descC1ENS_9StringRefE">(</a><a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>"output"</q>),</td></tr>
<tr><th id="12">12</th><td>                                           <span class="namespace">cl::</span><a class="enum" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::Required" title='llvm::cl::Required' data-ref="llvm::cl::Required" data-ref-filename="llvm..cl..Required">Required</a>,</td></tr>
<tr><th id="13">13</th><td>                                           <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::desc" title='llvm::cl::desc' data-ref="llvm::cl::desc" data-ref-filename="llvm..cl..desc">desc</a><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4descC1ENS_9StringRefE" title='llvm::cl::desc::desc' data-ref="_ZN4llvm2cl4descC1ENS_9StringRefE" data-ref-filename="_ZN4llvm2cl4descC1ENS_9StringRefE">(</a><a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>"Output profile file"</q>));</td></tr>
<tr><th id="14">14</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::alias" title='llvm::cl::alias' data-ref="llvm::cl::alias" data-ref-filename="llvm..cl..alias">alias</a> <dfn class="tu decl def" id="OutputA" title='OutputA' data-type='cl::alias' data-ref="OutputA" data-ref-filename="OutputA">OutputA</dfn><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl5aliasC1EDpRKT_" title='llvm::cl::alias::alias' data-ref="_ZN4llvm2cl5aliasC1EDpRKT_" data-ref-filename="_ZN4llvm2cl5aliasC1EDpRKT_">(</a><q>"o"</q>, <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::desc" title='llvm::cl::desc' data-ref="llvm::cl::desc" data-ref-filename="llvm..cl..desc">desc</a><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4descC1ENS_9StringRefE" title='llvm::cl::desc::desc' data-ref="_ZN4llvm2cl4descC1ENS_9StringRefE" data-ref-filename="_ZN4llvm2cl4descC1ENS_9StringRefE">(</a><a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>"Alias for --output"</q>),</td></tr>
<tr><th id="15">15</th><td>                         <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::aliasopt" title='llvm::cl::aliasopt' data-ref="llvm::cl::aliasopt" data-ref-filename="llvm..cl..aliasopt">aliasopt</a><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl8aliasoptC1ERNS0_6OptionE" title='llvm::cl::aliasopt::aliasopt' data-ref="_ZN4llvm2cl8aliasoptC1ERNS0_6OptionE" data-ref-filename="_ZN4llvm2cl8aliasoptC1ERNS0_6OptionE">(</a><a class="tu ref" href="#OutputFilename" title='OutputFilename' data-use='a' data-ref="OutputFilename" data-ref-filename="OutputFilename">OutputFilename</a>));</td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::opt" title='llvm::cl::opt' data-ref="llvm::cl::opt" data-ref-filename="llvm..cl..opt">opt</a>&lt;<a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SampleProfileFormat" title='llvm::sampleprof::SampleProfileFormat' data-ref="llvm::sampleprof::SampleProfileFormat" data-ref-filename="llvm..sampleprof..SampleProfileFormat">SampleProfileFormat</a>&gt; <dfn class="tu decl def" id="OutputFormat" title='OutputFormat' data-type='cl::opt&lt;SampleProfileFormat&gt;' data-ref="OutputFormat" data-ref-filename="OutputFormat">OutputFormat</dfn><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl3optC1EDpRKTL0__" title='llvm::cl::opt::opt&lt;DataType, ExternalStorage, ParserClass&gt;' data-ref="_ZN4llvm2cl3optC1EDpRKTL0__" data-ref-filename="_ZN4llvm2cl3optC1EDpRKTL0__">(</a></td></tr>
<tr><th id="18">18</th><td>    <q>"format"</q>, <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::desc" title='llvm::cl::desc' data-ref="llvm::cl::desc" data-ref-filename="llvm..cl..desc">desc</a><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4descC1ENS_9StringRefE" title='llvm::cl::desc::desc' data-ref="_ZN4llvm2cl4descC1ENS_9StringRefE" data-ref-filename="_ZN4llvm2cl4descC1ENS_9StringRefE">(</a><a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>"Format of output profile"</q>), <span class="namespace">cl::</span><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4initERKT_" title='llvm::cl::init' data-ref="_ZN4llvm2cl4initERKT_" data-ref-filename="_ZN4llvm2cl4initERKT_">init</a>(<a class="enum" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SPF_Text" title='llvm::sampleprof::SPF_Text' data-ref="llvm::sampleprof::SPF_Text" data-ref-filename="llvm..sampleprof..SPF_Text">SPF_Text</a>),</td></tr>
<tr><th id="19">19</th><td>    <span class="namespace">cl::</span><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl6valuesEDpT_" title='llvm::cl::values' data-ref="_ZN4llvm2cl6valuesEDpT_" data-ref-filename="_ZN4llvm2cl6valuesEDpT_">values</a>(</td></tr>
<tr><th id="20">20</th><td>        <a class="macro" href="../../include/llvm/Support/CommandLine.h.html#671" title="llvm::cl::OptionEnumValue { &quot;binary&quot;, int(SPF_Binary), &quot;Binary encoding (default)&quot; }" data-ref="_M/clEnumValN">clEnumValN</a>(<a class="enum" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SPF_Binary" title='llvm::sampleprof::SPF_Binary' data-ref="llvm::sampleprof::SPF_Binary" data-ref-filename="llvm..sampleprof..SPF_Binary">SPF_Binary</a>, <q>"binary"</q>, <q>"Binary encoding (default)"</q>),</td></tr>
<tr><th id="21">21</th><td>        <a class="macro" href="../../include/llvm/Support/CommandLine.h.html#671" title="llvm::cl::OptionEnumValue { &quot;compbinary&quot;, int(SPF_Compact_Binary), &quot;Compact binary encoding&quot; }" data-ref="_M/clEnumValN">clEnumValN</a>(<a class="enum" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SPF_Compact_Binary" title='llvm::sampleprof::SPF_Compact_Binary' data-ref="llvm::sampleprof::SPF_Compact_Binary" data-ref-filename="llvm..sampleprof..SPF_Compact_Binary">SPF_Compact_Binary</a>, <q>"compbinary"</q>, <q>"Compact binary encoding"</q>),</td></tr>
<tr><th id="22">22</th><td>        <a class="macro" href="../../include/llvm/Support/CommandLine.h.html#671" title="llvm::cl::OptionEnumValue { &quot;extbinary&quot;, int(SPF_Ext_Binary), &quot;Extensible binary encoding&quot; }" data-ref="_M/clEnumValN">clEnumValN</a>(<a class="enum" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SPF_Ext_Binary" title='llvm::sampleprof::SPF_Ext_Binary' data-ref="llvm::sampleprof::SPF_Ext_Binary" data-ref-filename="llvm..sampleprof..SPF_Ext_Binary">SPF_Ext_Binary</a>, <q>"extbinary"</q>, <q>"Extensible binary encoding"</q>),</td></tr>
<tr><th id="23">23</th><td>        <a class="macro" href="../../include/llvm/Support/CommandLine.h.html#671" title="llvm::cl::OptionEnumValue { &quot;text&quot;, int(SPF_Text), &quot;Text encoding&quot; }" data-ref="_M/clEnumValN">clEnumValN</a>(<a class="enum" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SPF_Text" title='llvm::sampleprof::SPF_Text' data-ref="llvm::sampleprof::SPF_Text" data-ref-filename="llvm..sampleprof..SPF_Text">SPF_Text</a>, <q>"text"</q>, <q>"Text encoding"</q>),</td></tr>
<tr><th id="24">24</th><td>        <a class="macro" href="../../include/llvm/Support/CommandLine.h.html#671" title="llvm::cl::OptionEnumValue { &quot;gcc&quot;, int(SPF_GCC), &quot;GCC encoding (only meaningful for -sample)&quot; }" data-ref="_M/clEnumValN">clEnumValN</a>(<a class="enum" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SPF_GCC" title='llvm::sampleprof::SPF_GCC' data-ref="llvm::sampleprof::SPF_GCC" data-ref-filename="llvm..sampleprof..SPF_GCC">SPF_GCC</a>, <q>"gcc"</q>,</td></tr>
<tr><th id="25">25</th><td>                   <q>"GCC encoding (only meaningful for -sample)"</q>)));</td></tr>
<tr><th id="26">26</th><td></td></tr>
<tr><th id="27">27</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::opt" title='llvm::cl::opt' data-ref="llvm::cl::opt" data-ref-filename="llvm..cl..opt">opt</a>&lt;<a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>, <b>true</b>&gt; <dfn class="tu decl def" id="RecursionCompression" title='RecursionCompression' data-type='cl::opt&lt;int32_t, true&gt;' data-ref="RecursionCompression" data-ref-filename="RecursionCompression">RecursionCompression</dfn><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl3optC1EDpRKTL0__" title='llvm::cl::opt::opt&lt;DataType, ExternalStorage, ParserClass&gt;' data-ref="_ZN4llvm2cl3optC1EDpRKTL0__" data-ref-filename="_ZN4llvm2cl3optC1EDpRKTL0__">(</a></td></tr>
<tr><th id="28">28</th><td>    <q>"compress-recursion"</q>,</td></tr>
<tr><th id="29">29</th><td>    <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::desc" title='llvm::cl::desc' data-ref="llvm::cl::desc" data-ref-filename="llvm..cl..desc">desc</a><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4descC1ENS_9StringRefE" title='llvm::cl::desc::desc' data-ref="_ZN4llvm2cl4descC1ENS_9StringRefE" data-ref-filename="_ZN4llvm2cl4descC1ENS_9StringRefE">(</a><a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>"Compressing recursion by deduplicating adjacent frame "</q></td></tr>
<tr><th id="30">30</th><td>             <q>"sequences up to the specified size. -1 means no size limit."</q>),</td></tr>
<tr><th id="31">31</th><td>    <span class="namespace">cl::</span><a class="enum" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::Hidden" title='llvm::cl::Hidden' data-ref="llvm::cl::Hidden" data-ref-filename="llvm..cl..Hidden">Hidden</a>,</td></tr>
<tr><th id="32">32</th><td>    <span class="namespace">cl::</span><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl8locationERT_" title='llvm::cl::location' data-ref="_ZN4llvm2cl8locationERT_" data-ref-filename="_ZN4llvm2cl8locationERT_">location</a>(<span class='refarg'><span class="namespace">llvm::sampleprof::</span><a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<a class="ref" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator::MaxCompressionSize" title='llvm::sampleprof::CSProfileGenerator::MaxCompressionSize' data-ref="llvm::sampleprof::CSProfileGenerator::MaxCompressionSize" data-ref-filename="llvm..sampleprof..CSProfileGenerator..MaxCompressionSize">MaxCompressionSize</a></span>));</td></tr>
<tr><th id="33">33</th><td></td></tr>
<tr><th id="34">34</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::opt" title='llvm::cl::opt' data-ref="llvm::cl::opt" data-ref-filename="llvm..cl..opt">opt</a>&lt;<a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>&gt; <dfn class="tu decl def" id="CSProfColdThres" title='CSProfColdThres' data-type='cl::opt&lt;uint64_t&gt;' data-ref="CSProfColdThres" data-ref-filename="CSProfColdThres">CSProfColdThres</dfn><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl3optC1EDpRKTL0__" title='llvm::cl::opt::opt&lt;DataType, ExternalStorage, ParserClass&gt;' data-ref="_ZN4llvm2cl3optC1EDpRKTL0__" data-ref-filename="_ZN4llvm2cl3optC1EDpRKTL0__">(</a></td></tr>
<tr><th id="35">35</th><td>    <q>"csprof-cold-thres"</q>, <span class="namespace">cl::</span><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4initERKT_" title='llvm::cl::init' data-ref="_ZN4llvm2cl4initERKT_" data-ref-filename="_ZN4llvm2cl4initERKT_">init</a>(<var>100</var>), <span class="namespace">cl::</span><a class="enum" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::ZeroOrMore" title='llvm::cl::ZeroOrMore' data-ref="llvm::cl::ZeroOrMore" data-ref-filename="llvm..cl..ZeroOrMore">ZeroOrMore</a>,</td></tr>
<tr><th id="36">36</th><td>    <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::desc" title='llvm::cl::desc' data-ref="llvm::cl::desc" data-ref-filename="llvm..cl..desc">desc</a><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4descC1ENS_9StringRefE" title='llvm::cl::desc::desc' data-ref="_ZN4llvm2cl4descC1ENS_9StringRefE" data-ref-filename="_ZN4llvm2cl4descC1ENS_9StringRefE">(</a><a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>"Specify the total samples threshold for a context profile to "</q></td></tr>
<tr><th id="37">37</th><td>             <q>"be considered cold, any cold profiles will be merged into "</q></td></tr>
<tr><th id="38">38</th><td>             <q>"context-less base profiles"</q>));</td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::opt" title='llvm::cl::opt' data-ref="llvm::cl::opt" data-ref-filename="llvm..cl..opt">opt</a>&lt;<em>bool</em>&gt; <dfn class="tu decl def" id="CSProfKeepCold" title='CSProfKeepCold' data-type='cl::opt&lt;bool&gt;' data-ref="CSProfKeepCold" data-ref-filename="CSProfKeepCold">CSProfKeepCold</dfn><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl3optC1EDpRKTL0__" title='llvm::cl::opt::opt&lt;DataType, ExternalStorage, ParserClass&gt;' data-ref="_ZN4llvm2cl3optC1EDpRKTL0__" data-ref-filename="_ZN4llvm2cl3optC1EDpRKTL0__">(</a></td></tr>
<tr><th id="41">41</th><td>    <q>"csprof-keep-cold"</q>, <span class="namespace">cl::</span><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4initERKT_" title='llvm::cl::init' data-ref="_ZN4llvm2cl4initERKT_" data-ref-filename="_ZN4llvm2cl4initERKT_">init</a>(<b>false</b>), <span class="namespace">cl::</span><a class="enum" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::ZeroOrMore" title='llvm::cl::ZeroOrMore' data-ref="llvm::cl::ZeroOrMore" data-ref-filename="llvm..cl..ZeroOrMore">ZeroOrMore</a>,</td></tr>
<tr><th id="42">42</th><td>    <span class="namespace">cl::</span><a class="type" href="../../include/llvm/Support/CommandLine.h.html#llvm::cl::desc" title='llvm::cl::desc' data-ref="llvm::cl::desc" data-ref-filename="llvm..cl..desc">desc</a><a class="ref fn" href="../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4descC1ENS_9StringRefE" title='llvm::cl::desc::desc' data-ref="_ZN4llvm2cl4descC1ENS_9StringRefE" data-ref-filename="_ZN4llvm2cl4descC1ENS_9StringRefE">(</a><a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>"This works together with --csprof-cold-thres. If the total count "</q></td></tr>
<tr><th id="43">43</th><td>             <q>"of the profile after all merge is done is still smaller than the "</q></td></tr>
<tr><th id="44">44</th><td>             <q>"csprof-cold-thres, it will be trimmed unless csprof-keep-cold "</q></td></tr>
<tr><th id="45">45</th><td>             <q>"flag is specified."</q>));</td></tr>
<tr><th id="46">46</th><td></td></tr>
<tr><th id="47">47</th><td><b>using</b> <b>namespace</b> <span class="namespace">llvm</span>;</td></tr>
<tr><th id="48">48</th><td><b>using</b> <b>namespace</b> <span class="namespace">sampleprof</span>;</td></tr>
<tr><th id="49">49</th><td></td></tr>
<tr><th id="50">50</th><td><b>namespace</b> <span class="namespace">llvm</span> {</td></tr>
<tr><th id="51">51</th><td><b>namespace</b> <span class="namespace">sampleprof</span> {</td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td><i>// Initialize the MaxCompressionSize to -1 which means no size limit</i></td></tr>
<tr><th id="54">54</th><td><a class="typedef" href="../../../../include/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<dfn class="decl def" id="llvm::sampleprof::CSProfileGenerator::MaxCompressionSize" title='llvm::sampleprof::CSProfileGenerator::MaxCompressionSize' data-ref="llvm::sampleprof::CSProfileGenerator::MaxCompressionSize" data-ref-filename="llvm..sampleprof..CSProfileGenerator..MaxCompressionSize">MaxCompressionSize</dfn> = -<var>1</var>;</td></tr>
<tr><th id="55">55</th><td></td></tr>
<tr><th id="56">56</th><td><em>static</em> <em>bool</em></td></tr>
<tr><th id="57">57</th><td><dfn class="tu decl def fn" id="_ZN4llvm10sampleprofL15usePseudoProbesERKSt13unordered_mapIPNS0_14ProfiledBinaryES1_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS6_4HashENS12977515" title='llvm::sampleprof::usePseudoProbes' data-type='bool llvm::sampleprof::usePseudoProbes(const llvm::sampleprof::BinarySampleCounterMap &amp; BinarySampleCounters)' data-ref="_ZN4llvm10sampleprofL15usePseudoProbesERKSt13unordered_mapIPNS0_14ProfiledBinaryES1_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS6_4HashENS12977515" data-ref-filename="_ZN4llvm10sampleprofL15usePseudoProbesERKSt13unordered_mapIPNS0_14ProfiledBinaryES1_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS6_4HashENS12977515">usePseudoProbes</dfn>(<em>const</em> <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::BinarySampleCounterMap" title='llvm::sampleprof::BinarySampleCounterMap' data-type='std::unordered_map&lt;ProfiledBinary *, ContextSampleCounterMap&gt;' data-ref="llvm::sampleprof::BinarySampleCounterMap" data-ref-filename="llvm..sampleprof..BinarySampleCounterMap">BinarySampleCounterMap</a> &amp;<dfn class="local col1 decl" id="1BinarySampleCounters" title='BinarySampleCounters' data-type='const llvm::sampleprof::BinarySampleCounterMap &amp;' data-ref="1BinarySampleCounters" data-ref-filename="1BinarySampleCounters">BinarySampleCounters</dfn>) {</td></tr>
<tr><th id="58">58</th><td>  <b>return</b> <a class="local col1 ref" href="#1BinarySampleCounters" title='BinarySampleCounters' data-ref="1BinarySampleCounters" data-ref-filename="1BinarySampleCounters">BinarySampleCounters</a>.<span class='ref fn' title='std::unordered_map::size' data-ref="_ZNKSt13unordered_map4sizeEv" data-ref-filename="_ZNKSt13unordered_map4sizeEv">size</span>() &amp;&amp;</td></tr>
<tr><th id="59">59</th><td>         <a class="local col1 ref" href="#1BinarySampleCounters" title='BinarySampleCounters' data-ref="1BinarySampleCounters" data-ref-filename="1BinarySampleCounters">BinarySampleCounters</a>.<span class='ref fn' title='std::unordered_map::begin' data-ref="_ZNKSt13unordered_map5beginEv" data-ref-filename="_ZNKSt13unordered_map5beginEv">begin</span>()<span class='ref fn' title='std::__detail::_Node_const_iterator::operator-&gt;' data-ref="_ZNKSt8__detail20_Node_const_iteratorptEv" data-ref-filename="_ZNKSt8__detail20_Node_const_iteratorptEv">-&gt;</span><span class='ref field' title='std::pair&lt;llvm::sampleprof::ProfiledBinary *const, std::unordered_map&lt;llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter, llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;::Hash, llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;::Equal, std::allocator&lt;std::pair&lt;const llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter&gt; &gt; &gt; &gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary15usePseudoProbesEv" title='llvm::sampleprof::ProfiledBinary::usePseudoProbes' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary15usePseudoProbesEv" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary15usePseudoProbesEv">usePseudoProbes</a>();</td></tr>
<tr><th id="60">60</th><td>}</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td><span class="namespace">std::</span><span class='type' title='std::unique_ptr' data-ref="std::unique_ptr" data-ref-filename="std..unique_ptr">unique_ptr</span>&lt;<a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator" title='llvm::sampleprof::ProfileGenerator' data-ref="llvm::sampleprof::ProfileGenerator" data-ref-filename="llvm..sampleprof..ProfileGenerator">ProfileGenerator</a>&gt;</td></tr>
<tr><th id="63">63</th><td><a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator" title='llvm::sampleprof::ProfileGenerator' data-ref="llvm::sampleprof::ProfileGenerator" data-ref-filename="llvm..sampleprof..ProfileGenerator">ProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof16ProfileGenerator6createERKSt13unordered_mapIPNS0_14ProfiledBinaryES2_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS7_416596836" title='llvm::sampleprof::ProfileGenerator::create' data-ref="_ZN4llvm10sampleprof16ProfileGenerator6createERKSt13unordered_mapIPNS0_14ProfiledBinaryES2_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS7_416596836" data-ref-filename="_ZN4llvm10sampleprof16ProfileGenerator6createERKSt13unordered_mapIPNS0_14ProfiledBinaryES2_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS7_416596836">create</dfn>(<em>const</em> <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::BinarySampleCounterMap" title='llvm::sampleprof::BinarySampleCounterMap' data-type='std::unordered_map&lt;ProfiledBinary *, ContextSampleCounterMap&gt;' data-ref="llvm::sampleprof::BinarySampleCounterMap" data-ref-filename="llvm..sampleprof..BinarySampleCounterMap">BinarySampleCounterMap</a> &amp;<dfn class="local col2 decl" id="2BinarySampleCounters" title='BinarySampleCounters' data-type='const llvm::sampleprof::BinarySampleCounterMap &amp;' data-ref="2BinarySampleCounters" data-ref-filename="2BinarySampleCounters">BinarySampleCounters</dfn>,</td></tr>
<tr><th id="64">64</th><td>                         <b>enum</b> <a class="type" href="PerfReader.h.html#llvm::sampleprof::PerfScriptType" title='llvm::sampleprof::PerfScriptType' data-ref="llvm::sampleprof::PerfScriptType" data-ref-filename="llvm..sampleprof..PerfScriptType">PerfScriptType</a> <dfn class="local col3 decl" id="3SampleType" title='SampleType' data-type='enum PerfScriptType' data-ref="3SampleType" data-ref-filename="3SampleType">SampleType</dfn>) {</td></tr>
<tr><th id="65">65</th><td>  <span class="namespace">std::</span><span class='type' title='std::unique_ptr' data-ref="std::unique_ptr" data-ref-filename="std..unique_ptr">unique_ptr</span>&lt;<a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator" title='llvm::sampleprof::ProfileGenerator' data-ref="llvm::sampleprof::ProfileGenerator" data-ref-filename="llvm..sampleprof..ProfileGenerator">ProfileGenerator</a>&gt; <span class='ref fn fake' title='std::unique_ptr::unique_ptr&lt;_Tp, _Dp&gt;' data-ref="_ZNSt10unique_ptrC1Ev" data-ref-filename="_ZNSt10unique_ptrC1Ev"></span><dfn class="local col4 decl" id="4ProfileGenerator" title='ProfileGenerator' data-type='std::unique_ptr&lt;ProfileGenerator&gt;' data-ref="4ProfileGenerator" data-ref-filename="4ProfileGenerator">ProfileGenerator</dfn>;</td></tr>
<tr><th id="66">66</th><td>  <b>if</b> (<a class="local col3 ref" href="#3SampleType" title='SampleType' data-ref="3SampleType" data-ref-filename="3SampleType">SampleType</a> == <a class="enum" href="PerfReader.h.html#llvm::sampleprof::PERF_LBR_STACK" title='llvm::sampleprof::PERF_LBR_STACK' data-ref="llvm::sampleprof::PERF_LBR_STACK" data-ref-filename="llvm..sampleprof..PERF_LBR_STACK">PERF_LBR_STACK</a>) {</td></tr>
<tr><th id="67">67</th><td>    <b>if</b> (<a class="tu ref fn" href="#_ZN4llvm10sampleprofL15usePseudoProbesERKSt13unordered_mapIPNS0_14ProfiledBinaryES1_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS6_4HashENS12977515" title='llvm::sampleprof::usePseudoProbes' data-use='c' data-ref="_ZN4llvm10sampleprofL15usePseudoProbesERKSt13unordered_mapIPNS0_14ProfiledBinaryES1_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS6_4HashENS12977515" data-ref-filename="_ZN4llvm10sampleprofL15usePseudoProbesERKSt13unordered_mapIPNS0_14ProfiledBinaryES1_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS6_4HashENS12977515">usePseudoProbes</a>(<a class="local col2 ref" href="#2BinarySampleCounters" title='BinarySampleCounters' data-ref="2BinarySampleCounters" data-ref-filename="2BinarySampleCounters">BinarySampleCounters</a>)) {</td></tr>
<tr><th id="68">68</th><td>      <a class="local col4 ref" href="#4ProfileGenerator" title='ProfileGenerator' data-ref="4ProfileGenerator" data-ref-filename="4ProfileGenerator">ProfileGenerator</a>.<span class='ref fn' title='std::unique_ptr::reset' data-ref="_ZNSt10unique_ptr5resetENSt15__uniq_ptr_implIT_T0_E7pointerE" data-ref-filename="_ZNSt10unique_ptr5resetENSt15__uniq_ptr_implIT_T0_E7pointerE">reset</span>(</td></tr>
<tr><th id="69">69</th><td>          <b>new</b> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::PseudoProbeCSProfileGenerator" title='llvm::sampleprof::PseudoProbeCSProfileGenerator' data-ref="llvm::sampleprof::PseudoProbeCSProfileGenerator" data-ref-filename="llvm..sampleprof..PseudoProbeCSProfileGenerator">PseudoProbeCSProfileGenerator</a><a class="ref fn" href="ProfileGenerator.h.html#_ZN4llvm10sampleprof29PseudoProbeCSProfileGeneratorC1ERKSt13unordered_mapIPNS0_14ProfiledBinaryES2_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCount9584214" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::PseudoProbeCSProfileGenerator' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGeneratorC1ERKSt13unordered_mapIPNS0_14ProfiledBinaryES2_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCount9584214" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGeneratorC1ERKSt13unordered_mapIPNS0_14ProfiledBinaryES2_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCount9584214">(</a><a class="local col2 ref" href="#2BinarySampleCounters" title='BinarySampleCounters' data-ref="2BinarySampleCounters" data-ref-filename="2BinarySampleCounters">BinarySampleCounters</a>));</td></tr>
<tr><th id="70">70</th><td>    } <b>else</b> {</td></tr>
<tr><th id="71">71</th><td>      <a class="local col4 ref" href="#4ProfileGenerator" title='ProfileGenerator' data-ref="4ProfileGenerator" data-ref-filename="4ProfileGenerator">ProfileGenerator</a>.<span class='ref fn' title='std::unique_ptr::reset' data-ref="_ZNSt10unique_ptr5resetENSt15__uniq_ptr_implIT_T0_E7pointerE" data-ref-filename="_ZNSt10unique_ptr5resetENSt15__uniq_ptr_implIT_T0_E7pointerE">reset</span>(<b>new</b> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a><a class="ref fn" href="ProfileGenerator.h.html#_ZN4llvm10sampleprof18CSProfileGeneratorC1ERKSt13unordered_mapIPNS0_14ProfiledBinaryES2_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS7_4Has11034427" title='llvm::sampleprof::CSProfileGenerator::CSProfileGenerator' data-ref="_ZN4llvm10sampleprof18CSProfileGeneratorC1ERKSt13unordered_mapIPNS0_14ProfiledBinaryES2_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS7_4Has11034427" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGeneratorC1ERKSt13unordered_mapIPNS0_14ProfiledBinaryES2_INS0_8HashableINS0_10ContextKeyEEENS0_13SampleCounterENS7_4Has11034427">(</a><a class="local col2 ref" href="#2BinarySampleCounters" title='BinarySampleCounters' data-ref="2BinarySampleCounters" data-ref-filename="2BinarySampleCounters">BinarySampleCounters</a>));</td></tr>
<tr><th id="72">72</th><td>    }</td></tr>
<tr><th id="73">73</th><td>  } <b>else</b> {</td></tr>
<tr><th id="74">74</th><td>    <i>// TODO:</i></td></tr>
<tr><th id="75">75</th><td>    <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#139" title="__builtin_unreachable()" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"Unsupported perfscript!"</q>);</td></tr>
<tr><th id="76">76</th><td>  }</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td>  <b>return</b> <a class="local col4 ref" href="#4ProfileGenerator" title='ProfileGenerator' data-ref="4ProfileGenerator" data-ref-filename="4ProfileGenerator">ProfileGenerator</a>;</td></tr>
<tr><th id="79">79</th><td>}</td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator" title='llvm::sampleprof::ProfileGenerator' data-ref="llvm::sampleprof::ProfileGenerator" data-ref-filename="llvm..sampleprof..ProfileGenerator">ProfileGenerator</a>::<dfn class="virtual decl def fn" id="_ZN4llvm10sampleprof16ProfileGenerator5writeESt10unique_ptrINS0_19SampleProfileWriterESt14default_deleteIS3_EERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" title='llvm::sampleprof::ProfileGenerator::write' data-ref="_ZN4llvm10sampleprof16ProfileGenerator5writeESt10unique_ptrINS0_19SampleProfileWriterESt14default_deleteIS3_EERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" data-ref-filename="_ZN4llvm10sampleprof16ProfileGenerator5writeESt10unique_ptrINS0_19SampleProfileWriterESt14default_deleteIS3_EERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE">write</dfn>(<span class="namespace">std::</span><span class='type' title='std::unique_ptr' data-ref="std::unique_ptr" data-ref-filename="std..unique_ptr">unique_ptr</span>&lt;<a class="type" href="../../include/llvm/ProfileData/SampleProfWriter.h.html#llvm::sampleprof::SampleProfileWriter" title='llvm::sampleprof::SampleProfileWriter' data-ref="llvm::sampleprof::SampleProfileWriter" data-ref-filename="llvm..sampleprof..SampleProfileWriter">SampleProfileWriter</a>&gt; <dfn class="local col5 decl" id="5Writer" title='Writer' data-type='std::unique_ptr&lt;SampleProfileWriter&gt;' data-ref="5Writer" data-ref-filename="5Writer">Writer</dfn>,</td></tr>
<tr><th id="82">82</th><td>                             <a class="type" href="../../include/llvm/ADT/StringMap.h.html#llvm::StringMap" title='llvm::StringMap' data-ref="llvm::StringMap" data-ref-filename="llvm..StringMap">StringMap</a>&lt;<a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a>&gt; &amp;<dfn class="local col6 decl" id="6ProfileMap" title='ProfileMap' data-type='StringMap&lt;llvm::sampleprof::FunctionSamples&gt; &amp;' data-ref="6ProfileMap" data-ref-filename="6ProfileMap">ProfileMap</dfn>) {</td></tr>
<tr><th id="83">83</th><td>  <a class="local col5 ref" href="#5Writer" title='Writer' data-ref="5Writer" data-ref-filename="5Writer">Writer</a><span class='ref fn' title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</span><a class="virtual ref fn" href="../../include/llvm/ProfileData/SampleProfWriter.h.html#_ZN4llvm10sampleprof19SampleProfileWriter5writeERKNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" title='llvm::sampleprof::SampleProfileWriter::write' data-ref="_ZN4llvm10sampleprof19SampleProfileWriter5writeERKNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" data-ref-filename="_ZN4llvm10sampleprof19SampleProfileWriter5writeERKNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE">write</a>(<a class="local col6 ref" href="#6ProfileMap" title='ProfileMap' data-ref="6ProfileMap" data-ref-filename="6ProfileMap">ProfileMap</a>);</td></tr>
<tr><th id="84">84</th><td>}</td></tr>
<tr><th id="85">85</th><td></td></tr>
<tr><th id="86">86</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator" title='llvm::sampleprof::ProfileGenerator' data-ref="llvm::sampleprof::ProfileGenerator" data-ref-filename="llvm..sampleprof..ProfileGenerator">ProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof16ProfileGenerator5writeEv" title='llvm::sampleprof::ProfileGenerator::write' data-ref="_ZN4llvm10sampleprof16ProfileGenerator5writeEv" data-ref-filename="_ZN4llvm10sampleprof16ProfileGenerator5writeEv">write</dfn>() {</td></tr>
<tr><th id="87">87</th><td>  <em>auto</em> <dfn class="local col7 decl" id="7WriterOrErr" title='WriterOrErr' data-type='llvm::ErrorOr&lt;std::unique_ptr&lt;llvm::sampleprof::SampleProfileWriter, std::default_delete&lt;llvm::sampleprof::SampleProfileWriter&gt; &gt; &gt;' data-ref="7WriterOrErr" data-ref-filename="7WriterOrErr">WriterOrErr</dfn> = <a class="type" href="../../include/llvm/ProfileData/SampleProfWriter.h.html#llvm::sampleprof::SampleProfileWriter" title='llvm::sampleprof::SampleProfileWriter' data-ref="llvm::sampleprof::SampleProfileWriter" data-ref-filename="llvm..sampleprof..SampleProfileWriter">SampleProfileWriter</a>::<a class="ref fn" href="../../include/llvm/ProfileData/SampleProfWriter.h.html#_ZN4llvm10sampleprof19SampleProfileWriter6createENS_9StringRefENS0_19SampleProfileFormatE" title='llvm::sampleprof::SampleProfileWriter::create' data-ref="_ZN4llvm10sampleprof19SampleProfileWriter6createENS_9StringRefENS0_19SampleProfileFormatE" data-ref-filename="_ZN4llvm10sampleprof19SampleProfileWriter6createENS_9StringRefENS0_19SampleProfileFormatE">create</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"></a><a class="tu ref" href="#OutputFilename" title='OutputFilename' data-use='r' data-ref="OutputFilename" data-ref-filename="OutputFilename">OutputFilename</a>, <a class="ref fn fake" href="../../include/llvm/Support/CommandLine.h.html#_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" title='llvm::cl::opt_storage&lt;type-parameter-0-0, false, false&gt;::operator type-parameter-0-0' data-ref="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" data-ref-filename="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev"></a><a class="tu ref" href="#OutputFormat" title='OutputFormat' data-use='m' data-ref="OutputFormat" data-ref-filename="OutputFormat">OutputFormat</a>);</td></tr>
<tr><th id="88">88</th><td>  <b>if</b> (<span class="namespace">std::</span><span class='type' title='std::error_code' data-ref="std::error_code" data-ref-filename="std..error_code">error_code</span> <span class='ref fn fake' title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv" data-ref-filename="_ZNKSt10error_codecvbEv"></span><dfn class="local col8 decl" id="8EC" title='EC' data-type='std::error_code' data-ref="8EC" data-ref-filename="8EC"><a class="local col8 ref" href="#8EC" title='EC' data-ref="8EC" data-ref-filename="8EC">EC</a></dfn> = <a class="local col7 ref" href="#7WriterOrErr" title='WriterOrErr' data-ref="7WriterOrErr" data-ref-filename="7WriterOrErr">WriterOrErr</a>.<a class="ref fn" href="../../include/llvm/Support/ErrorOr.h.html#_ZNK4llvm7ErrorOr8getErrorEv" title='llvm::ErrorOr::getError' data-ref="_ZNK4llvm7ErrorOr8getErrorEv" data-ref-filename="_ZNK4llvm7ErrorOr8getErrorEv">getError</a>())</td></tr>
<tr><th id="89">89</th><td>    <a class="ref fn" href="ErrorHandling.h.html#_Z13exitWithErrorSt10error_codeN4llvm9StringRefE" title='exitWithError' data-ref="_Z13exitWithErrorSt10error_codeN4llvm9StringRefE" data-ref-filename="_Z13exitWithErrorSt10error_codeN4llvm9StringRefE">exitWithError</a>(<span class='ref fn fake' title='std::error_code::error_code' data-ref="_ZNSt10error_codeC1ERKS_" data-ref-filename="_ZNSt10error_codeC1ERKS_"></span><a class="local col8 ref" href="#8EC" title='EC' data-ref="8EC" data-ref-filename="8EC">EC</a>, <a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"></a><a class="tu ref" href="#OutputFilename" title='OutputFilename' data-use='r' data-ref="OutputFilename" data-ref-filename="OutputFilename">OutputFilename</a>);</td></tr>
<tr><th id="90">90</th><td>  <a class="virtual member fn" href="#_ZN4llvm10sampleprof16ProfileGenerator5writeESt10unique_ptrINS0_19SampleProfileWriterESt14default_deleteIS3_EERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" title='llvm::sampleprof::ProfileGenerator::write' data-ref="_ZN4llvm10sampleprof16ProfileGenerator5writeESt10unique_ptrINS0_19SampleProfileWriterESt14default_deleteIS3_EERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" data-ref-filename="_ZN4llvm10sampleprof16ProfileGenerator5writeESt10unique_ptrINS0_19SampleProfileWriterESt14default_deleteIS3_EERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE">write</a>(<span class='ref fn fake' title='std::unique_ptr::unique_ptr&lt;_Tp, _Dp&gt;' data-ref="_ZNSt10unique_ptrC1EOSt10unique_ptrIT_T0_E" data-ref-filename="_ZNSt10unique_ptrC1EOSt10unique_ptrIT_T0_E"></span><span class="namespace">std::</span><span class='ref fn' title='std::move' data-ref="_ZSt4moveOT_" data-ref-filename="_ZSt4moveOT_">move</span>(<span class='refarg'><a class="local col7 ref" href="#7WriterOrErr" title='WriterOrErr' data-ref="7WriterOrErr" data-ref-filename="7WriterOrErr">WriterOrErr</a>.<a class="ref fn" href="../../include/llvm/Support/ErrorOr.h.html#_ZN4llvm7ErrorOr3getEv" title='llvm::ErrorOr::get' data-ref="_ZN4llvm7ErrorOr3getEv" data-ref-filename="_ZN4llvm7ErrorOr3getEv">get</a>()</span>), <span class='refarg'><a class="member field" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator::ProfileMap" title='llvm::sampleprof::ProfileGenerator::ProfileMap' data-ref="llvm::sampleprof::ProfileGenerator::ProfileMap" data-ref-filename="llvm..sampleprof..ProfileGenerator..ProfileMap">ProfileMap</a></span>);</td></tr>
<tr><th id="91">91</th><td>}</td></tr>
<tr><th id="92">92</th><td></td></tr>
<tr><th id="93">93</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator" title='llvm::sampleprof::ProfileGenerator' data-ref="llvm::sampleprof::ProfileGenerator" data-ref-filename="llvm..sampleprof..ProfileGenerator">ProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof16ProfileGenerator18findDisjointRangesERSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERKSA_" title='llvm::sampleprof::ProfileGenerator::findDisjointRanges' data-ref="_ZN4llvm10sampleprof16ProfileGenerator18findDisjointRangesERSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERKSA_" data-ref-filename="_ZN4llvm10sampleprof16ProfileGenerator18findDisjointRangesERSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERKSA_">findDisjointRanges</dfn>(<a class="typedef" href="PerfReader.h.html#llvm::sampleprof::RangeSample" title='llvm::sampleprof::RangeSample' data-type='std::map&lt;std::pair&lt;uint64_t, uint64_t&gt;, uint64_t&gt;' data-ref="llvm::sampleprof::RangeSample" data-ref-filename="llvm..sampleprof..RangeSample">RangeSample</a> &amp;<dfn class="local col9 decl" id="9DisjointRanges" title='DisjointRanges' data-type='llvm::sampleprof::RangeSample &amp;' data-ref="9DisjointRanges" data-ref-filename="9DisjointRanges">DisjointRanges</dfn>,</td></tr>
<tr><th id="94">94</th><td>                                          <em>const</em> <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::RangeSample" title='llvm::sampleprof::RangeSample' data-type='std::map&lt;std::pair&lt;uint64_t, uint64_t&gt;, uint64_t&gt;' data-ref="llvm::sampleprof::RangeSample" data-ref-filename="llvm..sampleprof..RangeSample">RangeSample</a> &amp;<dfn class="local col0 decl" id="10Ranges" title='Ranges' data-type='const llvm::sampleprof::RangeSample &amp;' data-ref="10Ranges" data-ref-filename="10Ranges">Ranges</dfn>) {</td></tr>
<tr><th id="95">95</th><td></td></tr>
<tr><th id="96">96</th><td>  <i>/*</i></td></tr>
<tr><th id="97">97</th><td><i>  Regions may overlap with each other. Using the boundary info, find all</i></td></tr>
<tr><th id="98">98</th><td><i>  disjoint ranges and their sample count. BoundaryPoint contains the count</i></td></tr>
<tr><th id="99">99</th><td><i>  multiple samples begin/end at this points.</i></td></tr>
<tr><th id="100">100</th><td><i></i></td></tr>
<tr><th id="101">101</th><td><i>  |&lt;--100--&gt;|           Sample1</i></td></tr>
<tr><th id="102">102</th><td><i>  |&lt;------200------&gt;|   Sample2</i></td></tr>
<tr><th id="103">103</th><td><i>  A         B       C</i></td></tr>
<tr><th id="104">104</th><td><i></i></td></tr>
<tr><th id="105">105</th><td><i>  In the example above,</i></td></tr>
<tr><th id="106">106</th><td><i>  Sample1 begins at A, ends at B, its value is 100.</i></td></tr>
<tr><th id="107">107</th><td><i>  Sample2 beings at A, ends at C, its value is 200.</i></td></tr>
<tr><th id="108">108</th><td><i>  For A, BeginCount is the sum of sample begins at A, which is 300 and no</i></td></tr>
<tr><th id="109">109</th><td><i>  samples ends at A, so EndCount is 0.</i></td></tr>
<tr><th id="110">110</th><td><i>  Then boundary points A, B, and C with begin/end counts are:</i></td></tr>
<tr><th id="111">111</th><td><i>  A: (300, 0)</i></td></tr>
<tr><th id="112">112</th><td><i>  B: (0, 100)</i></td></tr>
<tr><th id="113">113</th><td><i>  C: (0, 200)</i></td></tr>
<tr><th id="114">114</th><td><i>  */</i></td></tr>
<tr><th id="115">115</th><td>  <b>struct</b> <dfn class="local col1 type" id="11BoundaryPoint" title='BoundaryPoint' data-ref="11BoundaryPoint" data-ref-filename="11BoundaryPoint">BoundaryPoint</dfn> {</td></tr>
<tr><th id="116">116</th><td>    <i>// Sum of sample counts beginning at this point</i></td></tr>
<tr><th id="117">117</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl field" id="12BeginCount" title='BeginCount' data-type='uint64_t' data-ref="12BeginCount" data-ref-filename="12BeginCount">BeginCount</dfn>;</td></tr>
<tr><th id="118">118</th><td>    <i>// Sum of sample counts ending at this point</i></td></tr>
<tr><th id="119">119</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl field" id="13EndCount" title='EndCount' data-type='uint64_t' data-ref="13EndCount" data-ref-filename="13EndCount">EndCount</dfn>;</td></tr>
<tr><th id="120">120</th><td></td></tr>
<tr><th id="121">121</th><td>    BoundaryPoint() : <a class="local col2 member field" href="#12BeginCount" title='BeginCount' data-ref="12BeginCount" data-ref-filename="12BeginCount">BeginCount</a>(<var>0</var>), <a class="local col3 member field" href="#13EndCount" title='EndCount' data-ref="13EndCount" data-ref-filename="13EndCount">EndCount</a>(<var>0</var>){};</td></tr>
<tr><th id="122">122</th><td></td></tr>
<tr><th id="123">123</th><td>    <em>void</em> <dfn class="local col4 decl fn" id="14addBeginCount" title='addBeginCount' data-type='void llvm::sampleprof::ProfileGenerator::findDisjointRanges(llvm::sampleprof::RangeSample &amp;, const llvm::sampleprof::RangeSample &amp;)::BoundaryPoint::addBeginCount(uint64_t Count)' data-ref="14addBeginCount" data-ref-filename="14addBeginCount">addBeginCount</dfn>(<a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="15Count" title='Count' data-type='uint64_t' data-ref="15Count" data-ref-filename="15Count">Count</dfn>) { <a class="local col2 member field" href="#12BeginCount" title='BeginCount' data-ref="12BeginCount" data-ref-filename="12BeginCount">BeginCount</a> += <a class="local col5 ref" href="#15Count" title='Count' data-ref="15Count" data-ref-filename="15Count">Count</a>; }</td></tr>
<tr><th id="124">124</th><td></td></tr>
<tr><th id="125">125</th><td>    <em>void</em> <dfn class="local col6 decl fn" id="16addEndCount" title='addEndCount' data-type='void llvm::sampleprof::ProfileGenerator::findDisjointRanges(llvm::sampleprof::RangeSample &amp;, const llvm::sampleprof::RangeSample &amp;)::BoundaryPoint::addEndCount(uint64_t Count)' data-ref="16addEndCount" data-ref-filename="16addEndCount">addEndCount</dfn>(<a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col7 decl" id="17Count" title='Count' data-type='uint64_t' data-ref="17Count" data-ref-filename="17Count">Count</dfn>) { <a class="local col3 member field" href="#13EndCount" title='EndCount' data-ref="13EndCount" data-ref-filename="13EndCount">EndCount</a> += <a class="local col7 ref" href="#17Count" title='Count' data-ref="17Count" data-ref-filename="17Count">Count</a>; }</td></tr>
<tr><th id="126">126</th><td>  };</td></tr>
<tr><th id="127">127</th><td></td></tr>
<tr><th id="128">128</th><td>  <i>/*</i></td></tr>
<tr><th id="129">129</th><td><i>  For the above example. With boundary points, follwing logic finds two</i></td></tr>
<tr><th id="130">130</th><td><i>  disjoint region of</i></td></tr>
<tr><th id="131">131</th><td><i></i></td></tr>
<tr><th id="132">132</th><td><i>  [A,B]:   300</i></td></tr>
<tr><th id="133">133</th><td><i>  [B+1,C]: 200</i></td></tr>
<tr><th id="134">134</th><td><i></i></td></tr>
<tr><th id="135">135</th><td><i>  If there is a boundary point that both begin and end, the point itself</i></td></tr>
<tr><th id="136">136</th><td><i>  becomes a separate disjoint region. For example, if we have original</i></td></tr>
<tr><th id="137">137</th><td><i>  ranges of</i></td></tr>
<tr><th id="138">138</th><td><i></i></td></tr>
<tr><th id="139">139</th><td><i>  |&lt;--- 100 ---&gt;|</i></td></tr>
<tr><th id="140">140</th><td><i>                |&lt;--- 200 ---&gt;|</i></td></tr>
<tr><th id="141">141</th><td><i>  A             B             C</i></td></tr>
<tr><th id="142">142</th><td><i></i></td></tr>
<tr><th id="143">143</th><td><i>  there are three boundary points with their begin/end counts of</i></td></tr>
<tr><th id="144">144</th><td><i></i></td></tr>
<tr><th id="145">145</th><td><i>  A: (100, 0)</i></td></tr>
<tr><th id="146">146</th><td><i>  B: (200, 100)</i></td></tr>
<tr><th id="147">147</th><td><i>  C: (0, 200)</i></td></tr>
<tr><th id="148">148</th><td><i></i></td></tr>
<tr><th id="149">149</th><td><i>  the disjoint ranges would be</i></td></tr>
<tr><th id="150">150</th><td><i></i></td></tr>
<tr><th id="151">151</th><td><i>  [A, B-1]: 100</i></td></tr>
<tr><th id="152">152</th><td><i>  [B, B]:   300</i></td></tr>
<tr><th id="153">153</th><td><i>  [B+1, C]: 200.</i></td></tr>
<tr><th id="154">154</th><td><i>  */</i></td></tr>
<tr><th id="155">155</th><td>  <span class="namespace">std::</span><span class='type' title='std::map' data-ref="std::map" data-ref-filename="std..map">map</span>&lt;<a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>, <a class="local col1 type" href="#11BoundaryPoint" title='BoundaryPoint' data-ref="11BoundaryPoint" data-ref-filename="11BoundaryPoint">BoundaryPoint</a>&gt; <span class='tu ref fn fake' title='std::map::map&lt;_Key, _Tp, _Compare, _Alloc&gt;' data-use='c' data-ref="_ZNSt3mapC1Ev" data-ref-filename="_ZNSt3mapC1Ev"></span><dfn class="local col8 decl" id="18Boundaries" title='Boundaries' data-type='std::map&lt;uint64_t, BoundaryPoint&gt;' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</dfn>;</td></tr>
<tr><th id="156">156</th><td></td></tr>
<tr><th id="157">157</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col9 decl" id="19Item" title='Item' data-type='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;' data-ref="19Item" data-ref-filename="19Item">Item</dfn> : <a class="local col0 ref" href="#10Ranges" title='Ranges' data-ref="10Ranges" data-ref-filename="10Ranges">Ranges</a>) {</td></tr>
<tr><th id="158">158</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="20Begin" title='Begin' data-type='uint64_t' data-ref="20Begin" data-ref-filename="20Begin">Begin</dfn> = <a class="local col9 ref" href="#19Item" title='Item' data-ref="19Item" data-ref-filename="19Item">Item</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>;</td></tr>
<tr><th id="159">159</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="21End" title='End' data-type='uint64_t' data-ref="21End" data-ref-filename="21End">End</dfn> = <a class="local col9 ref" href="#19Item" title='Item' data-ref="19Item" data-ref-filename="19Item">Item</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="160">160</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="22Count" title='Count' data-type='uint64_t' data-ref="22Count" data-ref-filename="22Count">Count</dfn> = <a class="local col9 ref" href="#19Item" title='Item' data-ref="19Item" data-ref-filename="19Item">Item</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="161">161</th><td>    <b>if</b> (<a class="local col8 ref" href="#18Boundaries" title='Boundaries' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</a>.<span class='tu ref fn' title='std::map::find' data-use='c' data-ref="_ZNSt3map4findERKT_" data-ref-filename="_ZNSt3map4findERKT_">find</span>(<a class="local col0 ref" href="#20Begin" title='Begin' data-ref="20Begin" data-ref-filename="20Begin">Begin</a>) <span class='tu ref fn' title='std::operator==' data-use='c' data-ref="_ZSteqRKSt17_Rb_tree_iteratorIT_ES4_" data-ref-filename="_ZSteqRKSt17_Rb_tree_iteratorIT_ES4_">==</span> <a class="local col8 ref" href="#18Boundaries" title='Boundaries' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</a>.<span class='tu ref fn' title='std::map::end' data-use='c' data-ref="_ZNSt3map3endEv" data-ref-filename="_ZNSt3map3endEv">end</span>())</td></tr>
<tr><th id="162">162</th><td>      <a class="local col8 ref" href="#18Boundaries" title='Boundaries' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</a><span class='tu ref fn' title='std::map::operator[]' data-use='c' data-ref="_ZNSt3mapixERKT_" data-ref-filename="_ZNSt3mapixERKT_">[<a class="local col0 ref" href="#20Begin" title='Begin' data-ref="20Begin" data-ref-filename="20Begin">Begin</a>]</span> = <a class="local col1 type" href="#11BoundaryPoint" title='BoundaryPoint' data-ref="11BoundaryPoint" data-ref-filename="11BoundaryPoint">BoundaryPoint</a>();</td></tr>
<tr><th id="163">163</th><td>    <a class="local col8 ref" href="#18Boundaries" title='Boundaries' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</a><span class='tu ref fn' title='std::map::operator[]' data-use='c' data-ref="_ZNSt3mapixERKT_" data-ref-filename="_ZNSt3mapixERKT_">[<a class="local col0 ref" href="#20Begin" title='Begin' data-ref="20Begin" data-ref-filename="20Begin">Begin</a>]</span>.<a class="local col4 ref fn" href="#14addBeginCount" title='addBeginCount' data-ref="14addBeginCount" data-ref-filename="14addBeginCount">addBeginCount</a>(<a class="local col2 ref" href="#22Count" title='Count' data-ref="22Count" data-ref-filename="22Count">Count</a>);</td></tr>
<tr><th id="164">164</th><td></td></tr>
<tr><th id="165">165</th><td>    <b>if</b> (<a class="local col8 ref" href="#18Boundaries" title='Boundaries' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</a>.<span class='tu ref fn' title='std::map::find' data-use='c' data-ref="_ZNSt3map4findERKT_" data-ref-filename="_ZNSt3map4findERKT_">find</span>(<a class="local col1 ref" href="#21End" title='End' data-ref="21End" data-ref-filename="21End">End</a>) <span class='tu ref fn' title='std::operator==' data-use='c' data-ref="_ZSteqRKSt17_Rb_tree_iteratorIT_ES4_" data-ref-filename="_ZSteqRKSt17_Rb_tree_iteratorIT_ES4_">==</span> <a class="local col8 ref" href="#18Boundaries" title='Boundaries' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</a>.<span class='tu ref fn' title='std::map::end' data-use='c' data-ref="_ZNSt3map3endEv" data-ref-filename="_ZNSt3map3endEv">end</span>())</td></tr>
<tr><th id="166">166</th><td>      <a class="local col8 ref" href="#18Boundaries" title='Boundaries' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</a><span class='tu ref fn' title='std::map::operator[]' data-use='c' data-ref="_ZNSt3mapixERKT_" data-ref-filename="_ZNSt3mapixERKT_">[<a class="local col1 ref" href="#21End" title='End' data-ref="21End" data-ref-filename="21End">End</a>]</span> = <a class="local col1 type" href="#11BoundaryPoint" title='BoundaryPoint' data-ref="11BoundaryPoint" data-ref-filename="11BoundaryPoint">BoundaryPoint</a>();</td></tr>
<tr><th id="167">167</th><td>    <a class="local col8 ref" href="#18Boundaries" title='Boundaries' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</a><span class='tu ref fn' title='std::map::operator[]' data-use='c' data-ref="_ZNSt3mapixERKT_" data-ref-filename="_ZNSt3mapixERKT_">[<a class="local col1 ref" href="#21End" title='End' data-ref="21End" data-ref-filename="21End">End</a>]</span>.<a class="local col6 ref fn" href="#16addEndCount" title='addEndCount' data-ref="16addEndCount" data-ref-filename="16addEndCount">addEndCount</a>(<a class="local col2 ref" href="#22Count" title='Count' data-ref="22Count" data-ref-filename="22Count">Count</a>);</td></tr>
<tr><th id="168">168</th><td>  }</td></tr>
<tr><th id="169">169</th><td></td></tr>
<tr><th id="170">170</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="23BeginAddress" title='BeginAddress' data-type='uint64_t' data-ref="23BeginAddress" data-ref-filename="23BeginAddress">BeginAddress</dfn> = <var>0</var>;</td></tr>
<tr><th id="171">171</th><td>  <em>int</em> <dfn class="local col4 decl" id="24Count" title='Count' data-type='int' data-ref="24Count" data-ref-filename="24Count">Count</dfn> = <var>0</var>;</td></tr>
<tr><th id="172">172</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col5 decl" id="25Item" title='Item' data-type='std::pair&lt;const unsigned long, BoundaryPoint&gt;' data-ref="25Item" data-ref-filename="25Item">Item</dfn> : <a class="local col8 ref" href="#18Boundaries" title='Boundaries' data-ref="18Boundaries" data-ref-filename="18Boundaries">Boundaries</a>) {</td></tr>
<tr><th id="173">173</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col6 decl" id="26Address" title='Address' data-type='uint64_t' data-ref="26Address" data-ref-filename="26Address">Address</dfn> = <a class="local col5 ref" href="#25Item" title='Item' data-ref="25Item" data-ref-filename="25Item">Item</a>.<span class='tu ref field' title='std::pair&lt;const unsigned long, BoundaryPoint&gt;::first' data-use='r' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>;</td></tr>
<tr><th id="174">174</th><td>    <a class="local col1 type" href="#11BoundaryPoint" title='BoundaryPoint' data-ref="11BoundaryPoint" data-ref-filename="11BoundaryPoint">BoundaryPoint</a> &amp;<dfn class="local col7 decl" id="27Point" title='Point' data-type='BoundaryPoint &amp;' data-ref="27Point" data-ref-filename="27Point">Point</dfn> = <a class="local col5 ref" href="#25Item" title='Item' data-ref="25Item" data-ref-filename="25Item">Item</a>.<span class='tu ref field' title='std::pair&lt;const unsigned long, BoundaryPoint&gt;::second' data-use='a' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="175">175</th><td>    <b>if</b> (<a class="local col7 ref" href="#27Point" title='Point' data-ref="27Point" data-ref-filename="27Point">Point</a>.<a class="local col2 ref field" href="#12BeginCount" title='BeginCount' data-ref="12BeginCount" data-ref-filename="12BeginCount">BeginCount</a>) {</td></tr>
<tr><th id="176">176</th><td>      <b>if</b> (<a class="local col3 ref" href="#23BeginAddress" title='BeginAddress' data-ref="23BeginAddress" data-ref-filename="23BeginAddress">BeginAddress</a>)</td></tr>
<tr><th id="177">177</th><td>        <a class="local col9 ref" href="#9DisjointRanges" title='DisjointRanges' data-ref="9DisjointRanges" data-ref-filename="9DisjointRanges">DisjointRanges</a><span class='ref fn' title='std::map::operator[]' data-ref="_ZNSt3mapixEOT_" data-ref-filename="_ZNSt3mapixEOT_">[<span class='ref fn' title='std::pair::pair&lt;_T1, _T2&gt;' data-ref="_ZNSt4pairC1EOTL0__OTL0_0_" data-ref-filename="_ZNSt4pairC1EOTL0__OTL0_0_">{</span><a class="local col3 ref" href="#23BeginAddress" title='BeginAddress' data-ref="23BeginAddress" data-ref-filename="23BeginAddress">BeginAddress</a>, <a class="local col6 ref" href="#26Address" title='Address' data-ref="26Address" data-ref-filename="26Address">Address</a> - <var>1</var>}]</span> = <a class="local col4 ref" href="#24Count" title='Count' data-ref="24Count" data-ref-filename="24Count">Count</a>;</td></tr>
<tr><th id="178">178</th><td>      <a class="local col4 ref" href="#24Count" title='Count' data-ref="24Count" data-ref-filename="24Count">Count</a> += <a class="local col7 ref" href="#27Point" title='Point' data-ref="27Point" data-ref-filename="27Point">Point</a>.<a class="local col2 ref field" href="#12BeginCount" title='BeginCount' data-ref="12BeginCount" data-ref-filename="12BeginCount">BeginCount</a>;</td></tr>
<tr><th id="179">179</th><td>      <a class="local col3 ref" href="#23BeginAddress" title='BeginAddress' data-ref="23BeginAddress" data-ref-filename="23BeginAddress">BeginAddress</a> = <a class="local col6 ref" href="#26Address" title='Address' data-ref="26Address" data-ref-filename="26Address">Address</a>;</td></tr>
<tr><th id="180">180</th><td>    }</td></tr>
<tr><th id="181">181</th><td>    <b>if</b> (<a class="local col7 ref" href="#27Point" title='Point' data-ref="27Point" data-ref-filename="27Point">Point</a>.<a class="local col3 ref field" href="#13EndCount" title='EndCount' data-ref="13EndCount" data-ref-filename="13EndCount">EndCount</a>) {</td></tr>
<tr><th id="182">182</th><td>      <a class="macro" href="../../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(BeginAddress &amp;&amp; <q>"First boundary point cannot be 'end' point"</q>);</td></tr>
<tr><th id="183">183</th><td>      <a class="local col9 ref" href="#9DisjointRanges" title='DisjointRanges' data-ref="9DisjointRanges" data-ref-filename="9DisjointRanges">DisjointRanges</a><span class='ref fn' title='std::map::operator[]' data-ref="_ZNSt3mapixEOT_" data-ref-filename="_ZNSt3mapixEOT_">[<span class='ref fn' title='std::pair::pair&lt;_T1, _T2&gt;' data-ref="_ZNSt4pairC1EOTL0__OTL0_0_" data-ref-filename="_ZNSt4pairC1EOTL0__OTL0_0_">{</span><a class="local col3 ref" href="#23BeginAddress" title='BeginAddress' data-ref="23BeginAddress" data-ref-filename="23BeginAddress">BeginAddress</a>, <a class="local col6 ref" href="#26Address" title='Address' data-ref="26Address" data-ref-filename="26Address">Address</a>}]</span> = <a class="local col4 ref" href="#24Count" title='Count' data-ref="24Count" data-ref-filename="24Count">Count</a>;</td></tr>
<tr><th id="184">184</th><td>      <a class="local col4 ref" href="#24Count" title='Count' data-ref="24Count" data-ref-filename="24Count">Count</a> -= <a class="local col7 ref" href="#27Point" title='Point' data-ref="27Point" data-ref-filename="27Point">Point</a>.<a class="local col3 ref field" href="#13EndCount" title='EndCount' data-ref="13EndCount" data-ref-filename="13EndCount">EndCount</a>;</td></tr>
<tr><th id="185">185</th><td>      <a class="local col3 ref" href="#23BeginAddress" title='BeginAddress' data-ref="23BeginAddress" data-ref-filename="23BeginAddress">BeginAddress</a> = <a class="local col6 ref" href="#26Address" title='Address' data-ref="26Address" data-ref-filename="26Address">Address</a> + <var>1</var>;</td></tr>
<tr><th id="186">186</th><td>    }</td></tr>
<tr><th id="187">187</th><td>  }</td></tr>
<tr><th id="188">188</th><td>}</td></tr>
<tr><th id="189">189</th><td></td></tr>
<tr><th id="190">190</th><td><a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;</td></tr>
<tr><th id="191">191</th><td><a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" title='llvm::sampleprof::CSProfileGenerator::getFunctionProfileForContext' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE">getFunctionProfileForContext</dfn>(<a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="local col8 decl" id="28ContextStr" title='ContextStr' data-type='llvm::StringRef' data-ref="28ContextStr" data-ref-filename="28ContextStr">ContextStr</dfn>) {</td></tr>
<tr><th id="192">192</th><td>  <em>auto</em> <dfn class="local col9 decl" id="29Ret" title='Ret' data-type='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;' data-ref="29Ret" data-ref-filename="29Ret">Ret</dfn> = <a class="member field" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator::ProfileMap" title='llvm::sampleprof::ProfileGenerator::ProfileMap' data-ref="llvm::sampleprof::ProfileGenerator::ProfileMap" data-ref-filename="llvm..sampleprof..ProfileGenerator..ProfileMap">ProfileMap</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMap11try_emplaceENS_9StringRefEDpOTL0__" title='llvm::StringMap::try_emplace' data-ref="_ZN4llvm9StringMap11try_emplaceENS_9StringRefEDpOTL0__" data-ref-filename="_ZN4llvm9StringMap11try_emplaceENS_9StringRefEDpOTL0__">try_emplace</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col8 ref" href="#28ContextStr" title='ContextStr' data-ref="28ContextStr" data-ref-filename="28ContextStr">ContextStr</a>, <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a><a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamplesC1Ev" title='llvm::sampleprof::FunctionSamples::FunctionSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamplesC1Ev" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamplesC1Ev">(</a>));</td></tr>
<tr><th id="193">193</th><td>  <b>if</b> (<a class="local col9 ref" href="#29Ret" title='Ret' data-ref="29Ret" data-ref-filename="29Ret">Ret</a>.<span class='ref field' title='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>) {</td></tr>
<tr><th id="194">194</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SampleContext" title='llvm::sampleprof::SampleContext' data-ref="llvm::sampleprof::SampleContext" data-ref-filename="llvm..sampleprof..SampleContext">SampleContext</a> <dfn class="local col0 decl" id="30FContext" title='FContext' data-type='llvm::sampleprof::SampleContext' data-ref="30FContext" data-ref-filename="30FContext">FContext</dfn><a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof13SampleContextC1ENS_9StringRefENS0_16ContextStateMaskE" title='llvm::sampleprof::SampleContext::SampleContext' data-ref="_ZN4llvm10sampleprof13SampleContextC1ENS_9StringRefENS0_16ContextStateMaskE" data-ref-filename="_ZN4llvm10sampleprof13SampleContextC1ENS_9StringRefENS0_16ContextStateMaskE">(</a><a class="local col9 ref" href="#29Ret" title='Ret' data-ref="29Ret" data-ref-filename="29Ret">Ret</a>.<span class='ref field' title='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span><a class="ref fn" href="../../include/llvm/ADT/iterator.h.html#_ZN4llvm20iterator_facade_baseptEv" title='llvm::iterator_facade_base::operator-&gt;' data-ref="_ZN4llvm20iterator_facade_baseptEv" data-ref-filename="_ZN4llvm20iterator_facade_baseptEv">-&gt;</a><a class="ref fn" href="../../include/llvm/ADT/StringMapEntry.h.html#_ZNK4llvm14StringMapEntry5firstEv" title='llvm::StringMapEntry::first' data-ref="_ZNK4llvm14StringMapEntry5firstEv" data-ref-filename="_ZNK4llvm14StringMapEntry5firstEv">first</a>(), <a class="enum" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::RawContext" title='llvm::sampleprof::RawContext' data-ref="llvm::sampleprof::RawContext" data-ref-filename="llvm..sampleprof..RawContext">RawContext</a>);</td></tr>
<tr><th id="195">195</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col1 decl" id="31FProfile" title='FProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="31FProfile" data-ref-filename="31FProfile">FProfile</dfn> = <a class="local col9 ref" href="#29Ret" title='Ret' data-ref="29Ret" data-ref-filename="29Ret">Ret</a>.<span class='ref field' title='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span><a class="ref fn" href="../../include/llvm/ADT/iterator.h.html#_ZN4llvm20iterator_facade_baseptEv" title='llvm::iterator_facade_base::operator-&gt;' data-ref="_ZN4llvm20iterator_facade_baseptEv" data-ref-filename="_ZN4llvm20iterator_facade_baseptEv">-&gt;</a><a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>;</td></tr>
<tr><th id="196">196</th><td>    <a class="local col1 ref" href="#31FProfile" title='FProfile' data-ref="31FProfile" data-ref-filename="31FProfile">FProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples10setContextERKNS0_13SampleContextE" title='llvm::sampleprof::FunctionSamples::setContext' data-ref="_ZN4llvm10sampleprof15FunctionSamples10setContextERKNS0_13SampleContextE" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples10setContextERKNS0_13SampleContextE">setContext</a>(<a class="local col0 ref" href="#30FContext" title='FContext' data-ref="30FContext" data-ref-filename="30FContext">FContext</a>);</td></tr>
<tr><th id="197">197</th><td>  }</td></tr>
<tr><th id="198">198</th><td>  <b>return</b> <a class="local col9 ref" href="#29Ret" title='Ret' data-ref="29Ret" data-ref-filename="29Ret">Ret</a>.<span class='ref field' title='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span><a class="ref fn" href="../../include/llvm/ADT/iterator.h.html#_ZN4llvm20iterator_facade_baseptEv" title='llvm::iterator_facade_base::operator-&gt;' data-ref="_ZN4llvm20iterator_facade_baseptEv" data-ref-filename="_ZN4llvm20iterator_facade_baseptEv">-&gt;</a><a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>;</td></tr>
<tr><th id="199">199</th><td>}</td></tr>
<tr><th id="200">200</th><td></td></tr>
<tr><th id="201">201</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof18CSProfileGenerator35updateBodySamplesforFunctionProfileERNS0_15FunctionSamplesERKSt4pairINSt7__cxx1112basic_stringIcSt11char_tra7008962" title='llvm::sampleprof::CSProfileGenerator::updateBodySamplesforFunctionProfile' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator35updateBodySamplesforFunctionProfileERNS0_15FunctionSamplesERKSt4pairINSt7__cxx1112basic_stringIcSt11char_tra7008962" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator35updateBodySamplesforFunctionProfileERNS0_15FunctionSamplesERKSt4pairINSt7__cxx1112basic_stringIcSt11char_tra7008962">updateBodySamplesforFunctionProfile</dfn>(</td></tr>
<tr><th id="202">202</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col2 decl" id="32FunctionProfile" title='FunctionProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="32FunctionProfile" data-ref-filename="32FunctionProfile">FunctionProfile</dfn>, <em>const</em> <a class="typedef" href="CallContext.h.html#llvm::sampleprof::FrameLocation" title='llvm::sampleprof::FrameLocation' data-type='std::pair&lt;std::string, LineLocation&gt;' data-ref="llvm::sampleprof::FrameLocation" data-ref-filename="llvm..sampleprof..FrameLocation">FrameLocation</a> &amp;<dfn class="local col3 decl" id="33LeafLoc" title='LeafLoc' data-type='const llvm::sampleprof::FrameLocation &amp;' data-ref="33LeafLoc" data-ref-filename="33LeafLoc">LeafLoc</dfn>,</td></tr>
<tr><th id="203">203</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="34Count" title='Count' data-type='uint64_t' data-ref="34Count" data-ref-filename="34Count">Count</dfn>) {</td></tr>
<tr><th id="204">204</th><td>  <i>// Filter out invalid negative(int type) lineOffset</i></td></tr>
<tr><th id="205">205</th><td>  <b>if</b> (<a class="local col3 ref" href="#33LeafLoc" title='LeafLoc' data-ref="33LeafLoc" data-ref-filename="33LeafLoc">LeafLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::LineOffset" title='llvm::sampleprof::LineLocation::LineOffset' data-ref="llvm::sampleprof::LineLocation::LineOffset" data-ref-filename="llvm..sampleprof..LineLocation..LineOffset">LineOffset</a> &amp; <var>0x80000000</var>)</td></tr>
<tr><th id="206">206</th><td>    <b>return</b>;</td></tr>
<tr><th id="207">207</th><td>  <i>// Use the maximum count of samples with same line location</i></td></tr>
<tr><th id="208">208</th><td>  <a class="type" href="../../include/llvm/Support/ErrorOr.h.html#llvm::ErrorOr" title='llvm::ErrorOr' data-ref="llvm::ErrorOr" data-ref-filename="llvm..ErrorOr">ErrorOr</a>&lt;<a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>&gt; <dfn class="local col5 decl" id="35R" title='R' data-type='ErrorOr&lt;uint64_t&gt;' data-ref="35R" data-ref-filename="35R">R</dfn> = <a class="local col2 ref" href="#32FunctionProfile" title='FunctionProfile' data-ref="32FunctionProfile" data-ref-filename="32FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples13findSamplesAtEjj" title='llvm::sampleprof::FunctionSamples::findSamplesAt' data-ref="_ZNK4llvm10sampleprof15FunctionSamples13findSamplesAtEjj" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples13findSamplesAtEjj">findSamplesAt</a>(</td></tr>
<tr><th id="209">209</th><td>      <a class="local col3 ref" href="#33LeafLoc" title='LeafLoc' data-ref="33LeafLoc" data-ref-filename="33LeafLoc">LeafLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::LineOffset" title='llvm::sampleprof::LineLocation::LineOffset' data-ref="llvm::sampleprof::LineLocation::LineOffset" data-ref-filename="llvm..sampleprof..LineLocation..LineOffset">LineOffset</a>, <a class="local col3 ref" href="#33LeafLoc" title='LeafLoc' data-ref="33LeafLoc" data-ref-filename="33LeafLoc">LeafLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::Discriminator" title='llvm::sampleprof::LineLocation::Discriminator' data-ref="llvm::sampleprof::LineLocation::Discriminator" data-ref-filename="llvm..sampleprof..LineLocation..Discriminator">Discriminator</a>);</td></tr>
<tr><th id="210">210</th><td>  <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col6 decl" id="36PreviousCount" title='PreviousCount' data-type='uint64_t' data-ref="36PreviousCount" data-ref-filename="36PreviousCount">PreviousCount</dfn> = <a class="ref fn fake" href="../../include/llvm/Support/ErrorOr.h.html#_ZNK4llvm7ErrorOrcvbEv" title='llvm::ErrorOr::operator bool' data-ref="_ZNK4llvm7ErrorOrcvbEv" data-ref-filename="_ZNK4llvm7ErrorOrcvbEv"></a><a class="local col5 ref" href="#35R" title='R' data-ref="35R" data-ref-filename="35R">R</a> ? <a class="local col5 ref" href="#35R" title='R' data-ref="35R" data-ref-filename="35R">R</a>.<a class="ref fn" href="../../include/llvm/Support/ErrorOr.h.html#_ZN4llvm7ErrorOr3getEv" title='llvm::ErrorOr::get' data-ref="_ZN4llvm7ErrorOr3getEv" data-ref-filename="_ZN4llvm7ErrorOr3getEv">get</a>() : <var>0</var>;</td></tr>
<tr><th id="211">211</th><td>  <b>if</b> (<a class="local col6 ref" href="#36PreviousCount" title='PreviousCount' data-ref="36PreviousCount" data-ref-filename="36PreviousCount">PreviousCount</a> &lt; <a class="local col4 ref" href="#34Count" title='Count' data-ref="34Count" data-ref-filename="34Count">Count</a>) {</td></tr>
<tr><th id="212">212</th><td>    <a class="local col2 ref" href="#32FunctionProfile" title='FunctionProfile' data-ref="32FunctionProfile" data-ref-filename="32FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" title='llvm::sampleprof::FunctionSamples::addBodySamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm">addBodySamples</a>(<a class="local col3 ref" href="#33LeafLoc" title='LeafLoc' data-ref="33LeafLoc" data-ref-filename="33LeafLoc">LeafLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::LineOffset" title='llvm::sampleprof::LineLocation::LineOffset' data-ref="llvm::sampleprof::LineLocation::LineOffset" data-ref-filename="llvm..sampleprof..LineLocation..LineOffset">LineOffset</a>,</td></tr>
<tr><th id="213">213</th><td>                                   <a class="local col3 ref" href="#33LeafLoc" title='LeafLoc' data-ref="33LeafLoc" data-ref-filename="33LeafLoc">LeafLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::Discriminator" title='llvm::sampleprof::LineLocation::Discriminator' data-ref="llvm::sampleprof::LineLocation::Discriminator" data-ref-filename="llvm..sampleprof..LineLocation..Discriminator">Discriminator</a>,</td></tr>
<tr><th id="214">214</th><td>                                   <a class="local col4 ref" href="#34Count" title='Count' data-ref="34Count" data-ref-filename="34Count">Count</a> - <a class="local col6 ref" href="#36PreviousCount" title='PreviousCount' data-ref="36PreviousCount" data-ref-filename="36PreviousCount">PreviousCount</a>);</td></tr>
<tr><th id="215">215</th><td>  }</td></tr>
<tr><th id="216">216</th><td>}</td></tr>
<tr><th id="217">217</th><td></td></tr>
<tr><th id="218">218</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof18CSProfileGenerator27populateFunctionBodySamplesERNS0_15FunctionSamplesERKSt3mapISt4pairImmEmSt4lessIS6_ESaIS5_IKS6_mEEEPNS0_14ProfiledBinaryE" title='llvm::sampleprof::CSProfileGenerator::populateFunctionBodySamples' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator27populateFunctionBodySamplesERNS0_15FunctionSamplesERKSt3mapISt4pairImmEmSt4lessIS6_ESaIS5_IKS6_mEEEPNS0_14ProfiledBinaryE" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator27populateFunctionBodySamplesERNS0_15FunctionSamplesERKSt3mapISt4pairImmEmSt4lessIS6_ESaIS5_IKS6_mEEEPNS0_14ProfiledBinaryE">populateFunctionBodySamples</dfn>(</td></tr>
<tr><th id="219">219</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col7 decl" id="37FunctionProfile" title='FunctionProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="37FunctionProfile" data-ref-filename="37FunctionProfile">FunctionProfile</dfn>, <em>const</em> <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::RangeSample" title='llvm::sampleprof::RangeSample' data-type='std::map&lt;std::pair&lt;uint64_t, uint64_t&gt;, uint64_t&gt;' data-ref="llvm::sampleprof::RangeSample" data-ref-filename="llvm..sampleprof..RangeSample">RangeSample</a> &amp;<dfn class="local col8 decl" id="38RangeCounter" title='RangeCounter' data-type='const llvm::sampleprof::RangeSample &amp;' data-ref="38RangeCounter" data-ref-filename="38RangeCounter">RangeCounter</dfn>,</td></tr>
<tr><th id="220">220</th><td>    <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::ProfiledBinary" title='llvm::sampleprof::ProfiledBinary' data-ref="llvm::sampleprof::ProfiledBinary" data-ref-filename="llvm..sampleprof..ProfiledBinary">ProfiledBinary</a> *<dfn class="local col9 decl" id="39Binary" title='Binary' data-type='llvm::sampleprof::ProfiledBinary *' data-ref="39Binary" data-ref-filename="39Binary">Binary</dfn>) {</td></tr>
<tr><th id="221">221</th><td>  <i>// Compute disjoint ranges first, so we can use MAX</i></td></tr>
<tr><th id="222">222</th><td><i>  // for calculating count for each location.</i></td></tr>
<tr><th id="223">223</th><td>  <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::RangeSample" title='llvm::sampleprof::RangeSample' data-type='std::map&lt;std::pair&lt;uint64_t, uint64_t&gt;, uint64_t&gt;' data-ref="llvm::sampleprof::RangeSample" data-ref-filename="llvm..sampleprof..RangeSample">RangeSample</a> <span class='ref fn fake' title='std::map::map&lt;_Key, _Tp, _Compare, _Alloc&gt;' data-ref="_ZNSt3mapC1Ev" data-ref-filename="_ZNSt3mapC1Ev"></span><dfn class="local col0 decl" id="40Ranges" title='Ranges' data-type='llvm::sampleprof::RangeSample' data-ref="40Ranges" data-ref-filename="40Ranges">Ranges</dfn>;</td></tr>
<tr><th id="224">224</th><td>  <a class="member fn" href="#_ZN4llvm10sampleprof16ProfileGenerator18findDisjointRangesERSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERKSA_" title='llvm::sampleprof::ProfileGenerator::findDisjointRanges' data-ref="_ZN4llvm10sampleprof16ProfileGenerator18findDisjointRangesERSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERKSA_" data-ref-filename="_ZN4llvm10sampleprof16ProfileGenerator18findDisjointRangesERSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERKSA_">findDisjointRanges</a>(<span class='refarg'><a class="local col0 ref" href="#40Ranges" title='Ranges' data-ref="40Ranges" data-ref-filename="40Ranges">Ranges</a></span>, <a class="local col8 ref" href="#38RangeCounter" title='RangeCounter' data-ref="38RangeCounter" data-ref-filename="38RangeCounter">RangeCounter</a>);</td></tr>
<tr><th id="225">225</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col1 decl" id="41Range" title='Range' data-type='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;' data-ref="41Range" data-ref-filename="41Range">Range</dfn> : <a class="local col0 ref" href="#40Ranges" title='Ranges' data-ref="40Ranges" data-ref-filename="40Ranges">Ranges</a>) {</td></tr>
<tr><th id="226">226</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="42RangeBegin" title='RangeBegin' data-type='uint64_t' data-ref="42RangeBegin" data-ref-filename="42RangeBegin">RangeBegin</dfn> = <a class="local col9 ref" href="#39Binary" title='Binary' data-ref="39Binary" data-ref-filename="39Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" title='llvm::sampleprof::ProfiledBinary::offsetToVirtualAddr' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm">offsetToVirtualAddr</a>(<a class="local col1 ref" href="#41Range" title='Range' data-ref="41Range" data-ref-filename="41Range">Range</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>);</td></tr>
<tr><th id="227">227</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="43RangeEnd" title='RangeEnd' data-type='uint64_t' data-ref="43RangeEnd" data-ref-filename="43RangeEnd">RangeEnd</dfn> = <a class="local col9 ref" href="#39Binary" title='Binary' data-ref="39Binary" data-ref-filename="39Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" title='llvm::sampleprof::ProfiledBinary::offsetToVirtualAddr' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm">offsetToVirtualAddr</a>(<a class="local col1 ref" href="#41Range" title='Range' data-ref="41Range" data-ref-filename="41Range">Range</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>);</td></tr>
<tr><th id="228">228</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="44Count" title='Count' data-type='uint64_t' data-ref="44Count" data-ref-filename="44Count">Count</dfn> = <a class="local col1 ref" href="#41Range" title='Range' data-ref="41Range" data-ref-filename="41Range">Range</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="229">229</th><td>    <i>// Disjoint ranges have introduce zero-filled gap that</i></td></tr>
<tr><th id="230">230</th><td><i>    // doesn't belong to current context, filter them out.</i></td></tr>
<tr><th id="231">231</th><td>    <b>if</b> (<a class="local col4 ref" href="#44Count" title='Count' data-ref="44Count" data-ref-filename="44Count">Count</a> == <var>0</var>)</td></tr>
<tr><th id="232">232</th><td>      <b>continue</b>;</td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td>    <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::InstructionPointer" title='llvm::sampleprof::InstructionPointer' data-ref="llvm::sampleprof::InstructionPointer" data-ref-filename="llvm..sampleprof..InstructionPointer">InstructionPointer</a> <dfn class="local col5 decl" id="45IP" title='IP' data-type='llvm::sampleprof::InstructionPointer' data-ref="45IP" data-ref-filename="45IP">IP</dfn><a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof18InstructionPointerC1EPNS0_14ProfiledBinaryEmb" title='llvm::sampleprof::InstructionPointer::InstructionPointer' data-ref="_ZN4llvm10sampleprof18InstructionPointerC1EPNS0_14ProfiledBinaryEmb" data-ref-filename="_ZN4llvm10sampleprof18InstructionPointerC1EPNS0_14ProfiledBinaryEmb">(</a><a class="local col9 ref" href="#39Binary" title='Binary' data-ref="39Binary" data-ref-filename="39Binary">Binary</a>, <a class="local col2 ref" href="#42RangeBegin" title='RangeBegin' data-ref="42RangeBegin" data-ref-filename="42RangeBegin">RangeBegin</a>, <b>true</b>);</td></tr>
<tr><th id="235">235</th><td></td></tr>
<tr><th id="236">236</th><td>    <i>// Disjoint ranges may have range in the middle of two instr,</i></td></tr>
<tr><th id="237">237</th><td><i>    // e.g. If Instr1 at Addr1, and Instr2 at Addr2, disjoint range</i></td></tr>
<tr><th id="238">238</th><td><i>    // can be Addr1+1 to Addr2-1. We should ignore such range.</i></td></tr>
<tr><th id="239">239</th><td>    <b>if</b> (<a class="local col5 ref" href="#45IP" title='IP' data-ref="45IP" data-ref-filename="45IP">IP</a>.<a class="ref field" href="ProfiledBinary.h.html#llvm::sampleprof::InstructionPointer::(anonymous)::Address" title='llvm::sampleprof::InstructionPointer::(anonymous union)::Address' data-ref="llvm::sampleprof::InstructionPointer::(anonymous)::Address" data-ref-filename="llvm..sampleprof..InstructionPointer..(anonymous)..Address">Address</a> &gt; <a class="local col3 ref" href="#43RangeEnd" title='RangeEnd' data-ref="43RangeEnd" data-ref-filename="43RangeEnd">RangeEnd</a>)</td></tr>
<tr><th id="240">240</th><td>      <b>continue</b>;</td></tr>
<tr><th id="241">241</th><td></td></tr>
<tr><th id="242">242</th><td>    <b>while</b> (<a class="local col5 ref" href="#45IP" title='IP' data-ref="45IP" data-ref-filename="45IP">IP</a>.<a class="ref field" href="ProfiledBinary.h.html#llvm::sampleprof::InstructionPointer::(anonymous)::Address" title='llvm::sampleprof::InstructionPointer::(anonymous union)::Address' data-ref="llvm::sampleprof::InstructionPointer::(anonymous)::Address" data-ref-filename="llvm..sampleprof..InstructionPointer..(anonymous)..Address">Address</a> &lt;= <a class="local col3 ref" href="#43RangeEnd" title='RangeEnd' data-ref="43RangeEnd" data-ref-filename="43RangeEnd">RangeEnd</a>) {</td></tr>
<tr><th id="243">243</th><td>      <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col6 decl" id="46Offset" title='Offset' data-type='uint64_t' data-ref="46Offset" data-ref-filename="46Offset">Offset</dfn> = <a class="local col9 ref" href="#39Binary" title='Binary' data-ref="39Binary" data-ref-filename="39Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary19virtualAddrToOffsetEm" title='llvm::sampleprof::ProfiledBinary::virtualAddrToOffset' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary19virtualAddrToOffsetEm" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary19virtualAddrToOffsetEm">virtualAddrToOffset</a>(<a class="local col5 ref" href="#45IP" title='IP' data-ref="45IP" data-ref-filename="45IP">IP</a>.<a class="ref field" href="ProfiledBinary.h.html#llvm::sampleprof::InstructionPointer::(anonymous)::Address" title='llvm::sampleprof::InstructionPointer::(anonymous union)::Address' data-ref="llvm::sampleprof::InstructionPointer::(anonymous)::Address" data-ref-filename="llvm..sampleprof..InstructionPointer..(anonymous)..Address">Address</a>);</td></tr>
<tr><th id="244">244</th><td>      <em>auto</em> <dfn class="local col7 decl" id="47LeafLoc" title='LeafLoc' data-type='llvm::Optional&lt;const std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt; &gt;' data-ref="47LeafLoc" data-ref-filename="47LeafLoc">LeafLoc</dfn> = <a class="local col9 ref" href="#39Binary" title='Binary' data-ref="39Binary" data-ref-filename="39Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof14ProfiledBinary21getInlineLeafFrameLocB5cxx11Em" title='llvm::sampleprof::ProfiledBinary::getInlineLeafFrameLoc' data-ref="_ZN4llvm10sampleprof14ProfiledBinary21getInlineLeafFrameLocB5cxx11Em" data-ref-filename="_ZN4llvm10sampleprof14ProfiledBinary21getInlineLeafFrameLocB5cxx11Em">getInlineLeafFrameLoc</a>(<a class="local col6 ref" href="#46Offset" title='Offset' data-ref="46Offset" data-ref-filename="46Offset">Offset</a>);</td></tr>
<tr><th id="245">245</th><td>      <b>if</b> (<a class="local col7 ref" href="#47LeafLoc" title='LeafLoc' data-ref="47LeafLoc" data-ref-filename="47LeafLoc">LeafLoc</a>.<a class="ref fn" href="../../include/llvm/ADT/Optional.h.html#_ZNK4llvm8Optional8hasValueEv" title='llvm::Optional::hasValue' data-ref="_ZNK4llvm8Optional8hasValueEv" data-ref-filename="_ZNK4llvm8Optional8hasValueEv">hasValue</a>()) {</td></tr>
<tr><th id="246">246</th><td>        <i>// Recording body sample for this specific context</i></td></tr>
<tr><th id="247">247</th><td>        <a class="member fn" href="#_ZN4llvm10sampleprof18CSProfileGenerator35updateBodySamplesforFunctionProfileERNS0_15FunctionSamplesERKSt4pairINSt7__cxx1112basic_stringIcSt11char_tra7008962" title='llvm::sampleprof::CSProfileGenerator::updateBodySamplesforFunctionProfile' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator35updateBodySamplesforFunctionProfileERNS0_15FunctionSamplesERKSt4pairINSt7__cxx1112basic_stringIcSt11char_tra7008962" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator35updateBodySamplesforFunctionProfileERNS0_15FunctionSamplesERKSt4pairINSt7__cxx1112basic_stringIcSt11char_tra7008962">updateBodySamplesforFunctionProfile</a>(<span class='refarg'><a class="local col7 ref" href="#37FunctionProfile" title='FunctionProfile' data-ref="37FunctionProfile" data-ref-filename="37FunctionProfile">FunctionProfile</a></span>, <a class="ref fn" href="../../include/llvm/ADT/Optional.h.html#_ZNR4llvm8OptionaldeEv" title='llvm::Optional::operator*' data-ref="_ZNR4llvm8OptionaldeEv" data-ref-filename="_ZNR4llvm8OptionaldeEv">*</a><a class="local col7 ref" href="#47LeafLoc" title='LeafLoc' data-ref="47LeafLoc" data-ref-filename="47LeafLoc">LeafLoc</a>, <a class="local col4 ref" href="#44Count" title='Count' data-ref="44Count" data-ref-filename="44Count">Count</a>);</td></tr>
<tr><th id="248">248</th><td>      }</td></tr>
<tr><th id="249">249</th><td>      <i>// Accumulate total sample count even it's a line with invalid debug info</i></td></tr>
<tr><th id="250">250</th><td>      <a class="local col7 ref" href="#37FunctionProfile" title='FunctionProfile' data-ref="37FunctionProfile" data-ref-filename="37FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" title='llvm::sampleprof::FunctionSamples::addTotalSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm">addTotalSamples</a>(<a class="local col4 ref" href="#44Count" title='Count' data-ref="44Count" data-ref-filename="44Count">Count</a>);</td></tr>
<tr><th id="251">251</th><td>      <i>// Move to next IP within the range</i></td></tr>
<tr><th id="252">252</th><td>      <a class="local col5 ref" href="#45IP" title='IP' data-ref="45IP" data-ref-filename="45IP">IP</a>.<a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof18InstructionPointer7advanceEv" title='llvm::sampleprof::InstructionPointer::advance' data-ref="_ZN4llvm10sampleprof18InstructionPointer7advanceEv" data-ref-filename="_ZN4llvm10sampleprof18InstructionPointer7advanceEv">advance</a>();</td></tr>
<tr><th id="253">253</th><td>    }</td></tr>
<tr><th id="254">254</th><td>  }</td></tr>
<tr><th id="255">255</th><td>}</td></tr>
<tr><th id="256">256</th><td></td></tr>
<tr><th id="257">257</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof18CSProfileGenerator31populateFunctionBoundarySamplesENS_9StringRefERNS0_15FunctionSamplesERKSt3mapISt4pairImmEmSt4lessIS7_ESaIS6_14618267" title='llvm::sampleprof::CSProfileGenerator::populateFunctionBoundarySamples' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator31populateFunctionBoundarySamplesENS_9StringRefERNS0_15FunctionSamplesERKSt3mapISt4pairImmEmSt4lessIS7_ESaIS6_14618267" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator31populateFunctionBoundarySamplesENS_9StringRefERNS0_15FunctionSamplesERKSt3mapISt4pairImmEmSt4lessIS7_ESaIS6_14618267">populateFunctionBoundarySamples</dfn>(</td></tr>
<tr><th id="258">258</th><td>    <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="local col8 decl" id="48ContextId" title='ContextId' data-type='llvm::StringRef' data-ref="48ContextId" data-ref-filename="48ContextId">ContextId</dfn>, <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col9 decl" id="49FunctionProfile" title='FunctionProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="49FunctionProfile" data-ref-filename="49FunctionProfile">FunctionProfile</dfn>,</td></tr>
<tr><th id="259">259</th><td>    <em>const</em> <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::BranchSample" title='llvm::sampleprof::BranchSample' data-type='std::map&lt;std::pair&lt;uint64_t, uint64_t&gt;, uint64_t&gt;' data-ref="llvm::sampleprof::BranchSample" data-ref-filename="llvm..sampleprof..BranchSample">BranchSample</a> &amp;<dfn class="local col0 decl" id="50BranchCounters" title='BranchCounters' data-type='const llvm::sampleprof::BranchSample &amp;' data-ref="50BranchCounters" data-ref-filename="50BranchCounters">BranchCounters</dfn>, <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::ProfiledBinary" title='llvm::sampleprof::ProfiledBinary' data-ref="llvm::sampleprof::ProfiledBinary" data-ref-filename="llvm..sampleprof..ProfiledBinary">ProfiledBinary</a> *<dfn class="local col1 decl" id="51Binary" title='Binary' data-type='llvm::sampleprof::ProfiledBinary *' data-ref="51Binary" data-ref-filename="51Binary">Binary</dfn>) {</td></tr>
<tr><th id="260">260</th><td></td></tr>
<tr><th id="261">261</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col2 decl" id="52Entry" title='Entry' data-type='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;' data-ref="52Entry" data-ref-filename="52Entry">Entry</dfn> : <a class="local col0 ref" href="#50BranchCounters" title='BranchCounters' data-ref="50BranchCounters" data-ref-filename="50BranchCounters">BranchCounters</a>) {</td></tr>
<tr><th id="262">262</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="53SourceOffset" title='SourceOffset' data-type='uint64_t' data-ref="53SourceOffset" data-ref-filename="53SourceOffset">SourceOffset</dfn> = <a class="local col2 ref" href="#52Entry" title='Entry' data-ref="52Entry" data-ref-filename="52Entry">Entry</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>;</td></tr>
<tr><th id="263">263</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="54TargetOffset" title='TargetOffset' data-type='uint64_t' data-ref="54TargetOffset" data-ref-filename="54TargetOffset">TargetOffset</dfn> = <a class="local col2 ref" href="#52Entry" title='Entry' data-ref="52Entry" data-ref-filename="52Entry">Entry</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="264">264</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="55Count" title='Count' data-type='uint64_t' data-ref="55Count" data-ref-filename="55Count">Count</dfn> = <a class="local col2 ref" href="#52Entry" title='Entry' data-ref="52Entry" data-ref-filename="52Entry">Entry</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="265">265</th><td>    <i>// Get the callee name by branch target if it's a call branch</i></td></tr>
<tr><th id="266">266</th><td>    <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="local col6 decl" id="56CalleeName" title='CalleeName' data-type='llvm::StringRef' data-ref="56CalleeName" data-ref-filename="56CalleeName">CalleeName</dfn> = <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a>::<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples18getCanonicalFnNameENS_9StringRefES2_" title='llvm::sampleprof::FunctionSamples::getCanonicalFnName' data-ref="_ZN4llvm10sampleprof15FunctionSamples18getCanonicalFnNameENS_9StringRefES2_" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples18getCanonicalFnNameENS_9StringRefES2_">getCanonicalFnName</a>(</td></tr>
<tr><th id="267">267</th><td>        <a class="local col1 ref" href="#51Binary" title='Binary' data-ref="51Binary" data-ref-filename="51Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof14ProfiledBinary22getFuncFromStartOffsetEm" title='llvm::sampleprof::ProfiledBinary::getFuncFromStartOffset' data-ref="_ZN4llvm10sampleprof14ProfiledBinary22getFuncFromStartOffsetEm" data-ref-filename="_ZN4llvm10sampleprof14ProfiledBinary22getFuncFromStartOffsetEm">getFuncFromStartOffset</a>(<a class="local col4 ref" href="#54TargetOffset" title='TargetOffset' data-ref="54TargetOffset" data-ref-filename="54TargetOffset">TargetOffset</a>));</td></tr>
<tr><th id="268">268</th><td>    <b>if</b> (<a class="local col6 ref" href="#56CalleeName" title='CalleeName' data-ref="56CalleeName" data-ref-filename="56CalleeName">CalleeName</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef4sizeEv" title='llvm::StringRef::size' data-ref="_ZNK4llvm9StringRef4sizeEv" data-ref-filename="_ZNK4llvm9StringRef4sizeEv">size</a>() == <var>0</var>)</td></tr>
<tr><th id="269">269</th><td>      <b>continue</b>;</td></tr>
<tr><th id="270">270</th><td></td></tr>
<tr><th id="271">271</th><td>    <i>// Record called target sample and its count</i></td></tr>
<tr><th id="272">272</th><td>    <em>auto</em> <dfn class="local col7 decl" id="57LeafLoc" title='LeafLoc' data-type='llvm::Optional&lt;const std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt; &gt;' data-ref="57LeafLoc" data-ref-filename="57LeafLoc">LeafLoc</dfn> = <a class="local col1 ref" href="#51Binary" title='Binary' data-ref="51Binary" data-ref-filename="51Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof14ProfiledBinary21getInlineLeafFrameLocB5cxx11Em" title='llvm::sampleprof::ProfiledBinary::getInlineLeafFrameLoc' data-ref="_ZN4llvm10sampleprof14ProfiledBinary21getInlineLeafFrameLocB5cxx11Em" data-ref-filename="_ZN4llvm10sampleprof14ProfiledBinary21getInlineLeafFrameLocB5cxx11Em">getInlineLeafFrameLoc</a>(<a class="local col3 ref" href="#53SourceOffset" title='SourceOffset' data-ref="53SourceOffset" data-ref-filename="53SourceOffset">SourceOffset</a>);</td></tr>
<tr><th id="273">273</th><td>    <b>if</b> (!<a class="local col7 ref" href="#57LeafLoc" title='LeafLoc' data-ref="57LeafLoc" data-ref-filename="57LeafLoc">LeafLoc</a>.<a class="ref fn" href="../../include/llvm/ADT/Optional.h.html#_ZNK4llvm8Optional8hasValueEv" title='llvm::Optional::hasValue' data-ref="_ZNK4llvm8Optional8hasValueEv" data-ref-filename="_ZNK4llvm8Optional8hasValueEv">hasValue</a>())</td></tr>
<tr><th id="274">274</th><td>      <b>continue</b>;</td></tr>
<tr><th id="275">275</th><td>    <a class="local col9 ref" href="#49FunctionProfile" title='FunctionProfile' data-ref="49FunctionProfile" data-ref-filename="49FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm" title='llvm::sampleprof::FunctionSamples::addCalledTargetSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm">addCalledTargetSamples</a>(<a class="local col7 ref" href="#57LeafLoc" title='LeafLoc' data-ref="57LeafLoc" data-ref-filename="57LeafLoc">LeafLoc</a><a class="ref fn" href="../../include/llvm/ADT/Optional.h.html#_ZN4llvm8OptionalptEv" title='llvm::Optional::operator-&gt;' data-ref="_ZN4llvm8OptionalptEv" data-ref-filename="_ZN4llvm8OptionalptEv">-&gt;</a><span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::LineOffset" title='llvm::sampleprof::LineLocation::LineOffset' data-ref="llvm::sampleprof::LineLocation::LineOffset" data-ref-filename="llvm..sampleprof..LineLocation..LineOffset">LineOffset</a>,</td></tr>
<tr><th id="276">276</th><td>                                           <a class="local col7 ref" href="#57LeafLoc" title='LeafLoc' data-ref="57LeafLoc" data-ref-filename="57LeafLoc">LeafLoc</a><a class="ref fn" href="../../include/llvm/ADT/Optional.h.html#_ZN4llvm8OptionalptEv" title='llvm::Optional::operator-&gt;' data-ref="_ZN4llvm8OptionalptEv" data-ref-filename="_ZN4llvm8OptionalptEv">-&gt;</a><span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::Discriminator" title='llvm::sampleprof::LineLocation::Discriminator' data-ref="llvm::sampleprof::LineLocation::Discriminator" data-ref-filename="llvm..sampleprof..LineLocation..Discriminator">Discriminator</a>,</td></tr>
<tr><th id="277">277</th><td>                                           <a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col6 ref" href="#56CalleeName" title='CalleeName' data-ref="56CalleeName" data-ref-filename="56CalleeName">CalleeName</a>, <a class="local col5 ref" href="#55Count" title='Count' data-ref="55Count" data-ref-filename="55Count">Count</a>);</td></tr>
<tr><th id="278">278</th><td></td></tr>
<tr><th id="279">279</th><td>    <i>// Record head sample for called target(callee)</i></td></tr>
<tr><th id="280">280</th><td>    <span class="namespace">std::</span><span class='typedef' title='std::ostringstream' data-type='basic_ostringstream&lt;char&gt;' data-ref="std::ostringstream" data-ref-filename="std..ostringstream">ostringstream</span> <span class='ref fn fake' title='std::__cxx11::basic_ostringstream::basic_ostringstream&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1119basic_ostringstreamC1Ev" data-ref-filename="_ZNSt7__cxx1119basic_ostringstreamC1Ev"></span><dfn class="local col8 decl" id="58OCalleeCtxStr" title='OCalleeCtxStr' data-type='std::ostringstream' data-ref="58OCalleeCtxStr" data-ref-filename="58OCalleeCtxStr">OCalleeCtxStr</dfn>;</td></tr>
<tr><th id="281">281</th><td>    <b>if</b> (<a class="local col8 ref" href="#48ContextId" title='ContextId' data-ref="48ContextId" data-ref-filename="48ContextId">ContextId</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef4findES0_m" title='llvm::StringRef::find' data-ref="_ZNK4llvm9StringRef4findES0_m" data-ref-filename="_ZNK4llvm9StringRef4findES0_m">find</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>" @ "</q>) != <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a>::<a class="ref" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef::npos" title='llvm::StringRef::npos' data-ref="llvm::StringRef::npos" data-ref-filename="llvm..StringRef..npos">npos</a>) {</td></tr>
<tr><th id="282">282</th><td>      <a class="local col8 ref" href="#58OCalleeCtxStr" title='OCalleeCtxStr' data-ref="58OCalleeCtxStr" data-ref-filename="58OCalleeCtxStr">OCalleeCtxStr</a> <span class='ref fn' title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE" data-ref-filename="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE">&lt;&lt;</span> <a class="local col8 ref" href="#48ContextId" title='ContextId' data-ref="48ContextId" data-ref-filename="48ContextId">ContextId</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef6rsplitES0_" title='llvm::StringRef::rsplit' data-ref="_ZNK4llvm9StringRef6rsplitES0_" data-ref-filename="_ZNK4llvm9StringRef6rsplitES0_">rsplit</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>" @ "</q>).<span class='ref field' title='std::pair&lt;llvm::StringRef, llvm::StringRef&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef3strB5cxx11Ev" title='llvm::StringRef::str' data-ref="_ZNK4llvm9StringRef3strB5cxx11Ev" data-ref-filename="_ZNK4llvm9StringRef3strB5cxx11Ev">str</a>();</td></tr>
<tr><th id="283">283</th><td>      <a class="local col8 ref" href="#58OCalleeCtxStr" title='OCalleeCtxStr' data-ref="58OCalleeCtxStr" data-ref-filename="58OCalleeCtxStr">OCalleeCtxStr</a> <span class='ref fn' title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</span> <q>" @ "</q>;</td></tr>
<tr><th id="284">284</th><td>    }</td></tr>
<tr><th id="285">285</th><td>    <a class="local col8 ref" href="#58OCalleeCtxStr" title='OCalleeCtxStr' data-ref="58OCalleeCtxStr" data-ref-filename="58OCalleeCtxStr">OCalleeCtxStr</a> <span class='ref fn' title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE" data-ref-filename="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE">&lt;&lt;</span> <a class="ref fn" href="CallContext.h.html#_ZN4llvm10sampleprof11getCallSiteERKSt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEENS0_12LineLocationEE" title='llvm::sampleprof::getCallSite' data-ref="_ZN4llvm10sampleprof11getCallSiteERKSt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEENS0_12LineLocationEE" data-ref-filename="_ZN4llvm10sampleprof11getCallSiteERKSt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEENS0_12LineLocationEE">getCallSite</a>(<a class="ref fn" href="../../include/llvm/ADT/Optional.h.html#_ZNR4llvm8OptionaldeEv" title='llvm::Optional::operator*' data-ref="_ZNR4llvm8OptionaldeEv" data-ref-filename="_ZNR4llvm8OptionaldeEv">*</a><a class="local col7 ref" href="#57LeafLoc" title='LeafLoc' data-ref="57LeafLoc" data-ref-filename="57LeafLoc">LeafLoc</a>) <span class='ref fn' title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</span> <q>" @ "</q> <span class='ref fn' title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE" data-ref-filename="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE">&lt;&lt;</span> <a class="local col6 ref" href="#56CalleeName" title='CalleeName' data-ref="56CalleeName" data-ref-filename="56CalleeName">CalleeName</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef3strB5cxx11Ev" title='llvm::StringRef::str' data-ref="_ZNK4llvm9StringRef3strB5cxx11Ev" data-ref-filename="_ZNK4llvm9StringRef3strB5cxx11Ev">str</a>();</td></tr>
<tr><th id="286">286</th><td></td></tr>
<tr><th id="287">287</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col9 decl" id="59CalleeProfile" title='CalleeProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="59CalleeProfile" data-ref-filename="59CalleeProfile">CalleeProfile</dfn> =</td></tr>
<tr><th id="288">288</th><td>        <a class="member fn" href="#_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" title='llvm::sampleprof::CSProfileGenerator::getFunctionProfileForContext' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE">getFunctionProfileForContext</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"></a><a class="local col8 ref" href="#58OCalleeCtxStr" title='OCalleeCtxStr' data-ref="58OCalleeCtxStr" data-ref-filename="58OCalleeCtxStr">OCalleeCtxStr</a>.<span class='ref fn' title='std::__cxx11::basic_ostringstream::str' data-ref="_ZNKSt7__cxx1119basic_ostringstream3strEv" data-ref-filename="_ZNKSt7__cxx1119basic_ostringstream3strEv">str</span>());</td></tr>
<tr><th id="289">289</th><td>    <a class="macro" href="../../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(Count != <var>0</var> &amp;&amp; <q>"Unexpected zero weight branch"</q>);</td></tr>
<tr><th id="290">290</th><td>    <a class="local col9 ref" href="#59CalleeProfile" title='CalleeProfile' data-ref="59CalleeProfile" data-ref-filename="59CalleeProfile">CalleeProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples14addHeadSamplesEmm" title='llvm::sampleprof::FunctionSamples::addHeadSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples14addHeadSamplesEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples14addHeadSamplesEmm">addHeadSamples</a>(<a class="local col5 ref" href="#55Count" title='Count' data-ref="55Count" data-ref-filename="55Count">Count</a>);</td></tr>
<tr><th id="291">291</th><td>  }</td></tr>
<tr><th id="292">292</th><td>}</td></tr>
<tr><th id="293">293</th><td></td></tr>
<tr><th id="294">294</th><td><em>static</em> <a class="typedef" href="CallContext.h.html#llvm::sampleprof::FrameLocation" title='llvm::sampleprof::FrameLocation' data-type='std::pair&lt;std::string, LineLocation&gt;' data-ref="llvm::sampleprof::FrameLocation" data-ref-filename="llvm..sampleprof..FrameLocation">FrameLocation</a> <dfn class="tu decl def fn" id="_ZN4llvm10sampleprofL16getCallerContextB5cxx11ENS_9StringRefERS1_" title='llvm::sampleprof::getCallerContext' data-type='llvm::sampleprof::FrameLocation llvm::sampleprof::getCallerContext(llvm::StringRef CalleeContext, llvm::StringRef &amp; CallerNameWithContext)' data-ref="_ZN4llvm10sampleprofL16getCallerContextB5cxx11ENS_9StringRefERS1_" data-ref-filename="_ZN4llvm10sampleprofL16getCallerContextB5cxx11ENS_9StringRefERS1_">getCallerContext</dfn>(<a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="local col0 decl" id="60CalleeContext" title='CalleeContext' data-type='llvm::StringRef' data-ref="60CalleeContext" data-ref-filename="60CalleeContext">CalleeContext</dfn>,</td></tr>
<tr><th id="295">295</th><td>                                      <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> &amp;<dfn class="local col1 decl" id="61CallerNameWithContext" title='CallerNameWithContext' data-type='llvm::StringRef &amp;' data-ref="61CallerNameWithContext" data-ref-filename="61CallerNameWithContext">CallerNameWithContext</dfn>) {</td></tr>
<tr><th id="296">296</th><td>  <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="local col2 decl" id="62CallerContext" title='CallerContext' data-type='llvm::StringRef' data-ref="62CallerContext" data-ref-filename="62CallerContext">CallerContext</dfn> = <a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EOS0_" data-ref-filename="_ZN4llvm9StringRefC1EOS0_"></a><a class="local col0 ref" href="#60CalleeContext" title='CalleeContext' data-ref="60CalleeContext" data-ref-filename="60CalleeContext">CalleeContext</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef6rsplitES0_" title='llvm::StringRef::rsplit' data-ref="_ZNK4llvm9StringRef6rsplitES0_" data-ref-filename="_ZNK4llvm9StringRef6rsplitES0_">rsplit</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>" @ "</q>).<span class='ref field' title='std::pair&lt;llvm::StringRef, llvm::StringRef&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>;</td></tr>
<tr><th id="297">297</th><td>  <a class="local col1 ref" href="#61CallerNameWithContext" title='CallerNameWithContext' data-ref="61CallerNameWithContext" data-ref-filename="61CallerNameWithContext">CallerNameWithContext</a> <a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::operator=' data-ref="_ZN4llvm9StringRefaSEOS0_" data-ref-filename="_ZN4llvm9StringRefaSEOS0_">=</a> <a class="local col2 ref" href="#62CallerContext" title='CallerContext' data-ref="62CallerContext" data-ref-filename="62CallerContext">CallerContext</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef6rsplitEc" title='llvm::StringRef::rsplit' data-ref="_ZNK4llvm9StringRef6rsplitEc" data-ref-filename="_ZNK4llvm9StringRef6rsplitEc">rsplit</a>(<kbd>':'</kbd>).<span class='ref field' title='std::pair&lt;llvm::StringRef, llvm::StringRef&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>;</td></tr>
<tr><th id="298">298</th><td>  <em>auto</em> <dfn class="local col3 decl" id="63ContextSplit" title='ContextSplit' data-type='std::pair&lt;llvm::StringRef, llvm::StringRef&gt;' data-ref="63ContextSplit" data-ref-filename="63ContextSplit">ContextSplit</dfn> = <a class="local col2 ref" href="#62CallerContext" title='CallerContext' data-ref="62CallerContext" data-ref-filename="62CallerContext">CallerContext</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef6rsplitES0_" title='llvm::StringRef::rsplit' data-ref="_ZNK4llvm9StringRef6rsplitES0_" data-ref-filename="_ZNK4llvm9StringRef6rsplitES0_">rsplit</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>" @ "</q>);</td></tr>
<tr><th id="299">299</th><td>  <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="local col4 decl" id="64CallerFrameStr" title='CallerFrameStr' data-type='llvm::StringRef' data-ref="64CallerFrameStr" data-ref-filename="64CallerFrameStr">CallerFrameStr</dfn> = <a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col3 ref" href="#63ContextSplit" title='ContextSplit' data-ref="63ContextSplit" data-ref-filename="63ContextSplit">ContextSplit</a>.<span class='ref field' title='std::pair&lt;llvm::StringRef, llvm::StringRef&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef4sizeEv" title='llvm::StringRef::size' data-ref="_ZNK4llvm9StringRef4sizeEv" data-ref-filename="_ZNK4llvm9StringRef4sizeEv">size</a>() == <var>0</var></td></tr>
<tr><th id="300">300</th><td>                                 ? <a class="local col3 ref" href="#63ContextSplit" title='ContextSplit' data-ref="63ContextSplit" data-ref-filename="63ContextSplit">ContextSplit</a>.<span class='ref field' title='std::pair&lt;llvm::StringRef, llvm::StringRef&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span></td></tr>
<tr><th id="301">301</th><td>                                 : <a class="local col3 ref" href="#63ContextSplit" title='ContextSplit' data-ref="63ContextSplit" data-ref-filename="63ContextSplit">ContextSplit</a>.<span class='ref field' title='std::pair&lt;llvm::StringRef, llvm::StringRef&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="302">302</th><td>  <a class="typedef" href="CallContext.h.html#llvm::sampleprof::FrameLocation" title='llvm::sampleprof::FrameLocation' data-type='std::pair&lt;std::string, LineLocation&gt;' data-ref="llvm::sampleprof::FrameLocation" data-ref-filename="llvm..sampleprof..FrameLocation">FrameLocation</a> <dfn class="local col5 decl" id="65LeafFrameLoc" title='LeafFrameLoc' data-type='llvm::sampleprof::FrameLocation' data-ref="65LeafFrameLoc" data-ref-filename="65LeafFrameLoc">LeafFrameLoc</dfn> = <span class='ref fn' title='std::pair::pair&lt;_T1, _T2&gt;' data-ref="_ZNSt4pairC1EOTL0__RKT0_" data-ref-filename="_ZNSt4pairC1EOTL0__RKT0_">{</span><q>""</q>, <a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof12LineLocationC1Ejj" title='llvm::sampleprof::LineLocation::LineLocation' data-ref="_ZN4llvm10sampleprof12LineLocationC1Ejj" data-ref-filename="_ZN4llvm10sampleprof12LineLocationC1Ejj">{</a><var>0</var>, <var>0</var>}};</td></tr>
<tr><th id="303">303</th><td>  <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1Ev" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1Ev" data-ref-filename="_ZN4llvm9StringRefC1Ev"></a><dfn class="local col6 decl" id="66Funcname" title='Funcname' data-type='llvm::StringRef' data-ref="66Funcname" data-ref-filename="66Funcname">Funcname</dfn>;</td></tr>
<tr><th id="304">304</th><td>  <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SampleContext" title='llvm::sampleprof::SampleContext' data-ref="llvm::sampleprof::SampleContext" data-ref-filename="llvm..sampleprof..SampleContext">SampleContext</a>::<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof13SampleContext19decodeContextStringENS_9StringRefERS2_RNS0_12LineLocationE" title='llvm::sampleprof::SampleContext::decodeContextString' data-ref="_ZN4llvm10sampleprof13SampleContext19decodeContextStringENS_9StringRefERS2_RNS0_12LineLocationE" data-ref-filename="_ZN4llvm10sampleprof13SampleContext19decodeContextStringENS_9StringRefERS2_RNS0_12LineLocationE">decodeContextString</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col4 ref" href="#64CallerFrameStr" title='CallerFrameStr' data-ref="64CallerFrameStr" data-ref-filename="64CallerFrameStr">CallerFrameStr</a>, <span class='refarg'><a class="local col6 ref" href="#66Funcname" title='Funcname' data-ref="66Funcname" data-ref-filename="66Funcname">Funcname</a></span>,</td></tr>
<tr><th id="305">305</th><td>                                     <span class='refarg'><a class="local col5 ref" href="#65LeafFrameLoc" title='LeafFrameLoc' data-ref="65LeafFrameLoc" data-ref-filename="65LeafFrameLoc">LeafFrameLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span></span>);</td></tr>
<tr><th id="306">306</th><td>  <a class="local col5 ref" href="#65LeafFrameLoc" title='LeafFrameLoc' data-ref="65LeafFrameLoc" data-ref-filename="65LeafFrameLoc">LeafFrameLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span> <span class='ref fn' title='std::__cxx11::basic_string::operator=' data-ref="_ZNSt7__cxx1112basic_stringaSEONS_12basic_stringIT_T0_T1_EE" data-ref-filename="_ZNSt7__cxx1112basic_stringaSEONS_12basic_stringIT_T0_T1_EE">=</span> <a class="local col6 ref" href="#66Funcname" title='Funcname' data-ref="66Funcname" data-ref-filename="66Funcname">Funcname</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef3strB5cxx11Ev" title='llvm::StringRef::str' data-ref="_ZNK4llvm9StringRef3strB5cxx11Ev" data-ref-filename="_ZNK4llvm9StringRef3strB5cxx11Ev">str</a>();</td></tr>
<tr><th id="307">307</th><td>  <b>return</b> <a class="local col5 ref" href="#65LeafFrameLoc" title='LeafFrameLoc' data-ref="65LeafFrameLoc" data-ref-filename="65LeafFrameLoc">LeafFrameLoc</a>;</td></tr>
<tr><th id="308">308</th><td>}</td></tr>
<tr><th id="309">309</th><td></td></tr>
<tr><th id="310">310</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof18CSProfileGenerator31populateInferredFunctionSamplesEv" title='llvm::sampleprof::CSProfileGenerator::populateInferredFunctionSamples' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator31populateInferredFunctionSamplesEv" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator31populateInferredFunctionSamplesEv">populateInferredFunctionSamples</dfn>() {</td></tr>
<tr><th id="311">311</th><td>  <b>for</b> (<em>const</em> <em>auto</em> &amp;<dfn class="local col7 decl" id="67Item" title='Item' data-type='const llvm::StringMapEntry&lt;llvm::sampleprof::FunctionSamples&gt; &amp;' data-ref="67Item" data-ref-filename="67Item">Item</dfn> : <a class="member field" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator::ProfileMap" title='llvm::sampleprof::ProfileGenerator::ProfileMap' data-ref="llvm::sampleprof::ProfileGenerator::ProfileMap" data-ref-filename="llvm..sampleprof..ProfileGenerator..ProfileMap">ProfileMap</a>) {</td></tr>
<tr><th id="312">312</th><td>    <em>const</em> <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="local col8 decl" id="68CalleeContext" title='CalleeContext' data-type='const llvm::StringRef' data-ref="68CalleeContext" data-ref-filename="68CalleeContext">CalleeContext</dfn> = <a class="local col7 ref" href="#67Item" title='Item' data-ref="67Item" data-ref-filename="67Item">Item</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMapEntry.h.html#_ZNK4llvm14StringMapEntry5firstEv" title='llvm::StringMapEntry::first' data-ref="_ZNK4llvm14StringMapEntry5firstEv" data-ref-filename="_ZNK4llvm14StringMapEntry5firstEv">first</a>();</td></tr>
<tr><th id="313">313</th><td>    <em>const</em> <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col9 decl" id="69CalleeProfile" title='CalleeProfile' data-type='const llvm::sampleprof::FunctionSamples &amp;' data-ref="69CalleeProfile" data-ref-filename="69CalleeProfile">CalleeProfile</dfn> = <a class="local col7 ref" href="#67Item" title='Item' data-ref="67Item" data-ref-filename="67Item">Item</a>.<a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>;</td></tr>
<tr><th id="314">314</th><td></td></tr>
<tr><th id="315">315</th><td>    <i>// If we already have head sample counts, we must have value profile</i></td></tr>
<tr><th id="316">316</th><td><i>    // for call sites added already. Skip to avoid double counting.</i></td></tr>
<tr><th id="317">317</th><td>    <b>if</b> (<a class="local col9 ref" href="#69CalleeProfile" title='CalleeProfile' data-ref="69CalleeProfile" data-ref-filename="69CalleeProfile">CalleeProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples14getHeadSamplesEv" title='llvm::sampleprof::FunctionSamples::getHeadSamples' data-ref="_ZNK4llvm10sampleprof15FunctionSamples14getHeadSamplesEv" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples14getHeadSamplesEv">getHeadSamples</a>())</td></tr>
<tr><th id="318">318</th><td>      <b>continue</b>;</td></tr>
<tr><th id="319">319</th><td>    <i>// If we don't have context, nothing to do for caller's call site.</i></td></tr>
<tr><th id="320">320</th><td><i>    // This could happen for entry point function.</i></td></tr>
<tr><th id="321">321</th><td>    <b>if</b> (<a class="local col8 ref" href="#68CalleeContext" title='CalleeContext' data-ref="68CalleeContext" data-ref-filename="68CalleeContext">CalleeContext</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef4findES0_m" title='llvm::StringRef::find' data-ref="_ZNK4llvm9StringRef4findES0_m" data-ref-filename="_ZNK4llvm9StringRef4findES0_m">find</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>" @ "</q>) == <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a>::<a class="ref" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef::npos" title='llvm::StringRef::npos' data-ref="llvm::StringRef::npos" data-ref-filename="llvm..StringRef..npos">npos</a>)</td></tr>
<tr><th id="322">322</th><td>      <b>continue</b>;</td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td>    <i>// Infer Caller's frame loc and context ID through string splitting</i></td></tr>
<tr><th id="325">325</th><td>    <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1Ev" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1Ev" data-ref-filename="_ZN4llvm9StringRefC1Ev"></a><dfn class="local col0 decl" id="70CallerContextId" title='CallerContextId' data-type='llvm::StringRef' data-ref="70CallerContextId" data-ref-filename="70CallerContextId">CallerContextId</dfn>;</td></tr>
<tr><th id="326">326</th><td>    <a class="typedef" href="CallContext.h.html#llvm::sampleprof::FrameLocation" title='llvm::sampleprof::FrameLocation' data-type='std::pair&lt;std::string, LineLocation&gt;' data-ref="llvm::sampleprof::FrameLocation" data-ref-filename="llvm..sampleprof..FrameLocation">FrameLocation</a> &amp;&amp;<dfn class="local col1 decl" id="71CallerLeafFrameLoc" title='CallerLeafFrameLoc' data-type='llvm::sampleprof::FrameLocation &amp;&amp;' data-ref="71CallerLeafFrameLoc" data-ref-filename="71CallerLeafFrameLoc">CallerLeafFrameLoc</dfn> =</td></tr>
<tr><th id="327">327</th><td>        <a class="tu ref fn" href="#_ZN4llvm10sampleprofL16getCallerContextB5cxx11ENS_9StringRefERS1_" title='llvm::sampleprof::getCallerContext' data-use='c' data-ref="_ZN4llvm10sampleprofL16getCallerContextB5cxx11ENS_9StringRefERS1_" data-ref-filename="_ZN4llvm10sampleprofL16getCallerContextB5cxx11ENS_9StringRefERS1_">getCallerContext</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col8 ref" href="#68CalleeContext" title='CalleeContext' data-ref="68CalleeContext" data-ref-filename="68CalleeContext">CalleeContext</a>, <span class='refarg'><a class="local col0 ref" href="#70CallerContextId" title='CallerContextId' data-ref="70CallerContextId" data-ref-filename="70CallerContextId">CallerContextId</a></span>);</td></tr>
<tr><th id="328">328</th><td></td></tr>
<tr><th id="329">329</th><td>    <i>// It's possible that we haven't seen any sample directly in the caller,</i></td></tr>
<tr><th id="330">330</th><td><i>    // in which case CallerProfile will not exist. But we can't modify</i></td></tr>
<tr><th id="331">331</th><td><i>    // ProfileMap while iterating it.</i></td></tr>
<tr><th id="332">332</th><td><i>    // TODO: created function profile for those callers too</i></td></tr>
<tr><th id="333">333</th><td>    <b>if</b> (<a class="member field" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator::ProfileMap" title='llvm::sampleprof::ProfileGenerator::ProfileMap' data-ref="llvm::sampleprof::ProfileGenerator::ProfileMap" data-ref-filename="llvm..sampleprof..ProfileGenerator..ProfileMap">ProfileMap</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMap4findENS_9StringRefE" title='llvm::StringMap::find' data-ref="_ZN4llvm9StringMap4findENS_9StringRefE" data-ref-filename="_ZN4llvm9StringMap4findENS_9StringRefE">find</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col0 ref" href="#70CallerContextId" title='CallerContextId' data-ref="70CallerContextId" data-ref-filename="70CallerContextId">CallerContextId</a>) <a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvmeqERKT_S2_" title='llvm::operator==' data-ref="_ZN4llvmeqERKT_S2_" data-ref-filename="_ZN4llvmeqERKT_S2_">==</a> <a class="member field" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator::ProfileMap" title='llvm::sampleprof::ProfileGenerator::ProfileMap' data-ref="llvm::sampleprof::ProfileGenerator::ProfileMap" data-ref-filename="llvm..sampleprof..ProfileGenerator..ProfileMap">ProfileMap</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMap3endEv" title='llvm::StringMap::end' data-ref="_ZN4llvm9StringMap3endEv" data-ref-filename="_ZN4llvm9StringMap3endEv">end</a>())</td></tr>
<tr><th id="334">334</th><td>      <b>continue</b>;</td></tr>
<tr><th id="335">335</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col2 decl" id="72CallerProfile" title='CallerProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="72CallerProfile" data-ref-filename="72CallerProfile">CallerProfile</dfn> = <a class="member field" href="ProfileGenerator.h.html#llvm::sampleprof::ProfileGenerator::ProfileMap" title='llvm::sampleprof::ProfileGenerator::ProfileMap' data-ref="llvm::sampleprof::ProfileGenerator::ProfileMap" data-ref-filename="llvm..sampleprof..ProfileGenerator..ProfileMap">ProfileMap</a><a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMapixENS_9StringRefE" title='llvm::StringMap::operator[]' data-ref="_ZN4llvm9StringMapixENS_9StringRefE" data-ref-filename="_ZN4llvm9StringMapixENS_9StringRefE">[<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col0 ref" href="#70CallerContextId" title='CallerContextId' data-ref="70CallerContextId" data-ref-filename="70CallerContextId">CallerContextId</a>]</a>;</td></tr>
<tr><th id="336">336</th><td></td></tr>
<tr><th id="337">337</th><td>    <i>// Since we don't have call count for inlined functions, we</i></td></tr>
<tr><th id="338">338</th><td><i>    // estimate it from inlinee's profile using entry body sample.</i></td></tr>
<tr><th id="339">339</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="73EstimatedCallCount" title='EstimatedCallCount' data-type='uint64_t' data-ref="73EstimatedCallCount" data-ref-filename="73EstimatedCallCount">EstimatedCallCount</dfn> = <a class="local col9 ref" href="#69CalleeProfile" title='CalleeProfile' data-ref="69CalleeProfile" data-ref-filename="69CalleeProfile">CalleeProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples15getEntrySamplesEv" title='llvm::sampleprof::FunctionSamples::getEntrySamples' data-ref="_ZNK4llvm10sampleprof15FunctionSamples15getEntrySamplesEv" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples15getEntrySamplesEv">getEntrySamples</a>();</td></tr>
<tr><th id="340">340</th><td>    <i>// If we don't have samples with location, use 1 to indicate live.</i></td></tr>
<tr><th id="341">341</th><td>    <b>if</b> (!<a class="local col3 ref" href="#73EstimatedCallCount" title='EstimatedCallCount' data-ref="73EstimatedCallCount" data-ref-filename="73EstimatedCallCount">EstimatedCallCount</a> &amp;&amp; !<a class="local col9 ref" href="#69CalleeProfile" title='CalleeProfile' data-ref="69CalleeProfile" data-ref-filename="69CalleeProfile">CalleeProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples14getBodySamplesEv" title='llvm::sampleprof::FunctionSamples::getBodySamples' data-ref="_ZNK4llvm10sampleprof15FunctionSamples14getBodySamplesEv" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples14getBodySamplesEv">getBodySamples</a>().<span class='ref fn' title='std::map::size' data-ref="_ZNKSt3map4sizeEv" data-ref-filename="_ZNKSt3map4sizeEv">size</span>())</td></tr>
<tr><th id="342">342</th><td>      <a class="local col3 ref" href="#73EstimatedCallCount" title='EstimatedCallCount' data-ref="73EstimatedCallCount" data-ref-filename="73EstimatedCallCount">EstimatedCallCount</a> = <var>1</var>;</td></tr>
<tr><th id="343">343</th><td>    <a class="local col2 ref" href="#72CallerProfile" title='CallerProfile' data-ref="72CallerProfile" data-ref-filename="72CallerProfile">CallerProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm" title='llvm::sampleprof::FunctionSamples::addCalledTargetSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm">addCalledTargetSamples</a>(</td></tr>
<tr><th id="344">344</th><td>        <a class="local col1 ref" href="#71CallerLeafFrameLoc" title='CallerLeafFrameLoc' data-ref="71CallerLeafFrameLoc" data-ref-filename="71CallerLeafFrameLoc">CallerLeafFrameLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::LineOffset" title='llvm::sampleprof::LineLocation::LineOffset' data-ref="llvm::sampleprof::LineLocation::LineOffset" data-ref-filename="llvm..sampleprof..LineLocation..LineOffset">LineOffset</a>,</td></tr>
<tr><th id="345">345</th><td>        <a class="local col1 ref" href="#71CallerLeafFrameLoc" title='CallerLeafFrameLoc' data-ref="71CallerLeafFrameLoc" data-ref-filename="71CallerLeafFrameLoc">CallerLeafFrameLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::Discriminator" title='llvm::sampleprof::LineLocation::Discriminator' data-ref="llvm::sampleprof::LineLocation::Discriminator" data-ref-filename="llvm..sampleprof..LineLocation..Discriminator">Discriminator</a>,</td></tr>
<tr><th id="346">346</th><td>        <a class="local col9 ref" href="#69CalleeProfile" title='CalleeProfile' data-ref="69CalleeProfile" data-ref-filename="69CalleeProfile">CalleeProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples10getContextEv" title='llvm::sampleprof::FunctionSamples::getContext' data-ref="_ZNK4llvm10sampleprof15FunctionSamples10getContextEv" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples10getContextEv">getContext</a>().<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof13SampleContext21getNameWithoutContextEv" title='llvm::sampleprof::SampleContext::getNameWithoutContext' data-ref="_ZNK4llvm10sampleprof13SampleContext21getNameWithoutContextEv" data-ref-filename="_ZNK4llvm10sampleprof13SampleContext21getNameWithoutContextEv">getNameWithoutContext</a>(), <a class="local col3 ref" href="#73EstimatedCallCount" title='EstimatedCallCount' data-ref="73EstimatedCallCount" data-ref-filename="73EstimatedCallCount">EstimatedCallCount</a>);</td></tr>
<tr><th id="347">347</th><td>    <a class="local col2 ref" href="#72CallerProfile" title='CallerProfile' data-ref="72CallerProfile" data-ref-filename="72CallerProfile">CallerProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" title='llvm::sampleprof::FunctionSamples::addBodySamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm">addBodySamples</a>(<a class="local col1 ref" href="#71CallerLeafFrameLoc" title='CallerLeafFrameLoc' data-ref="71CallerLeafFrameLoc" data-ref-filename="71CallerLeafFrameLoc">CallerLeafFrameLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::LineOffset" title='llvm::sampleprof::LineLocation::LineOffset' data-ref="llvm::sampleprof::LineLocation::LineOffset" data-ref-filename="llvm..sampleprof..LineLocation..LineOffset">LineOffset</a>,</td></tr>
<tr><th id="348">348</th><td>                                 <a class="local col1 ref" href="#71CallerLeafFrameLoc" title='CallerLeafFrameLoc' data-ref="71CallerLeafFrameLoc" data-ref-filename="71CallerLeafFrameLoc">CallerLeafFrameLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::Discriminator" title='llvm::sampleprof::LineLocation::Discriminator' data-ref="llvm::sampleprof::LineLocation::Discriminator" data-ref-filename="llvm..sampleprof..LineLocation..Discriminator">Discriminator</a>,</td></tr>
<tr><th id="349">349</th><td>                                 <a class="local col3 ref" href="#73EstimatedCallCount" title='EstimatedCallCount' data-ref="73EstimatedCallCount" data-ref-filename="73EstimatedCallCount">EstimatedCallCount</a>);</td></tr>
<tr><th id="350">350</th><td>    <a class="local col2 ref" href="#72CallerProfile" title='CallerProfile' data-ref="72CallerProfile" data-ref-filename="72CallerProfile">CallerProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" title='llvm::sampleprof::FunctionSamples::addTotalSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm">addTotalSamples</a>(<a class="local col3 ref" href="#73EstimatedCallCount" title='EstimatedCallCount' data-ref="73EstimatedCallCount" data-ref-filename="73EstimatedCallCount">EstimatedCallCount</a>);</td></tr>
<tr><th id="351">351</th><td>  }</td></tr>
<tr><th id="352">352</th><td>}</td></tr>
<tr><th id="353">353</th><td></td></tr>
<tr><th id="354">354</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof18CSProfileGenerator23mergeAndTrimColdProfileERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" title='llvm::sampleprof::CSProfileGenerator::mergeAndTrimColdProfile' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator23mergeAndTrimColdProfileERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator23mergeAndTrimColdProfileERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE">mergeAndTrimColdProfile</dfn>(</td></tr>
<tr><th id="355">355</th><td>    <a class="type" href="../../include/llvm/ADT/StringMap.h.html#llvm::StringMap" title='llvm::StringMap' data-ref="llvm::StringMap" data-ref-filename="llvm..StringMap">StringMap</a>&lt;<a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a>&gt; &amp;<dfn class="local col4 decl" id="74ProfileMap" title='ProfileMap' data-type='StringMap&lt;llvm::sampleprof::FunctionSamples&gt; &amp;' data-ref="74ProfileMap" data-ref-filename="74ProfileMap">ProfileMap</dfn>) {</td></tr>
<tr><th id="356">356</th><td>  <i>// Nothing to merge if sample threshold is zero</i></td></tr>
<tr><th id="357">357</th><td>  <b>if</b> (!<a class="ref fn fake" href="../../include/llvm/Support/CommandLine.h.html#_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" title='llvm::cl::opt_storage&lt;type-parameter-0-0, false, false&gt;::operator type-parameter-0-0' data-ref="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" data-ref-filename="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev"></a><a class="tu ref" href="#CSProfColdThres" title='CSProfColdThres' data-use='m' data-ref="CSProfColdThres" data-ref-filename="CSProfColdThres">CSProfColdThres</a>)</td></tr>
<tr><th id="358">358</th><td>    <b>return</b>;</td></tr>
<tr><th id="359">359</th><td></td></tr>
<tr><th id="360">360</th><td>  <i>// Filter the cold profiles from ProfileMap and move them into a tmp</i></td></tr>
<tr><th id="361">361</th><td><i>  // container</i></td></tr>
<tr><th id="362">362</th><td>  <span class="namespace">std::</span><span class='type' title='std::vector' data-ref="std::vector" data-ref-filename="std..vector">vector</span>&lt;<span class="namespace">std::</span><span class='type' title='std::pair' data-ref="std::pair" data-ref-filename="std..pair">pair</span>&lt;<a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a>, <em>const</em> <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> *&gt;&gt; <span class='ref fn fake' title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev" data-ref-filename="_ZNSt6vectorC1Ev"></span><dfn class="local col5 decl" id="75ToRemoveVec" title='ToRemoveVec' data-type='std::vector&lt;std::pair&lt;StringRef, const FunctionSamples *&gt; &gt;' data-ref="75ToRemoveVec" data-ref-filename="75ToRemoveVec">ToRemoveVec</dfn>;</td></tr>
<tr><th id="363">363</th><td>  <b>for</b> (<em>const</em> <em>auto</em> &amp;<dfn class="local col6 decl" id="76I" title='I' data-type='const llvm::StringMapEntry&lt;llvm::sampleprof::FunctionSamples&gt; &amp;' data-ref="76I" data-ref-filename="76I">I</dfn> : <a class="local col4 ref" href="#74ProfileMap" title='ProfileMap' data-ref="74ProfileMap" data-ref-filename="74ProfileMap">ProfileMap</a>) {</td></tr>
<tr><th id="364">364</th><td>    <em>const</em> <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col7 decl" id="77FunctionProfile" title='FunctionProfile' data-type='const llvm::sampleprof::FunctionSamples &amp;' data-ref="77FunctionProfile" data-ref-filename="77FunctionProfile">FunctionProfile</dfn> = <a class="local col6 ref" href="#76I" title='I' data-ref="76I" data-ref-filename="76I">I</a>.<a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>;</td></tr>
<tr><th id="365">365</th><td>    <b>if</b> (<a class="local col7 ref" href="#77FunctionProfile" title='FunctionProfile' data-ref="77FunctionProfile" data-ref-filename="77FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples15getTotalSamplesEv" title='llvm::sampleprof::FunctionSamples::getTotalSamples' data-ref="_ZNK4llvm10sampleprof15FunctionSamples15getTotalSamplesEv" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples15getTotalSamplesEv">getTotalSamples</a>() &gt;= <a class="ref fn fake" href="../../include/llvm/Support/CommandLine.h.html#_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" title='llvm::cl::opt_storage&lt;type-parameter-0-0, false, false&gt;::operator type-parameter-0-0' data-ref="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" data-ref-filename="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev"></a><a class="tu ref" href="#CSProfColdThres" title='CSProfColdThres' data-use='m' data-ref="CSProfColdThres" data-ref-filename="CSProfColdThres">CSProfColdThres</a>)</td></tr>
<tr><th id="366">366</th><td>      <b>continue</b>;</td></tr>
<tr><th id="367">367</th><td>    <a class="local col5 ref" href="#75ToRemoveVec" title='ToRemoveVec' data-ref="75ToRemoveVec" data-ref-filename="75ToRemoveVec">ToRemoveVec</a>.<span class='ref fn' title='std::vector::emplace_back' data-ref="_ZNSt6vector12emplace_backEDpOTL0__" data-ref-filename="_ZNSt6vector12emplace_backEDpOTL0__">emplace_back</span>(<a class="local col6 ref" href="#76I" title='I' data-ref="76I" data-ref-filename="76I">I</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMapEntry.h.html#_ZNK4llvm14StringMapEntry6getKeyEv" title='llvm::StringMapEntry::getKey' data-ref="_ZNK4llvm14StringMapEntry6getKeyEv" data-ref-filename="_ZNK4llvm14StringMapEntry6getKeyEv">getKey</a>(), &amp;<a class="local col6 ref" href="#76I" title='I' data-ref="76I" data-ref-filename="76I">I</a>.<a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>);</td></tr>
<tr><th id="368">368</th><td>  }</td></tr>
<tr><th id="369">369</th><td></td></tr>
<tr><th id="370">370</th><td>  <i>// Remove the code profile from ProfileMap and merge them into BaseProileMap</i></td></tr>
<tr><th id="371">371</th><td>  <a class="type" href="../../include/llvm/ADT/StringMap.h.html#llvm::StringMap" title='llvm::StringMap' data-ref="llvm::StringMap" data-ref-filename="llvm..StringMap">StringMap</a>&lt;<a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a>&gt; <a class="ref fn fake" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMapC1Ev" title='llvm::StringMap::StringMap&lt;ValueTy, AllocatorTy&gt;' data-ref="_ZN4llvm9StringMapC1Ev" data-ref-filename="_ZN4llvm9StringMapC1Ev"></a><dfn class="local col8 decl" id="78BaseProfileMap" title='BaseProfileMap' data-type='StringMap&lt;llvm::sampleprof::FunctionSamples&gt;' data-ref="78BaseProfileMap" data-ref-filename="78BaseProfileMap">BaseProfileMap</dfn>;</td></tr>
<tr><th id="372">372</th><td>  <b>for</b> (<em>const</em> <em>auto</em> &amp;<dfn class="local col9 decl" id="79I" title='I' data-type='const std::pair&lt;llvm::StringRef, const llvm::sampleprof::FunctionSamples *&gt; &amp;' data-ref="79I" data-ref-filename="79I">I</dfn> : <a class="local col5 ref" href="#75ToRemoveVec" title='ToRemoveVec' data-ref="75ToRemoveVec" data-ref-filename="75ToRemoveVec">ToRemoveVec</a>) {</td></tr>
<tr><th id="373">373</th><td>    <em>auto</em> <dfn class="local col0 decl" id="80Ret" title='Ret' data-type='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;' data-ref="80Ret" data-ref-filename="80Ret">Ret</dfn> = <a class="local col8 ref" href="#78BaseProfileMap" title='BaseProfileMap' data-ref="78BaseProfileMap" data-ref-filename="78BaseProfileMap">BaseProfileMap</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMap11try_emplaceENS_9StringRefEDpOTL0__" title='llvm::StringMap::try_emplace' data-ref="_ZN4llvm9StringMap11try_emplaceENS_9StringRefEDpOTL0__" data-ref-filename="_ZN4llvm9StringMap11try_emplaceENS_9StringRefEDpOTL0__">try_emplace</a>(</td></tr>
<tr><th id="374">374</th><td>        <a class="local col9 ref" href="#79I" title='I' data-ref="79I" data-ref-filename="79I">I</a>.<span class='ref field' title='std::pair&lt;llvm::StringRef, const llvm::sampleprof::FunctionSamples *&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>-&gt;<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples10getContextEv" title='llvm::sampleprof::FunctionSamples::getContext' data-ref="_ZNK4llvm10sampleprof15FunctionSamples10getContextEv" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples10getContextEv">getContext</a>().<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof13SampleContext21getNameWithoutContextEv" title='llvm::sampleprof::SampleContext::getNameWithoutContext' data-ref="_ZNK4llvm10sampleprof13SampleContext21getNameWithoutContextEv" data-ref-filename="_ZNK4llvm10sampleprof13SampleContext21getNameWithoutContextEv">getNameWithoutContext</a>(), <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a><a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamplesC1Ev" title='llvm::sampleprof::FunctionSamples::FunctionSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamplesC1Ev" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamplesC1Ev">(</a>));</td></tr>
<tr><th id="375">375</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col1 decl" id="81BaseProfile" title='BaseProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="81BaseProfile" data-ref-filename="81BaseProfile">BaseProfile</dfn> = <a class="local col0 ref" href="#80Ret" title='Ret' data-ref="80Ret" data-ref-filename="80Ret">Ret</a>.<span class='ref field' title='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span><a class="ref fn" href="../../include/llvm/ADT/iterator.h.html#_ZN4llvm20iterator_facade_baseptEv" title='llvm::iterator_facade_base::operator-&gt;' data-ref="_ZN4llvm20iterator_facade_baseptEv" data-ref-filename="_ZN4llvm20iterator_facade_baseptEv">-&gt;</a><a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>;</td></tr>
<tr><th id="376">376</th><td>    <a class="local col1 ref" href="#81BaseProfile" title='BaseProfile' data-ref="81BaseProfile" data-ref-filename="81BaseProfile">BaseProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples5mergeERKS1_m" title='llvm::sampleprof::FunctionSamples::merge' data-ref="_ZN4llvm10sampleprof15FunctionSamples5mergeERKS1_m" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples5mergeERKS1_m">merge</a>(*<a class="local col9 ref" href="#79I" title='I' data-ref="79I" data-ref-filename="79I">I</a>.<span class='ref field' title='std::pair&lt;llvm::StringRef, const llvm::sampleprof::FunctionSamples *&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>);</td></tr>
<tr><th id="377">377</th><td>    <a class="local col4 ref" href="#74ProfileMap" title='ProfileMap' data-ref="74ProfileMap" data-ref-filename="74ProfileMap">ProfileMap</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMap5eraseENS_9StringRefE" title='llvm::StringMap::erase' data-ref="_ZN4llvm9StringMap5eraseENS_9StringRefE" data-ref-filename="_ZN4llvm9StringMap5eraseENS_9StringRefE">erase</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col9 ref" href="#79I" title='I' data-ref="79I" data-ref-filename="79I">I</a>.<span class='ref field' title='std::pair&lt;llvm::StringRef, const llvm::sampleprof::FunctionSamples *&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>);</td></tr>
<tr><th id="378">378</th><td>  }</td></tr>
<tr><th id="379">379</th><td></td></tr>
<tr><th id="380">380</th><td>  <i>// Merge the base profiles into ProfileMap;</i></td></tr>
<tr><th id="381">381</th><td>  <b>for</b> (<em>const</em> <em>auto</em> &amp;<dfn class="local col2 decl" id="82I" title='I' data-type='const llvm::StringMapEntry&lt;llvm::sampleprof::FunctionSamples&gt; &amp;' data-ref="82I" data-ref-filename="82I">I</dfn> : <a class="local col8 ref" href="#78BaseProfileMap" title='BaseProfileMap' data-ref="78BaseProfileMap" data-ref-filename="78BaseProfileMap">BaseProfileMap</a>) {</td></tr>
<tr><th id="382">382</th><td>    <i>// Filter the cold base profile</i></td></tr>
<tr><th id="383">383</th><td>    <b>if</b> (!<a class="ref fn fake" href="../../include/llvm/Support/CommandLine.h.html#_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" title='llvm::cl::opt_storage&lt;type-parameter-0-0, false, false&gt;::operator type-parameter-0-0' data-ref="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" data-ref-filename="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev"></a><a class="tu ref" href="#CSProfKeepCold" title='CSProfKeepCold' data-use='m' data-ref="CSProfKeepCold" data-ref-filename="CSProfKeepCold">CSProfKeepCold</a> &amp;&amp; <a class="local col2 ref" href="#82I" title='I' data-ref="82I" data-ref-filename="82I">I</a>.<a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples15getTotalSamplesEv" title='llvm::sampleprof::FunctionSamples::getTotalSamples' data-ref="_ZNK4llvm10sampleprof15FunctionSamples15getTotalSamplesEv" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples15getTotalSamplesEv">getTotalSamples</a>() &lt; <a class="ref fn fake" href="../../include/llvm/Support/CommandLine.h.html#_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" title='llvm::cl::opt_storage&lt;type-parameter-0-0, false, false&gt;::operator type-parameter-0-0' data-ref="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" data-ref-filename="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev"></a><a class="tu ref" href="#CSProfColdThres" title='CSProfColdThres' data-use='m' data-ref="CSProfColdThres" data-ref-filename="CSProfColdThres">CSProfColdThres</a> &amp;&amp;</td></tr>
<tr><th id="384">384</th><td>        <a class="local col4 ref" href="#74ProfileMap" title='ProfileMap' data-ref="74ProfileMap" data-ref-filename="74ProfileMap">ProfileMap</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMap4findENS_9StringRefE" title='llvm::StringMap::find' data-ref="_ZN4llvm9StringMap4findENS_9StringRefE" data-ref-filename="_ZN4llvm9StringMap4findENS_9StringRefE">find</a>(<a class="local col2 ref" href="#82I" title='I' data-ref="82I" data-ref-filename="82I">I</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMapEntry.h.html#_ZNK4llvm14StringMapEntry6getKeyEv" title='llvm::StringMapEntry::getKey' data-ref="_ZNK4llvm14StringMapEntry6getKeyEv" data-ref-filename="_ZNK4llvm14StringMapEntry6getKeyEv">getKey</a>()) <a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvmeqERKT_S2_" title='llvm::operator==' data-ref="_ZN4llvmeqERKT_S2_" data-ref-filename="_ZN4llvmeqERKT_S2_">==</a> <a class="local col4 ref" href="#74ProfileMap" title='ProfileMap' data-ref="74ProfileMap" data-ref-filename="74ProfileMap">ProfileMap</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMap3endEv" title='llvm::StringMap::end' data-ref="_ZN4llvm9StringMap3endEv" data-ref-filename="_ZN4llvm9StringMap3endEv">end</a>())</td></tr>
<tr><th id="385">385</th><td>      <b>continue</b>;</td></tr>
<tr><th id="386">386</th><td>    <i>// Merge the profile if the original profile exists, otherwise just insert</i></td></tr>
<tr><th id="387">387</th><td><i>    // as a new profile</i></td></tr>
<tr><th id="388">388</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col3 decl" id="83OrigProfile" title='OrigProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="83OrigProfile" data-ref-filename="83OrigProfile">OrigProfile</dfn> = <a class="member fn" href="#_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" title='llvm::sampleprof::CSProfileGenerator::getFunctionProfileForContext' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE">getFunctionProfileForContext</a>(<a class="local col2 ref" href="#82I" title='I' data-ref="82I" data-ref-filename="82I">I</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMapEntry.h.html#_ZNK4llvm14StringMapEntry6getKeyEv" title='llvm::StringMapEntry::getKey' data-ref="_ZNK4llvm14StringMapEntry6getKeyEv" data-ref-filename="_ZNK4llvm14StringMapEntry6getKeyEv">getKey</a>());</td></tr>
<tr><th id="389">389</th><td>    <a class="local col3 ref" href="#83OrigProfile" title='OrigProfile' data-ref="83OrigProfile" data-ref-filename="83OrigProfile">OrigProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples5mergeERKS1_m" title='llvm::sampleprof::FunctionSamples::merge' data-ref="_ZN4llvm10sampleprof15FunctionSamples5mergeERKS1_m" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples5mergeERKS1_m">merge</a>(<a class="local col2 ref" href="#82I" title='I' data-ref="82I" data-ref-filename="82I">I</a>.<a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>);</td></tr>
<tr><th id="390">390</th><td>  }</td></tr>
<tr><th id="391">391</th><td>}</td></tr>
<tr><th id="392">392</th><td></td></tr>
<tr><th id="393">393</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<dfn class="virtual decl def fn" id="_ZN4llvm10sampleprof18CSProfileGenerator5writeESt10unique_ptrINS0_19SampleProfileWriterESt14default_deleteIS3_EERNS_9StringMapINS0_15FunctionSamplesEN11414626" title='llvm::sampleprof::CSProfileGenerator::write' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator5writeESt10unique_ptrINS0_19SampleProfileWriterESt14default_deleteIS3_EERNS_9StringMapINS0_15FunctionSamplesEN11414626" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator5writeESt10unique_ptrINS0_19SampleProfileWriterESt14default_deleteIS3_EERNS_9StringMapINS0_15FunctionSamplesEN11414626">write</dfn>(<span class="namespace">std::</span><span class='type' title='std::unique_ptr' data-ref="std::unique_ptr" data-ref-filename="std..unique_ptr">unique_ptr</span>&lt;<a class="type" href="../../include/llvm/ProfileData/SampleProfWriter.h.html#llvm::sampleprof::SampleProfileWriter" title='llvm::sampleprof::SampleProfileWriter' data-ref="llvm::sampleprof::SampleProfileWriter" data-ref-filename="llvm..sampleprof..SampleProfileWriter">SampleProfileWriter</a>&gt; <dfn class="local col4 decl" id="84Writer" title='Writer' data-type='std::unique_ptr&lt;SampleProfileWriter&gt;' data-ref="84Writer" data-ref-filename="84Writer">Writer</dfn>,</td></tr>
<tr><th id="394">394</th><td>                               <a class="type" href="../../include/llvm/ADT/StringMap.h.html#llvm::StringMap" title='llvm::StringMap' data-ref="llvm::StringMap" data-ref-filename="llvm..StringMap">StringMap</a>&lt;<a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a>&gt; &amp;<dfn class="local col5 decl" id="85ProfileMap" title='ProfileMap' data-type='StringMap&lt;llvm::sampleprof::FunctionSamples&gt; &amp;' data-ref="85ProfileMap" data-ref-filename="85ProfileMap">ProfileMap</dfn>) {</td></tr>
<tr><th id="395">395</th><td>  <a class="member fn" href="#_ZN4llvm10sampleprof18CSProfileGenerator23mergeAndTrimColdProfileERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" title='llvm::sampleprof::CSProfileGenerator::mergeAndTrimColdProfile' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator23mergeAndTrimColdProfileERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator23mergeAndTrimColdProfileERNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE">mergeAndTrimColdProfile</a>(<span class='refarg'><a class="local col5 ref" href="#85ProfileMap" title='ProfileMap' data-ref="85ProfileMap" data-ref-filename="85ProfileMap">ProfileMap</a></span>);</td></tr>
<tr><th id="396">396</th><td>  <i>// Add bracket for context key to support different profile binary format</i></td></tr>
<tr><th id="397">397</th><td>  <a class="type" href="../../include/llvm/ADT/StringMap.h.html#llvm::StringMap" title='llvm::StringMap' data-ref="llvm::StringMap" data-ref-filename="llvm..StringMap">StringMap</a>&lt;<a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a>&gt; <a class="ref fn fake" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMapC1Ev" title='llvm::StringMap::StringMap&lt;ValueTy, AllocatorTy&gt;' data-ref="_ZN4llvm9StringMapC1Ev" data-ref-filename="_ZN4llvm9StringMapC1Ev"></a><dfn class="local col6 decl" id="86CxtWithBracketPMap" title='CxtWithBracketPMap' data-type='StringMap&lt;llvm::sampleprof::FunctionSamples&gt;' data-ref="86CxtWithBracketPMap" data-ref-filename="86CxtWithBracketPMap">CxtWithBracketPMap</dfn>;</td></tr>
<tr><th id="398">398</th><td>  <b>for</b> (<em>const</em> <em>auto</em> &amp;<dfn class="local col7 decl" id="87Item" title='Item' data-type='const llvm::StringMapEntry&lt;llvm::sampleprof::FunctionSamples&gt; &amp;' data-ref="87Item" data-ref-filename="87Item">Item</dfn> : <a class="local col5 ref" href="#85ProfileMap" title='ProfileMap' data-ref="85ProfileMap" data-ref-filename="85ProfileMap">ProfileMap</a>) {</td></tr>
<tr><th id="399">399</th><td>    <span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span> <dfn class="local col8 decl" id="88ContextWithBracket" title='ContextWithBracket' data-type='std::string' data-ref="88ContextWithBracket" data-ref-filename="88ContextWithBracket">ContextWithBracket</dfn> = <q>"["</q> <span class='ref fn' title='std::operator+' data-ref="_ZStplPKT_ONSt7__cxx1112basic_stringIS_T0_T1_EE" data-ref-filename="_ZStplPKT_ONSt7__cxx1112basic_stringIS_T0_T1_EE">+</span> <a class="local col7 ref" href="#87Item" title='Item' data-ref="87Item" data-ref-filename="87Item">Item</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMapEntry.h.html#_ZNK4llvm14StringMapEntry5firstEv" title='llvm::StringMapEntry::first' data-ref="_ZNK4llvm14StringMapEntry5firstEv" data-ref-filename="_ZNK4llvm14StringMapEntry5firstEv">first</a>().<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef3strB5cxx11Ev" title='llvm::StringRef::str' data-ref="_ZNK4llvm9StringRef3strB5cxx11Ev" data-ref-filename="_ZNK4llvm9StringRef3strB5cxx11Ev">str</a>() <span class='ref fn' title='std::operator+' data-ref="_ZStplONSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZStplONSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_">+</span> <q>"]"</q>;</td></tr>
<tr><th id="400">400</th><td>    <em>auto</em> <dfn class="local col9 decl" id="89Ret" title='Ret' data-type='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;' data-ref="89Ret" data-ref-filename="89Ret">Ret</dfn> = <a class="local col6 ref" href="#86CxtWithBracketPMap" title='CxtWithBracketPMap' data-ref="86CxtWithBracketPMap" data-ref-filename="86CxtWithBracketPMap">CxtWithBracketPMap</a>.<a class="ref fn" href="../../include/llvm/ADT/StringMap.h.html#_ZN4llvm9StringMap11try_emplaceENS_9StringRefEDpOTL0__" title='llvm::StringMap::try_emplace' data-ref="_ZN4llvm9StringMap11try_emplaceENS_9StringRefEDpOTL0__" data-ref-filename="_ZN4llvm9StringMap11try_emplaceENS_9StringRefEDpOTL0__">try_emplace</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"></a><a class="local col8 ref" href="#88ContextWithBracket" title='ContextWithBracket' data-ref="88ContextWithBracket" data-ref-filename="88ContextWithBracket">ContextWithBracket</a>, <a class="local col7 ref" href="#87Item" title='Item' data-ref="87Item" data-ref-filename="87Item">Item</a>.<a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>);</td></tr>
<tr><th id="401">401</th><td>    <a class="macro" href="../../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(Ret.second &amp;&amp; <q>"Must be a unique context"</q>);</td></tr>
<tr><th id="402">402</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::SampleContext" title='llvm::sampleprof::SampleContext' data-ref="llvm::sampleprof::SampleContext" data-ref-filename="llvm..sampleprof..SampleContext">SampleContext</a> <dfn class="local col0 decl" id="90FContext" title='FContext' data-type='llvm::sampleprof::SampleContext' data-ref="90FContext" data-ref-filename="90FContext">FContext</dfn><a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof13SampleContextC1ENS_9StringRefENS0_16ContextStateMaskE" title='llvm::sampleprof::SampleContext::SampleContext' data-ref="_ZN4llvm10sampleprof13SampleContextC1ENS_9StringRefENS0_16ContextStateMaskE" data-ref-filename="_ZN4llvm10sampleprof13SampleContextC1ENS_9StringRefENS0_16ContextStateMaskE">(</a><a class="local col9 ref" href="#89Ret" title='Ret' data-ref="89Ret" data-ref-filename="89Ret">Ret</a>.<span class='ref field' title='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span><a class="ref fn" href="../../include/llvm/ADT/iterator.h.html#_ZN4llvm20iterator_facade_baseptEv" title='llvm::iterator_facade_base::operator-&gt;' data-ref="_ZN4llvm20iterator_facade_baseptEv" data-ref-filename="_ZN4llvm20iterator_facade_baseptEv">-&gt;</a><a class="ref fn" href="../../include/llvm/ADT/StringMapEntry.h.html#_ZNK4llvm14StringMapEntry5firstEv" title='llvm::StringMapEntry::first' data-ref="_ZNK4llvm14StringMapEntry5firstEv" data-ref-filename="_ZNK4llvm14StringMapEntry5firstEv">first</a>(), <a class="enum" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::RawContext" title='llvm::sampleprof::RawContext' data-ref="llvm::sampleprof::RawContext" data-ref-filename="llvm..sampleprof..RawContext">RawContext</a>);</td></tr>
<tr><th id="403">403</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col1 decl" id="91FProfile" title='FProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="91FProfile" data-ref-filename="91FProfile">FProfile</dfn> = <a class="local col9 ref" href="#89Ret" title='Ret' data-ref="89Ret" data-ref-filename="89Ret">Ret</a>.<span class='ref field' title='std::pair&lt;llvm::StringMapIterator&lt;llvm::sampleprof::FunctionSamples&gt;, bool&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span><a class="ref fn" href="../../include/llvm/ADT/iterator.h.html#_ZN4llvm20iterator_facade_baseptEv" title='llvm::iterator_facade_base::operator-&gt;' data-ref="_ZN4llvm20iterator_facade_baseptEv" data-ref-filename="_ZN4llvm20iterator_facade_baseptEv">-&gt;</a><a class="ref field" href="../../include/llvm/ADT/StringMapEntry.h.html#llvm::StringMapEntryStorage::second" title='llvm::StringMapEntryStorage&lt;llvm::sampleprof::FunctionSamples&gt;::second' data-ref="llvm::StringMapEntryStorage::second" data-ref-filename="llvm..StringMapEntryStorage..second">second</a>;</td></tr>
<tr><th id="404">404</th><td>    <a class="local col1 ref" href="#91FProfile" title='FProfile' data-ref="91FProfile" data-ref-filename="91FProfile">FProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples7setNameENS_9StringRefE" title='llvm::sampleprof::FunctionSamples::setName' data-ref="_ZN4llvm10sampleprof15FunctionSamples7setNameENS_9StringRefE" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples7setNameENS_9StringRefE">setName</a>(<a class="local col0 ref" href="#90FContext" title='FContext' data-ref="90FContext" data-ref-filename="90FContext">FContext</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof13SampleContext18getNameWithContextEb" title='llvm::sampleprof::SampleContext::getNameWithContext' data-ref="_ZNK4llvm10sampleprof13SampleContext18getNameWithContextEb" data-ref-filename="_ZNK4llvm10sampleprof13SampleContext18getNameWithContextEb">getNameWithContext</a>(<b>true</b>));</td></tr>
<tr><th id="405">405</th><td>    <a class="local col1 ref" href="#91FProfile" title='FProfile' data-ref="91FProfile" data-ref-filename="91FProfile">FProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples10setContextERKNS0_13SampleContextE" title='llvm::sampleprof::FunctionSamples::setContext' data-ref="_ZN4llvm10sampleprof15FunctionSamples10setContextERKNS0_13SampleContextE" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples10setContextERKNS0_13SampleContextE">setContext</a>(<a class="local col0 ref" href="#90FContext" title='FContext' data-ref="90FContext" data-ref-filename="90FContext">FContext</a>);</td></tr>
<tr><th id="406">406</th><td>  }</td></tr>
<tr><th id="407">407</th><td>  <a class="local col4 ref" href="#84Writer" title='Writer' data-ref="84Writer" data-ref-filename="84Writer">Writer</a><span class='ref fn' title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</span><a class="virtual ref fn" href="../../include/llvm/ProfileData/SampleProfWriter.h.html#_ZN4llvm10sampleprof19SampleProfileWriter5writeERKNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" title='llvm::sampleprof::SampleProfileWriter::write' data-ref="_ZN4llvm10sampleprof19SampleProfileWriter5writeERKNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE" data-ref-filename="_ZN4llvm10sampleprof19SampleProfileWriter5writeERKNS_9StringMapINS0_15FunctionSamplesENS_15MallocAllocatorEEE">write</a>(<a class="local col6 ref" href="#86CxtWithBracketPMap" title='CxtWithBracketPMap' data-ref="86CxtWithBracketPMap" data-ref-filename="86CxtWithBracketPMap">CxtWithBracketPMap</a>);</td></tr>
<tr><th id="408">408</th><td>}</td></tr>
<tr><th id="409">409</th><td></td></tr>
<tr><th id="410">410</th><td><i  data-doc="_ZN4llvm10sampleprofL25extractPrefixContextStackERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEERKNS1_IPKNS0_11PseudoProb16481539">// Helper function to extract context prefix string stack</i></td></tr>
<tr><th id="411">411</th><td><i  data-doc="_ZN4llvm10sampleprofL25extractPrefixContextStackERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEERKNS1_IPKNS0_11PseudoProb16481539">// Extract context stack for reusing, leaf context stack will</i></td></tr>
<tr><th id="412">412</th><td><i  data-doc="_ZN4llvm10sampleprofL25extractPrefixContextStackERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEERKNS1_IPKNS0_11PseudoProb16481539">// be added compressed while looking up function profile</i></td></tr>
<tr><th id="413">413</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="414">414</th><td><dfn class="tu decl def fn" id="_ZN4llvm10sampleprofL25extractPrefixContextStackERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEERKNS1_IPKNS0_11PseudoProb16481539" title='llvm::sampleprof::extractPrefixContextStack' data-type='void llvm::sampleprof::extractPrefixContextStack(SmallVectorImpl&lt;std::string&gt; &amp; ContextStrStack, const SmallVectorImpl&lt;const llvm::sampleprof::PseudoProbe *&gt; &amp; Probes, llvm::sampleprof::ProfiledBinary * Binary)' data-ref="_ZN4llvm10sampleprofL25extractPrefixContextStackERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEERKNS1_IPKNS0_11PseudoProb16481539" data-ref-filename="_ZN4llvm10sampleprofL25extractPrefixContextStackERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEERKNS1_IPKNS0_11PseudoProb16481539">extractPrefixContextStack</dfn>(<a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl" data-ref-filename="llvm..SmallVectorImpl">SmallVectorImpl</a>&lt;<span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span>&gt; &amp;<dfn class="local col2 decl" id="92ContextStrStack" title='ContextStrStack' data-type='SmallVectorImpl&lt;std::string&gt; &amp;' data-ref="92ContextStrStack" data-ref-filename="92ContextStrStack">ContextStrStack</dfn>,</td></tr>
<tr><th id="415">415</th><td>                          <em>const</em> <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl" data-ref-filename="llvm..SmallVectorImpl">SmallVectorImpl</a>&lt;<em>const</em> <a class="type" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbe" title='llvm::sampleprof::PseudoProbe' data-ref="llvm::sampleprof::PseudoProbe" data-ref-filename="llvm..sampleprof..PseudoProbe">PseudoProbe</a> *&gt; &amp;<dfn class="local col3 decl" id="93Probes" title='Probes' data-type='const SmallVectorImpl&lt;const llvm::sampleprof::PseudoProbe *&gt; &amp;' data-ref="93Probes" data-ref-filename="93Probes">Probes</dfn>,</td></tr>
<tr><th id="416">416</th><td>                          <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::ProfiledBinary" title='llvm::sampleprof::ProfiledBinary' data-ref="llvm::sampleprof::ProfiledBinary" data-ref-filename="llvm..sampleprof..ProfiledBinary">ProfiledBinary</a> *<dfn class="local col4 decl" id="94Binary" title='Binary' data-type='llvm::sampleprof::ProfiledBinary *' data-ref="94Binary" data-ref-filename="94Binary">Binary</dfn>) {</td></tr>
<tr><th id="417">417</th><td>  <b>for</b> (<em>const</em> <em>auto</em> *<dfn class="local col5 decl" id="95P" title='P' data-type='const llvm::sampleprof::PseudoProbe *' data-ref="95P" data-ref-filename="95P">P</dfn> : <a class="local col3 ref" href="#93Probes" title='Probes' data-ref="93Probes" data-ref-filename="93Probes">Probes</a>) {</td></tr>
<tr><th id="418">418</th><td>    <a class="local col4 ref" href="#94Binary" title='Binary' data-ref="94Binary" data-ref-filename="94Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary24getInlineContextForProbeEPKNS0_11PseudoProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEEb" title='llvm::sampleprof::ProfiledBinary::getInlineContextForProbe' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary24getInlineContextForProbeEPKNS0_11PseudoProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEEb" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary24getInlineContextForProbeEPKNS0_11PseudoProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEEb">getInlineContextForProbe</a>(<a class="local col5 ref" href="#95P" title='P' data-ref="95P" data-ref-filename="95P">P</a>, <span class='refarg'><a class="local col2 ref" href="#92ContextStrStack" title='ContextStrStack' data-ref="92ContextStrStack" data-ref-filename="92ContextStrStack">ContextStrStack</a></span>, <b>true</b>);</td></tr>
<tr><th id="419">419</th><td>  }</td></tr>
<tr><th id="420">420</th><td>}</td></tr>
<tr><th id="421">421</th><td></td></tr>
<tr><th id="422">422</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::PseudoProbeCSProfileGenerator" title='llvm::sampleprof::PseudoProbeCSProfileGenerator' data-ref="llvm::sampleprof::PseudoProbeCSProfileGenerator" data-ref-filename="llvm..sampleprof..PseudoProbeCSProfileGenerator">PseudoProbeCSProfileGenerator</a>::<dfn class="virtual decl def fn" id="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator15generateProfileEv" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::generateProfile' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator15generateProfileEv" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator15generateProfileEv">generateProfile</dfn>() {</td></tr>
<tr><th id="423">423</th><td>  <i>// Enable pseudo probe functionalities in SampleProf</i></td></tr>
<tr><th id="424">424</th><td>  <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a>::<a class="ref" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples::ProfileIsProbeBased" title='llvm::sampleprof::FunctionSamples::ProfileIsProbeBased' data-ref="llvm::sampleprof::FunctionSamples::ProfileIsProbeBased" data-ref-filename="llvm..sampleprof..FunctionSamples..ProfileIsProbeBased">ProfileIsProbeBased</a> = <b>true</b>;</td></tr>
<tr><th id="425">425</th><td>  <b>for</b> (<em>const</em> <em>auto</em> &amp;<dfn class="local col6 decl" id="96BI" title='BI' data-type='const std::pair&lt;llvm::sampleprof::ProfiledBinary *const, std::unordered_map&lt;llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter, llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;::Hash, llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;::Equal, std::allocator&lt;std::pair&lt;const llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter&gt; &gt; &gt; &gt; &amp;' data-ref="96BI" data-ref-filename="96BI">BI</dfn> : <a class="member field" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator::BinarySampleCounters" title='llvm::sampleprof::CSProfileGenerator::BinarySampleCounters' data-ref="llvm::sampleprof::CSProfileGenerator::BinarySampleCounters" data-ref-filename="llvm..sampleprof..CSProfileGenerator..BinarySampleCounters">BinarySampleCounters</a>) {</td></tr>
<tr><th id="426">426</th><td>    <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::ProfiledBinary" title='llvm::sampleprof::ProfiledBinary' data-ref="llvm::sampleprof::ProfiledBinary" data-ref-filename="llvm..sampleprof..ProfiledBinary">ProfiledBinary</a> *<dfn class="local col7 decl" id="97Binary" title='Binary' data-type='llvm::sampleprof::ProfiledBinary *' data-ref="97Binary" data-ref-filename="97Binary">Binary</dfn> = <a class="local col6 ref" href="#96BI" title='BI' data-ref="96BI" data-ref-filename="96BI">BI</a>.<span class='ref field' title='std::pair&lt;llvm::sampleprof::ProfiledBinary *const, std::unordered_map&lt;llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter, llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;::Hash, llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;::Equal, std::allocator&lt;std::pair&lt;const llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter&gt; &gt; &gt; &gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>;</td></tr>
<tr><th id="427">427</th><td>    <b>for</b> (<em>const</em> <em>auto</em> &amp;<dfn class="local col8 decl" id="98CI" title='CI' data-type='const std::pair&lt;const llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter&gt; &amp;' data-ref="98CI" data-ref-filename="98CI">CI</dfn> : <a class="local col6 ref" href="#96BI" title='BI' data-ref="96BI" data-ref-filename="96BI">BI</a>.<span class='ref field' title='std::pair&lt;llvm::sampleprof::ProfiledBinary *const, std::unordered_map&lt;llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter, llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;::Hash, llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;::Equal, std::allocator&lt;std::pair&lt;const llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter&gt; &gt; &gt; &gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>) {</td></tr>
<tr><th id="428">428</th><td>      <em>const</em> <a class="type" href="PerfReader.h.html#llvm::sampleprof::ProbeBasedCtxKey" title='llvm::sampleprof::ProbeBasedCtxKey' data-ref="llvm::sampleprof::ProbeBasedCtxKey" data-ref-filename="llvm..sampleprof..ProbeBasedCtxKey">ProbeBasedCtxKey</a> *<dfn class="local col9 decl" id="99CtxKey" title='CtxKey' data-type='const llvm::sampleprof::ProbeBasedCtxKey *' data-ref="99CtxKey" data-ref-filename="99CtxKey">CtxKey</dfn> =</td></tr>
<tr><th id="429">429</th><td>          <a class="ref fn" href="../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_" data-ref-filename="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="PerfReader.h.html#llvm::sampleprof::ProbeBasedCtxKey" title='llvm::sampleprof::ProbeBasedCtxKey' data-ref="llvm::sampleprof::ProbeBasedCtxKey" data-ref-filename="llvm..sampleprof..ProbeBasedCtxKey">ProbeBasedCtxKey</a>&gt;(<a class="local col8 ref" href="#98CI" title='CI' data-ref="98CI" data-ref-filename="98CI">CI</a>.<span class='ref field' title='std::pair&lt;const llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<a class="ref fn" href="PerfReader.h.html#_ZNK4llvm10sampleprof8Hashable6getPtrEv" title='llvm::sampleprof::Hashable::getPtr' data-ref="_ZNK4llvm10sampleprof8Hashable6getPtrEv" data-ref-filename="_ZNK4llvm10sampleprof8Hashable6getPtrEv">getPtr</a>());</td></tr>
<tr><th id="430">430</th><td>      <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span>, <var>16</var>&gt; <a class="ref fn fake" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev" data-ref-filename="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col0 decl" id="100ContextStrStack" title='ContextStrStack' data-type='SmallVector&lt;std::string, 16&gt;' data-ref="100ContextStrStack" data-ref-filename="100ContextStrStack">ContextStrStack</dfn>;</td></tr>
<tr><th id="431">431</th><td>      <a class="tu ref fn" href="#_ZN4llvm10sampleprofL25extractPrefixContextStackERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEERKNS1_IPKNS0_11PseudoProb16481539" title='llvm::sampleprof::extractPrefixContextStack' data-use='c' data-ref="_ZN4llvm10sampleprofL25extractPrefixContextStackERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEERKNS1_IPKNS0_11PseudoProb16481539" data-ref-filename="_ZN4llvm10sampleprofL25extractPrefixContextStackERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEERKNS1_IPKNS0_11PseudoProb16481539">extractPrefixContextStack</a>(<span class='refarg'><a class="local col0 ref" href="#100ContextStrStack" title='ContextStrStack' data-ref="100ContextStrStack" data-ref-filename="100ContextStrStack">ContextStrStack</a></span>, <a class="local col9 ref" href="#99CtxKey" title='CtxKey' data-ref="99CtxKey" data-ref-filename="99CtxKey">CtxKey</a>-&gt;<a class="ref field" href="PerfReader.h.html#llvm::sampleprof::ProbeBasedCtxKey::Probes" title='llvm::sampleprof::ProbeBasedCtxKey::Probes' data-ref="llvm::sampleprof::ProbeBasedCtxKey::Probes" data-ref-filename="llvm..sampleprof..ProbeBasedCtxKey..Probes">Probes</a>, <a class="local col7 ref" href="#97Binary" title='Binary' data-ref="97Binary" data-ref-filename="97Binary">Binary</a>);</td></tr>
<tr><th id="432">432</th><td>      <i>// Fill in function body samples from probes, also infer caller's samples</i></td></tr>
<tr><th id="433">433</th><td><i>      // from callee's probe</i></td></tr>
<tr><th id="434">434</th><td>      <a class="member fn" href="#_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator29populateBodySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVectorIm3716877" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::populateBodySamplesWithProbes' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator29populateBodySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVectorIm3716877" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator29populateBodySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVectorIm3716877">populateBodySamplesWithProbes</a>(<a class="local col8 ref" href="#98CI" title='CI' data-ref="98CI" data-ref-filename="98CI">CI</a>.<span class='ref field' title='std::pair&lt;const llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="PerfReader.h.html#llvm::sampleprof::SampleCounter::RangeCounter" title='llvm::sampleprof::SampleCounter::RangeCounter' data-ref="llvm::sampleprof::SampleCounter::RangeCounter" data-ref-filename="llvm..sampleprof..SampleCounter..RangeCounter">RangeCounter</a>, <span class='refarg'><a class="local col0 ref" href="#100ContextStrStack" title='ContextStrStack' data-ref="100ContextStrStack" data-ref-filename="100ContextStrStack">ContextStrStack</a></span>,</td></tr>
<tr><th id="435">435</th><td>                                    <a class="local col7 ref" href="#97Binary" title='Binary' data-ref="97Binary" data-ref-filename="97Binary">Binary</a>);</td></tr>
<tr><th id="436">436</th><td>      <i>// Fill in boundary samples for a call probe</i></td></tr>
<tr><th id="437">437</th><td>      <a class="member fn" href="#_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator33populateBoundarySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVect7484763" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::populateBoundarySamplesWithProbes' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator33populateBoundarySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVect7484763" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator33populateBoundarySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVect7484763">populateBoundarySamplesWithProbes</a>(<a class="local col8 ref" href="#98CI" title='CI' data-ref="98CI" data-ref-filename="98CI">CI</a>.<span class='ref field' title='std::pair&lt;const llvm::sampleprof::Hashable&lt;llvm::sampleprof::ContextKey&gt;, llvm::sampleprof::SampleCounter&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="PerfReader.h.html#llvm::sampleprof::SampleCounter::BranchCounter" title='llvm::sampleprof::SampleCounter::BranchCounter' data-ref="llvm::sampleprof::SampleCounter::BranchCounter" data-ref-filename="llvm..sampleprof..SampleCounter..BranchCounter">BranchCounter</a>,</td></tr>
<tr><th id="438">438</th><td>                                        <span class='refarg'><a class="local col0 ref" href="#100ContextStrStack" title='ContextStrStack' data-ref="100ContextStrStack" data-ref-filename="100ContextStrStack">ContextStrStack</a></span>, <a class="local col7 ref" href="#97Binary" title='Binary' data-ref="97Binary" data-ref-filename="97Binary">Binary</a>);</td></tr>
<tr><th id="439">439</th><td>    }</td></tr>
<tr><th id="440">440</th><td>  }</td></tr>
<tr><th id="441">441</th><td>}</td></tr>
<tr><th id="442">442</th><td></td></tr>
<tr><th id="443">443</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::PseudoProbeCSProfileGenerator" title='llvm::sampleprof::PseudoProbeCSProfileGenerator' data-ref="llvm::sampleprof::PseudoProbeCSProfileGenerator" data-ref-filename="llvm..sampleprof..PseudoProbeCSProfileGenerator">PseudoProbeCSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator22extractProbesFromRangeERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERSt13unordered_mapIPKNS0_16016945" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::extractProbesFromRange' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator22extractProbesFromRangeERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERSt13unordered_mapIPKNS0_16016945" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator22extractProbesFromRangeERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERSt13unordered_mapIPKNS0_16016945">extractProbesFromRange</dfn>(</td></tr>
<tr><th id="444">444</th><td>    <em>const</em> <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::RangeSample" title='llvm::sampleprof::RangeSample' data-type='std::map&lt;std::pair&lt;uint64_t, uint64_t&gt;, uint64_t&gt;' data-ref="llvm::sampleprof::RangeSample" data-ref-filename="llvm..sampleprof..RangeSample">RangeSample</a> &amp;<dfn class="local col1 decl" id="101RangeCounter" title='RangeCounter' data-type='const llvm::sampleprof::RangeSample &amp;' data-ref="101RangeCounter" data-ref-filename="101RangeCounter">RangeCounter</dfn>, <a class="typedef" href="ProfileGenerator.h.html#llvm::sampleprof::ProbeCounterMap" title='llvm::sampleprof::ProbeCounterMap' data-type='std::unordered_map&lt;const PseudoProbe *, uint64_t&gt;' data-ref="llvm::sampleprof::ProbeCounterMap" data-ref-filename="llvm..sampleprof..ProbeCounterMap">ProbeCounterMap</a> &amp;<dfn class="local col2 decl" id="102ProbeCounter" title='ProbeCounter' data-type='llvm::sampleprof::ProbeCounterMap &amp;' data-ref="102ProbeCounter" data-ref-filename="102ProbeCounter">ProbeCounter</dfn>,</td></tr>
<tr><th id="445">445</th><td>    <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::ProfiledBinary" title='llvm::sampleprof::ProfiledBinary' data-ref="llvm::sampleprof::ProfiledBinary" data-ref-filename="llvm..sampleprof..ProfiledBinary">ProfiledBinary</a> *<dfn class="local col3 decl" id="103Binary" title='Binary' data-type='llvm::sampleprof::ProfiledBinary *' data-ref="103Binary" data-ref-filename="103Binary">Binary</dfn>) {</td></tr>
<tr><th id="446">446</th><td>  <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::RangeSample" title='llvm::sampleprof::RangeSample' data-type='std::map&lt;std::pair&lt;uint64_t, uint64_t&gt;, uint64_t&gt;' data-ref="llvm::sampleprof::RangeSample" data-ref-filename="llvm..sampleprof..RangeSample">RangeSample</a> <span class='ref fn fake' title='std::map::map&lt;_Key, _Tp, _Compare, _Alloc&gt;' data-ref="_ZNSt3mapC1Ev" data-ref-filename="_ZNSt3mapC1Ev"></span><dfn class="local col4 decl" id="104Ranges" title='Ranges' data-type='llvm::sampleprof::RangeSample' data-ref="104Ranges" data-ref-filename="104Ranges">Ranges</dfn>;</td></tr>
<tr><th id="447">447</th><td>  <a class="member fn" href="#_ZN4llvm10sampleprof16ProfileGenerator18findDisjointRangesERSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERKSA_" title='llvm::sampleprof::ProfileGenerator::findDisjointRanges' data-ref="_ZN4llvm10sampleprof16ProfileGenerator18findDisjointRangesERSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERKSA_" data-ref-filename="_ZN4llvm10sampleprof16ProfileGenerator18findDisjointRangesERSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERKSA_">findDisjointRanges</a>(<span class='refarg'><a class="local col4 ref" href="#104Ranges" title='Ranges' data-ref="104Ranges" data-ref-filename="104Ranges">Ranges</a></span>, <a class="local col1 ref" href="#101RangeCounter" title='RangeCounter' data-ref="101RangeCounter" data-ref-filename="101RangeCounter">RangeCounter</a>);</td></tr>
<tr><th id="448">448</th><td>  <b>for</b> (<em>const</em> <em>auto</em> &amp;<dfn class="local col5 decl" id="105Range" title='Range' data-type='const std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt; &amp;' data-ref="105Range" data-ref-filename="105Range">Range</dfn> : <a class="local col4 ref" href="#104Ranges" title='Ranges' data-ref="104Ranges" data-ref-filename="104Ranges">Ranges</a>) {</td></tr>
<tr><th id="449">449</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col6 decl" id="106RangeBegin" title='RangeBegin' data-type='uint64_t' data-ref="106RangeBegin" data-ref-filename="106RangeBegin">RangeBegin</dfn> = <a class="local col3 ref" href="#103Binary" title='Binary' data-ref="103Binary" data-ref-filename="103Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" title='llvm::sampleprof::ProfiledBinary::offsetToVirtualAddr' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm">offsetToVirtualAddr</a>(<a class="local col5 ref" href="#105Range" title='Range' data-ref="105Range" data-ref-filename="105Range">Range</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>);</td></tr>
<tr><th id="450">450</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col7 decl" id="107RangeEnd" title='RangeEnd' data-type='uint64_t' data-ref="107RangeEnd" data-ref-filename="107RangeEnd">RangeEnd</dfn> = <a class="local col3 ref" href="#103Binary" title='Binary' data-ref="103Binary" data-ref-filename="103Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" title='llvm::sampleprof::ProfiledBinary::offsetToVirtualAddr' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm">offsetToVirtualAddr</a>(<a class="local col5 ref" href="#105Range" title='Range' data-ref="105Range" data-ref-filename="105Range">Range</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>);</td></tr>
<tr><th id="451">451</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col8 decl" id="108Count" title='Count' data-type='uint64_t' data-ref="108Count" data-ref-filename="108Count">Count</dfn> = <a class="local col5 ref" href="#105Range" title='Range' data-ref="105Range" data-ref-filename="105Range">Range</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="452">452</th><td>    <i>// Disjoint ranges have introduce zero-filled gap that</i></td></tr>
<tr><th id="453">453</th><td><i>    // doesn't belong to current context, filter them out.</i></td></tr>
<tr><th id="454">454</th><td>    <b>if</b> (<a class="local col8 ref" href="#108Count" title='Count' data-ref="108Count" data-ref-filename="108Count">Count</a> == <var>0</var>)</td></tr>
<tr><th id="455">455</th><td>      <b>continue</b>;</td></tr>
<tr><th id="456">456</th><td></td></tr>
<tr><th id="457">457</th><td>    <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::InstructionPointer" title='llvm::sampleprof::InstructionPointer' data-ref="llvm::sampleprof::InstructionPointer" data-ref-filename="llvm..sampleprof..InstructionPointer">InstructionPointer</a> <dfn class="local col9 decl" id="109IP" title='IP' data-type='llvm::sampleprof::InstructionPointer' data-ref="109IP" data-ref-filename="109IP">IP</dfn><a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof18InstructionPointerC1EPNS0_14ProfiledBinaryEmb" title='llvm::sampleprof::InstructionPointer::InstructionPointer' data-ref="_ZN4llvm10sampleprof18InstructionPointerC1EPNS0_14ProfiledBinaryEmb" data-ref-filename="_ZN4llvm10sampleprof18InstructionPointerC1EPNS0_14ProfiledBinaryEmb">(</a><a class="local col3 ref" href="#103Binary" title='Binary' data-ref="103Binary" data-ref-filename="103Binary">Binary</a>, <a class="local col6 ref" href="#106RangeBegin" title='RangeBegin' data-ref="106RangeBegin" data-ref-filename="106RangeBegin">RangeBegin</a>, <b>true</b>);</td></tr>
<tr><th id="458">458</th><td></td></tr>
<tr><th id="459">459</th><td>    <i>// Disjoint ranges may have range in the middle of two instr,</i></td></tr>
<tr><th id="460">460</th><td><i>    // e.g. If Instr1 at Addr1, and Instr2 at Addr2, disjoint range</i></td></tr>
<tr><th id="461">461</th><td><i>    // can be Addr1+1 to Addr2-1. We should ignore such range.</i></td></tr>
<tr><th id="462">462</th><td>    <b>if</b> (<a class="local col9 ref" href="#109IP" title='IP' data-ref="109IP" data-ref-filename="109IP">IP</a>.<a class="ref field" href="ProfiledBinary.h.html#llvm::sampleprof::InstructionPointer::(anonymous)::Address" title='llvm::sampleprof::InstructionPointer::(anonymous union)::Address' data-ref="llvm::sampleprof::InstructionPointer::(anonymous)::Address" data-ref-filename="llvm..sampleprof..InstructionPointer..(anonymous)..Address">Address</a> &gt; <a class="local col7 ref" href="#107RangeEnd" title='RangeEnd' data-ref="107RangeEnd" data-ref-filename="107RangeEnd">RangeEnd</a>)</td></tr>
<tr><th id="463">463</th><td>      <b>continue</b>;</td></tr>
<tr><th id="464">464</th><td></td></tr>
<tr><th id="465">465</th><td>    <b>while</b> (<a class="local col9 ref" href="#109IP" title='IP' data-ref="109IP" data-ref-filename="109IP">IP</a>.<a class="ref field" href="ProfiledBinary.h.html#llvm::sampleprof::InstructionPointer::(anonymous)::Address" title='llvm::sampleprof::InstructionPointer::(anonymous union)::Address' data-ref="llvm::sampleprof::InstructionPointer::(anonymous)::Address" data-ref-filename="llvm..sampleprof..InstructionPointer..(anonymous)..Address">Address</a> &lt;= <a class="local col7 ref" href="#107RangeEnd" title='RangeEnd' data-ref="107RangeEnd" data-ref-filename="107RangeEnd">RangeEnd</a>) {</td></tr>
<tr><th id="466">466</th><td>      <em>const</em> <a class="typedef" href="PseudoProbe.h.html#llvm::sampleprof::AddressProbesMap" title='llvm::sampleprof::AddressProbesMap' data-type='std::unordered_map&lt;uint64_t, std::vector&lt;PseudoProbe&gt; &gt;' data-ref="llvm::sampleprof::AddressProbesMap" data-ref-filename="llvm..sampleprof..AddressProbesMap">AddressProbesMap</a> &amp;<dfn class="local col0 decl" id="110Address2ProbesMap" title='Address2ProbesMap' data-type='const llvm::sampleprof::AddressProbesMap &amp;' data-ref="110Address2ProbesMap" data-ref-filename="110Address2ProbesMap">Address2ProbesMap</dfn> =</td></tr>
<tr><th id="467">467</th><td>          <a class="local col3 ref" href="#103Binary" title='Binary' data-ref="103Binary" data-ref-filename="103Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary20getAddress2ProbesMapEv" title='llvm::sampleprof::ProfiledBinary::getAddress2ProbesMap' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary20getAddress2ProbesMapEv" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary20getAddress2ProbesMapEv">getAddress2ProbesMap</a>();</td></tr>
<tr><th id="468">468</th><td>      <em>auto</em> <dfn class="local col1 decl" id="111It" title='It' data-type='std::__detail::_Node_const_iterator&lt;std::pair&lt;const unsigned long, std::vector&lt;llvm::sampleprof::PseudoProbe, std::allocator&lt;llvm::sampleprof::PseudoProbe&gt; &gt; &gt;, false, false&gt;' data-ref="111It" data-ref-filename="111It">It</dfn> = <a class="local col0 ref" href="#110Address2ProbesMap" title='Address2ProbesMap' data-ref="110Address2ProbesMap" data-ref-filename="110Address2ProbesMap">Address2ProbesMap</a>.<span class='ref fn' title='std::unordered_map::find' data-ref="_ZNKSt13unordered_map4findERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashEN4690438" data-ref-filename="_ZNKSt13unordered_map4findERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashEN4690438">find</span>(<a class="local col9 ref" href="#109IP" title='IP' data-ref="109IP" data-ref-filename="109IP">IP</a>.<a class="ref field" href="ProfiledBinary.h.html#llvm::sampleprof::InstructionPointer::(anonymous)::Address" title='llvm::sampleprof::InstructionPointer::(anonymous union)::Address' data-ref="llvm::sampleprof::InstructionPointer::(anonymous)::Address" data-ref-filename="llvm..sampleprof..InstructionPointer..(anonymous)..Address">Address</a>);</td></tr>
<tr><th id="469">469</th><td>      <b>if</b> (<a class="local col1 ref" href="#111It" title='It' data-ref="111It" data-ref-filename="111It">It</a> <span class='ref fn' title='std::__detail::operator!=' data-ref="_ZNSt8__detailneERKNS_19_Node_iterator_baseIT_XT0_EEES4_" data-ref-filename="_ZNSt8__detailneERKNS_19_Node_iterator_baseIT_XT0_EEES4_">!=</span> <a class="local col0 ref" href="#110Address2ProbesMap" title='Address2ProbesMap' data-ref="110Address2ProbesMap" data-ref-filename="110Address2ProbesMap">Address2ProbesMap</a>.<span class='ref fn' title='std::unordered_map::end' data-ref="_ZNKSt13unordered_map3endEv" data-ref-filename="_ZNKSt13unordered_map3endEv">end</span>()) {</td></tr>
<tr><th id="470">470</th><td>        <b>for</b> (<em>const</em> <em>auto</em> &amp;<dfn class="local col2 decl" id="112Probe" title='Probe' data-type='const llvm::sampleprof::PseudoProbe &amp;' data-ref="112Probe" data-ref-filename="112Probe">Probe</dfn> : <a class="local col1 ref" href="#111It" title='It' data-ref="111It" data-ref-filename="111It">It</a><span class='ref fn' title='std::__detail::_Node_const_iterator::operator-&gt;' data-ref="_ZNKSt8__detail20_Node_const_iteratorptEv" data-ref-filename="_ZNKSt8__detail20_Node_const_iteratorptEv">-&gt;</span><span class='ref field' title='std::pair&lt;const unsigned long, std::vector&lt;llvm::sampleprof::PseudoProbe, std::allocator&lt;llvm::sampleprof::PseudoProbe&gt; &gt; &gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>) {</td></tr>
<tr><th id="471">471</th><td>          <b>if</b> (!<a class="local col2 ref" href="#112Probe" title='Probe' data-ref="112Probe" data-ref-filename="112Probe">Probe</a>.<a class="ref fn" href="PseudoProbe.h.html#_ZNK4llvm10sampleprof11PseudoProbe7isBlockEv" title='llvm::sampleprof::PseudoProbe::isBlock' data-ref="_ZNK4llvm10sampleprof11PseudoProbe7isBlockEv" data-ref-filename="_ZNK4llvm10sampleprof11PseudoProbe7isBlockEv">isBlock</a>())</td></tr>
<tr><th id="472">472</th><td>            <b>continue</b>;</td></tr>
<tr><th id="473">473</th><td>          <a class="local col2 ref" href="#102ProbeCounter" title='ProbeCounter' data-ref="102ProbeCounter" data-ref-filename="102ProbeCounter">ProbeCounter</a><span class='ref fn' title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" data-ref-filename="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[&amp;<a class="local col2 ref" href="#112Probe" title='Probe' data-ref="112Probe" data-ref-filename="112Probe">Probe</a>]</span> += <a class="local col8 ref" href="#108Count" title='Count' data-ref="108Count" data-ref-filename="108Count">Count</a>;</td></tr>
<tr><th id="474">474</th><td>        }</td></tr>
<tr><th id="475">475</th><td>      }</td></tr>
<tr><th id="476">476</th><td></td></tr>
<tr><th id="477">477</th><td>      <a class="local col9 ref" href="#109IP" title='IP' data-ref="109IP" data-ref-filename="109IP">IP</a>.<a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof18InstructionPointer7advanceEv" title='llvm::sampleprof::InstructionPointer::advance' data-ref="_ZN4llvm10sampleprof18InstructionPointer7advanceEv" data-ref-filename="_ZN4llvm10sampleprof18InstructionPointer7advanceEv">advance</a>();</td></tr>
<tr><th id="478">478</th><td>    }</td></tr>
<tr><th id="479">479</th><td>  }</td></tr>
<tr><th id="480">480</th><td>}</td></tr>
<tr><th id="481">481</th><td></td></tr>
<tr><th id="482">482</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::PseudoProbeCSProfileGenerator" title='llvm::sampleprof::PseudoProbeCSProfileGenerator' data-ref="llvm::sampleprof::PseudoProbeCSProfileGenerator" data-ref-filename="llvm..sampleprof..PseudoProbeCSProfileGenerator">PseudoProbeCSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator29populateBodySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVectorIm3716877" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::populateBodySamplesWithProbes' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator29populateBodySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVectorIm3716877" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator29populateBodySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVectorIm3716877">populateBodySamplesWithProbes</dfn>(</td></tr>
<tr><th id="483">483</th><td>    <em>const</em> <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::RangeSample" title='llvm::sampleprof::RangeSample' data-type='std::map&lt;std::pair&lt;uint64_t, uint64_t&gt;, uint64_t&gt;' data-ref="llvm::sampleprof::RangeSample" data-ref-filename="llvm..sampleprof..RangeSample">RangeSample</a> &amp;<dfn class="local col3 decl" id="113RangeCounter" title='RangeCounter' data-type='const llvm::sampleprof::RangeSample &amp;' data-ref="113RangeCounter" data-ref-filename="113RangeCounter">RangeCounter</dfn>,</td></tr>
<tr><th id="484">484</th><td>    <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl" data-ref-filename="llvm..SmallVectorImpl">SmallVectorImpl</a>&lt;<span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span>&gt; &amp;<dfn class="local col4 decl" id="114ContextStrStack" title='ContextStrStack' data-type='SmallVectorImpl&lt;std::string&gt; &amp;' data-ref="114ContextStrStack" data-ref-filename="114ContextStrStack">ContextStrStack</dfn>, <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::ProfiledBinary" title='llvm::sampleprof::ProfiledBinary' data-ref="llvm::sampleprof::ProfiledBinary" data-ref-filename="llvm..sampleprof..ProfiledBinary">ProfiledBinary</a> *<dfn class="local col5 decl" id="115Binary" title='Binary' data-type='llvm::sampleprof::ProfiledBinary *' data-ref="115Binary" data-ref-filename="115Binary">Binary</dfn>) {</td></tr>
<tr><th id="485">485</th><td>  <a class="typedef" href="ProfileGenerator.h.html#llvm::sampleprof::ProbeCounterMap" title='llvm::sampleprof::ProbeCounterMap' data-type='std::unordered_map&lt;const PseudoProbe *, uint64_t&gt;' data-ref="llvm::sampleprof::ProbeCounterMap" data-ref-filename="llvm..sampleprof..ProbeCounterMap">ProbeCounterMap</a> <span class='ref fn fake' title='std::unordered_map::unordered_map&lt;_Key, _Tp, _Hash, _Pred, _Alloc&gt;' data-ref="_ZNSt13unordered_mapC1Ev" data-ref-filename="_ZNSt13unordered_mapC1Ev"></span><dfn class="local col6 decl" id="116ProbeCounter" title='ProbeCounter' data-type='llvm::sampleprof::ProbeCounterMap' data-ref="116ProbeCounter" data-ref-filename="116ProbeCounter">ProbeCounter</dfn>;</td></tr>
<tr><th id="486">486</th><td>  <i>// Extract the top frame probes by looking up each address among the range in</i></td></tr>
<tr><th id="487">487</th><td><i>  // the Address2ProbeMap</i></td></tr>
<tr><th id="488">488</th><td>  <a class="member fn" href="#_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator22extractProbesFromRangeERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERSt13unordered_mapIPKNS0_16016945" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::extractProbesFromRange' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator22extractProbesFromRangeERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERSt13unordered_mapIPKNS0_16016945" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator22extractProbesFromRangeERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERSt13unordered_mapIPKNS0_16016945">extractProbesFromRange</a>(<a class="local col3 ref" href="#113RangeCounter" title='RangeCounter' data-ref="113RangeCounter" data-ref-filename="113RangeCounter">RangeCounter</a>, <span class='refarg'><a class="local col6 ref" href="#116ProbeCounter" title='ProbeCounter' data-ref="116ProbeCounter" data-ref-filename="116ProbeCounter">ProbeCounter</a></span>, <a class="local col5 ref" href="#115Binary" title='Binary' data-ref="115Binary" data-ref-filename="115Binary">Binary</a>);</td></tr>
<tr><th id="489">489</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col7 decl" id="117PI" title='PI' data-type='std::pair&lt;const llvm::sampleprof::PseudoProbe *const, unsigned long&gt;' data-ref="117PI" data-ref-filename="117PI">PI</dfn> : <a class="local col6 ref" href="#116ProbeCounter" title='ProbeCounter' data-ref="116ProbeCounter" data-ref-filename="116ProbeCounter">ProbeCounter</a>) {</td></tr>
<tr><th id="490">490</th><td>    <em>const</em> <a class="type" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbe" title='llvm::sampleprof::PseudoProbe' data-ref="llvm::sampleprof::PseudoProbe" data-ref-filename="llvm..sampleprof..PseudoProbe">PseudoProbe</a> *<dfn class="local col8 decl" id="118Probe" title='Probe' data-type='const llvm::sampleprof::PseudoProbe *' data-ref="118Probe" data-ref-filename="118Probe">Probe</dfn> = <a class="local col7 ref" href="#117PI" title='PI' data-ref="117PI" data-ref-filename="117PI">PI</a>.<span class='ref field' title='std::pair&lt;const llvm::sampleprof::PseudoProbe *const, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>;</td></tr>
<tr><th id="491">491</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col9 decl" id="119Count" title='Count' data-type='uint64_t' data-ref="119Count" data-ref-filename="119Count">Count</dfn> = <a class="local col7 ref" href="#117PI" title='PI' data-ref="117PI" data-ref-filename="117PI">PI</a>.<span class='ref field' title='std::pair&lt;const llvm::sampleprof::PseudoProbe *const, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="492">492</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col0 decl" id="120FunctionProfile" title='FunctionProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="120FunctionProfile" data-ref-filename="120FunctionProfile">FunctionProfile</dfn> =</td></tr>
<tr><th id="493">493</th><td>        <a class="member fn" href="#_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc800470" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::getFunctionProfileForLeafProbe' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc800470" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc800470">getFunctionProfileForLeafProbe</a>(<span class='refarg'><a class="local col4 ref" href="#114ContextStrStack" title='ContextStrStack' data-ref="114ContextStrStack" data-ref-filename="114ContextStrStack">ContextStrStack</a></span>, <a class="local col8 ref" href="#118Probe" title='Probe' data-ref="118Probe" data-ref-filename="118Probe">Probe</a>, <a class="local col5 ref" href="#115Binary" title='Binary' data-ref="115Binary" data-ref-filename="115Binary">Binary</a>);</td></tr>
<tr><th id="494">494</th><td></td></tr>
<tr><th id="495">495</th><td>    <a class="local col0 ref" href="#120FunctionProfile" title='FunctionProfile' data-ref="120FunctionProfile" data-ref-filename="120FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" title='llvm::sampleprof::FunctionSamples::addBodySamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm">addBodySamples</a>(<a class="local col8 ref" href="#118Probe" title='Probe' data-ref="118Probe" data-ref-filename="118Probe">Probe</a>-&gt;<a class="ref field" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbe::Index" title='llvm::sampleprof::PseudoProbe::Index' data-ref="llvm::sampleprof::PseudoProbe::Index" data-ref-filename="llvm..sampleprof..PseudoProbe..Index">Index</a>, <var>0</var>, <a class="local col9 ref" href="#119Count" title='Count' data-ref="119Count" data-ref-filename="119Count">Count</a>);</td></tr>
<tr><th id="496">496</th><td>    <a class="local col0 ref" href="#120FunctionProfile" title='FunctionProfile' data-ref="120FunctionProfile" data-ref-filename="120FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" title='llvm::sampleprof::FunctionSamples::addTotalSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm">addTotalSamples</a>(<a class="local col9 ref" href="#119Count" title='Count' data-ref="119Count" data-ref-filename="119Count">Count</a>);</td></tr>
<tr><th id="497">497</th><td>    <b>if</b> (<a class="local col8 ref" href="#118Probe" title='Probe' data-ref="118Probe" data-ref-filename="118Probe">Probe</a>-&gt;<a class="ref fn" href="PseudoProbe.h.html#_ZNK4llvm10sampleprof11PseudoProbe7isEntryEv" title='llvm::sampleprof::PseudoProbe::isEntry' data-ref="_ZNK4llvm10sampleprof11PseudoProbe7isEntryEv" data-ref-filename="_ZNK4llvm10sampleprof11PseudoProbe7isEntryEv">isEntry</a>()) {</td></tr>
<tr><th id="498">498</th><td>      <a class="local col0 ref" href="#120FunctionProfile" title='FunctionProfile' data-ref="120FunctionProfile" data-ref-filename="120FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples14addHeadSamplesEmm" title='llvm::sampleprof::FunctionSamples::addHeadSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples14addHeadSamplesEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples14addHeadSamplesEmm">addHeadSamples</a>(<a class="local col9 ref" href="#119Count" title='Count' data-ref="119Count" data-ref-filename="119Count">Count</a>);</td></tr>
<tr><th id="499">499</th><td>      <i>// Look up for the caller's function profile</i></td></tr>
<tr><th id="500">500</th><td>      <em>const</em> <em>auto</em> *<dfn class="local col1 decl" id="121InlinerDesc" title='InlinerDesc' data-type='const llvm::sampleprof::PseudoProbeFuncDesc *' data-ref="121InlinerDesc" data-ref-filename="121InlinerDesc">InlinerDesc</dfn> = <a class="local col5 ref" href="#115Binary" title='Binary' data-ref="115Binary" data-ref-filename="115Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof14ProfiledBinary22getInlinerDescForProbeEPKNS0_11PseudoProbeE" title='llvm::sampleprof::ProfiledBinary::getInlinerDescForProbe' data-ref="_ZN4llvm10sampleprof14ProfiledBinary22getInlinerDescForProbeEPKNS0_11PseudoProbeE" data-ref-filename="_ZN4llvm10sampleprof14ProfiledBinary22getInlinerDescForProbeEPKNS0_11PseudoProbeE">getInlinerDescForProbe</a>(<a class="local col8 ref" href="#118Probe" title='Probe' data-ref="118Probe" data-ref-filename="118Probe">Probe</a>);</td></tr>
<tr><th id="501">501</th><td>      <b>if</b> (<a class="local col1 ref" href="#121InlinerDesc" title='InlinerDesc' data-ref="121InlinerDesc" data-ref-filename="121InlinerDesc">InlinerDesc</a> != <b>nullptr</b>) {</td></tr>
<tr><th id="502">502</th><td>        <i>// Since the context id will be compressed, we have to use callee's</i></td></tr>
<tr><th id="503">503</th><td><i>        // context id to infer caller's context id to ensure they share the</i></td></tr>
<tr><th id="504">504</th><td><i>        // same context prefix.</i></td></tr>
<tr><th id="505">505</th><td>        <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="local col2 decl" id="122CalleeContextId" title='CalleeContextId' data-type='llvm::StringRef' data-ref="122CalleeContextId" data-ref-filename="122CalleeContextId">CalleeContextId</dfn> =</td></tr>
<tr><th id="506">506</th><td>            <a class="local col0 ref" href="#120FunctionProfile" title='FunctionProfile' data-ref="120FunctionProfile" data-ref-filename="120FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples10getContextEv" title='llvm::sampleprof::FunctionSamples::getContext' data-ref="_ZNK4llvm10sampleprof15FunctionSamples10getContextEv" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples10getContextEv">getContext</a>().<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof13SampleContext18getNameWithContextEb" title='llvm::sampleprof::SampleContext::getNameWithContext' data-ref="_ZNK4llvm10sampleprof13SampleContext18getNameWithContextEb" data-ref-filename="_ZNK4llvm10sampleprof13SampleContext18getNameWithContextEb">getNameWithContext</a>(<b>true</b>);</td></tr>
<tr><th id="507">507</th><td>        <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1Ev" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1Ev" data-ref-filename="_ZN4llvm9StringRefC1Ev"></a><dfn class="local col3 decl" id="123CallerContextId" title='CallerContextId' data-type='llvm::StringRef' data-ref="123CallerContextId" data-ref-filename="123CallerContextId">CallerContextId</dfn>;</td></tr>
<tr><th id="508">508</th><td>        <a class="typedef" href="CallContext.h.html#llvm::sampleprof::FrameLocation" title='llvm::sampleprof::FrameLocation' data-type='std::pair&lt;std::string, LineLocation&gt;' data-ref="llvm::sampleprof::FrameLocation" data-ref-filename="llvm..sampleprof..FrameLocation">FrameLocation</a> &amp;&amp;<dfn class="local col4 decl" id="124CallerLeafFrameLoc" title='CallerLeafFrameLoc' data-type='llvm::sampleprof::FrameLocation &amp;&amp;' data-ref="124CallerLeafFrameLoc" data-ref-filename="124CallerLeafFrameLoc">CallerLeafFrameLoc</dfn> =</td></tr>
<tr><th id="509">509</th><td>            <a class="tu ref fn" href="#_ZN4llvm10sampleprofL16getCallerContextB5cxx11ENS_9StringRefERS1_" title='llvm::sampleprof::getCallerContext' data-use='c' data-ref="_ZN4llvm10sampleprofL16getCallerContextB5cxx11ENS_9StringRefERS1_" data-ref-filename="_ZN4llvm10sampleprofL16getCallerContextB5cxx11ENS_9StringRefERS1_">getCallerContext</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col2 ref" href="#122CalleeContextId" title='CalleeContextId' data-ref="122CalleeContextId" data-ref-filename="122CalleeContextId">CalleeContextId</a>, <span class='refarg'><a class="local col3 ref" href="#123CallerContextId" title='CallerContextId' data-ref="123CallerContextId" data-ref-filename="123CallerContextId">CallerContextId</a></span>);</td></tr>
<tr><th id="510">510</th><td>        <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="125CallerIndex" title='CallerIndex' data-type='uint64_t' data-ref="125CallerIndex" data-ref-filename="125CallerIndex">CallerIndex</dfn> = <a class="local col4 ref" href="#124CallerLeafFrameLoc" title='CallerLeafFrameLoc' data-ref="124CallerLeafFrameLoc" data-ref-filename="124CallerLeafFrameLoc">CallerLeafFrameLoc</a>.<span class='ref field' title='std::pair&lt;std::__cxx11::basic_string&lt;char&gt;, llvm::sampleprof::LineLocation&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>.<a class="ref field" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::LineLocation::LineOffset" title='llvm::sampleprof::LineLocation::LineOffset' data-ref="llvm::sampleprof::LineLocation::LineOffset" data-ref-filename="llvm..sampleprof..LineLocation..LineOffset">LineOffset</a>;</td></tr>
<tr><th id="511">511</th><td>        <a class="macro" href="../../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(CallerIndex &amp;&amp;</td></tr>
<tr><th id="512">512</th><td>               <q>"Inferred caller's location index shouldn't be zero!"</q>);</td></tr>
<tr><th id="513">513</th><td>        <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col6 decl" id="126CallerProfile" title='CallerProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="126CallerProfile" data-ref-filename="126CallerProfile">CallerProfile</dfn> =</td></tr>
<tr><th id="514">514</th><td>            <a class="member fn" href="#_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" title='llvm::sampleprof::CSProfileGenerator::getFunctionProfileForContext' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE">getFunctionProfileForContext</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col3 ref" href="#123CallerContextId" title='CallerContextId' data-ref="123CallerContextId" data-ref-filename="123CallerContextId">CallerContextId</a>);</td></tr>
<tr><th id="515">515</th><td>        <a class="local col6 ref" href="#126CallerProfile" title='CallerProfile' data-ref="126CallerProfile" data-ref-filename="126CallerProfile">CallerProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples15setFunctionHashEm" title='llvm::sampleprof::FunctionSamples::setFunctionHash' data-ref="_ZN4llvm10sampleprof15FunctionSamples15setFunctionHashEm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples15setFunctionHashEm">setFunctionHash</a>(<a class="local col1 ref" href="#121InlinerDesc" title='InlinerDesc' data-ref="121InlinerDesc" data-ref-filename="121InlinerDesc">InlinerDesc</a>-&gt;<a class="ref field" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbeFuncDesc::FuncHash" title='llvm::sampleprof::PseudoProbeFuncDesc::FuncHash' data-ref="llvm::sampleprof::PseudoProbeFuncDesc::FuncHash" data-ref-filename="llvm..sampleprof..PseudoProbeFuncDesc..FuncHash">FuncHash</a>);</td></tr>
<tr><th id="516">516</th><td>        <a class="local col6 ref" href="#126CallerProfile" title='CallerProfile' data-ref="126CallerProfile" data-ref-filename="126CallerProfile">CallerProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" title='llvm::sampleprof::FunctionSamples::addBodySamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm">addBodySamples</a>(<a class="local col5 ref" href="#125CallerIndex" title='CallerIndex' data-ref="125CallerIndex" data-ref-filename="125CallerIndex">CallerIndex</a>, <var>0</var>, <a class="local col9 ref" href="#119Count" title='Count' data-ref="119Count" data-ref-filename="119Count">Count</a>);</td></tr>
<tr><th id="517">517</th><td>        <a class="local col6 ref" href="#126CallerProfile" title='CallerProfile' data-ref="126CallerProfile" data-ref-filename="126CallerProfile">CallerProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" title='llvm::sampleprof::FunctionSamples::addTotalSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm">addTotalSamples</a>(<a class="local col9 ref" href="#119Count" title='Count' data-ref="119Count" data-ref-filename="119Count">Count</a>);</td></tr>
<tr><th id="518">518</th><td>        <a class="local col6 ref" href="#126CallerProfile" title='CallerProfile' data-ref="126CallerProfile" data-ref-filename="126CallerProfile">CallerProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm" title='llvm::sampleprof::FunctionSamples::addCalledTargetSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm">addCalledTargetSamples</a>(</td></tr>
<tr><th id="519">519</th><td>            <a class="local col5 ref" href="#125CallerIndex" title='CallerIndex' data-ref="125CallerIndex" data-ref-filename="125CallerIndex">CallerIndex</a>, <var>0</var>,</td></tr>
<tr><th id="520">520</th><td>            <a class="local col0 ref" href="#120FunctionProfile" title='FunctionProfile' data-ref="120FunctionProfile" data-ref-filename="120FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof15FunctionSamples10getContextEv" title='llvm::sampleprof::FunctionSamples::getContext' data-ref="_ZNK4llvm10sampleprof15FunctionSamples10getContextEv" data-ref-filename="_ZNK4llvm10sampleprof15FunctionSamples10getContextEv">getContext</a>().<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZNK4llvm10sampleprof13SampleContext21getNameWithoutContextEv" title='llvm::sampleprof::SampleContext::getNameWithoutContext' data-ref="_ZNK4llvm10sampleprof13SampleContext21getNameWithoutContextEv" data-ref-filename="_ZNK4llvm10sampleprof13SampleContext21getNameWithoutContextEv">getNameWithoutContext</a>(), <a class="local col9 ref" href="#119Count" title='Count' data-ref="119Count" data-ref-filename="119Count">Count</a>);</td></tr>
<tr><th id="521">521</th><td>      }</td></tr>
<tr><th id="522">522</th><td>    }</td></tr>
<tr><th id="523">523</th><td>  }</td></tr>
<tr><th id="524">524</th><td>}</td></tr>
<tr><th id="525">525</th><td></td></tr>
<tr><th id="526">526</th><td><em>void</em> <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::PseudoProbeCSProfileGenerator" title='llvm::sampleprof::PseudoProbeCSProfileGenerator' data-ref="llvm::sampleprof::PseudoProbeCSProfileGenerator" data-ref-filename="llvm..sampleprof..PseudoProbeCSProfileGenerator">PseudoProbeCSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator33populateBoundarySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVect7484763" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::populateBoundarySamplesWithProbes' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator33populateBoundarySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVect7484763" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator33populateBoundarySamplesWithProbesERKSt3mapISt4pairImmEmSt4lessIS4_ESaIS3_IKS4_mEEERNS_15SmallVect7484763">populateBoundarySamplesWithProbes</dfn>(</td></tr>
<tr><th id="527">527</th><td>    <em>const</em> <a class="typedef" href="PerfReader.h.html#llvm::sampleprof::BranchSample" title='llvm::sampleprof::BranchSample' data-type='std::map&lt;std::pair&lt;uint64_t, uint64_t&gt;, uint64_t&gt;' data-ref="llvm::sampleprof::BranchSample" data-ref-filename="llvm..sampleprof..BranchSample">BranchSample</a> &amp;<dfn class="local col7 decl" id="127BranchCounter" title='BranchCounter' data-type='const llvm::sampleprof::BranchSample &amp;' data-ref="127BranchCounter" data-ref-filename="127BranchCounter">BranchCounter</dfn>,</td></tr>
<tr><th id="528">528</th><td>    <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl" data-ref-filename="llvm..SmallVectorImpl">SmallVectorImpl</a>&lt;<span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span>&gt; &amp;<dfn class="local col8 decl" id="128ContextStrStack" title='ContextStrStack' data-type='SmallVectorImpl&lt;std::string&gt; &amp;' data-ref="128ContextStrStack" data-ref-filename="128ContextStrStack">ContextStrStack</dfn>, <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::ProfiledBinary" title='llvm::sampleprof::ProfiledBinary' data-ref="llvm::sampleprof::ProfiledBinary" data-ref-filename="llvm..sampleprof..ProfiledBinary">ProfiledBinary</a> *<dfn class="local col9 decl" id="129Binary" title='Binary' data-type='llvm::sampleprof::ProfiledBinary *' data-ref="129Binary" data-ref-filename="129Binary">Binary</dfn>) {</td></tr>
<tr><th id="529">529</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col0 decl" id="130BI" title='BI' data-type='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;' data-ref="130BI" data-ref-filename="130BI">BI</dfn> : <a class="local col7 ref" href="#127BranchCounter" title='BranchCounter' data-ref="127BranchCounter" data-ref-filename="127BranchCounter">BranchCounter</a>) {</td></tr>
<tr><th id="530">530</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="131SourceOffset" title='SourceOffset' data-type='uint64_t' data-ref="131SourceOffset" data-ref-filename="131SourceOffset">SourceOffset</dfn> = <a class="local col0 ref" href="#130BI" title='BI' data-ref="130BI" data-ref-filename="130BI">BI</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>;</td></tr>
<tr><th id="531">531</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="132TargetOffset" title='TargetOffset' data-type='uint64_t' data-ref="132TargetOffset" data-ref-filename="132TargetOffset">TargetOffset</dfn> = <a class="local col0 ref" href="#130BI" title='BI' data-ref="130BI" data-ref-filename="130BI">BI</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<span class='ref field' title='std::pair&lt;unsigned long, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="532">532</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="133Count" title='Count' data-type='uint64_t' data-ref="133Count" data-ref-filename="133Count">Count</dfn> = <a class="local col0 ref" href="#130BI" title='BI' data-ref="130BI" data-ref-filename="130BI">BI</a>.<span class='ref field' title='std::pair&lt;const std::pair&lt;unsigned long, unsigned long&gt;, unsigned long&gt;::second' data-ref="std::pair::second" data-ref-filename="std..pair..second">second</span>;</td></tr>
<tr><th id="533">533</th><td>    <a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="134SourceAddress" title='SourceAddress' data-type='uint64_t' data-ref="134SourceAddress" data-ref-filename="134SourceAddress">SourceAddress</dfn> = <a class="local col9 ref" href="#129Binary" title='Binary' data-ref="129Binary" data-ref-filename="129Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" title='llvm::sampleprof::ProfiledBinary::offsetToVirtualAddr' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary19offsetToVirtualAddrEm">offsetToVirtualAddr</a>(<a class="local col1 ref" href="#131SourceOffset" title='SourceOffset' data-ref="131SourceOffset" data-ref-filename="131SourceOffset">SourceOffset</a>);</td></tr>
<tr><th id="534">534</th><td>    <em>const</em> <a class="type" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbe" title='llvm::sampleprof::PseudoProbe' data-ref="llvm::sampleprof::PseudoProbe" data-ref-filename="llvm..sampleprof..PseudoProbe">PseudoProbe</a> *<dfn class="local col5 decl" id="135CallProbe" title='CallProbe' data-type='const llvm::sampleprof::PseudoProbe *' data-ref="135CallProbe" data-ref-filename="135CallProbe">CallProbe</dfn> = <a class="local col9 ref" href="#129Binary" title='Binary' data-ref="129Binary" data-ref-filename="129Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary19getCallProbeForAddrEm" title='llvm::sampleprof::ProfiledBinary::getCallProbeForAddr' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary19getCallProbeForAddrEm" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary19getCallProbeForAddrEm">getCallProbeForAddr</a>(<a class="local col4 ref" href="#134SourceAddress" title='SourceAddress' data-ref="134SourceAddress" data-ref-filename="134SourceAddress">SourceAddress</a>);</td></tr>
<tr><th id="535">535</th><td>    <b>if</b> (<a class="local col5 ref" href="#135CallProbe" title='CallProbe' data-ref="135CallProbe" data-ref-filename="135CallProbe">CallProbe</a> == <b>nullptr</b>)</td></tr>
<tr><th id="536">536</th><td>      <b>continue</b>;</td></tr>
<tr><th id="537">537</th><td>    <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col6 decl" id="136FunctionProfile" title='FunctionProfile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="136FunctionProfile" data-ref-filename="136FunctionProfile">FunctionProfile</dfn> =</td></tr>
<tr><th id="538">538</th><td>        <a class="member fn" href="#_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc800470" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::getFunctionProfileForLeafProbe' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc800470" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc800470">getFunctionProfileForLeafProbe</a>(<span class='refarg'><a class="local col8 ref" href="#128ContextStrStack" title='ContextStrStack' data-ref="128ContextStrStack" data-ref-filename="128ContextStrStack">ContextStrStack</a></span>, <a class="local col5 ref" href="#135CallProbe" title='CallProbe' data-ref="135CallProbe" data-ref-filename="135CallProbe">CallProbe</a>, <a class="local col9 ref" href="#129Binary" title='Binary' data-ref="129Binary" data-ref-filename="129Binary">Binary</a>);</td></tr>
<tr><th id="539">539</th><td>    <a class="local col6 ref" href="#136FunctionProfile" title='FunctionProfile' data-ref="136FunctionProfile" data-ref-filename="136FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" title='llvm::sampleprof::FunctionSamples::addBodySamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples14addBodySamplesEjjmm">addBodySamples</a>(<a class="local col5 ref" href="#135CallProbe" title='CallProbe' data-ref="135CallProbe" data-ref-filename="135CallProbe">CallProbe</a>-&gt;<a class="ref field" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbe::Index" title='llvm::sampleprof::PseudoProbe::Index' data-ref="llvm::sampleprof::PseudoProbe::Index" data-ref-filename="llvm..sampleprof..PseudoProbe..Index">Index</a>, <var>0</var>, <a class="local col3 ref" href="#133Count" title='Count' data-ref="133Count" data-ref-filename="133Count">Count</a>);</td></tr>
<tr><th id="540">540</th><td>    <a class="local col6 ref" href="#136FunctionProfile" title='FunctionProfile' data-ref="136FunctionProfile" data-ref-filename="136FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" title='llvm::sampleprof::FunctionSamples::addTotalSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples15addTotalSamplesEmm">addTotalSamples</a>(<a class="local col3 ref" href="#133Count" title='Count' data-ref="133Count" data-ref-filename="133Count">Count</a>);</td></tr>
<tr><th id="541">541</th><td>    <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a> <dfn class="local col7 decl" id="137CalleeName" title='CalleeName' data-type='llvm::StringRef' data-ref="137CalleeName" data-ref-filename="137CalleeName">CalleeName</dfn> = <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a>::<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples18getCanonicalFnNameENS_9StringRefES2_" title='llvm::sampleprof::FunctionSamples::getCanonicalFnName' data-ref="_ZN4llvm10sampleprof15FunctionSamples18getCanonicalFnNameENS_9StringRefES2_" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples18getCanonicalFnNameENS_9StringRefES2_">getCanonicalFnName</a>(</td></tr>
<tr><th id="542">542</th><td>        <a class="local col9 ref" href="#129Binary" title='Binary' data-ref="129Binary" data-ref-filename="129Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof14ProfiledBinary22getFuncFromStartOffsetEm" title='llvm::sampleprof::ProfiledBinary::getFuncFromStartOffset' data-ref="_ZN4llvm10sampleprof14ProfiledBinary22getFuncFromStartOffsetEm" data-ref-filename="_ZN4llvm10sampleprof14ProfiledBinary22getFuncFromStartOffsetEm">getFuncFromStartOffset</a>(<a class="local col2 ref" href="#132TargetOffset" title='TargetOffset' data-ref="132TargetOffset" data-ref-filename="132TargetOffset">TargetOffset</a>));</td></tr>
<tr><th id="543">543</th><td>    <b>if</b> (<a class="local col7 ref" href="#137CalleeName" title='CalleeName' data-ref="137CalleeName" data-ref-filename="137CalleeName">CalleeName</a>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef4sizeEv" title='llvm::StringRef::size' data-ref="_ZNK4llvm9StringRef4sizeEv" data-ref-filename="_ZNK4llvm9StringRef4sizeEv">size</a>() == <var>0</var>)</td></tr>
<tr><th id="544">544</th><td>      <b>continue</b>;</td></tr>
<tr><th id="545">545</th><td>    <a class="local col6 ref" href="#136FunctionProfile" title='FunctionProfile' data-ref="136FunctionProfile" data-ref-filename="136FunctionProfile">FunctionProfile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm" title='llvm::sampleprof::FunctionSamples::addCalledTargetSamples' data-ref="_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples22addCalledTargetSamplesEjjNS_9StringRefEmm">addCalledTargetSamples</a>(<a class="local col5 ref" href="#135CallProbe" title='CallProbe' data-ref="135CallProbe" data-ref-filename="135CallProbe">CallProbe</a>-&gt;<a class="ref field" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbe::Index" title='llvm::sampleprof::PseudoProbe::Index' data-ref="llvm::sampleprof::PseudoProbe::Index" data-ref-filename="llvm..sampleprof..PseudoProbe..Index">Index</a>, <var>0</var>, <a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#57" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKS0_" data-ref-filename="_ZN4llvm9StringRefC1ERKS0_"></a><a class="local col7 ref" href="#137CalleeName" title='CalleeName' data-ref="137CalleeName" data-ref-filename="137CalleeName">CalleeName</a>,</td></tr>
<tr><th id="546">546</th><td>                                           <a class="local col3 ref" href="#133Count" title='Count' data-ref="133Count" data-ref-filename="133Count">Count</a>);</td></tr>
<tr><th id="547">547</th><td>  }</td></tr>
<tr><th id="548">548</th><td>}</td></tr>
<tr><th id="549">549</th><td></td></tr>
<tr><th id="550">550</th><td><a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::PseudoProbeCSProfileGenerator" title='llvm::sampleprof::PseudoProbeCSProfileGenerator' data-ref="llvm::sampleprof::PseudoProbeCSProfileGenerator" data-ref-filename="llvm..sampleprof..PseudoProbeCSProfileGenerator">PseudoProbeCSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc1024973" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::getFunctionProfileForLeafProbe' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc1024973" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc1024973">getFunctionProfileForLeafProbe</dfn>(</td></tr>
<tr><th id="551">551</th><td>    <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl" data-ref-filename="llvm..SmallVectorImpl">SmallVectorImpl</a>&lt;<span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span>&gt; &amp;<dfn class="local col8 decl" id="138ContextStrStack" title='ContextStrStack' data-type='SmallVectorImpl&lt;std::string&gt; &amp;' data-ref="138ContextStrStack" data-ref-filename="138ContextStrStack">ContextStrStack</dfn>,</td></tr>
<tr><th id="552">552</th><td>    <em>const</em> <a class="type" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbeFuncDesc" title='llvm::sampleprof::PseudoProbeFuncDesc' data-ref="llvm::sampleprof::PseudoProbeFuncDesc" data-ref-filename="llvm..sampleprof..PseudoProbeFuncDesc">PseudoProbeFuncDesc</a> *<dfn class="local col9 decl" id="139LeafFuncDesc" title='LeafFuncDesc' data-type='const llvm::sampleprof::PseudoProbeFuncDesc *' data-ref="139LeafFuncDesc" data-ref-filename="139LeafFuncDesc">LeafFuncDesc</dfn>) {</td></tr>
<tr><th id="553">553</th><td>  <a class="macro" href="../../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(ContextStrStack.size() &amp;&amp; <q>"Profile context must have the leaf frame"</q>);</td></tr>
<tr><th id="554">554</th><td>  <i>// Compress the context string except for the leaf frame</i></td></tr>
<tr><th id="555">555</th><td>  <span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span> <dfn class="local col0 decl" id="140LeafFrame" title='LeafFrame' data-type='std::string' data-ref="140LeafFrame" data-ref-filename="140LeafFrame">LeafFrame</dfn> = <span class='ref fn fake' title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE" data-ref-filename="_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE"></span><a class="local col8 ref" href="#138ContextStrStack" title='ContextStrStack' data-ref="138ContextStrStack" data-ref-filename="138ContextStrStack">ContextStrStack</a>.<a class="ref fn" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon4backEv" title='llvm::SmallVectorTemplateCommon::back' data-ref="_ZN4llvm25SmallVectorTemplateCommon4backEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon4backEv">back</a>();</td></tr>
<tr><th id="556">556</th><td>  <a class="local col8 ref" href="#138ContextStrStack" title='ContextStrStack' data-ref="138ContextStrStack" data-ref-filename="138ContextStrStack">ContextStrStack</a>.<a class="ref fn" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBase8pop_backEv" title='llvm::SmallVectorTemplateBase::pop_back' data-ref="_ZN4llvm23SmallVectorTemplateBase8pop_backEv" data-ref-filename="_ZN4llvm23SmallVectorTemplateBase8pop_backEv">pop_back</a>();</td></tr>
<tr><th id="557">557</th><td>  <a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::CSProfileGenerator" title='llvm::sampleprof::CSProfileGenerator' data-ref="llvm::sampleprof::CSProfileGenerator" data-ref-filename="llvm..sampleprof..CSProfileGenerator">CSProfileGenerator</a>::<a class="member fn" href="ProfileGenerator.h.html#_ZN4llvm10sampleprof18CSProfileGenerator24compressRecursionContextERNS_15SmallVectorImplIT_EEi" title='llvm::sampleprof::CSProfileGenerator::compressRecursionContext' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator24compressRecursionContextERNS_15SmallVectorImplIT_EEi" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator24compressRecursionContextERNS_15SmallVectorImplIT_EEi">compressRecursionContext</a>(<span class='refarg'><a class="local col8 ref" href="#138ContextStrStack" title='ContextStrStack' data-ref="138ContextStrStack" data-ref-filename="138ContextStrStack">ContextStrStack</a></span>);</td></tr>
<tr><th id="558">558</th><td></td></tr>
<tr><th id="559">559</th><td>  <span class="namespace">std::</span><span class='typedef' title='std::ostringstream' data-type='basic_ostringstream&lt;char&gt;' data-ref="std::ostringstream" data-ref-filename="std..ostringstream">ostringstream</span> <span class='ref fn fake' title='std::__cxx11::basic_ostringstream::basic_ostringstream&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1119basic_ostringstreamC1Ev" data-ref-filename="_ZNSt7__cxx1119basic_ostringstreamC1Ev"></span><dfn class="local col1 decl" id="141OContextStr" title='OContextStr' data-type='std::ostringstream' data-ref="141OContextStr" data-ref-filename="141OContextStr">OContextStr</dfn>;</td></tr>
<tr><th id="560">560</th><td>  <b>for</b> (<a class="typedef" href="../../../../include/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col2 decl" id="142I" title='I' data-type='uint32_t' data-ref="142I" data-ref-filename="142I">I</dfn> = <var>0</var>; <a class="local col2 ref" href="#142I" title='I' data-ref="142I" data-ref-filename="142I">I</a> &lt; <a class="local col8 ref" href="#138ContextStrStack" title='ContextStrStack' data-ref="138ContextStrStack" data-ref-filename="138ContextStrStack">ContextStrStack</a>.<a class="ref fn" href="../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv" data-ref-filename="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>(); <a class="local col2 ref" href="#142I" title='I' data-ref="142I" data-ref-filename="142I">I</a>++) {</td></tr>
<tr><th id="561">561</th><td>    <b>if</b> (<a class="local col1 ref" href="#141OContextStr" title='OContextStr' data-ref="141OContextStr" data-ref-filename="141OContextStr">OContextStr</a>.<span class='ref fn' title='std::__cxx11::basic_ostringstream::str' data-ref="_ZNKSt7__cxx1119basic_ostringstream3strEv" data-ref-filename="_ZNKSt7__cxx1119basic_ostringstream3strEv">str</span>().<span class='ref fn' title='std::__cxx11::basic_string::size' data-ref="_ZNKSt7__cxx1112basic_string4sizeEv" data-ref-filename="_ZNKSt7__cxx1112basic_string4sizeEv">size</span>())</td></tr>
<tr><th id="562">562</th><td>      <a class="local col1 ref" href="#141OContextStr" title='OContextStr' data-ref="141OContextStr" data-ref-filename="141OContextStr">OContextStr</a> <span class='ref fn' title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</span> <q>" @ "</q>;</td></tr>
<tr><th id="563">563</th><td>    <a class="local col1 ref" href="#141OContextStr" title='OContextStr' data-ref="141OContextStr" data-ref-filename="141OContextStr">OContextStr</a> <span class='ref fn' title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE" data-ref-filename="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE">&lt;&lt;</span> <a class="local col8 ref" href="#138ContextStrStack" title='ContextStrStack' data-ref="138ContextStrStack" data-ref-filename="138ContextStrStack">ContextStrStack</a><a class="ref fn" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col2 ref" href="#142I" title='I' data-ref="142I" data-ref-filename="142I">I</a>]</a>;</td></tr>
<tr><th id="564">564</th><td>  }</td></tr>
<tr><th id="565">565</th><td>  <i>// For leaf inlined context with the top frame, we should strip off the top</i></td></tr>
<tr><th id="566">566</th><td><i>  // frame's probe id, like:</i></td></tr>
<tr><th id="567">567</th><td><i>  // Inlined stack: [foo:1, bar:2], the ContextId will be "foo:1 @ bar"</i></td></tr>
<tr><th id="568">568</th><td>  <b>if</b> (<a class="local col1 ref" href="#141OContextStr" title='OContextStr' data-ref="141OContextStr" data-ref-filename="141OContextStr">OContextStr</a>.<span class='ref fn' title='std::__cxx11::basic_ostringstream::str' data-ref="_ZNKSt7__cxx1119basic_ostringstream3strEv" data-ref-filename="_ZNKSt7__cxx1119basic_ostringstream3strEv">str</span>().<span class='ref fn' title='std::__cxx11::basic_string::size' data-ref="_ZNKSt7__cxx1112basic_string4sizeEv" data-ref-filename="_ZNKSt7__cxx1112basic_string4sizeEv">size</span>())</td></tr>
<tr><th id="569">569</th><td>    <a class="local col1 ref" href="#141OContextStr" title='OContextStr' data-ref="141OContextStr" data-ref-filename="141OContextStr">OContextStr</a> <span class='ref fn' title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</span> <q>" @ "</q>;</td></tr>
<tr><th id="570">570</th><td>  <a class="local col1 ref" href="#141OContextStr" title='OContextStr' data-ref="141OContextStr" data-ref-filename="141OContextStr">OContextStr</a> <span class='ref fn' title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE" data-ref-filename="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE">&lt;&lt;</span> <a class="type" href="../../include/llvm/ADT/StringRef.h.html#llvm::StringRef" title='llvm::StringRef' data-ref="llvm::StringRef" data-ref-filename="llvm..StringRef">StringRef</a><a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">(</a><a class="local col0 ref" href="#140LeafFrame" title='LeafFrame' data-ref="140LeafFrame" data-ref-filename="140LeafFrame">LeafFrame</a>).<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef5splitES0_" title='llvm::StringRef::split' data-ref="_ZNK4llvm9StringRef5splitES0_" data-ref-filename="_ZNK4llvm9StringRef5splitES0_">split</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></a><q>":"</q>).<span class='ref field' title='std::pair&lt;llvm::StringRef, llvm::StringRef&gt;::first' data-ref="std::pair::first" data-ref-filename="std..pair..first">first</span>.<a class="ref fn" href="../../include/llvm/ADT/StringRef.h.html#_ZNK4llvm9StringRef3strB5cxx11Ev" title='llvm::StringRef::str' data-ref="_ZNK4llvm9StringRef3strB5cxx11Ev" data-ref-filename="_ZNK4llvm9StringRef3strB5cxx11Ev">str</a>();</td></tr>
<tr><th id="571">571</th><td></td></tr>
<tr><th id="572">572</th><td>  <a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<dfn class="local col3 decl" id="143FunctionProile" title='FunctionProile' data-type='llvm::sampleprof::FunctionSamples &amp;' data-ref="143FunctionProile" data-ref-filename="143FunctionProile">FunctionProile</dfn> =</td></tr>
<tr><th id="573">573</th><td>      <a class="member fn" href="#_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" title='llvm::sampleprof::CSProfileGenerator::getFunctionProfileForContext' data-ref="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE" data-ref-filename="_ZN4llvm10sampleprof18CSProfileGenerator28getFunctionProfileForContextENS_9StringRefE">getFunctionProfileForContext</a>(<a class="ref fn fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"></a><a class="local col1 ref" href="#141OContextStr" title='OContextStr' data-ref="141OContextStr" data-ref-filename="141OContextStr">OContextStr</a>.<span class='ref fn' title='std::__cxx11::basic_ostringstream::str' data-ref="_ZNKSt7__cxx1119basic_ostringstream3strEv" data-ref-filename="_ZNKSt7__cxx1119basic_ostringstream3strEv">str</span>());</td></tr>
<tr><th id="574">574</th><td>  <a class="local col3 ref" href="#143FunctionProile" title='FunctionProile' data-ref="143FunctionProile" data-ref-filename="143FunctionProile">FunctionProile</a>.<a class="ref fn" href="../../include/llvm/ProfileData/SampleProf.h.html#_ZN4llvm10sampleprof15FunctionSamples15setFunctionHashEm" title='llvm::sampleprof::FunctionSamples::setFunctionHash' data-ref="_ZN4llvm10sampleprof15FunctionSamples15setFunctionHashEm" data-ref-filename="_ZN4llvm10sampleprof15FunctionSamples15setFunctionHashEm">setFunctionHash</a>(<a class="local col9 ref" href="#139LeafFuncDesc" title='LeafFuncDesc' data-ref="139LeafFuncDesc" data-ref-filename="139LeafFuncDesc">LeafFuncDesc</a>-&gt;<a class="ref field" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbeFuncDesc::FuncHash" title='llvm::sampleprof::PseudoProbeFuncDesc::FuncHash' data-ref="llvm::sampleprof::PseudoProbeFuncDesc::FuncHash" data-ref-filename="llvm..sampleprof..PseudoProbeFuncDesc..FuncHash">FuncHash</a>);</td></tr>
<tr><th id="575">575</th><td>  <b>return</b> <a class="local col3 ref" href="#143FunctionProile" title='FunctionProile' data-ref="143FunctionProile" data-ref-filename="143FunctionProile">FunctionProile</a>;</td></tr>
<tr><th id="576">576</th><td>}</td></tr>
<tr><th id="577">577</th><td></td></tr>
<tr><th id="578">578</th><td><a class="type" href="../../include/llvm/ProfileData/SampleProf.h.html#llvm::sampleprof::FunctionSamples" title='llvm::sampleprof::FunctionSamples' data-ref="llvm::sampleprof::FunctionSamples" data-ref-filename="llvm..sampleprof..FunctionSamples">FunctionSamples</a> &amp;<a class="type" href="ProfileGenerator.h.html#llvm::sampleprof::PseudoProbeCSProfileGenerator" title='llvm::sampleprof::PseudoProbeCSProfileGenerator' data-ref="llvm::sampleprof::PseudoProbeCSProfileGenerator" data-ref-filename="llvm..sampleprof..PseudoProbeCSProfileGenerator">PseudoProbeCSProfileGenerator</a>::<dfn class="decl def fn" id="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc800470" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::getFunctionProfileForLeafProbe' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc800470" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc800470">getFunctionProfileForLeafProbe</dfn>(</td></tr>
<tr><th id="579">579</th><td>    <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl" data-ref-filename="llvm..SmallVectorImpl">SmallVectorImpl</a>&lt;<span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span>&gt; &amp;<dfn class="local col4 decl" id="144ContextStrStack" title='ContextStrStack' data-type='SmallVectorImpl&lt;std::string&gt; &amp;' data-ref="144ContextStrStack" data-ref-filename="144ContextStrStack">ContextStrStack</dfn>, <em>const</em> <a class="type" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbe" title='llvm::sampleprof::PseudoProbe' data-ref="llvm::sampleprof::PseudoProbe" data-ref-filename="llvm..sampleprof..PseudoProbe">PseudoProbe</a> *<dfn class="local col5 decl" id="145LeafProbe" title='LeafProbe' data-type='const llvm::sampleprof::PseudoProbe *' data-ref="145LeafProbe" data-ref-filename="145LeafProbe">LeafProbe</dfn>,</td></tr>
<tr><th id="580">580</th><td>    <a class="type" href="ProfiledBinary.h.html#llvm::sampleprof::ProfiledBinary" title='llvm::sampleprof::ProfiledBinary' data-ref="llvm::sampleprof::ProfiledBinary" data-ref-filename="llvm..sampleprof..ProfiledBinary">ProfiledBinary</a> *<dfn class="local col6 decl" id="146Binary" title='Binary' data-type='llvm::sampleprof::ProfiledBinary *' data-ref="146Binary" data-ref-filename="146Binary">Binary</dfn>) {</td></tr>
<tr><th id="581">581</th><td>  <i>// Explicitly copy the context for appending the leaf context</i></td></tr>
<tr><th id="582">582</th><td>  <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector" data-ref-filename="llvm..SmallVector">SmallVector</a>&lt;<span class="namespace">std::</span><span class='typedef' title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</span>, <var>16</var>&gt; <dfn class="local col7 decl" id="147ContextStrStackCopy" title='ContextStrStackCopy' data-type='SmallVector&lt;std::string, 16&gt;' data-ref="147ContextStrStackCopy" data-ref-filename="147ContextStrStackCopy">ContextStrStackCopy</dfn><a class="ref fn" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1ETL0__S1_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1ETL0__S1_" data-ref-filename="_ZN4llvm11SmallVectorC1ETL0__S1_">(</a><a class="local col4 ref" href="#144ContextStrStack" title='ContextStrStack' data-ref="144ContextStrStack" data-ref-filename="144ContextStrStack">ContextStrStack</a>.<a class="ref fn" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon5beginEv" title='llvm::SmallVectorTemplateCommon::begin' data-ref="_ZN4llvm25SmallVectorTemplateCommon5beginEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon5beginEv">begin</a>(),</td></tr>
<tr><th id="583">583</th><td>                                                   <a class="local col4 ref" href="#144ContextStrStack" title='ContextStrStack' data-ref="144ContextStrStack" data-ref-filename="144ContextStrStack">ContextStrStack</a>.<a class="ref fn" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon3endEv" title='llvm::SmallVectorTemplateCommon::end' data-ref="_ZN4llvm25SmallVectorTemplateCommon3endEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon3endEv">end</a>());</td></tr>
<tr><th id="584">584</th><td>  <a class="local col6 ref" href="#146Binary" title='Binary' data-ref="146Binary" data-ref-filename="146Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZNK4llvm10sampleprof14ProfiledBinary24getInlineContextForProbeEPKNS0_11PseudoProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEEb" title='llvm::sampleprof::ProfiledBinary::getInlineContextForProbe' data-ref="_ZNK4llvm10sampleprof14ProfiledBinary24getInlineContextForProbeEPKNS0_11PseudoProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEEb" data-ref-filename="_ZNK4llvm10sampleprof14ProfiledBinary24getInlineContextForProbeEPKNS0_11PseudoProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEEb">getInlineContextForProbe</a>(<a class="local col5 ref" href="#145LeafProbe" title='LeafProbe' data-ref="145LeafProbe" data-ref-filename="145LeafProbe">LeafProbe</a>, <span class='refarg'><a class="local col7 ref" href="#147ContextStrStackCopy" title='ContextStrStackCopy' data-ref="147ContextStrStackCopy" data-ref-filename="147ContextStrStackCopy">ContextStrStackCopy</a></span>);</td></tr>
<tr><th id="585">585</th><td>  <i>// Note that the context from probe doesn't include leaf frame,</i></td></tr>
<tr><th id="586">586</th><td><i>  // hence we need to retrieve and append the leaf frame.</i></td></tr>
<tr><th id="587">587</th><td>  <em>const</em> <em>auto</em> *<dfn class="local col8 decl" id="148FuncDesc" title='FuncDesc' data-type='const llvm::sampleprof::PseudoProbeFuncDesc *' data-ref="148FuncDesc" data-ref-filename="148FuncDesc">FuncDesc</dfn> = <a class="local col6 ref" href="#146Binary" title='Binary' data-ref="146Binary" data-ref-filename="146Binary">Binary</a>-&gt;<a class="ref fn" href="ProfiledBinary.h.html#_ZN4llvm10sampleprof14ProfiledBinary18getFuncDescForGUIDEm" title='llvm::sampleprof::ProfiledBinary::getFuncDescForGUID' data-ref="_ZN4llvm10sampleprof14ProfiledBinary18getFuncDescForGUIDEm" data-ref-filename="_ZN4llvm10sampleprof14ProfiledBinary18getFuncDescForGUIDEm">getFuncDescForGUID</a>(<a class="local col5 ref" href="#145LeafProbe" title='LeafProbe' data-ref="145LeafProbe" data-ref-filename="145LeafProbe">LeafProbe</a>-&gt;<a class="ref field" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbe::GUID" title='llvm::sampleprof::PseudoProbe::GUID' data-ref="llvm::sampleprof::PseudoProbe::GUID" data-ref-filename="llvm..sampleprof..PseudoProbe..GUID">GUID</a>);</td></tr>
<tr><th id="588">588</th><td>  <a class="local col7 ref" href="#147ContextStrStackCopy" title='ContextStrStackCopy' data-ref="147ContextStrStackCopy" data-ref-filename="147ContextStrStackCopy">ContextStrStackCopy</a>.<a class="ref fn" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl12emplace_backEDpOTL0__" title='llvm::SmallVectorImpl::emplace_back' data-ref="_ZN4llvm15SmallVectorImpl12emplace_backEDpOTL0__" data-ref-filename="_ZN4llvm15SmallVectorImpl12emplace_backEDpOTL0__">emplace_back</a>(<a class="local col8 ref" href="#148FuncDesc" title='FuncDesc' data-ref="148FuncDesc" data-ref-filename="148FuncDesc">FuncDesc</a>-&gt;<a class="ref field" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbeFuncDesc::FuncName" title='llvm::sampleprof::PseudoProbeFuncDesc::FuncName' data-ref="llvm::sampleprof::PseudoProbeFuncDesc::FuncName" data-ref-filename="llvm..sampleprof..PseudoProbeFuncDesc..FuncName">FuncName</a> <span class='ref fn' title='std::operator+' data-ref="_ZStplRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZStplRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_">+</span> <q>":"</q> <span class='ref fn' title='std::operator+' data-ref="_ZStplONSt7__cxx1112basic_stringIT_T0_T1_EES5_" data-ref-filename="_ZStplONSt7__cxx1112basic_stringIT_T0_T1_EES5_">+</span></td></tr>
<tr><th id="589">589</th><td>                                   <a class="type" href="../../include/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine" data-ref-filename="llvm..Twine">Twine</a><a class="ref fn" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1Ej" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1Ej" data-ref-filename="_ZN4llvm5TwineC1Ej">(</a><a class="local col5 ref" href="#145LeafProbe" title='LeafProbe' data-ref="145LeafProbe" data-ref-filename="145LeafProbe">LeafProbe</a>-&gt;<a class="ref field" href="PseudoProbe.h.html#llvm::sampleprof::PseudoProbe::Index" title='llvm::sampleprof::PseudoProbe::Index' data-ref="llvm::sampleprof::PseudoProbe::Index" data-ref-filename="llvm..sampleprof..PseudoProbe..Index">Index</a>).<a class="ref fn" href="../../include/llvm/ADT/Twine.h.html#_ZNK4llvm5Twine3strB5cxx11Ev" title='llvm::Twine::str' data-ref="_ZNK4llvm5Twine3strB5cxx11Ev" data-ref-filename="_ZNK4llvm5Twine3strB5cxx11Ev">str</a>());</td></tr>
<tr><th id="590">590</th><td>  <b>return</b> <a class="member fn" href="#_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc1024973" title='llvm::sampleprof::PseudoProbeCSProfileGenerator::getFunctionProfileForLeafProbe' data-ref="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc1024973" data-ref-filename="_ZN4llvm10sampleprof29PseudoProbeCSProfileGenerator30getFunctionProfileForLeafProbeERNS_15SmallVectorImplINSt7__cxx1112basic_stringIcSt11char_traitsIc1024973">getFunctionProfileForLeafProbe</a>(<span class='refarg'><a class="local col7 ref" href="#147ContextStrStackCopy" title='ContextStrStackCopy' data-ref="147ContextStrStackCopy" data-ref-filename="147ContextStrStackCopy">ContextStrStackCopy</a></span>, <a class="local col8 ref" href="#148FuncDesc" title='FuncDesc' data-ref="148FuncDesc" data-ref-filename="148FuncDesc">FuncDesc</a>);</td></tr>
<tr><th id="591">591</th><td>}</td></tr>
<tr><th id="592">592</th><td></td></tr>
<tr><th id="593">593</th><td>} <i>// end namespace sampleprof</i></td></tr>
<tr><th id="594">594</th><td>} <i>// end namespace llvm</i></td></tr>
<tr><th id="595">595</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-01</em> from project llvm revision <em>12</em>